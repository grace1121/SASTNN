,id,code,label
165,165,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.resources Import java.io.File Import org.apache.ambari.server.configuration.Configuration Import org.apache.commons.logging.Log Import org.apache.commons.logging.LogFactory Import com.google.inject.Inject Import com.google.inject.Singleton ClassDeclaration Modifier public Annotation Singleton /**
 * Resource manager.
 */ ResourceManager FieldDeclaration Modifier private static ReferenceType Log VariableDeclarator LOG MethodInvocation LogFactory ClassReference ReferenceType ResourceManager getLog FieldDeclaration Annotation Inject ReferenceType Configuration VariableDeclarator configs MethodDeclaration /**
  * Returns resource file.
  * @param resourcePath relational path to file
  * @return resource file
  */ Modifier public ReferenceType File getResource FormalParameter ReferenceType String resourcePath LocalVariableDeclaration ReferenceType String VariableDeclarator resDir MethodInvocation configs MethodInvocation MemberReference Configuration RESOURCES_DIR_KEY get getConfigsMap LocalVariableDeclaration ReferenceType String VariableDeclarator resourcePathIndep MethodInvocation resourcePath Literal ""/"" MemberReference File separator replaceAll LocalVariableDeclaration ReferenceType File VariableDeclarator resourceFile ClassCreator ReferenceType File BinaryOperation + BinaryOperation + MemberReference resDir MemberReference File separator MemberReference resourcePathIndep IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Resource requested from ResourceManager"" Literal "", resourceDir="" MemberReference resDir Literal "", resourcePath="" MemberReference resourcePathIndep Literal "", fileExists="" MethodInvocation resourceFile exists debug End ReturnStatement MemberReference resourceFile",1
258,258,,1
239,239,,0
41,41,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.entities Import javax.persistence.Column Import javax.persistence.Entity Import javax.persistence.Id Import javax.persistence.IdClass Import javax.persistence.JoinColumn Import javax.persistence.JoinColumns Import javax.persistence.ManyToOne Import javax.persistence.Table ClassDeclaration Modifier public Annotation IdClass ClassReference ReferenceType ComponentConfigMappingEntityPK Annotation Entity Annotation Table ElementValuePair name Literal ""componentconfigmapping"" ElementValuePair schema Literal ""ambari"" ElementValuePair catalog Literal """" ComponentConfigMappingEntity FieldDeclaration Modifier private ReferenceType Long VariableDeclarator clusterId FieldDeclaration Modifier private ReferenceType String VariableDeclarator serviceName FieldDeclaration Modifier private ReferenceType String VariableDeclarator componentName FieldDeclaration Modifier private ReferenceType String VariableDeclarator configType FieldDeclaration Modifier private ReferenceType String VariableDeclarator configTag FieldDeclaration Modifier private ReferenceType Long VariableDeclarator timestamp FieldDeclaration Modifier private ReferenceType ServiceComponentDesiredStateEntity VariableDeclarator componentEntity FieldDeclaration Modifier private ReferenceType ClusterConfigEntity VariableDeclarator clusterConfigEntity MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""cluster_id"" ElementValuePair insertable Literal false ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Id ReferenceType Long getClusterId ReturnStatement MemberReference clusterId MethodDeclaration Modifier public setClusterId FormalParameter ReferenceType Long id StatementExpression Assignment MemberReference clusterId MemberReference id = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""service_name"" ElementValuePair insertable Literal false ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Id ReferenceType String getServiceName ReturnStatement MemberReference serviceName MethodDeclaration Modifier public setServiceName FormalParameter ReferenceType String name StatementExpression Assignment MemberReference serviceName MemberReference name = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""component_name"" ElementValuePair insertable Literal false ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Id ReferenceType String getComponentName ReturnStatement MemberReference componentName MethodDeclaration Modifier public setComponentName FormalParameter ReferenceType String name StatementExpression Assignment MemberReference componentName MemberReference name = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""config_type"" ElementValuePair insertable Literal true ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Id ReferenceType String getConfigType ReturnStatement MemberReference configType MethodDeclaration Modifier public setConfigType FormalParameter ReferenceType String type StatementExpression Assignment MemberReference configType MemberReference type = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""config_tag"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ReferenceType String getVersionTag ReturnStatement MemberReference configTag MethodDeclaration Modifier public setVersionTag FormalParameter ReferenceType String tag StatementExpression Assignment MemberReference configTag MemberReference tag = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""timestamp"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ReferenceType Long getTimestamp ReturnStatement MemberReference timestamp MethodDeclaration Modifier public setTimestamp FormalParameter ReferenceType Long stamp StatementExpression Assignment MemberReference timestamp MemberReference stamp = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType ComponentConfigMappingEntity VariableDeclarator that Cast ReferenceType ComponentConfigMappingEntity MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation ! clusterId MemberReference that clusterId equals BinaryOperation != MemberReference that clusterId Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation ! serviceName MemberReference that serviceName equals BinaryOperation != MemberReference that serviceName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation ! componentName MemberReference that componentName equals BinaryOperation != MemberReference that componentName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference configType Literal null MethodInvocation ! configType MemberReference that configType equals BinaryOperation != MemberReference that configType Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation clusterId intValue Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation serviceName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation componentName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference configType Literal null MethodInvocation configType hashCode Literal 0 = ReturnStatement MemberReference result MethodDeclaration Modifier public Annotation ManyToOne Annotation JoinColumns ElementArrayValue Annotation JoinColumn ElementValuePair name Literal ""cluster_id"" ElementValuePair referencedColumnName Literal ""cluster_id"" ElementValuePair nullable Literal false Annotation JoinColumn ElementValuePair name Literal ""service_name"" ElementValuePair referencedColumnName Literal ""service_name"" ElementValuePair nullable Literal false Annotation JoinColumn ElementValuePair name Literal ""component_name"" ElementValuePair referencedColumnName Literal ""component_name"" ElementValuePair nullable Literal false ReferenceType ServiceComponentDesiredStateEntity getServiceComponentDesiredStateEntity ReturnStatement MemberReference componentEntity MethodDeclaration Modifier public setServiceComponentDesiredStateEntity FormalParameter ReferenceType ServiceComponentDesiredStateEntity entity StatementExpression Assignment MemberReference componentEntity MemberReference entity = MethodDeclaration Modifier public Annotation ManyToOne Annotation JoinColumns ElementArrayValue Annotation JoinColumn ElementValuePair name Literal ""cluster_id"" ElementValuePair referencedColumnName Literal ""cluster_id"" ElementValuePair nullable Literal false ElementValuePair insertable Literal false ElementValuePair updatable Literal false Annotation JoinColumn ElementValuePair name Literal ""config_type"" ElementValuePair referencedColumnName Literal ""type_name"" ElementValuePair nullable Literal false ElementValuePair insertable Literal false ElementValuePair updatable Literal false Annotation JoinColumn ElementValuePair name Literal ""config_tag"" ElementValuePair referencedColumnName Literal ""version_tag"" ElementValuePair nullable Literal false ElementValuePair insertable Literal false ElementValuePair updatable Literal false ReferenceType ClusterConfigEntity getClusterConfigEntity ReturnStatement MemberReference clusterConfigEntity MethodDeclaration Modifier public setClusterConfigEntity FormalParameter ReferenceType ClusterConfigEntity clusterConfigEntity StatementExpression Assignment This MemberReference clusterConfigEntity MemberReference clusterConfigEntity =",0
343,343,,0
56,56,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services ClassDeclaration Modifier public /**
 * Result status information.
 */ ResultStatus EnumDeclaration Modifier public static /**
   * STATUS enum. Maps a status to a status code.
   */ STATUS EnumBody EnumConstantDeclaration OK Literal 200 Literal ""OK"" Literal false EnumConstantDeclaration CREATED Literal 201 Literal ""Created"" Literal false EnumConstantDeclaration ACCEPTED Literal 202 Literal ""Accepted"" Literal false EnumConstantDeclaration CONFLICT Literal 409 Literal ""Resource Conflict"" Literal true EnumConstantDeclaration NOT_FOUND Literal 404 Literal ""Not Found"" Literal true EnumConstantDeclaration BAD_REQUEST Literal 400 Literal ""Bad Request"" Literal true EnumConstantDeclaration UNAUTHORIZED Literal 401 Literal ""Unauthorized"" Literal true EnumConstantDeclaration FORBIDDEN Literal 403 Literal ""Forbidden"" Literal true EnumConstantDeclaration SERVER_ERROR Literal 500 Literal ""Internal Server Error"" Literal true FieldDeclaration /**
     * Status code
     */ Modifier private BasicType int VariableDeclarator m_code FieldDeclaration /**
     * Description
     */ Modifier private ReferenceType String VariableDeclarator m_desc FieldDeclaration /**
     * whether this is an error state
     */ Modifier private BasicType boolean VariableDeclarator m_isErrorState ConstructorDeclaration Modifier private /**
     * Constructor.
     *
     * @param code         status code
     * @param description  description
     * @param isErrorState whether this is an error state
     */ STATUS FormalParameter BasicType int code FormalParameter ReferenceType String description FormalParameter BasicType boolean isErrorState StatementExpression Assignment MemberReference m_code MemberReference code = StatementExpression Assignment MemberReference m_desc MemberReference description = StatementExpression Assignment MemberReference m_isErrorState MemberReference isErrorState = MethodDeclaration /**
     * Obtain the status code.
     * This is an http response code.
     *
     * @return  the status code
     */ Modifier public BasicType int getStatus ReturnStatement MemberReference m_code MethodDeclaration /**
     * Obtain a brief description.
     *
     * @return the description
     */ Modifier public ReferenceType String getDescription ReturnStatement MemberReference m_desc MethodDeclaration /**
     * Whether this status is an error state
     *
     * @return true if this is an error state; false otherwise
     */ Modifier public BasicType boolean isErrorState ReturnStatement MemberReference m_isErrorState MethodDeclaration Modifier public Annotation Override ReferenceType String toString ReturnStatement MethodInvocation getDescription FieldDeclaration /**
   * Status instance
   */ Modifier private ReferenceType STATUS VariableDeclarator m_status FieldDeclaration /**
   * Result status message
   */ Modifier private ReferenceType String VariableDeclarator m_msg ConstructorDeclaration Modifier public /**
   * Constructor.
   *
   * @param status result status
   * @param msg    result msg.  Usually used in case of an error.
   */ ResultStatus FormalParameter ReferenceType STATUS status FormalParameter ReferenceType String msg StatementExpression Assignment MemberReference m_status MemberReference status = StatementExpression Assignment MemberReference m_msg MemberReference msg = ConstructorDeclaration Modifier public /**
   * Constructor.
   *
   * @param status  result status
   */ ResultStatus FormalParameter ReferenceType STATUS status StatementExpression Assignment MemberReference m_status MemberReference status = ConstructorDeclaration Modifier public /**
   * Constructor.
   *
   * @param status  result status
   * @param e       result exception
   */ ResultStatus FormalParameter ReferenceType STATUS status FormalParameter ReferenceType Exception e StatementExpression Assignment MemberReference m_status MemberReference status = StatementExpression Assignment MemberReference m_msg MethodInvocation e toString = MethodDeclaration /**
   * Obtain the result status.
   * The result status contains a status code and a description of the status.
   *
   * @return  the result status
   */ Modifier public ReferenceType STATUS getStatus ReturnStatement MemberReference m_status MethodDeclaration /**
   * Obtain the status code.
   * This is a shortcut to obtaining the status code from the associated result status.
   *
   * @return the status code
   */ Modifier public BasicType int getStatusCode ReturnStatement MethodInvocation m_status getStatus MethodDeclaration /**
   * Determine whether the status is an error state.
   * This is a shortcut to getting this information from the associated result status.
   *
   * @return true if the status is a result state; false otherwise
   */ Modifier public BasicType boolean isErrorState ReturnStatement MethodInvocation m_status isErrorState MethodDeclaration /**
   * Obtain the result message.
   * This message is usually used when an exception occurred.
   *
   * @return the result message
   */ Modifier public ReferenceType String getMessage ReturnStatement MemberReference m_msg",0
116,116,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.spi Import java.util.Set ClassDeclaration Modifier public /**
 * Thrown to indicate that the requested properties are not supported for the
 * associated resource type.
 */ UnsupportedPropertyException FieldDeclaration /**
   * The resource type.
   */ Modifier private final ReferenceType Resource ReferenceType Type VariableDeclarator type FieldDeclaration /**
   * The unsupported property ids.
   */ Modifier private final ReferenceType Set TypeArgument ReferenceType String VariableDeclarator propertyIds ConstructorDeclaration Modifier public /**
   * Construct an UnsupportedPropertyException.
   *
   * @param type         the resource type
   * @param propertyIds  the unsupported property ids
   */ UnsupportedPropertyException FormalParameter ReferenceType Resource ReferenceType Type type FormalParameter ReferenceType Set TypeArgument ReferenceType String propertyIds StatementExpression SuperConstructorInvocation BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""The properties "" MemberReference propertyIds Literal "" specified in the request or predicate are not supported for the resource type "" MemberReference type Literal ""."" StatementExpression Assignment This MemberReference type MemberReference type = StatementExpression Assignment This MemberReference propertyIds MemberReference propertyIds = MethodDeclaration /**
   * Get the resource type.
   *
   * @return the resource type
   */ Modifier public ReferenceType Resource ReferenceType Type getType ReturnStatement MemberReference type MethodDeclaration /**
   * Get the unsupported property ids.
   *
   * @return the unsupported property ids
   */ Modifier public ReferenceType Set TypeArgument ReferenceType String getPropertyIds ReturnStatement MemberReference propertyIds ReferenceType Exception",1
370,370,,0
231,231,"CompilationUnit PackageDeclaration /**
* Licensed to the Apache Software Foundation (ASF) under one
* or more contributor license agreements.  See the NOTICE file
* distributed with this work for additional information
* regarding copyright ownership.  The ASF licenses this file
* to you under the Apache License, Version 2.0 (the
* ""License""); you may not use this file except in compliance
* with the License.  You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an ""AS IS"" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/ org.apache.ambari.server.state EnumDeclaration Modifier public HostEventType EnumBody EnumConstantDeclaration /**
   * Event to denote when a registration request is received from a Host
   */ HOST_REGISTRATION_REQUEST EnumConstantDeclaration /**
   * Host status check response received.
   */ HOST_STATUS_UPDATES_RECEIVED EnumConstantDeclaration /**
   * A healthy heartbeat event received from the Host.
   */ HOST_HEARTBEAT_HEALTHY EnumConstantDeclaration /**
   * No heartbeat received from the Host within the defined expiry interval.
   */ HOST_HEARTBEAT_LOST EnumConstantDeclaration /**
   * A non-healthy heartbeat event received from the Host.
   */ HOST_HEARTBEAT_UNHEALTHY",0
144,144,"CompilationUnit PackageDeclaration /**
* Licensed to the Apache Software Foundation (ASF) under one
* or more contributor license agreements.  See the NOTICE file
* distributed with this work for additional information
* regarding copyright ownership.  The ASF licenses this file
* to you under the Apache License, Version 2.0 (the
* ""License""); you may not use this file except in compliance
* with the License.  You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an ""AS IS"" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/ org.apache.ambari.server.state.fsm.event InterfaceDeclaration Modifier public /**
 * Interface defining events api.
 *
 */ Event MethodDeclaration ReferenceType TYPE getType MethodDeclaration BasicType long getTimestamp MethodDeclaration ReferenceType String toString TypeParameter TYPE ReferenceType Enum TypeArgument ReferenceType TYPE",1
284,284,,0
71,71,"CompilationUnit PackageDeclaration org.apache.ambari.server.orm.dao Import com.google.inject.Inject Import com.google.inject.Provider Import com.google.inject.persist.Transactional Import org.apache.ambari.server.Role Import org.apache.ambari.server.actionmanager.HostRoleStatus Import org.apache.ambari.server.orm.entities.HostEntity Import org.apache.ambari.server.orm.entities.HostRoleCommandEntity Import org.apache.ambari.server.orm.entities.StageEntity Import org.slf4j.Logger Import org.slf4j.LoggerFactory Import javax.persistence.EntityManager Import javax.persistence.Query Import javax.persistence.TypedQuery Import java.util.Collection Import java.util.List ClassDeclaration Modifier public HostRoleCommandDAO FieldDeclaration Annotation Inject ReferenceType Provider TypeArgument ReferenceType EntityManager VariableDeclarator entityManagerProvider FieldDeclaration Annotation Inject ReferenceType DaoUtils VariableDeclarator daoUtils FieldDeclaration Modifier private static ReferenceType Logger VariableDeclarator LOG MethodInvocation LoggerFactory ClassReference ReferenceType HostRoleCommandDAO getLogger MethodDeclaration Modifier public Annotation Transactional ReferenceType HostRoleCommandEntity findByPK FormalParameter BasicType long taskId ReturnStatement MethodInvocation entityManagerProvider MethodInvocation ClassReference ReferenceType HostRoleCommandEntity MemberReference taskId find get MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType HostRoleCommandEntity findByPKs FormalParameter ReferenceType Collection TypeArgument ReferenceType Long taskIds LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType HostRoleCommandEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + Literal ""SELECT task FROM HostRoleCommandEntity task WHERE task.taskId IN ?1 "" Literal ""ORDER BY task.taskId"" ClassReference ReferenceType HostRoleCommandEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference taskIds selectList MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType HostRoleCommandEntity findByRequestIds FormalParameter ReferenceType Collection TypeArgument ReferenceType Long requestIds LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType HostRoleCommandEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + BinaryOperation + Literal ""SELECT task FROM HostRoleCommandEntity task "" Literal ""WHERE task.requestId IN ?1 "" Literal ""ORDER BY task.taskId"" ClassReference ReferenceType HostRoleCommandEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference requestIds selectList MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType HostRoleCommandEntity findByRequestAndTaskIds FormalParameter ReferenceType Collection TypeArgument ReferenceType Long requestIds FormalParameter ReferenceType Collection TypeArgument ReferenceType Long taskIds LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType HostRoleCommandEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + BinaryOperation + Literal ""SELECT DISTINCT task FROM HostRoleCommandEntity task "" Literal ""WHERE task.requestId IN ?1 OR task.taskId IN ?2 "" Literal ""ORDER BY task.taskId"" ClassReference ReferenceType HostRoleCommandEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference requestIds MemberReference taskIds selectList MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType HostRoleCommandEntity findSortedCommandsByStageAndHost FormalParameter ReferenceType StageEntity stageEntity FormalParameter ReferenceType HostEntity hostEntity LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType HostRoleCommandEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + BinaryOperation + BinaryOperation + Literal ""SELECT hostRoleCommand "" Literal ""FROM HostRoleCommandEntity hostRoleCommand "" Literal ""WHERE hostRoleCommand.stage=?1 AND hostRoleCommand.host=?2 "" Literal ""ORDER BY hostRoleCommand.taskId"" ClassReference ReferenceType HostRoleCommandEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference stageEntity MemberReference hostEntity selectList MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType HostRoleCommandEntity findByHostRole FormalParameter ReferenceType String hostName FormalParameter BasicType long requestId FormalParameter BasicType long stageId FormalParameter ReferenceType Role role LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType HostRoleCommandEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""SELECT command "" Literal ""FROM HostRoleCommandEntity command "" Literal ""WHERE command.hostName=?1 AND command.requestId=?2 "" Literal ""AND command.stageId=?3 AND command.role=?4 "" Literal ""ORDER BY command.taskId"" ClassReference ReferenceType HostRoleCommandEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference hostName MemberReference requestId MemberReference stageId MemberReference role selectList MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType Long getRequests LocalVariableDeclaration ReferenceType String VariableDeclarator queryStr BinaryOperation + Literal ""SELECT DISTINCT command.requestId "" Literal ""FROM HostRoleCommandEntity command ORDER BY command.requestId DESC"" LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType Long VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation MemberReference queryStr ClassReference ReferenceType Long createQuery get StatementExpression MethodInvocation query Literal 20 setMaxResults ReturnStatement MethodInvocation daoUtils MemberReference query selectList MethodDeclaration Modifier public Annotation Transactional BasicType int updateStatusByRequestId FormalParameter BasicType long requestId FormalParameter ReferenceType HostRoleStatus target FormalParameter ReferenceType Collection TypeArgument ReferenceType HostRoleStatus sources LocalVariableDeclaration ReferenceType Query VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + BinaryOperation + Literal ""UPDATE HostRoleCommandEntity command "" Literal ""SET command.status=?1 "" Literal ""WHERE command.requestId=?2 AND command.status IN ?3"" createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference target MemberReference requestId MemberReference sources executeUpdate MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType HostRoleCommandEntity findByRequest FormalParameter BasicType long requestId LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType HostRoleCommandEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + BinaryOperation + Literal ""SELECT command "" Literal ""FROM HostRoleCommandEntity command "" Literal ""WHERE command.requestId=?1 ORDER BY command.taskId"" ClassReference ReferenceType HostRoleCommandEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference requestId selectList MethodDeclaration Modifier public Annotation Transactional create FormalParameter ReferenceType HostRoleCommandEntity stageEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference stageEntity persist get MethodDeclaration Modifier public Annotation Transactional ReferenceType HostRoleCommandEntity merge FormalParameter ReferenceType HostRoleCommandEntity stageEntity LocalVariableDeclaration ReferenceType HostRoleCommandEntity VariableDeclarator entity MethodInvocation entityManagerProvider MethodInvocation MemberReference stageEntity merge get ReturnStatement MemberReference entity MethodDeclaration Modifier public Annotation Transactional remove FormalParameter ReferenceType HostRoleCommandEntity stageEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MethodInvocation MemberReference stageEntity merge remove get MethodDeclaration Modifier public Annotation Transactional removeByPK FormalParameter BasicType int taskId StatementExpression MethodInvocation MethodInvocation MemberReference taskId findByPK remove MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType Long getRequestsByTaskStatus FormalParameter ReferenceType Collection TypeArgument ReferenceType HostRoleStatus statuses FormalParameter BasicType boolean match LocalVariableDeclaration ReferenceType String VariableDeclarator queryStr BinaryOperation + BinaryOperation + Literal ""SELECT DISTINCT command.requestId "" Literal "" FROM HostRoleCommandEntity command WHERE "" Literal "" command.status"" IfStatement MemberReference ! match BlockStatement StatementExpression Assignment MemberReference queryStr Literal "" NOT"" += End StatementExpression Assignment MemberReference queryStr BinaryOperation + Literal "" IN ?1"" Literal "" ORDER BY command.requestId DESC"" += LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType Long VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation MemberReference queryStr ClassReference ReferenceType Long createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference statuses selectList",0
246,246,,0
120,120,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller Import java.util.Map ClassDeclaration Modifier public /**
 * This class encapsulates a configuration update request.
 * The configuration properties are grouped at service level. It is assumed that
 * different components of a service don't overload same property name.
 */ ConfigurationResponse FieldDeclaration Modifier private final ReferenceType String VariableDeclarator clusterName FieldDeclaration Modifier private final ReferenceType String VariableDeclarator type FieldDeclaration Modifier private ReferenceType String VariableDeclarator versionTag FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator configs ConstructorDeclaration Modifier public ConfigurationResponse FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String type FormalParameter ReferenceType String versionTag FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String configs StatementExpression SuperConstructorInvocation StatementExpression Assignment This MemberReference clusterName MemberReference clusterName = StatementExpression Assignment This MemberReference configs MemberReference configs = StatementExpression Assignment This MemberReference type MemberReference type = StatementExpression Assignment This MemberReference versionTag MemberReference versionTag = StatementExpression Assignment This MemberReference configs MemberReference configs = MethodDeclaration /**
   * @return the versionTag
   */ Modifier public ReferenceType String getVersionTag ReturnStatement MemberReference versionTag MethodDeclaration /**
   * @param versionTag the versionTag to set
   */ Modifier public setVersionTag FormalParameter ReferenceType String versionTag StatementExpression Assignment This MemberReference versionTag MemberReference versionTag = MethodDeclaration /**
   * @return the configs
   */ Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getConfigs ReturnStatement MemberReference configs MethodDeclaration /**
   * @param configs the configs to set
   */ Modifier public setConfigs FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String configs StatementExpression Assignment This MemberReference configs MemberReference configs = MethodDeclaration /**
   * @return the type
   */ Modifier public ReferenceType String getType ReturnStatement MemberReference type MethodDeclaration /**
   * @return the clusterName
   */ Modifier public ReferenceType String getClusterName ReturnStatement MemberReference clusterName MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType ConfigurationResponse VariableDeclarator that Cast ReferenceType ConfigurationResponse MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference clusterName Literal null MethodInvocation ! clusterName MemberReference that clusterName equals BinaryOperation != MemberReference that clusterName Literal null BlockStatement ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference type Literal null MethodInvocation ! type MemberReference that type equals BinaryOperation != MemberReference that type Literal null BlockStatement ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference versionTag Literal null MethodInvocation ! versionTag MemberReference that versionTag equals BinaryOperation != MemberReference that versionTag Literal null BlockStatement ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference clusterName Literal null MethodInvocation clusterName hashCode Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 71 MemberReference result TernaryExpression BinaryOperation != MemberReference type Literal null MethodInvocation type hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 71 MemberReference result TernaryExpression BinaryOperation != MemberReference versionTag Literal null MethodInvocation versionTag hashCode Literal 0 = ReturnStatement MemberReference result",0
257,257,,0
95,95,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.jdbc Import java.sql.Connection Import java.sql.SQLException InterfaceDeclaration Modifier public /**
 * Simple JDBC connection factory interface.
 */ ConnectionFactory MethodDeclaration /**
   * Get a connection.
   *
   * @return the connection
   *
   * @throws SQLException thrown if the connection cannot be obtained
   */ Modifier public ReferenceType Connection getConnection SQLException",0
140,140,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.resources Import java.util.Collections Import java.util.Set Import org.apache.ambari.server.controller.spi.Resource ClassDeclaration Modifier public /**
 * Host resource definition.
 */ HostResourceDefinition ConstructorDeclaration Modifier public /**
   * Constructor.
   */ HostResourceDefinition StatementExpression SuperConstructorInvocation MemberReference Resource.Type Host MethodDeclaration Modifier public Annotation Override ReferenceType String getPluralName ReturnStatement Literal ""hosts"" MethodDeclaration Modifier public Annotation Override ReferenceType String getSingularName ReturnStatement Literal ""host"" MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType SubResourceDefinition getSubResourceDefinitions ReturnStatement MethodInvocation Collections ClassCreator ReferenceType SubResourceDefinition MemberReference Resource.Type HostComponent singleton ReferenceType BaseResourceDefinition",1
73,73,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.handlers Import org.apache.ambari.server.api.resources.ResourceInstance Import org.apache.ambari.server.api.services  Import org.apache.ambari.server.controller.spi  Import java.util.Map Import java.util.Set ClassDeclaration Modifier public /**
 * Responsible for update requests.
 */ UpdateHandler MethodDeclaration Modifier protected Annotation Override ReferenceType Result persist FormalParameter ReferenceType ResourceInstance r FormalParameter ReferenceType Set TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object properties LocalVariableDeclaration ReferenceType Result VariableDeclarator result TryStatement LocalVariableDeclaration ReferenceType RequestStatus VariableDeclarator status MethodInvocation MethodInvocation MemberReference r MemberReference properties update getPersistenceManager StatementExpression Assignment MemberReference result MethodInvocation MemberReference status createResult = IfStatement MethodInvocation result isSynchronous BlockStatement StatementExpression MethodInvocation result ClassCreator ReferenceType ResultStatus MemberReference ResultStatus.STATUS OK setResultStatus BlockStatement StatementExpression MethodInvocation result ClassCreator ReferenceType ResultStatus MemberReference ResultStatus.STATUS ACCEPTED setResultStatus End CatchClause CatchClauseParameter UnsupportedPropertyException e StatementExpression Assignment MemberReference result ClassCreator ReferenceType ResultImpl ClassCreator ReferenceType ResultStatus MemberReference ResultStatus.STATUS BAD_REQUEST MemberReference e = CatchClause CatchClauseParameter NoSuchParentResourceException e StatementExpression Assignment MemberReference result ClassCreator ReferenceType ResultImpl ClassCreator ReferenceType ResultStatus MemberReference ResultStatus.STATUS NOT_FOUND MemberReference e = CatchClause CatchClauseParameter NoSuchResourceException e IfStatement MethodInvocation r isCollectionResource BlockStatement StatementExpression Assignment MemberReference result ClassCreator ReferenceType ResultImpl ClassCreator ReferenceType ResultStatus MemberReference ResultStatus.STATUS OK MemberReference e = BlockStatement StatementExpression Assignment MemberReference result ClassCreator ReferenceType ResultImpl ClassCreator ReferenceType ResultStatus MemberReference ResultStatus.STATUS NOT_FOUND MemberReference e = End CatchClause CatchClauseParameter SystemException e StatementExpression Assignment MemberReference result ClassCreator ReferenceType ResultImpl ClassCreator ReferenceType ResultStatus MemberReference ResultStatus.STATUS SERVER_ERROR MemberReference e = ReturnStatement MemberReference result ReferenceType BaseManagementHandler",0
34,34,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state Import org.apache.ambari.server.orm.entities.ClusterServiceEntity InterfaceDeclaration Modifier public ServiceFactory MethodDeclaration ReferenceType Service createNew FormalParameter ReferenceType Cluster cluster FormalParameter ReferenceType String serviceName MethodDeclaration ReferenceType Service createExisting FormalParameter ReferenceType Cluster cluster FormalParameter ReferenceType ClusterServiceEntity serviceEntity",0
228,228,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.resources Import org.apache.ambari.server.controller.spi.Resource ClassDeclaration Modifier public /**
 * Resource definition for /hosts resources.
 */ DetachedHostResourceDefinition ConstructorDeclaration Modifier public DetachedHostResourceDefinition StatementExpression SuperConstructorInvocation MemberReference Resource.Type Host MethodDeclaration Modifier public Annotation Override ReferenceType String getPluralName ReturnStatement Literal ""hosts"" MethodDeclaration Modifier public Annotation Override ReferenceType String getSingularName ReturnStatement Literal ""host"" ReferenceType BaseResourceDefinition",0
249,249,,0
349,349,,0
315,315,,0
176,176,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.security EnumDeclaration Modifier public ClientSecurityType EnumBody EnumConstantDeclaration LOCAL Literal ""local"" EnumConstantDeclaration LDAP Literal ""ldap"" FieldDeclaration Modifier private ReferenceType String VariableDeclarator value ConstructorDeclaration ClientSecurityType FormalParameter ReferenceType String value StatementExpression Assignment This MemberReference value MemberReference value = MethodDeclaration /**
   * Constructs enum object from string representation
   * @param value string representation of client security type
   * @return ClientSecurityType (defaults to LOCAL if not recognized)
   */ Modifier public static ReferenceType ClientSecurityType fromString FormalParameter ReferenceType String value ForStatement EnhancedForControl VariableDeclaration ReferenceType ClientSecurityType VariableDeclarator securityType MethodInvocation ClientSecurityType values BlockStatement IfStatement MethodInvocation securityType MethodInvocation MemberReference value equalsIgnoreCase toString BlockStatement ReturnStatement MemberReference securityType End End ReturnStatement MemberReference LOCAL MethodDeclaration Modifier public Annotation Override ReferenceType String toString ReturnStatement MemberReference value",1
38,38,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.actionmanager Import java.util.ArrayList Import java.util.List Import org.apache.ambari.server.agent.ExecutionCommand Import org.apache.ambari.server.utils.StageUtils ClassDeclaration Modifier public /**
 * Encapsulates entire task for a host for a stage or action. This class
 * contains all the information to generate an
 * {@link org.apache.ambari.server.agent.ExecutionCommand} that will be
 * scheduled for a host.
 */ HostAction FieldDeclaration Modifier private final ReferenceType String VariableDeclarator host FieldDeclaration Modifier private ReferenceType List TypeArgument ReferenceType HostRoleCommand VariableDeclarator roles FieldDeclaration Modifier private BasicType long VariableDeclarator startTime Literal - 1 FieldDeclaration Modifier private BasicType long VariableDeclarator lastAttemptTime Literal - 1 FieldDeclaration Modifier private BasicType short VariableDeclarator attemptCount Literal 0 FieldDeclaration /**
   * This object will be serialized and sent to the agent.
   */ Modifier private ReferenceType ExecutionCommand VariableDeclarator commandToHost MethodDeclaration Modifier public ReferenceType String getManifest ReturnStatement Literal null ConstructorDeclaration Modifier public HostAction FormalParameter ReferenceType String host StatementExpression Assignment This MemberReference host MemberReference host = StatementExpression Assignment MemberReference roles ClassCreator ReferenceType ArrayList TypeArgument ReferenceType HostRoleCommand = StatementExpression Assignment MemberReference commandToHost ClassCreator ReferenceType ExecutionCommand = StatementExpression MethodInvocation commandToHost MemberReference host setHostname ConstructorDeclaration Modifier public HostAction FormalParameter ReferenceType HostAction ha StatementExpression Assignment This MemberReference host MemberReference ha host = StatementExpression Assignment This MemberReference roles MemberReference ha roles = StatementExpression Assignment This MemberReference startTime MemberReference ha startTime = StatementExpression Assignment This MemberReference lastAttemptTime MemberReference ha lastAttemptTime = StatementExpression Assignment This MemberReference attemptCount MemberReference ha attemptCount = StatementExpression Assignment This MemberReference commandToHost MemberReference ha commandToHost = MethodDeclaration Modifier public addHostRoleCommand FormalParameter ReferenceType HostRoleCommand cmd StatementExpression MethodInvocation roles MemberReference cmd add MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType HostRoleCommand getRoleCommands ReturnStatement MemberReference roles MethodDeclaration Modifier public BasicType long getStartTime ReturnStatement MemberReference startTime MethodDeclaration Modifier public BasicType long getLastAttemptTime ReturnStatement This MemberReference lastAttemptTime MethodDeclaration Modifier public setLastAttemptTime FormalParameter BasicType long t StatementExpression Assignment This MemberReference lastAttemptTime MemberReference t = MethodDeclaration Modifier public incrementAttemptCount StatementExpression This ++ MemberReference attemptCount MethodDeclaration Modifier public BasicType short getAttemptCount ReturnStatement This MemberReference attemptCount MethodDeclaration Modifier public ReferenceType ExecutionCommand getCommandToHost ReturnStatement This MemberReference commandToHost MethodDeclaration Modifier public synchronized setCommandId FormalParameter BasicType long requestId FormalParameter BasicType long stageId StatementExpression MethodInvocation commandToHost MethodInvocation StageUtils MemberReference requestId MemberReference stageId getActionId setCommandId MethodDeclaration Modifier public setStartTime FormalParameter BasicType long startTime StatementExpression Assignment This MemberReference startTime MemberReference startTime =",0
172,172,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.internal Import org.apache.ambari.server.controller.predicate.AlwaysPredicate Import org.apache.ambari.server.controller.predicate.AndPredicate Import org.apache.ambari.server.controller.predicate.ArrayPredicate Import org.apache.ambari.server.controller.predicate.BasePredicate Import org.apache.ambari.server.controller.predicate.ComparisonPredicate Import org.apache.ambari.server.controller.predicate.EqualsPredicate Import org.apache.ambari.server.controller.predicate.OrPredicate Import org.apache.ambari.server.controller.predicate.PredicateVisitor Import org.apache.ambari.server.controller.predicate.UnaryPredicate Import java.util.Arrays Import java.util.Collections Import java.util.LinkedList Import java.util.List Import java.util.Set ClassDeclaration Modifier public /**
 * A predicate visitor used to simplify by doing the following ...
 *
 * 1) distribute across OR (e.g. A && ( B || C ) becomes ( A && B ) || ( A && C )).
 * This is done because an individual back end request object can not handle OR.  Instead
 * we need to break up the predicate to form multiple requests and take the union of all
 * the responses.
 * 2) convert predicates based on unsupported properties to AlwaysPredicate.
 * Unsupported properties are those not returned by the resource provider.  For these
 * properties we need to wait until the property provider that handles the property has
 * been called.
 * 3) convert predicates based on any operator other than == to AlwaysPredicate.
 * The back end requests can not handle any operator other than equals.  The complete predicate
 * will get applied further down the line if necessary.
 *
 * After visiting a predicate, the visitor should be able to supply a list of predicates that can be
 * used to generate requests to the backend, working around the restrictions above.
 *
 * Note that the results acquired using the generated predicates may be a super set of what is actually
 * desired given the original predicate, but the original predicate will be applied at a suitable time
 * down the line if required.
 */ SimplifyingPredicateVisitor FieldDeclaration Modifier private final ReferenceType Set TypeArgument ReferenceType String VariableDeclarator supportedProperties FieldDeclaration Modifier private ReferenceType BasePredicate VariableDeclarator lastVisited Literal null ConstructorDeclaration Modifier public SimplifyingPredicateVisitor FormalParameter ReferenceType Set TypeArgument ReferenceType String supportedProperties StatementExpression Assignment This MemberReference supportedProperties MemberReference supportedProperties = MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType BasePredicate getSimplifiedPredicates IfStatement BinaryOperation == MemberReference lastVisited Literal null BlockStatement ReturnStatement MethodInvocation Collections emptyList End IfStatement BinaryOperation instanceof MemberReference lastVisited ReferenceType OrPredicate BlockStatement ReturnStatement MethodInvocation Arrays Cast ReferenceType OrPredicate MemberReference lastVisited asList End ReturnStatement MethodInvocation Collections MemberReference lastVisited singletonList MethodDeclaration Modifier public Annotation Override acceptComparisonPredicate FormalParameter ReferenceType ComparisonPredicate predicate IfStatement BinaryOperation && BinaryOperation instanceof MemberReference predicate ReferenceType EqualsPredicate MethodInvocation supportedProperties MethodInvocation predicate getPropertyId contains BlockStatement StatementExpression Assignment MemberReference lastVisited MemberReference predicate = BlockStatement StatementExpression Assignment MemberReference lastVisited MemberReference AlwaysPredicate INSTANCE = End MethodDeclaration Modifier public Annotation Override acceptArrayPredicate FormalParameter ReferenceType ArrayPredicate arrayPredicate LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType BasePredicate VariableDeclarator predicateList ClassCreator ReferenceType LinkedList TypeArgument ReferenceType BasePredicate LocalVariableDeclaration BasicType boolean VariableDeclarator hasOrs Literal false LocalVariableDeclaration ReferenceType BasePredicate VariableDeclarator predicates MethodInvocation arrayPredicate getPredicates IfStatement BinaryOperation > MemberReference predicates length Literal 0 BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType BasePredicate VariableDeclarator predicate MemberReference predicates BlockStatement StatementExpression MethodInvocation predicate This accept StatementExpression MethodInvocation predicateList MemberReference lastVisited add IfStatement BinaryOperation instanceof MemberReference lastVisited ReferenceType OrPredicate BlockStatement StatementExpression Assignment MemberReference hasOrs Literal true = End End End IfStatement BinaryOperation && MemberReference hasOrs BinaryOperation instanceof MemberReference arrayPredicate ReferenceType AndPredicate BlockStatement LocalVariableDeclaration BasicType int VariableDeclarator size MethodInvocation predicateList size LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType BasePredicate VariableDeclarator andPredicateList ClassCreator ReferenceType LinkedList TypeArgument ReferenceType BasePredicate ForStatement ForControl VariableDeclaration BasicType int VariableDeclarator i Literal 0 BinaryOperation < MemberReference i MemberReference size MemberReference ++ i BlockStatement ForStatement ForControl VariableDeclaration BasicType int VariableDeclarator j BinaryOperation + MemberReference i Literal 1 BinaryOperation < MemberReference j MemberReference size MemberReference ++ j BlockStatement StatementExpression MethodInvocation andPredicateList MethodInvocation MethodInvocation predicateList MemberReference i get MethodInvocation predicateList MemberReference j get distribute addAll End End StatementExpression Assignment MemberReference lastVisited MethodInvocation OrPredicate MethodInvocation andPredicateList ArrayCreator ReferenceType BasePredicate MethodInvocation andPredicateList size toArray instance = BlockStatement StatementExpression Assignment MemberReference lastVisited MethodInvocation arrayPredicate MethodInvocation predicateList ArrayCreator ReferenceType BasePredicate MethodInvocation predicateList size toArray create = End MethodDeclaration Modifier public Annotation Override acceptUnaryPredicate FormalParameter ReferenceType UnaryPredicate predicate StatementExpression Assignment MemberReference lastVisited MemberReference predicate = MethodDeclaration Modifier public Annotation Override acceptAlwaysPredicate FormalParameter ReferenceType AlwaysPredicate predicate StatementExpression Assignment MemberReference lastVisited MemberReference predicate = MethodDeclaration Modifier private static ReferenceType List TypeArgument ReferenceType BasePredicate distribute FormalParameter ReferenceType BasePredicate left FormalParameter ReferenceType BasePredicate right IfStatement BinaryOperation instanceof MemberReference left ReferenceType OrPredicate BlockStatement ReturnStatement MethodInvocation Cast ReferenceType OrPredicate MemberReference left MemberReference right distributeOr End IfStatement BinaryOperation instanceof MemberReference right ReferenceType OrPredicate BlockStatement ReturnStatement MethodInvocation Cast ReferenceType OrPredicate MemberReference right MemberReference left distributeOr End ReturnStatement MethodInvocation Collections TernaryExpression MethodInvocation left MemberReference right equals MemberReference left MethodInvocation AndPredicate MemberReference left MemberReference right instance singletonList MethodDeclaration Modifier private static ReferenceType List TypeArgument ReferenceType BasePredicate distributeOr FormalParameter ReferenceType OrPredicate orPredicate FormalParameter ReferenceType BasePredicate other LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType BasePredicate VariableDeclarator andPredicateList ClassCreator ReferenceType LinkedList TypeArgument ReferenceType BasePredicate LocalVariableDeclaration ReferenceType OrPredicate VariableDeclarator otherOr Literal null IfStatement BinaryOperation instanceof MemberReference other ReferenceType OrPredicate BlockStatement StatementExpression Assignment MemberReference otherOr Cast ReferenceType OrPredicate MemberReference other = End ForStatement EnhancedForControl VariableDeclaration ReferenceType BasePredicate VariableDeclarator basePredicate MethodInvocation orPredicate getPredicates BlockStatement IfStatement BinaryOperation != MemberReference otherOr Literal null BlockStatement StatementExpression MethodInvocation andPredicateList MethodInvocation MemberReference otherOr MemberReference basePredicate distributeOr addAll BlockStatement StatementExpression MethodInvocation andPredicateList TernaryExpression MethodInvocation basePredicate MemberReference other equals MemberReference basePredicate MethodInvocation AndPredicate MemberReference basePredicate MemberReference other instance add End End ReturnStatement MemberReference andPredicateList ReferenceType PredicateVisitor",1
283,283,,0
276,276,,1
141,141,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server ClassDeclaration Modifier public Annotation SuppressWarnings Literal ""serial"" ClusterNotFoundException ConstructorDeclaration Modifier public ClusterNotFoundException FormalParameter ReferenceType String clusterName StatementExpression SuperConstructorInvocation BinaryOperation + Literal ""Cluster not found, clusterName="" MemberReference clusterName ReferenceType ObjectNotFoundException",1
82,82,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.svccomphost Import org.apache.ambari.server.state.ServiceComponentHostEvent Import org.apache.ambari.server.state.ServiceComponentHostEventType ClassDeclaration Modifier public ServiceComponentHostInstallEvent ConstructorDeclaration Modifier public ServiceComponentHostInstallEvent FormalParameter ReferenceType String serviceComponentName FormalParameter ReferenceType String hostName FormalParameter BasicType long opTimestamp FormalParameter ReferenceType String stackId StatementExpression SuperConstructorInvocation MemberReference ServiceComponentHostEventType HOST_SVCCOMP_INSTALL MemberReference serviceComponentName MemberReference hostName MemberReference opTimestamp MemberReference stackId ReferenceType ServiceComponentHostEvent",0
333,333,,0
290,290,,0
274,274,,0
277,277,,0
336,336,,0
122,122,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services Import org.apache.ambari.server.api.resources.ResourceInstance Import org.apache.ambari.server.controller.spi.Resource Import javax.ws.rs.GET Import javax.ws.rs.Path Import javax.ws.rs.PathParam Import javax.ws.rs.Produces Import javax.ws.rs.core.Context Import javax.ws.rs.core.HttpHeaders Import javax.ws.rs.core.Response Import javax.ws.rs.core.UriInfo Import java.util.HashMap Import java.util.Map ClassDeclaration Modifier public /**
 * Service responsible for request resource requests.
 */ RequestService FieldDeclaration /**
   * Parent cluster name.
   */ Modifier private ReferenceType String VariableDeclarator m_clusterName ConstructorDeclaration Modifier public /**
   * Constructor.
   *
   * @param clusterName cluster id
   */ RequestService FormalParameter ReferenceType String clusterName StatementExpression Assignment MemberReference m_clusterName MemberReference clusterName = MethodDeclaration /**
   * Handles URL: /clusters/{clusterID}/requests/{requestID}
   * Get a specific request.
   *
   * @param headers    http headers
   * @param ui         uri info
   * @param requestId  request id
   *
   * @return request resource representation
   */ Modifier public Annotation GET Annotation Path Literal ""{requestId}"" Annotation Produces Literal ""text/plain"" ReferenceType Response getRequest FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""requestId"" ReferenceType String requestId ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type GET MethodInvocation MemberReference m_clusterName MemberReference requestId createRequestResource handleRequest MethodDeclaration /**
   * Handles URL: /clusters/{clusterId}/requests
   * Get all requests for a cluster.
   *
   * @param headers http headers
   * @param ui      uri info
   *
   * @return request collection resource representation
   */ Modifier public Annotation GET Annotation Produces Literal ""text/plain"" ReferenceType Response getRequests FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type GET MethodInvocation MemberReference m_clusterName Literal null createRequestResource handleRequest MethodDeclaration /**
   * Gets the tasks sub-resource.
   */ Modifier public Annotation Path Literal ""{requestId}/tasks"" ReferenceType TaskService getTaskHandler FormalParameter Annotation PathParam Literal ""requestId"" ReferenceType String requestId ReturnStatement ClassCreator ReferenceType TaskService MemberReference m_clusterName MemberReference requestId MethodDeclaration /**
   * Create a request resource instance.
   *
   * @param clusterName  cluster name
   * @param requestId    request id
   *
   * @return a request resource instance
   */ ReferenceType ResourceInstance createRequestResource FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String requestId LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String VariableDeclarator mapIds ClassCreator ReferenceType HashMap TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String StatementExpression MethodInvocation mapIds MemberReference Resource.Type Cluster MemberReference clusterName put StatementExpression MethodInvocation mapIds MemberReference Resource.Type Request MemberReference requestId put ReturnStatement MethodInvocation MemberReference Resource.Type Request MemberReference mapIds createResource ReferenceType BaseService",0
121,121,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.svccomphost Import org.apache.ambari.server.state.ServiceComponentHostEvent Import org.apache.ambari.server.state.ServiceComponentHostEventType ClassDeclaration Modifier public ServiceComponentHostOpFailedEvent ConstructorDeclaration Modifier public ServiceComponentHostOpFailedEvent FormalParameter ReferenceType String serviceComponentName FormalParameter ReferenceType String hostName FormalParameter BasicType long opTimestamp StatementExpression SuperConstructorInvocation MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_FAILED MemberReference serviceComponentName MemberReference hostName MemberReference opTimestamp ReferenceType ServiceComponentHostEvent",1
327,327,,0
30,30,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state EnumDeclaration Modifier public ServiceComponentHostEventType EnumBody EnumConstantDeclaration /**
   * Operation in progress
   */ HOST_SVCCOMP_OP_IN_PROGRESS EnumConstantDeclaration /**
   * Operation succeeded
   */ HOST_SVCCOMP_OP_SUCCEEDED EnumConstantDeclaration /**
   * Operation failed.
   */ HOST_SVCCOMP_OP_FAILED EnumConstantDeclaration /**
   * Re-starting a failed operation.
   */ HOST_SVCCOMP_OP_RESTART EnumConstantDeclaration /**
   * Triggering an install.
   */ HOST_SVCCOMP_INSTALL EnumConstantDeclaration /**
   * Triggering a start.
   */ HOST_SVCCOMP_START EnumConstantDeclaration /**
   * Triggering a stop.
   */ HOST_SVCCOMP_STOP EnumConstantDeclaration /**
   * Triggering an uninstall.
   */ HOST_SVCCOMP_UNINSTALL EnumConstantDeclaration /**
   * Triggering a wipe-out ( restore to clean state ).
   */ HOST_SVCCOMP_WIPEOUT",0
365,365,,0
364,364,,0
269,269,,0
244,244,,0
32,32,"CompilationUnit PackageDeclaration org.apache.ambari.server.orm.entities Import javax.persistence.Column Import javax.persistence.Entity Import javax.persistence.Id Import javax.persistence.IdClass Import javax.persistence.JoinColumn Import javax.persistence.JoinColumns Import javax.persistence.ManyToOne Import javax.persistence.Table ClassDeclaration Modifier public Annotation IdClass ClassReference ReferenceType HostComponentDesiredConfigMappingEntityPK Annotation Table ElementValuePair name Literal ""hostcomponentdesiredconfigmapping"" ElementValuePair schema Literal ""ambari"" ElementValuePair catalog Literal """" Annotation Entity HostComponentDesiredConfigMappingEntity FieldDeclaration Modifier private ReferenceType Long VariableDeclarator clusterId FieldDeclaration Modifier private ReferenceType String VariableDeclarator serviceName FieldDeclaration Modifier private ReferenceType String VariableDeclarator componentName FieldDeclaration Modifier private ReferenceType String VariableDeclarator hostName FieldDeclaration Modifier private ReferenceType String VariableDeclarator configType FieldDeclaration Modifier private ReferenceType String VariableDeclarator configTag FieldDeclaration Modifier private ReferenceType Long VariableDeclarator timestamp FieldDeclaration Modifier private ReferenceType HostComponentDesiredStateEntity VariableDeclarator hostComponentEntity FieldDeclaration Modifier private ReferenceType ClusterConfigEntity VariableDeclarator clusterConfigEntity MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""cluster_id"" ElementValuePair insertable Literal false ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Id ReferenceType Long getClusterId ReturnStatement MemberReference clusterId MethodDeclaration Modifier public setClusterId FormalParameter ReferenceType Long id StatementExpression Assignment MemberReference clusterId MemberReference id = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""service_name"" ElementValuePair insertable Literal false ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Id ReferenceType String getServiceName ReturnStatement MemberReference serviceName MethodDeclaration Modifier public setServiceName FormalParameter ReferenceType String name StatementExpression Assignment MemberReference serviceName MemberReference name = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""component_name"" ElementValuePair insertable Literal false ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Id ReferenceType String getComponentName ReturnStatement MemberReference componentName MethodDeclaration Modifier public setComponentName FormalParameter ReferenceType String name StatementExpression Assignment MemberReference componentName MemberReference name = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""host_name"" ElementValuePair insertable Literal false ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Id ReferenceType String getHostName ReturnStatement MemberReference hostName MethodDeclaration Modifier public setHostName FormalParameter ReferenceType String name StatementExpression Assignment MemberReference hostName MemberReference name = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""config_type"" ElementValuePair insertable Literal true ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Id ReferenceType String getConfigType ReturnStatement MemberReference configType MethodDeclaration Modifier public setConfigType FormalParameter ReferenceType String type StatementExpression Assignment MemberReference configType MemberReference type = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""config_tag"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ReferenceType String getVersionTag ReturnStatement MemberReference configTag MethodDeclaration Modifier public setVersionTag FormalParameter ReferenceType String tag StatementExpression Assignment MemberReference configTag MemberReference tag = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""timestamp"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ReferenceType Long getTimestamp ReturnStatement MemberReference timestamp MethodDeclaration Modifier public setTimestamp FormalParameter ReferenceType Long stamp StatementExpression Assignment MemberReference timestamp MemberReference stamp = MethodDeclaration Modifier public Annotation ManyToOne Annotation JoinColumns ElementArrayValue Annotation JoinColumn ElementValuePair name Literal ""cluster_id"" ElementValuePair referencedColumnName Literal ""cluster_id"" ElementValuePair nullable Literal false Annotation JoinColumn ElementValuePair name Literal ""service_name"" ElementValuePair referencedColumnName Literal ""service_name"" ElementValuePair nullable Literal false Annotation JoinColumn ElementValuePair name Literal ""component_name"" ElementValuePair referencedColumnName Literal ""component_name"" ElementValuePair nullable Literal false Annotation JoinColumn ElementValuePair name Literal ""host_name"" ElementValuePair referencedColumnName Literal ""host_name"" ElementValuePair nullable Literal false ReferenceType HostComponentDesiredStateEntity getHostComponentDesiredStateEntity ReturnStatement MemberReference hostComponentEntity MethodDeclaration Modifier public setHostComponentDesiredStateEntity FormalParameter ReferenceType HostComponentDesiredStateEntity entity StatementExpression Assignment MemberReference hostComponentEntity MemberReference entity = MethodDeclaration Modifier public Annotation ManyToOne Annotation JoinColumns ElementArrayValue Annotation JoinColumn ElementValuePair name Literal ""cluster_id"" ElementValuePair referencedColumnName Literal ""cluster_id"" ElementValuePair nullable Literal false ElementValuePair insertable Literal false ElementValuePair updatable Literal false Annotation JoinColumn ElementValuePair name Literal ""config_type"" ElementValuePair referencedColumnName Literal ""type_name"" ElementValuePair nullable Literal false ElementValuePair insertable Literal false ElementValuePair updatable Literal false Annotation JoinColumn ElementValuePair name Literal ""config_tag"" ElementValuePair referencedColumnName Literal ""version_tag"" ElementValuePair nullable Literal false ElementValuePair insertable Literal false ElementValuePair updatable Literal false ReferenceType ClusterConfigEntity getClusterConfigEntity ReturnStatement MemberReference clusterConfigEntity MethodDeclaration Modifier public setClusterConfigEntity FormalParameter ReferenceType ClusterConfigEntity clusterConfigEntity StatementExpression Assignment This MemberReference clusterConfigEntity MemberReference clusterConfigEntity = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType HostComponentDesiredConfigMappingEntity VariableDeclarator that Cast ReferenceType HostComponentDesiredConfigMappingEntity MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation ! clusterId MemberReference that clusterId equals BinaryOperation != MemberReference that clusterId Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation ! serviceName MemberReference that serviceName equals BinaryOperation != MemberReference that serviceName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation ! componentName MemberReference that componentName equals BinaryOperation != MemberReference that componentName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference hostName Literal null MethodInvocation ! hostName MemberReference that hostName equals BinaryOperation != MemberReference that hostName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference configType Literal null MethodInvocation ! configType MemberReference that configType equals BinaryOperation != MemberReference that configType Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation clusterId intValue Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation serviceName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation componentName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference hostName Literal null MethodInvocation hostName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference configType Literal null MethodInvocation configType hashCode Literal 0 = ReturnStatement MemberReference result",0
157,157,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.internal Import org.apache.ambari.server.controller.spi.RequestStatus Import org.apache.ambari.server.controller.spi.Resource Import org.apache.ambari.server.controller.utilities.PropertyHelper Import java.util.Collections Import java.util.Set ClassDeclaration Modifier public /**
 * Default request status implementation.
 */ RequestStatusImpl FieldDeclaration Modifier private final ReferenceType Resource VariableDeclarator requestResource ConstructorDeclaration Modifier public RequestStatusImpl FormalParameter ReferenceType Resource requestResource StatementExpression Assignment This MemberReference requestResource MemberReference requestResource = MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType Resource getAssociatedResources ReturnStatement MethodInvocation Collections emptySet MethodDeclaration Modifier public Annotation Override ReferenceType Resource getRequestResource ReturnStatement MemberReference requestResource MethodDeclaration Modifier public Annotation Override ReferenceType Status getStatus ReturnStatement TernaryExpression BinaryOperation == MemberReference requestResource Literal null MemberReference Status Complete MethodInvocation Status Cast ReferenceType String MethodInvocation requestResource MethodInvocation PropertyHelper Literal ""Requests"" Literal ""status"" getPropertyId getPropertyValue valueOf ReferenceType RequestStatus",0
198,198,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.dao Import java.util.Collection Import java.util.Collections Import java.util.List Import com.google.inject.Inject Import com.google.inject.Provider Import com.google.inject.persist.Transactional Import javax.persistence.EntityManager Import javax.persistence.TypedQuery Import org.apache.ambari.server.orm.entities.ComponentConfigMappingEntity ClassDeclaration Modifier public ComponentConfigMappingDAO FieldDeclaration Annotation Inject ReferenceType Provider TypeArgument ReferenceType EntityManager VariableDeclarator entityManagerProvider FieldDeclaration Annotation Inject ReferenceType DaoUtils VariableDeclarator daoUtils MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType ComponentConfigMappingEntity findByType FormalParameter ReferenceType Collection TypeArgument ReferenceType String configTypes LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType ComponentConfigMappingEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + Literal ""SELECT config FROM ComponentConfigMappingEntity config"" Literal "" WHERE config.configType IN ?1"" ClassReference ReferenceType ComponentConfigMappingEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference configTypes selectList MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType ComponentConfigMappingEntity findByComponentAndType FormalParameter BasicType long clusterId FormalParameter ReferenceType String serviceName FormalParameter ReferenceType String componentName FormalParameter ReferenceType Collection TypeArgument ReferenceType String configTypes IfStatement MethodInvocation configTypes isEmpty BlockStatement ReturnStatement MethodInvocation Collections emptyList End LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType ComponentConfigMappingEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""SELECT config "" Literal ""FROM ComponentConfigMappingEntity config "" Literal ""WHERE "" Literal ""config.clusterId = ?1 "" Literal ""AND config.serviceName = ?2 "" Literal ""AND config.componentName = ?3 "" Literal ""AND config.configType IN ?4"" ClassReference ReferenceType ComponentConfigMappingEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference clusterId MemberReference serviceName MemberReference componentName MemberReference configTypes selectList MethodDeclaration Modifier public Annotation Transactional refresh FormalParameter ReferenceType ComponentConfigMappingEntity componentConfigMappingEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference componentConfigMappingEntity refresh get MethodDeclaration Modifier public Annotation Transactional ReferenceType ComponentConfigMappingEntity merge FormalParameter ReferenceType ComponentConfigMappingEntity componentConfigMappingEntity ReturnStatement MethodInvocation entityManagerProvider MethodInvocation MemberReference componentConfigMappingEntity merge get MethodDeclaration Modifier public Annotation Transactional remove FormalParameter ReferenceType ComponentConfigMappingEntity componentConfigMappingEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MethodInvocation MemberReference componentConfigMappingEntity merge remove get MethodDeclaration Modifier public Annotation Transactional removeByType FormalParameter ReferenceType Collection TypeArgument ReferenceType String configTypes ForStatement EnhancedForControl VariableDeclaration ReferenceType ComponentConfigMappingEntity VariableDeclarator entity MethodInvocation MemberReference configTypes findByType BlockStatement StatementExpression MethodInvocation MemberReference entity remove End",0
383,383,,0
330,330,,0
105,105,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.query Import org.apache.ambari.server.api.services.Result Import org.apache.ambari.server.controller.spi  Import java.util.Map Import java.util.Set InterfaceDeclaration Modifier public /**
 * Responsible for querying the back end for read requests
 */ Query MethodDeclaration /**
   * Add a property to the query.
   * This is the select portion of the query.
   *
   * @param group         the group name that contains the property
   * @param property      the property name
   * @param temporalInfo  temporal information for the property
   */ Modifier public addProperty FormalParameter ReferenceType String group FormalParameter ReferenceType String property FormalParameter ReferenceType TemporalInfo temporalInfo MethodDeclaration /**
   * Add a property to the query.
   * This is the select portion of the query.
   *
   * @param property the property id which contains the group, property name
   *                 and whether the property is temporal
   */ Modifier public addProperty FormalParameter ReferenceType String property MethodDeclaration /**
   * Obtain the properties of the query.
   * These are the properties that make up the select portion of the query for which
   * values are to be retrieved.
   *
   * @return the query properties
   */ Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String getProperties MethodDeclaration /**
   * Execute the query.
   *
   * @return the result of the query.
   *
   * @throws UnsupportedPropertyException if the query or query predicate contains invalid non-existent properties
   * @throws SystemException an internal error occurred
   * @throws NoSuchResourceException the query didn't match any resources
   * @throws NoSuchParentResourceException a specified parent resource doesn't exist
   */ Modifier public ReferenceType Result execute UnsupportedPropertyException SystemException NoSuchResourceException NoSuchParentResourceException MethodDeclaration /**
   * Return the predicate used to identify the associated resource.  This includes the primary key and
   * all parent id's;
   *
   * @return the predicate used to identify the associated resource
   */ Modifier public ReferenceType Predicate getPredicate MethodDeclaration /**
   * Set the user provided predicated on this query.
   * This predicate will be ""AND'd"" with the internal query to produce the final predicate.
   *
   * @param predicate  the user provided predicate
   */ Modifier public setUserPredicate FormalParameter ReferenceType Predicate predicate",0
22,22,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state ClassDeclaration Modifier public /**
 * Agent Version representation
 */ AgentVersion FieldDeclaration Modifier private final ReferenceType String VariableDeclarator version ConstructorDeclaration Modifier public AgentVersion FormalParameter ReferenceType String version StatementExpression Assignment This MemberReference version MemberReference version = MethodDeclaration /**
   * @return the version
   */ Modifier public ReferenceType String getVersion ReturnStatement MemberReference version MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object object IfStatement BinaryOperation instanceof MemberReference object ReferenceType AgentVersion BlockStatement ReturnStatement Literal false End IfStatement BinaryOperation == This MemberReference object BlockStatement ReturnStatement Literal true End LocalVariableDeclaration ReferenceType AgentVersion VariableDeclarator a Cast ReferenceType AgentVersion MemberReference object ReturnStatement MethodInvocation a.version This MemberReference version equals MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference version Literal null MethodInvocation version hashCode Literal 0 ReturnStatement MemberReference result",0
326,326,,0
393,393,,0
224,224,"CompilationUnit PackageDeclaration org.apache.ambari.server.orm.dao Import com.google.inject.Inject Import com.google.inject.Provider Import org.aopalliance.intercept.MethodInterceptor Import org.aopalliance.intercept.MethodInvocation Import org.slf4j.Logger Import org.slf4j.LoggerFactory Import javax.persistence.EntityManager ClassDeclaration Modifier public /**
 * Interceptors clears EntityManager before method call
 */ ClearEntityManagerInterceptor FieldDeclaration Modifier private final static ReferenceType Logger VariableDeclarator log MethodInvocation LoggerFactory ClassReference ReferenceType ClearEntityManagerInterceptor getLogger FieldDeclaration Annotation Inject ReferenceType Provider TypeArgument ReferenceType EntityManager VariableDeclarator entityManagerProvider MethodDeclaration Modifier public Annotation Override ReferenceType Object invoke FormalParameter ReferenceType MethodInvocation methodInvocation Throwable TryStatement ReturnStatement MethodInvocation methodInvocation proceed IfStatement MethodInvocation ! entityManagerProvider MethodInvocation getTransaction MethodInvocation isActive get BlockStatement StatementExpression MethodInvocation log Literal ""Transaction is not active any more - clearing Entity Manager"" debug StatementExpression MethodInvocation entityManagerProvider MethodInvocation clear get End ReferenceType MethodInterceptor",1
331,331,,1
86,86,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services Import org.apache.ambari.server.api.resources.ResourceInstance Import javax.ws.rs.core.HttpHeaders Import javax.ws.rs.core.UriInfo ClassDeclaration Modifier public /**
 * Factory for {@link Request} instances.
 */ RequestFactory MethodDeclaration /**
   * Create a request instance.
   *
   * @param headers      http headers
   * @param uriInfo      uri information
   * @param requestType  http request type
   * @param resource     associated resource instance
   *
   * @return a new Request instance
   */ Modifier public ReferenceType Request createRequest FormalParameter ReferenceType HttpHeaders headers FormalParameter ReferenceType String body FormalParameter ReferenceType UriInfo uriInfo FormalParameter ReferenceType Request ReferenceType Type requestType FormalParameter ReferenceType ResourceInstance resource SwitchStatement MemberReference requestType SwitchStatementCase GET ReturnStatement ClassCreator ReferenceType GetRequest MemberReference headers MemberReference body MemberReference uriInfo MemberReference resource SwitchStatementCase PUT ReturnStatement ClassCreator ReferenceType PutRequest MemberReference headers MemberReference body MemberReference uriInfo MemberReference resource SwitchStatementCase DELETE ReturnStatement ClassCreator ReferenceType DeleteRequest MemberReference headers MemberReference body MemberReference uriInfo MemberReference resource SwitchStatementCase POST ReturnStatement TernaryExpression BinaryOperation || MethodInvocation uriInfo MethodInvocation isEmpty getQueryParameters BinaryOperation == MemberReference body Literal null ClassCreator ReferenceType PostRequest MemberReference headers MemberReference body MemberReference uriInfo MemberReference resource ClassCreator ReferenceType QueryPostRequest MemberReference headers MemberReference body MemberReference uriInfo MemberReference resource SwitchStatementCase ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid request type: "" MemberReference requestType End",0
77,77,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.action ClassDeclaration Modifier public ActionId FieldDeclaration Modifier final BasicType long VariableDeclarator actionId FieldDeclaration Modifier final ReferenceType ActionType VariableDeclarator actionType ConstructorDeclaration Modifier public ActionId FormalParameter BasicType long actionId FormalParameter ReferenceType ActionType actionType StatementExpression SuperConstructorInvocation StatementExpression Assignment This MemberReference actionId MemberReference actionId = StatementExpression Assignment This MemberReference actionType MemberReference actionType = MethodDeclaration Modifier public ReferenceType String toString ReturnStatement BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""[ actionId="" MemberReference actionId Literal "", actionType="" MemberReference actionType Literal ""]""",0
113,113,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.utils Import java.util.List Import javax.xml.bind.annotation.XmlElement ClassDeclaration Modifier public JaxbMapKeyList FieldDeclaration Modifier public Annotation XmlElement ReferenceType String VariableDeclarator key FieldDeclaration Modifier public Annotation XmlElement ReferenceType List TypeArgument ReferenceType String VariableDeclarator value ConstructorDeclaration Modifier private JaxbMapKeyList ConstructorDeclaration Modifier public JaxbMapKeyList FormalParameter ReferenceType String key FormalParameter ReferenceType List TypeArgument ReferenceType String value StatementExpression Assignment This MemberReference key MemberReference key = StatementExpression Assignment This MemberReference value MemberReference value =",0
348,348,,0
240,240,,0
44,44,CompilationUnit PackageDeclaration org.apache.ambari.server.controller ClassDeclaration Modifier public TaskStatusRequest FieldDeclaration Modifier protected ReferenceType Long VariableDeclarator requestId FieldDeclaration Modifier protected ReferenceType Long VariableDeclarator taskId ConstructorDeclaration Modifier public TaskStatusRequest ConstructorDeclaration Modifier public TaskStatusRequest FormalParameter ReferenceType Long requestId FormalParameter ReferenceType Long taskId StatementExpression Assignment This MemberReference requestId MemberReference requestId = StatementExpression Assignment This MemberReference taskId MemberReference taskId = MethodDeclaration Modifier public ReferenceType Long getRequestId ReturnStatement MemberReference requestId MethodDeclaration Modifier public setRequestId FormalParameter ReferenceType Long requestId StatementExpression Assignment This MemberReference requestId MemberReference requestId = MethodDeclaration Modifier public ReferenceType Long getTaskId ReturnStatement MemberReference taskId MethodDeclaration Modifier public setTaskId FormalParameter ReferenceType Long taskId StatementExpression Assignment This MemberReference taskId MemberReference taskId =,0
394,394,,0
92,92,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services InterfaceDeclaration Modifier public /**
 * Processor which processes result objects prior to them being returned to the service.
 * Processing can include adding additional data such as hrefs, or modifying/deleting existing data.
 */ ResultPostProcessor MethodDeclaration /**
   * Process the given result.
   * The passed in process is directly modified.
   *
   * @param result the result to process.
   */ Modifier public process FormalParameter ReferenceType Result result",1
262,262,,1
342,342,,0
6,6,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services Import javax.ws.rs.DELETE Import javax.ws.rs.GET Import javax.ws.rs.POST Import javax.ws.rs.PUT Import javax.ws.rs.Path Import javax.ws.rs.PathParam Import javax.ws.rs.Produces Import javax.ws.rs.core.Context Import javax.ws.rs.core.HttpHeaders Import javax.ws.rs.core.Response Import javax.ws.rs.core.UriInfo Import org.apache.ambari.server.api.resources.ResourceInstance Import org.apache.ambari.server.controller.spi.Resource Import java.util.Collections ClassDeclaration Modifier public Annotation Path Literal ""/users/"" /**
 * Service responsible for user requests.
 */ UserService MethodDeclaration /**
   * Gets all users.
   * Handles: GET /users requests.
   */ Modifier public Annotation GET Annotation Produces Literal ""text/plain"" ReferenceType Response getUsers FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type GET MethodInvocation Literal null createUserResource handleRequest MethodDeclaration /**
   * Gets a single user.
   * Handles: GET /users/{username} requests
   * 
   * @param headers     http headers
   * @param ui          uri info
   * @param userName    the username
   * @return information regarding the created user
   */ Modifier public Annotation GET Annotation Path Literal ""{userName}"" Annotation Produces Literal ""text/plain"" ReferenceType Response getUser FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""userName"" ReferenceType String userName ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type GET MethodInvocation MemberReference userName createUserResource handleRequest MethodDeclaration /**
   * Creates a user.
   * Handles: POST /users/{userName}
   *
   * @param headers     http headers
   * @param ui          uri info
   * @param userName    the username
   * @return information regarding the created user
   */ Modifier public Annotation POST Annotation Path Literal ""{userName}"" Annotation Produces Literal ""text/plain"" ReferenceType Response createUser FormalParameter ReferenceType String body FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""userName"" ReferenceType String userName ReturnStatement MethodInvocation MemberReference headers MemberReference body MemberReference ui MemberReference Request.Type POST MethodInvocation MemberReference userName createUserResource handleRequest MethodDeclaration /**
    * Updates a specific user.
    * Handles: PUT /users/{userName}
    *
    * @param headers     http headers
    * @param ui          uri info
    * @param userName   the username
    * @return information regarding the updated user
    */ Modifier public Annotation PUT Annotation Path Literal ""{userName}"" Annotation Produces Literal ""text/plain"" ReferenceType Response updateUser FormalParameter ReferenceType String body FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""userName"" ReferenceType String userName ReturnStatement MethodInvocation MemberReference headers MemberReference body MemberReference ui MemberReference Request.Type PUT MethodInvocation MemberReference userName createUserResource handleRequest MethodDeclaration /**
    * Deletes a user.
    * Handles:  DELETE /users/{userName}
    */ Modifier public Annotation DELETE Annotation Path Literal ""{userName}"" Annotation Produces Literal ""text/plain"" ReferenceType Response deleteUser FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""userName"" ReferenceType String userName ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type DELETE MethodInvocation MemberReference userName createUserResource handleRequest MethodDeclaration /**
   * Create a user resource instance.
   *
   * @param userName  user name
   *
   * @return a user resource instance
   */ Modifier private ReferenceType ResourceInstance createUserResource FormalParameter ReferenceType String userName ReturnStatement MethodInvocation MemberReference Resource.Type User MethodInvocation Collections MemberReference Resource.Type User MemberReference userName singletonMap createResource ReferenceType BaseService",0
18,18,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.spi Import java.util.Set InterfaceDeclaration Modifier public /**
 * A RequestStatus represents the result of an asynchronous operation on resources. Methods are
 * provided to check the status of the operation and to retrieve the set of resources involved
 * in the operation.
 */ RequestStatus MethodDeclaration /**
   * Get the resources involved in the operation initiated by the request.
   *
   * @return the set of resources
   */ Modifier public ReferenceType Set TypeArgument ReferenceType Resource getAssociatedResources MethodDeclaration /**
   * Get the resource of type request for the asynchronous request.
   *
   * @return the request resource
   */ Modifier public ReferenceType Resource getRequestResource MethodDeclaration /**
   * Get the status of the operation initiated by the request.
   *
   * @return the status
   */ Modifier public ReferenceType Status getStatus EnumDeclaration Modifier public /**
   * Request status.
   */ Status EnumBody EnumConstantDeclaration Accepted EnumConstantDeclaration InProgress EnumConstantDeclaration Complete",1
340,340,,1
297,297,,0
227,227,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.agent Import com.google.inject.Inject Import com.google.inject.Injector Import com.google.inject.Singleton Import org.apache.ambari.server  Import org.apache.ambari.server.actionmanager.ActionManager Import org.apache.ambari.server.api.services.AmbariMetaInfo Import org.apache.ambari.server.configuration.Configuration Import org.apache.ambari.server.metadata.ActionMetadata Import org.apache.ambari.server.state  Import org.apache.ambari.server.state.fsm.InvalidStateTransitionException Import org.apache.ambari.server.state.host.HostHealthyHeartbeatEvent Import org.apache.ambari.server.state.host.HostRegistrationRequestEvent Import org.apache.ambari.server.state.host.HostStatusUpdatesReceivedEvent Import org.apache.ambari.server.state.host.HostUnhealthyHeartbeatEvent Import org.apache.ambari.server.state.svccomphost.ServiceComponentHostOpFailedEvent Import org.apache.ambari.server.state.svccomphost.ServiceComponentHostOpInProgressEvent Import org.apache.ambari.server.state.svccomphost.ServiceComponentHostOpSucceededEvent Import org.apache.ambari.server.utils.StageUtils Import org.apache.commons.logging.Log Import org.apache.commons.logging.LogFactory Import java.util.HashMap Import java.util.List Import java.util.Map Import java.util.Set ClassDeclaration Modifier public Annotation Singleton /**
 * This class handles the heartbeats coming from the agent, passes on the information
 * to other modules and processes the queue to send heartbeat response.
 */ HeartBeatHandler FieldDeclaration Modifier private static ReferenceType Log VariableDeclarator LOG MethodInvocation LogFactory ClassReference ReferenceType HeartBeatHandler getLog FieldDeclaration Modifier private final ReferenceType Clusters VariableDeclarator clusterFsm FieldDeclaration Modifier private final ReferenceType ActionQueue VariableDeclarator actionQueue FieldDeclaration Modifier private final ReferenceType ActionManager VariableDeclarator actionManager FieldDeclaration Modifier private ReferenceType HeartbeatMonitor VariableDeclarator heartbeatMonitor FieldDeclaration Annotation Inject ReferenceType Injector VariableDeclarator injector FieldDeclaration Annotation Inject ReferenceType Configuration VariableDeclarator config FieldDeclaration Annotation Inject ReferenceType AmbariMetaInfo VariableDeclarator ambariMetaInfo FieldDeclaration Annotation Inject ReferenceType ActionMetadata VariableDeclarator actionMetadata FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Long VariableDeclarator hostResponseIds ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Long FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType HeartBeatResponse VariableDeclarator hostResponses ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType HeartBeatResponse ConstructorDeclaration Modifier public Annotation Inject HeartBeatHandler FormalParameter ReferenceType Clusters fsm FormalParameter ReferenceType ActionQueue aq FormalParameter ReferenceType ActionManager am FormalParameter ReferenceType Injector injector StatementExpression Assignment This MemberReference clusterFsm MemberReference fsm = StatementExpression Assignment This MemberReference actionQueue MemberReference aq = StatementExpression Assignment This MemberReference actionManager MemberReference am = StatementExpression Assignment This MemberReference heartbeatMonitor ClassCreator ReferenceType HeartbeatMonitor MemberReference fsm MemberReference aq MemberReference am Literal 60000 = StatementExpression MethodInvocation injector This injectMembers MethodDeclaration Modifier public start StatementExpression MethodInvocation heartbeatMonitor start MethodDeclaration setHeartbeatMonitor FormalParameter ReferenceType HeartbeatMonitor heartbeatMonitor StatementExpression Assignment This MemberReference heartbeatMonitor MemberReference heartbeatMonitor = MethodDeclaration Modifier public ReferenceType HeartBeatResponse handleHeartBeat FormalParameter ReferenceType HeartBeat heartbeat AmbariException LocalVariableDeclaration ReferenceType String VariableDeclarator hostname MethodInvocation heartbeat getHostname LocalVariableDeclaration ReferenceType Long VariableDeclarator currentResponseId MethodInvocation hostResponseIds MemberReference hostname get LocalVariableDeclaration ReferenceType HeartBeatResponse VariableDeclarator response IfStatement BinaryOperation == MemberReference currentResponseId Literal null BlockStatement StatementExpression MethodInvocation LOG Literal ""CurrentResponseId unknown - send register command"" error StatementExpression Assignment MemberReference response ClassCreator ReferenceType HeartBeatResponse = LocalVariableDeclaration ReferenceType RegistrationCommand VariableDeclarator regCmd ClassCreator ReferenceType RegistrationCommand StatementExpression MethodInvocation response Literal 0 setResponseId StatementExpression MethodInvocation response MemberReference regCmd setRegistrationCommand ReturnStatement MemberReference response End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received heartbeat from host"" Literal "", hostname="" MemberReference hostname Literal "", currentResponseId="" MemberReference currentResponseId Literal "", receivedResponseId="" MethodInvocation heartbeat getResponseId debug End IfStatement BinaryOperation == MethodInvocation heartbeat getResponseId BinaryOperation - MemberReference currentResponseId Literal 1 BlockStatement StatementExpression MethodInvocation LOG Literal ""Old responseId received - response was lost - returning cached response"" warn ReturnStatement MethodInvocation hostResponses MemberReference hostname get IfStatement BinaryOperation != MethodInvocation heartbeat getResponseId MemberReference currentResponseId BlockStatement StatementExpression MethodInvocation LOG Literal ""Error in responseId sequence - sending agent restart command"" error StatementExpression Assignment MemberReference response ClassCreator ReferenceType HeartBeatResponse = StatementExpression MethodInvocation response Literal true setRestartAgent StatementExpression MethodInvocation response MemberReference currentResponseId setResponseId ReturnStatement MemberReference response End End StatementExpression Assignment MemberReference response ClassCreator ReferenceType HeartBeatResponse = StatementExpression MethodInvocation response MemberReference ++ currentResponseId setResponseId LocalVariableDeclaration ReferenceType Host VariableDeclarator hostObject MethodInvocation clusterFsm MemberReference hostname getHost IfStatement MethodInvocation hostObject MethodInvocation MemberReference HostState HEARTBEAT_LOST equals getState BlockStatement StatementExpression MethodInvocation LOG Literal ""Host is in HEARTBEAT_LOST state - sending register command"" warn StatementExpression Assignment MemberReference response ClassCreator ReferenceType HeartBeatResponse = LocalVariableDeclaration ReferenceType RegistrationCommand VariableDeclarator regCmd ClassCreator ReferenceType RegistrationCommand StatementExpression MethodInvocation response Literal 0 setResponseId StatementExpression MethodInvocation response MemberReference regCmd setRegistrationCommand ReturnStatement MemberReference response End StatementExpression MethodInvocation hostResponseIds MemberReference hostname MemberReference currentResponseId put StatementExpression MethodInvocation hostResponses MemberReference hostname MemberReference response put LocalVariableDeclaration BasicType long VariableDeclarator now MethodInvocation System currentTimeMillis IfStatement BinaryOperation && BinaryOperation > MethodInvocation heartbeat.componentStatus size Literal 0 MethodInvocation hostObject MethodInvocation MemberReference HostState WAITING_FOR_HOST_STATUS_UPDATES equals getState BlockStatement TryStatement StatementExpression MethodInvocation LOG Literal ""Got component status updates"" debug StatementExpression MethodInvocation hostObject ClassCreator ReferenceType HostStatusUpdatesReceivedEvent MemberReference hostname MemberReference now handleEvent CatchClause CatchClauseParameter InvalidStateTransitionException e StatementExpression MethodInvocation LOG Literal ""Failed to notify the host about component status updates"" MemberReference e warn End TryStatement IfStatement MethodInvocation heartbeat MethodInvocation getStatus MethodInvocation MemberReference HostStatus.Status HEALTHY equals getNodeStatus BlockStatement StatementExpression MethodInvocation hostObject ClassCreator ReferenceType HostHealthyHeartbeatEvent MemberReference hostname MemberReference now handleEvent BlockStatement StatementExpression MethodInvocation hostObject ClassCreator ReferenceType HostUnhealthyHeartbeatEvent MemberReference hostname MemberReference now Literal null handleEvent End CatchClause CatchClauseParameter InvalidStateTransitionException ex StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Asking agent to reregister due to "" MethodInvocation ex getMessage MemberReference ex warn StatementExpression MethodInvocation hostObject MemberReference HostState INIT setState LocalVariableDeclaration ReferenceType RegistrationCommand VariableDeclarator regCmd ClassCreator ReferenceType RegistrationCommand StatementExpression MethodInvocation response MemberReference regCmd setRegistrationCommand ReturnStatement MemberReference response LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType CommandReport VariableDeclarator reports MethodInvocation heartbeat getReports ForStatement EnhancedForControl VariableDeclaration ReferenceType CommandReport VariableDeclarator report MemberReference reports BlockStatement LocalVariableDeclaration ReferenceType String VariableDeclarator clusterName MethodInvocation report getClusterName IfStatement BinaryOperation || BinaryOperation == MemberReference clusterName Literal null Literal MethodInvocation MemberReference clusterName equals """" BlockStatement StatementExpression Assignment MemberReference clusterName Literal ""cluster1"" = End LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cl MethodInvocation clusterFsm MethodInvocation report getClusterName getCluster LocalVariableDeclaration ReferenceType String VariableDeclarator service MethodInvocation report getServiceName IfStatement BinaryOperation || BinaryOperation == MemberReference service Literal null Literal MethodInvocation MemberReference service equals """" BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + Literal ""Invalid command report, service: "" MemberReference service End IfStatement MethodInvocation actionMetadata MethodInvocation MethodInvocation report getRole contains MethodInvocation service toLowerCase getActions BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + MethodInvocation report getRole Literal "" is an action - skip component lookup"" info BlockStatement TryStatement LocalVariableDeclaration ReferenceType Service VariableDeclarator svc MethodInvocation cl MemberReference service getService LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator svcComp MethodInvocation svc MethodInvocation report getRole getServiceComponent LocalVariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator scHost MethodInvocation svcComp MemberReference hostname getServiceComponentHost IfStatement MethodInvocation report MethodInvocation Literal ""COMPLETED"" equals getStatus BlockStatement StatementExpression MethodInvocation scHost ClassCreator ReferenceType ServiceComponentHostOpSucceededEvent MethodInvocation scHost getServiceComponentName MemberReference hostname MemberReference now handleEvent IfStatement MethodInvocation report MethodInvocation Literal ""FAILED"" equals getStatus BlockStatement StatementExpression MethodInvocation scHost ClassCreator ReferenceType ServiceComponentHostOpFailedEvent MethodInvocation scHost getServiceComponentName MemberReference hostname MemberReference now handleEvent IfStatement MethodInvocation report MethodInvocation Literal ""IN_PROGRESS"" equals getStatus BlockStatement StatementExpression MethodInvocation scHost ClassCreator ReferenceType ServiceComponentHostOpInProgressEvent MethodInvocation scHost getServiceComponentName MemberReference hostname MemberReference now handleEvent End End End CatchClause CatchClauseParameter ServiceComponentNotFoundException scnex StatementExpression MethodInvocation LOG Literal ""Service component not found "" MemberReference scnex info CatchClause CatchClauseParameter InvalidStateTransitionException ex StatementExpression MethodInvocation LOG Literal ""State machine exception"" MemberReference ex warn End End StatementExpression MethodInvocation actionManager MemberReference hostname MemberReference reports processTaskResponse LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType Cluster VariableDeclarator clusters MethodInvocation clusterFsm MemberReference hostname getClustersForHost ForStatement EnhancedForControl VariableDeclaration ReferenceType Cluster VariableDeclarator cl MemberReference clusters BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType ComponentStatus VariableDeclarator status MemberReference heartbeat componentStatus BlockStatement IfStatement MethodInvocation status MethodInvocation MethodInvocation cl getClusterName equals getClusterName BlockStatement TryStatement LocalVariableDeclaration ReferenceType Service VariableDeclarator svc MethodInvocation cl MethodInvocation status getServiceName getService LocalVariableDeclaration ReferenceType String VariableDeclarator componentName MethodInvocation status getComponentName IfStatement MethodInvocation svc MethodInvocation MemberReference componentName containsKey getServiceComponents BlockStatement LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator svcComp MethodInvocation svc MemberReference componentName getServiceComponent LocalVariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator scHost MethodInvocation svcComp MemberReference hostname getServiceComponentHost LocalVariableDeclaration ReferenceType State VariableDeclarator prevState MethodInvocation scHost getState LocalVariableDeclaration ReferenceType State VariableDeclarator liveState MethodInvocation State ClassReference ReferenceType State MethodInvocation status getStatus valueOf IfStatement BinaryOperation || BinaryOperation || BinaryOperation || MethodInvocation prevState MemberReference State INSTALLED equals MethodInvocation prevState MemberReference State START_FAILED equals MethodInvocation prevState MemberReference State STARTED equals MethodInvocation prevState MemberReference State STOP_FAILED equals BlockStatement StatementExpression MethodInvocation scHost MemberReference liveState setState IfStatement MethodInvocation ! prevState MemberReference liveState equals BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""State of service component "" MemberReference componentName Literal "" of service "" MethodInvocation status getServiceName Literal "" of cluster "" MethodInvocation status getClusterName Literal "" has changed from "" MemberReference prevState Literal "" to "" MemberReference liveState Literal "" at host "" MemberReference hostname info End End BlockStatement End CatchClause CatchClauseParameter ServiceNotFoundException e StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a live status update for a non-initialized"" Literal "" service"" Literal "", clusterName="" MethodInvocation status getClusterName Literal "", serviceName="" MethodInvocation status getServiceName warn ContinueStatement CatchClause CatchClauseParameter ServiceComponentNotFoundException e StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a live status update for a non-initialized"" Literal "" servicecomponent"" Literal "", clusterName="" MethodInvocation status getClusterName Literal "", serviceName="" MethodInvocation status getServiceName Literal "", componentName="" MethodInvocation status getComponentName warn ContinueStatement CatchClause CatchClauseParameter ServiceComponentHostNotFoundException e StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a live status update for a non-initialized"" Literal "" service"" Literal "", clusterName="" MethodInvocation status getClusterName Literal "", serviceName="" MethodInvocation status getServiceName Literal "", componentName="" MethodInvocation status getComponentName Literal "", hostname="" MemberReference hostname warn ContinueStatement End End End IfStatement MethodInvocation hostObject MethodInvocation MemberReference HostState HEALTHY equals getState BlockStatement LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType AgentCommand VariableDeclarator cmds MethodInvocation actionQueue MethodInvocation heartbeat getHostname dequeueAll IfStatement BinaryOperation && BinaryOperation != MemberReference cmds Literal null MethodInvocation ! cmds isEmpty BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType AgentCommand VariableDeclarator ac MemberReference cmds BlockStatement TryStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Sending command string = "" MethodInvocation StageUtils MemberReference ac jaxbToString debug End CatchClause CatchClauseParameter Exception e ThrowStatement ClassCreator ReferenceType AmbariException Literal ""Could not get jaxb string for command"" MemberReference e SwitchStatement MethodInvocation ac getCommandType SwitchStatementCase EXECUTION_COMMAND BlockStatement StatementExpression MethodInvocation response Cast ReferenceType ExecutionCommand MemberReference ac addExecutionCommand BreakStatement SwitchStatementCase STATUS_COMMAND BlockStatement StatementExpression MethodInvocation response Cast ReferenceType StatusCommand MemberReference ac addStatusCommand BreakStatement SwitchStatementCase StatementExpression MethodInvocation LOG BinaryOperation + Literal ""There is no action for agent command ="" MethodInvocation ac MethodInvocation name getCommandType error End End End End ReturnStatement MemberReference response MethodDeclaration Modifier public ReferenceType String getOsType FormalParameter ReferenceType String os FormalParameter ReferenceType String osRelease LocalVariableDeclaration ReferenceType String VariableDeclarator osType Literal """" IfStatement BinaryOperation != MemberReference os Literal null BlockStatement StatementExpression Assignment MemberReference osType MemberReference os = End IfStatement BinaryOperation != MemberReference osRelease Literal null BlockStatement LocalVariableDeclaration ReferenceType String VariableDeclarator release MethodInvocation osRelease Literal ""\\."" split IfStatement BinaryOperation > MemberReference release length Literal 0 BlockStatement StatementExpression Assignment MemberReference osType MemberReference ArraySelector Literal 0 release += End End ReturnStatement MethodInvocation osType toLowerCase MethodDeclaration Modifier public ReferenceType RegistrationResponse handleRegistration FormalParameter ReferenceType Register register InvalidStateTransitionException AmbariException LocalVariableDeclaration ReferenceType String VariableDeclarator hostname MethodInvocation register getHostname LocalVariableDeclaration BasicType long VariableDeclarator now MethodInvocation System currentTimeMillis LocalVariableDeclaration ReferenceType String VariableDeclarator agentOsType MethodInvocation MethodInvocation register MethodInvocation getOS getHardwareProfile MethodInvocation register MethodInvocation getOSRelease getHardwareProfile getOsType IfStatement MethodInvocation ! ambariMetaInfo MethodInvocation config MethodInvocation toLowerCase getServerOsType MemberReference agentOsType areOsTypesCompatible BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received registration request from host with non matching"" Literal "" os type"" Literal "", hostname="" MemberReference hostname Literal "", serverOsType="" MethodInvocation config getServerOsType Literal "", agentOstype="" MemberReference agentOsType warn ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Cannot register host as it does not match"" Literal "" server's os type"" Literal "", hostname="" MemberReference hostname Literal "", serverOsType="" MethodInvocation config getServerOsType Literal "", agentOstype="" MemberReference agentOsType End LocalVariableDeclaration ReferenceType Host VariableDeclarator hostObject TryStatement StatementExpression Assignment MemberReference hostObject MethodInvocation clusterFsm MemberReference hostname getHost = CatchClause CatchClauseParameter HostNotFoundException ex StatementExpression MethodInvocation clusterFsm MemberReference hostname addHost StatementExpression Assignment MemberReference hostObject MethodInvocation clusterFsm MemberReference hostname getHost = StatementExpression MethodInvocation hostObject MemberReference HostState INIT setState LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType StatusCommand VariableDeclarator cmds MethodInvocation heartbeatMonitor MemberReference hostname generateStatusCommands StatementExpression MethodInvocation hostObject ClassCreator ReferenceType HostRegistrationRequestEvent MemberReference hostname TernaryExpression BinaryOperation != Literal null MethodInvocation register getPublicHostname MethodInvocation register getPublicHostname MemberReference hostname ClassCreator ReferenceType AgentVersion Literal ""v1"" MemberReference now MethodInvocation register getHardwareProfile handleEvent LocalVariableDeclaration ReferenceType RegistrationResponse VariableDeclarator response ClassCreator ReferenceType RegistrationResponse IfStatement MethodInvocation cmds isEmpty BlockStatement StatementExpression MethodInvocation hostObject ClassCreator ReferenceType HostStatusUpdatesReceivedEvent MemberReference hostname MemberReference now handleEvent End StatementExpression MethodInvocation response MemberReference cmds setStatusCommands StatementExpression MethodInvocation response MemberReference RegistrationStatus OK setResponseStatus LocalVariableDeclaration ReferenceType Long VariableDeclarator requestId Literal 0L StatementExpression MethodInvocation hostResponseIds MemberReference hostname MemberReference requestId put StatementExpression MethodInvocation response MemberReference requestId setResponseId ReturnStatement MemberReference response",0
55,55,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.resources Import org.apache.ambari.server.api.query.Query Import org.apache.ambari.server.controller.spi.Resource Import java.util.Map InterfaceDeclaration Modifier public /**
 * Resource instance which contains request specific state.
 */ ResourceInstance MethodDeclaration /**
   * Set the values of the parent foreign keys.
   *
   * @param mapIds  map of all parent foreign keys. Map from resource type to id value.
   */ Modifier public setIds FormalParameter ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String mapIds MethodDeclaration /**
   * Obtain the primary and foreign key properties for the resource.
   *
   * @return map of primary and foreign key values keyed by resource type
   */ Modifier public ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String getIds MethodDeclaration /**
   * Return the query associated with the resource.
   * Each resource has one query.
   *
   * @return the associated query
   */ Modifier public ReferenceType Query getQuery MethodDeclaration /**
   * Return the resource definition for this resource type.
   * All information in the definition is static and is specific to the resource type,
   * not the resource instance.
   *
   * @return  the associated resource definition
   */ Modifier public ReferenceType ResourceDefinition getResourceDefinition MethodDeclaration /**
   * Return all sub-resource instances.
   * This will include all children of this resource as well
   * as any other resources referred to via a foreign key property.
   *
   * @return all sub-resource instances
   */ Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType ResourceInstance getSubResources MethodDeclaration /**
   * Determine if resource is a collection resource.
   *
   * @return true if the resource is a collection resource; false otherwise
   */ Modifier public BasicType boolean isCollectionResource",0
292,292,,0
253,253,,1
242,242,,1
64,64,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the ""License""); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.eventdb.model Import java.util.List Import javax.xml.bind.annotation.XmlAccessType Import javax.xml.bind.annotation.XmlAccessorType Import javax.xml.bind.annotation.XmlRootElement ClassDeclaration Modifier public Annotation XmlRootElement Annotation XmlAccessorType MemberReference XmlAccessType FIELD TaskLocalityData FieldDeclaration Modifier private ReferenceType List TypeArgument ReferenceType DataPoint VariableDeclarator mapNodeLocal FieldDeclaration Modifier private ReferenceType List TypeArgument ReferenceType DataPoint VariableDeclarator mapRackLocal FieldDeclaration Modifier private ReferenceType List TypeArgument ReferenceType DataPoint VariableDeclarator mapOffSwitch FieldDeclaration Modifier private ReferenceType List TypeArgument ReferenceType DataPoint VariableDeclarator reduceOffSwitch FieldDeclaration Modifier private BasicType long VariableDeclarator submitTime FieldDeclaration Modifier private BasicType long VariableDeclarator finishTime ClassDeclaration Modifier public static DataPoint FieldDeclaration Modifier private BasicType long VariableDeclarator x FieldDeclaration Modifier private BasicType long VariableDeclarator y FieldDeclaration Modifier private BasicType long VariableDeclarator r FieldDeclaration Modifier private BasicType long VariableDeclarator io FieldDeclaration Modifier private ReferenceType String VariableDeclarator label FieldDeclaration Modifier private ReferenceType String VariableDeclarator status ConstructorDeclaration Modifier public DataPoint ConstructorDeclaration Modifier public DataPoint FormalParameter BasicType long x StatementExpression ExplicitConstructorInvocation MemberReference x Literal 0 Literal 0 Literal 0 Literal null Literal null ConstructorDeclaration Modifier public DataPoint FormalParameter BasicType long x FormalParameter BasicType long y FormalParameter BasicType long r FormalParameter BasicType long io FormalParameter ReferenceType String taskAttemptId FormalParameter ReferenceType String status StatementExpression Assignment This MemberReference x MemberReference x = StatementExpression Assignment This MemberReference y MemberReference y = StatementExpression Assignment This MemberReference r MemberReference r = StatementExpression Assignment This MemberReference io MemberReference io = StatementExpression Assignment This MemberReference label MemberReference taskAttemptId = StatementExpression Assignment This MemberReference status MemberReference status = MethodDeclaration Modifier public BasicType long getX ReturnStatement MemberReference x MethodDeclaration Modifier public BasicType long getY ReturnStatement MemberReference y MethodDeclaration Modifier public BasicType long getR ReturnStatement MemberReference r MethodDeclaration Modifier public BasicType long getIO ReturnStatement MemberReference io MethodDeclaration Modifier public ReferenceType String getLabel ReturnStatement MemberReference label MethodDeclaration Modifier public ReferenceType String getStatus ReturnStatement MemberReference status MethodDeclaration Modifier public setX FormalParameter BasicType long x StatementExpression Assignment This MemberReference x MemberReference x = MethodDeclaration Modifier public setY FormalParameter BasicType long y StatementExpression Assignment This MemberReference y MemberReference y = MethodDeclaration Modifier public setR FormalParameter BasicType long r StatementExpression Assignment This MemberReference r MemberReference r = MethodDeclaration Modifier public setIO FormalParameter BasicType long io StatementExpression Assignment This MemberReference io MemberReference io = MethodDeclaration Modifier public setLabel FormalParameter ReferenceType String label StatementExpression Assignment This MemberReference label MemberReference label = MethodDeclaration Modifier public setStatus FormalParameter ReferenceType String status StatementExpression Assignment This MemberReference status MemberReference status = ConstructorDeclaration Modifier public TaskLocalityData MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType DataPoint getMapNodeLocal ReturnStatement MemberReference mapNodeLocal MethodDeclaration Modifier public setMapNodeLocal FormalParameter ReferenceType List TypeArgument ReferenceType DataPoint mapNodeLocal StatementExpression Assignment This MemberReference mapNodeLocal MemberReference mapNodeLocal = MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType DataPoint getMapRackLocal ReturnStatement MemberReference mapRackLocal MethodDeclaration Modifier public setMapRackLocal FormalParameter ReferenceType List TypeArgument ReferenceType DataPoint mapRackLocal StatementExpression Assignment This MemberReference mapRackLocal MemberReference mapRackLocal = MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType DataPoint getMapOffSwitch ReturnStatement MemberReference mapOffSwitch MethodDeclaration Modifier public setMapOffSwitch FormalParameter ReferenceType List TypeArgument ReferenceType DataPoint mapOffSwitch StatementExpression Assignment This MemberReference mapOffSwitch MemberReference mapOffSwitch = MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType DataPoint getReduceOffSwitch ReturnStatement MemberReference reduceOffSwitch MethodDeclaration Modifier public setReduceOffSwitch FormalParameter ReferenceType List TypeArgument ReferenceType DataPoint reduceOffSwitch StatementExpression Assignment This MemberReference reduceOffSwitch MemberReference reduceOffSwitch = MethodDeclaration Modifier public BasicType long getSubmitTime ReturnStatement MemberReference submitTime MethodDeclaration Modifier public setSubmitTime FormalParameter BasicType long submitTime StatementExpression Assignment This MemberReference submitTime MemberReference submitTime = MethodDeclaration Modifier public BasicType long getFinishTime ReturnStatement MemberReference finishTime MethodDeclaration Modifier public setFinishTime FormalParameter BasicType long finishTime StatementExpression Assignment This MemberReference finishTime MemberReference finishTime =",0
93,93,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.dao Import java.util.ArrayList Import java.util.Collection Import java.util.List Import com.google.inject.Inject Import com.google.inject.Provider Import com.google.inject.persist.Transactional Import javax.persistence.EntityManager Import javax.persistence.TypedQuery Import org.apache.ambari.server.orm.entities.HostComponentConfigMappingEntity ClassDeclaration Modifier public HostComponentConfigMappingDAO FieldDeclaration Annotation Inject ReferenceType Provider TypeArgument ReferenceType EntityManager VariableDeclarator entityManagerProvider FieldDeclaration Annotation Inject ReferenceType DaoUtils VariableDeclarator daoUtils MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType HostComponentConfigMappingEntity findByType FormalParameter ReferenceType Collection TypeArgument ReferenceType String configTypes LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType HostComponentConfigMappingEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + Literal ""SELECT config FROM HostComponentConfigMappingEntity config"" Literal "" WHERE config.configType IN ?1"" ClassReference ReferenceType HostComponentConfigMappingEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference configTypes selectList MethodDeclaration Modifier public Annotation Transactional refresh FormalParameter ReferenceType HostComponentConfigMappingEntity componentConfigMappingEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference componentConfigMappingEntity refresh get MethodDeclaration Modifier public Annotation Transactional ReferenceType HostComponentConfigMappingEntity merge FormalParameter ReferenceType HostComponentConfigMappingEntity componentConfigMappingEntity ReturnStatement MethodInvocation entityManagerProvider MethodInvocation MemberReference componentConfigMappingEntity merge get MethodDeclaration Modifier public Annotation Transactional remove FormalParameter ReferenceType HostComponentConfigMappingEntity componentConfigMappingEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MethodInvocation MemberReference componentConfigMappingEntity merge remove get MethodDeclaration Modifier public Annotation Transactional removeByType FormalParameter ReferenceType Collection TypeArgument ReferenceType String configTypes ForStatement EnhancedForControl VariableDeclaration ReferenceType HostComponentConfigMappingEntity VariableDeclarator entity MethodInvocation MemberReference configTypes findByType BlockStatement StatementExpression MethodInvocation MemberReference entity remove End MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType HostComponentConfigMappingEntity findByHostComponentAndType FormalParameter BasicType long clusterId FormalParameter ReferenceType String serviceName FormalParameter ReferenceType String componentName FormalParameter ReferenceType String hostname FormalParameter ReferenceType Collection TypeArgument ReferenceType String configTypes IfStatement MethodInvocation configTypes isEmpty BlockStatement ReturnStatement ClassCreator ReferenceType ArrayList TypeArgument ReferenceType HostComponentConfigMappingEntity End LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType HostComponentConfigMappingEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""SELECT config FROM HostComponentConfigMappingEntity config"" Literal "" WHERE "" Literal "" config.clusterId = ?1"" Literal "" AND config.serviceName = ?2"" Literal "" AND config.componentName = ?3"" Literal "" AND config.hostName = ?4"" Literal "" AND config.configType IN ?5"" ClassReference ReferenceType HostComponentConfigMappingEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference clusterId MemberReference serviceName MemberReference componentName MemberReference hostname MemberReference configTypes selectList",0
322,322,,1
329,329,,1
347,347,,0
216,216,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.agent ClassDeclaration Modifier public abstract AgentCommand FieldDeclaration Modifier private ReferenceType AgentCommandType VariableDeclarator commandType ConstructorDeclaration Modifier public AgentCommand StatementExpression Assignment This MemberReference commandType MemberReference AgentCommandType STATUS_COMMAND = ConstructorDeclaration Modifier public AgentCommand FormalParameter ReferenceType AgentCommandType type StatementExpression Assignment This MemberReference commandType MemberReference type = EnumDeclaration Modifier public AgentCommandType EnumBody EnumConstantDeclaration EXECUTION_COMMAND EnumConstantDeclaration STATUS_COMMAND EnumConstantDeclaration REGISTRATION_COMMAND MethodDeclaration Modifier public ReferenceType AgentCommandType getCommandType ReturnStatement MemberReference commandType MethodDeclaration Modifier public setCommandType FormalParameter ReferenceType AgentCommandType commandType StatementExpression Assignment This MemberReference commandType MemberReference commandType = MethodDeclaration Modifier public Annotation Override ReferenceType String toString ReturnStatement BinaryOperation + BinaryOperation + BinaryOperation + Literal ""AgentCommand{"" Literal ""commandType="" MemberReference commandType Literal '}'",0
80,80,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state Import java.util.List Import java.util.Map InterfaceDeclaration Modifier public /**
 * Represents a single instance of a 'Config Type'
 */ Config MethodDeclaration /**
   * @return Config Type
   */ Modifier public ReferenceType String getType MethodDeclaration /**
   * @return Version Tag this config instance is mapped to
   */ Modifier public ReferenceType String getVersionTag MethodDeclaration /**
   * @return Properties that define this config instance
   */ Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getProperties MethodDeclaration /**
   * Change the version tag
   * @param versionTag
   */ Modifier public setVersionTag FormalParameter ReferenceType String versionTag MethodDeclaration /**
   * Replace properties with new provided set
   * @param properties Property Map to replace existing one
   */ Modifier public setProperties FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String properties MethodDeclaration /**
   * Update provided properties' values.
   * @param properties Property Map with updated values
   */ Modifier public updateProperties FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String properties MethodDeclaration /**
   * Delete certain properties
   * @param properties Property keys to be deleted
   */ Modifier public deleteProperties FormalParameter ReferenceType List TypeArgument ReferenceType String properties MethodDeclaration /**
   * Persist the configuration.
   */ Modifier public persist",1
319,319,,0
369,369,,0
372,372,,0
328,328,,1
24,24,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.agent Import java.util.ArrayList Import java.util.HashMap Import java.util.LinkedList Import java.util.List Import java.util.Map Import java.util.NoSuchElementException Import java.util.Queue Import org.slf4j.Logger Import org.slf4j.LoggerFactory Import com.google.inject.Singleton ClassDeclaration Modifier public Annotation Singleton ActionQueue FieldDeclaration Modifier private static ReferenceType Logger VariableDeclarator LOG MethodInvocation LoggerFactory ClassReference ReferenceType ActionQueue getLogger FieldDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Queue TypeArgument ReferenceType AgentCommand VariableDeclarator hostQueues ConstructorDeclaration Modifier public ActionQueue StatementExpression Assignment MemberReference hostQueues ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Queue TypeArgument ReferenceType AgentCommand = MethodDeclaration Modifier private synchronized ReferenceType Queue TypeArgument ReferenceType AgentCommand getQueue FormalParameter ReferenceType String hostname ReturnStatement MethodInvocation hostQueues MemberReference hostname get MethodDeclaration Modifier private synchronized addQueue FormalParameter ReferenceType String hostname FormalParameter ReferenceType Queue TypeArgument ReferenceType AgentCommand q StatementExpression MethodInvocation hostQueues MemberReference hostname MemberReference q put MethodDeclaration Modifier public enqueue FormalParameter ReferenceType String hostname FormalParameter ReferenceType AgentCommand cmd LocalVariableDeclaration ReferenceType Queue TypeArgument ReferenceType AgentCommand VariableDeclarator q SynchronizedStatement This StatementExpression Assignment MemberReference q MethodInvocation MemberReference hostname getQueue = IfStatement BinaryOperation == MemberReference q Literal null BlockStatement StatementExpression MethodInvocation MemberReference hostname ClassCreator ReferenceType LinkedList TypeArgument ReferenceType AgentCommand addQueue StatementExpression Assignment MemberReference q MethodInvocation MemberReference hostname getQueue = End SynchronizedStatement MemberReference q IfStatement MethodInvocation q MemberReference cmd contains BlockStatement StatementExpression MethodInvocation LOG Literal ""cmd already exists in the queue, not adding again"" warn ReturnStatement End StatementExpression MethodInvocation q MemberReference cmd add MethodDeclaration Modifier public ReferenceType AgentCommand dequeue FormalParameter ReferenceType String hostname LocalVariableDeclaration ReferenceType Queue TypeArgument ReferenceType AgentCommand VariableDeclarator q MethodInvocation MemberReference hostname getQueue IfStatement BinaryOperation == MemberReference q Literal null BlockStatement ReturnStatement Literal null End SynchronizedStatement MemberReference q IfStatement MethodInvocation q isEmpty BlockStatement ReturnStatement Literal null BlockStatement ReturnStatement MethodInvocation q remove End MethodDeclaration Modifier public BasicType int size FormalParameter ReferenceType String hostname LocalVariableDeclaration ReferenceType Queue TypeArgument ReferenceType AgentCommand VariableDeclarator q MethodInvocation MemberReference hostname getQueue IfStatement BinaryOperation == MemberReference q Literal null BlockStatement ReturnStatement Literal 0 End SynchronizedStatement MemberReference q ReturnStatement MethodInvocation q size MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType AgentCommand dequeueAll FormalParameter ReferenceType String hostname LocalVariableDeclaration ReferenceType Queue TypeArgument ReferenceType AgentCommand VariableDeclarator q MethodInvocation MemberReference hostname getQueue IfStatement BinaryOperation == MemberReference q Literal null BlockStatement ReturnStatement Literal null End LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType AgentCommand VariableDeclarator l ClassCreator ReferenceType ArrayList TypeArgument ReferenceType AgentCommand SynchronizedStatement MemberReference q WhileStatement Literal true BlockStatement TryStatement LocalVariableDeclaration ReferenceType AgentCommand VariableDeclarator cmd MethodInvocation q remove IfStatement BinaryOperation != MemberReference cmd Literal null BlockStatement StatementExpression MethodInvocation l MemberReference cmd add End CatchClause CatchClauseParameter NoSuchElementException ex ReturnStatement MemberReference l End",1
151,151,"CompilationUnit PackageDeclaration /**
* Licensed to the Apache Software Foundation (ASF) under one
* or more contributor license agreements.  See the NOTICE file
* distributed with this work for additional information
* regarding copyright ownership.  The ASF licenses this file
* to you under the Apache License, Version 2.0 (the
* ""License""); you may not use this file except in compliance
* with the License.  You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an ""AS IS"" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/ org.apache.ambari.server.state Import java.util.List Import java.util.Map Import java.util.Set Import org.apache.ambari.server.AmbariException InterfaceDeclaration Modifier public /**
 * Single entity that tracks all clusters and hosts that are managed
 * by the Ambari server
 */ Clusters MethodDeclaration /**
   * Add a new Cluster
   * @param clusterName
   */ Modifier public addCluster FormalParameter ReferenceType String clusterName AmbariException MethodDeclaration /**
   * Get the Cluster given the cluster name
   * @param clusterName Name of the Cluster to retrieve
   * @return
   */ Modifier public ReferenceType Cluster getCluster FormalParameter ReferenceType String clusterName AmbariException MethodDeclaration /**
   * Get all known clusters
   * @return
   */ Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Cluster getClusters MethodDeclaration /**
   * Get all hosts being tracked by the Ambari server
   * @return
   */ Modifier public ReferenceType List TypeArgument ReferenceType Host getHosts MethodDeclaration /**
   * Returns all the cluster names for this hostname.
   * @param hostname
   * @return List of cluster names
   * @throws AmbariException
   */ Modifier public ReferenceType Set TypeArgument ReferenceType Cluster getClustersForHost FormalParameter ReferenceType String hostname AmbariException MethodDeclaration /**
   * Get a Host object managed by this server
   * @param hostname Name of the host requested
   * @return Host object
   * @throws AmbariException
   */ Modifier public ReferenceType Host getHost FormalParameter ReferenceType String hostname AmbariException MethodDeclaration /**
   * Add a Host object to be managed by this server
   * @param hostname Host to be added
   * @throws AmbariException
   */ Modifier public addHost FormalParameter ReferenceType String hostname AmbariException MethodDeclaration /**
   * Map host to the given cluster.
   * A host can belong to multiple clusters.
   * @param hostname
   * @param clusterName
   * @throws AmbariException
   */ Modifier public mapHostToCluster FormalParameter ReferenceType String hostname FormalParameter ReferenceType String clusterName AmbariException MethodDeclaration Modifier public mapHostsToCluster FormalParameter ReferenceType Set TypeArgument ReferenceType String hostnames FormalParameter ReferenceType String clusterName AmbariException MethodDeclaration Modifier public updateClusterName FormalParameter ReferenceType String oldName FormalParameter ReferenceType String newName MethodDeclaration Modifier public ReferenceType Cluster getClusterById FormalParameter BasicType long id AmbariException MethodDeclaration Modifier public debugDump FormalParameter ReferenceType StringBuilder sb MethodDeclaration Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Host getHostsForCluster FormalParameter ReferenceType String clusterName AmbariException MethodDeclaration Modifier public deleteCluster FormalParameter ReferenceType String clusterName AmbariException",1
107,107,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services Import org.apache.ambari.server.controller.spi.Resource Import org.apache.ambari.server.api.util.TreeNode InterfaceDeclaration Modifier public /**
 * Represents a result from a request handler invocation.
 */ Result EnumDeclaration Modifier public static STATUS EnumBody EnumConstantDeclaration OK Literal 200 Literal ""OK"" Literal false EnumConstantDeclaration CREATED Literal 201 Literal ""Created"" Literal false EnumConstantDeclaration ACCEPTED Literal 202 Literal ""Accepted"" Literal false EnumConstantDeclaration CONFLICT Literal 409 Literal ""Resource Conflict"" Literal true EnumConstantDeclaration NOT_FOUND Literal 404 Literal ""Not Found"" Literal true EnumConstantDeclaration BAD_REQUEST Literal 400 Literal ""Bad Request"" Literal true EnumConstantDeclaration UNAUTHORIZED Literal 401 Literal ""Unauthorized"" Literal true EnumConstantDeclaration FORBIDDEN Literal 403 Literal ""Forbidden"" Literal true EnumConstantDeclaration SERVER_ERROR Literal 500 Literal ""Internal Server Error"" Literal true FieldDeclaration Modifier private BasicType int VariableDeclarator m_code FieldDeclaration Modifier private ReferenceType String VariableDeclarator m_desc FieldDeclaration Modifier private BasicType boolean VariableDeclarator m_isErrorState ConstructorDeclaration Modifier private STATUS FormalParameter BasicType int code FormalParameter ReferenceType String description FormalParameter BasicType boolean isErrorState StatementExpression Assignment MemberReference m_code MemberReference code = StatementExpression Assignment MemberReference m_desc MemberReference description = StatementExpression Assignment MemberReference m_isErrorState MemberReference isErrorState = MethodDeclaration Modifier public BasicType int getStatus ReturnStatement MemberReference m_code MethodDeclaration Modifier public ReferenceType String getDescription ReturnStatement MemberReference m_desc MethodDeclaration Modifier public BasicType boolean isErrorState ReturnStatement MemberReference m_isErrorState MethodDeclaration Modifier public Annotation Override ReferenceType String toString ReturnStatement MethodInvocation getDescription MethodDeclaration /**
   * Obtain the results of the request invocation as a Tree structure.
   *
   * @return the results of the request a a Tree structure
   */ Modifier public ReferenceType TreeNode TypeArgument ReferenceType Resource getResultTree MethodDeclaration /**
   * Determine whether the request was handled synchronously.
   * If the request is synchronous, all work was completed prior to returning.
   *
   * @return true if the request was synchronous, false if it was asynchronous
   */ Modifier public BasicType boolean isSynchronous MethodDeclaration Modifier public ReferenceType ResultStatus getStatus MethodDeclaration Modifier public setResultStatus FormalParameter ReferenceType ResultStatus status",0
192,192,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.dao Import com.google.inject.Inject Import com.google.inject.Provider Import com.google.inject.persist.Transactional Import org.apache.ambari.server.orm.entities.HostComponentStateEntity Import org.apache.ambari.server.orm.entities.HostComponentStateEntityPK Import javax.persistence.EntityManager ClassDeclaration Modifier public HostComponentStateDAO FieldDeclaration Annotation Inject ReferenceType Provider TypeArgument ReferenceType EntityManager VariableDeclarator entityManagerProvider MethodDeclaration Modifier public Annotation Transactional ReferenceType HostComponentStateEntity findByPK FormalParameter ReferenceType HostComponentStateEntityPK primaryKey ReturnStatement MethodInvocation entityManagerProvider MethodInvocation ClassReference ReferenceType HostComponentStateEntity MemberReference primaryKey find get MethodDeclaration Modifier public Annotation Transactional refresh FormalParameter ReferenceType HostComponentStateEntity hostComponentStateEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference hostComponentStateEntity refresh get MethodDeclaration Modifier public Annotation Transactional create FormalParameter ReferenceType HostComponentStateEntity hostComponentStateEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference hostComponentStateEntity persist get MethodDeclaration Modifier public Annotation Transactional ReferenceType HostComponentStateEntity merge FormalParameter ReferenceType HostComponentStateEntity hostComponentStateEntity ReturnStatement MethodInvocation entityManagerProvider MethodInvocation MemberReference hostComponentStateEntity merge get MethodDeclaration Modifier public Annotation Transactional remove FormalParameter ReferenceType HostComponentStateEntity hostComponentStateEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MethodInvocation MemberReference hostComponentStateEntity merge remove get MethodDeclaration Modifier public Annotation Transactional removeByPK FormalParameter ReferenceType HostComponentStateEntityPK primaryKey StatementExpression MethodInvocation MethodInvocation MemberReference primaryKey findByPK remove",1
148,148,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.security.unsecured.rest Import javax.ws.rs.GET Import javax.ws.rs.Path Import javax.ws.rs.Produces Import javax.ws.rs.core.MediaType Import org.apache.ambari.server.security.CertificateManager Import org.apache.commons.logging.Log Import org.apache.commons.logging.LogFactory Import com.google.inject.Inject ClassDeclaration Modifier public Annotation Path Literal ""/cert/ca"" CertificateDownload FieldDeclaration Modifier private static ReferenceType Log VariableDeclarator LOG MethodInvocation LogFactory ClassReference ReferenceType CertificateDownload getLog FieldDeclaration Modifier private static ReferenceType CertificateManager VariableDeclarator certMan MethodDeclaration Modifier public static Annotation Inject init FormalParameter ReferenceType CertificateManager instance StatementExpression Assignment MemberReference certMan MemberReference instance = MethodDeclaration Modifier public Annotation GET Annotation Produces ElementArrayValue MemberReference MediaType TEXT_PLAIN ReferenceType String downloadSrvrCrt ReturnStatement MethodInvocation certMan getServerCert",0
332,332,,0
115,115,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.svccomphost Import org.apache.ambari.server.state.ServiceComponentHostEvent Import org.apache.ambari.server.state.ServiceComponentHostEventType ClassDeclaration Modifier public ServiceComponentHostOpInProgressEvent ConstructorDeclaration Modifier public ServiceComponentHostOpInProgressEvent FormalParameter ReferenceType String serviceComponentName FormalParameter ReferenceType String hostName FormalParameter BasicType long opTimestamp StatementExpression SuperConstructorInvocation MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_IN_PROGRESS MemberReference serviceComponentName MemberReference hostName MemberReference opTimestamp ReferenceType ServiceComponentHostEvent",0
390,390,,1
111,111,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.resources Import java.util.Collections Import java.util.Set Import org.apache.ambari.server.controller.spi.Resource ClassDeclaration Modifier public /**
 * User Resource Definition
 */ UserResourceDefinition ConstructorDeclaration Modifier public UserResourceDefinition StatementExpression SuperConstructorInvocation MemberReference Resource.Type User MethodDeclaration Modifier public Annotation Override ReferenceType String getPluralName ReturnStatement Literal ""users"" MethodDeclaration Modifier public Annotation Override ReferenceType String getSingularName ReturnStatement Literal ""user"" MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType SubResourceDefinition getSubResourceDefinitions ReturnStatement MethodInvocation Collections emptySet ReferenceType BaseResourceDefinition",0
248,248,,0
63,63,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.action Import org.apache.ambari.server.state.fsm.InvalidStateTransitionException InterfaceDeclaration Modifier public Action MethodDeclaration /**
   * Get the Action ID for the action
   * @return ActionId
   */ Modifier public ReferenceType ActionId getId MethodDeclaration /**
   * Get Start Time of the action
   * @return Start time as a unix timestamp
   */ Modifier public BasicType long getStartTime MethodDeclaration /**
   * Get the last update time of the Action when its progress status
   * was updated
   * @return Last Update Time as a unix timestamp
   */ Modifier public BasicType long getLastUpdateTime MethodDeclaration /**
   * Time when the Action completed
   * @return Completion Time as a unix timestamp
   */ Modifier public BasicType long getCompletionTime MethodDeclaration /**
   * Get the current state of the Action
   * @return ActionState
   */ Modifier public ReferenceType ActionState getState MethodDeclaration /**
   * Set the State of the Action
   * @param state ActionState
   */ Modifier public setState FormalParameter ReferenceType ActionState state MethodDeclaration /**
   * Send a ActionEvent to the Action's StateMachine
   * @param event ActionEvent
   * @throws InvalidStateTransitionException
   */ Modifier public handleEvent FormalParameter ReferenceType ActionEvent event InvalidStateTransitionException",0
194,194,"CompilationUnit PackageDeclaration org.apache.ambari.server.orm.dao Import com.google.inject.Inject Import com.google.inject.Provider Import com.google.inject.persist.Transactional Import org.apache.ambari.server.actionmanager.HostRoleStatus Import org.apache.ambari.server.orm.entities.StageEntity Import org.apache.ambari.server.orm.entities.StageEntityPK Import org.apache.ambari.server.utils.StageUtils Import javax.persistence.EntityManager Import javax.persistence.TypedQuery Import java.util.Collection Import java.util.List ClassDeclaration Modifier public StageDAO FieldDeclaration Annotation Inject ReferenceType Provider TypeArgument ReferenceType EntityManager VariableDeclarator entityManagerProvider FieldDeclaration Annotation Inject ReferenceType DaoUtils VariableDeclarator daoUtils MethodDeclaration Modifier public Annotation Transactional ReferenceType StageEntity findByPK FormalParameter ReferenceType StageEntityPK stageEntityPK ReturnStatement MethodInvocation entityManagerProvider MethodInvocation ClassReference ReferenceType StageEntity MemberReference stageEntityPK find get MethodDeclaration Modifier public BasicType long getLastRequestId LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType Long VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation Literal ""SELECT max(stage.requestId) FROM StageEntity stage"" ClassReference ReferenceType Long createQuery get LocalVariableDeclaration ReferenceType Long VariableDeclarator result MethodInvocation daoUtils MemberReference query selectSingle IfStatement BinaryOperation != MemberReference result Literal null BlockStatement ReturnStatement MemberReference result BlockStatement ReturnStatement Literal 0 End MethodDeclaration Modifier public Annotation Transactional ReferenceType StageEntity findByActionId FormalParameter ReferenceType String actionId LocalVariableDeclaration BasicType long VariableDeclarator ids MethodInvocation StageUtils MemberReference actionId getRequestStage LocalVariableDeclaration ReferenceType StageEntityPK VariableDeclarator pk ClassCreator ReferenceType StageEntityPK StatementExpression MethodInvocation pk MemberReference ArraySelector Literal 0 ids setRequestId StatementExpression MethodInvocation pk MemberReference ArraySelector Literal 1 ids setStageId ReturnStatement MethodInvocation MemberReference pk findByPK MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType StageEntity findByRequestId FormalParameter BasicType long requestId LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType StageEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + BinaryOperation + BinaryOperation + Literal ""SELECT stage "" Literal ""FROM StageEntity stage "" Literal ""WHERE stage.requestId=?1 "" Literal ""ORDER BY stage.stageId"" ClassReference ReferenceType StageEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference requestId selectList MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType StageEntity findByCommandStatuses FormalParameter ReferenceType Collection TypeArgument ReferenceType HostRoleStatus statuses LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType StageEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation BinaryOperation + BinaryOperation + BinaryOperation + Literal ""SELECT stage "" Literal ""FROM StageEntity stage WHERE stage.stageId IN (SELECT hrce.stageId FROM "" Literal ""HostRoleCommandEntity hrce WHERE stage.requestId = hrce.requestId and hrce.status IN ?1 ) "" Literal ""ORDER BY stage.requestId, stage.stageId"" ClassReference ReferenceType StageEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query MemberReference statuses selectList MethodDeclaration Modifier public Annotation Transactional create FormalParameter ReferenceType StageEntity stageEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference stageEntity persist get MethodDeclaration Modifier public Annotation Transactional ReferenceType StageEntity merge FormalParameter ReferenceType StageEntity stageEntity ReturnStatement MethodInvocation entityManagerProvider MethodInvocation MemberReference stageEntity merge get MethodDeclaration Modifier public Annotation Transactional remove FormalParameter ReferenceType StageEntity stageEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MethodInvocation MemberReference stageEntity merge remove get MethodDeclaration Modifier public Annotation Transactional removeByPK FormalParameter ReferenceType StageEntityPK stageEntityPK StatementExpression MethodInvocation MethodInvocation MemberReference stageEntityPK findByPK remove",1
268,268,,0
129,129,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.entities Import java.io.Serializable Import javax.persistence.Column Import javax.persistence.Id ClassDeclaration Modifier public Annotation SuppressWarnings Literal ""serial"" /**
 * @author ncole
 *
 */ ComponentConfigMappingEntityPK FieldDeclaration Modifier private ReferenceType Long VariableDeclarator clusterId FieldDeclaration Modifier private ReferenceType String VariableDeclarator serviceName FieldDeclaration Modifier private ReferenceType String VariableDeclarator componentName FieldDeclaration Modifier private ReferenceType String VariableDeclarator configType MethodDeclaration Modifier public Annotation Id Annotation Column ElementValuePair name Literal ""cluster_id"" ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair nullable Literal false ElementValuePair length Literal 10 ReferenceType Long getClusterId ReturnStatement MemberReference clusterId MethodDeclaration Modifier public setClusterId FormalParameter ReferenceType Long clusterId StatementExpression Assignment This MemberReference clusterId MemberReference clusterId = MethodDeclaration Modifier public Annotation Id Annotation Column ElementValuePair name Literal ""service_name"" ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair nullable Literal false ReferenceType String getServiceName ReturnStatement MemberReference serviceName MethodDeclaration Modifier public setServiceName FormalParameter ReferenceType String serviceName StatementExpression Assignment This MemberReference serviceName MemberReference serviceName = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""component_name"" ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair nullable Literal false Annotation Id ReferenceType String getComponentName ReturnStatement MemberReference componentName MethodDeclaration Modifier public setComponentName FormalParameter ReferenceType String name StatementExpression Assignment MemberReference componentName MemberReference name = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""config_type"" ElementValuePair insertable Literal true ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Id ReferenceType String getConfigType ReturnStatement MemberReference configType MethodDeclaration Modifier public setConfigType FormalParameter ReferenceType String type StatementExpression Assignment MemberReference configType MemberReference type = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType ComponentConfigMappingEntityPK VariableDeclarator that Cast ReferenceType ComponentConfigMappingEntityPK MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation ! clusterId MemberReference that clusterId equals BinaryOperation != MemberReference that clusterId Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation ! componentName MemberReference that componentName equals BinaryOperation != MemberReference that componentName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation ! serviceName MemberReference that serviceName equals BinaryOperation != MemberReference that serviceName Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation clusterId intValue Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation serviceName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation componentName hashCode Literal 0 = ReturnStatement MemberReference result ReferenceType Serializable",0
158,158,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server ClassDeclaration Modifier public Annotation SuppressWarnings Literal ""serial"" HostNotFoundException ConstructorDeclaration Modifier public HostNotFoundException FormalParameter ReferenceType String hostname StatementExpression SuperConstructorInvocation BinaryOperation + Literal ""Host not found, hostname="" MemberReference hostname ConstructorDeclaration Modifier public HostNotFoundException FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String hostname StatementExpression SuperConstructorInvocation BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Host not found, cluster="" MemberReference clusterName Literal "", hostname="" MemberReference hostname ReferenceType ObjectNotFoundException",0
387,387,,1
247,247,,0
104,104,"CompilationUnit PackageDeclaration org.apache.ambari.server.api.services Import org.springframework.security.core.context.SecurityContextHolder Import javax.ws.rs.GET Import javax.ws.rs.Path Import javax.ws.rs.Produces Import javax.ws.rs.core.Response ClassDeclaration Modifier public Annotation Path Literal ""/logout"" /**
 * Service performing logout of current user
 */ LogoutService MethodDeclaration Modifier public Annotation GET Annotation Produces Literal ""text/plain"" ReferenceType Response performLogout StatementExpression MethodInvocation SecurityContextHolder clearContext ReturnStatement MethodInvocation Response MethodInvocation build MemberReference Response.Status OK status",0
0,0,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.ganglia ClassDeclaration Modifier public /**
 * Data structure for temporal data returned from Ganglia Web.
 */ GangliaMetric FieldDeclaration /**
   * The name.
   */ Modifier private ReferenceType String VariableDeclarator ds_name FieldDeclaration /**
   * The ganglia cluster name.
   */ Modifier private ReferenceType String VariableDeclarator cluster_name FieldDeclaration /**
   * The graph type.
   */ Modifier private ReferenceType String VariableDeclarator graph_type FieldDeclaration /**
   * The host name.
   */ Modifier private ReferenceType String VariableDeclarator host_name FieldDeclaration /**
   * The metric name.
   */ Modifier private ReferenceType String VariableDeclarator metric_name FieldDeclaration /**
   * The temporal data points.
   */ Modifier private ReferenceType Number VariableDeclarator datapoints MethodDeclaration Modifier public ReferenceType String getDs_name ReturnStatement MemberReference ds_name MethodDeclaration Modifier public setDs_name FormalParameter ReferenceType String ds_name StatementExpression Assignment This MemberReference ds_name MemberReference ds_name = MethodDeclaration Modifier public ReferenceType String getCluster_name ReturnStatement MemberReference cluster_name MethodDeclaration Modifier public setCluster_name FormalParameter ReferenceType String cluster_name StatementExpression Assignment This MemberReference cluster_name MemberReference cluster_name = MethodDeclaration Modifier public ReferenceType String getGraph_type ReturnStatement MemberReference graph_type MethodDeclaration Modifier public setGraph_type FormalParameter ReferenceType String graph_type StatementExpression Assignment This MemberReference graph_type MemberReference graph_type = MethodDeclaration Modifier public ReferenceType String getHost_name ReturnStatement MemberReference host_name MethodDeclaration Modifier public setHost_name FormalParameter ReferenceType String host_name StatementExpression Assignment This MemberReference host_name MemberReference host_name = MethodDeclaration Modifier public ReferenceType String getMetric_name ReturnStatement MemberReference metric_name MethodDeclaration Modifier public setMetric_name FormalParameter ReferenceType String metric_name StatementExpression Assignment This MemberReference metric_name MemberReference metric_name = MethodDeclaration Modifier public ReferenceType Number getDatapoints ReturnStatement MemberReference datapoints MethodDeclaration Modifier public setDatapoints FormalParameter ReferenceType Number datapoints StatementExpression Assignment This MemberReference datapoints MemberReference datapoints = MethodDeclaration Modifier public Annotation Override ReferenceType String toString LocalVariableDeclaration ReferenceType StringBuilder VariableDeclarator stringBuilder ClassCreator ReferenceType StringBuilder StatementExpression MethodInvocation stringBuilder Literal ""\n"" append StatementExpression MethodInvocation stringBuilder Literal ""name="" append StatementExpression MethodInvocation stringBuilder MemberReference ds_name append StatementExpression MethodInvocation stringBuilder Literal ""\n"" append StatementExpression MethodInvocation stringBuilder Literal ""cluster name="" append StatementExpression MethodInvocation stringBuilder MemberReference cluster_name append StatementExpression MethodInvocation stringBuilder Literal ""\n"" append StatementExpression MethodInvocation stringBuilder Literal ""graph type="" append StatementExpression MethodInvocation stringBuilder MemberReference graph_type append StatementExpression MethodInvocation stringBuilder Literal ""\n"" append StatementExpression MethodInvocation stringBuilder Literal ""host name="" append StatementExpression MethodInvocation stringBuilder MemberReference host_name append StatementExpression MethodInvocation stringBuilder Literal ""\n"" append StatementExpression MethodInvocation stringBuilder Literal ""api name="" append StatementExpression MethodInvocation stringBuilder MemberReference metric_name append StatementExpression MethodInvocation stringBuilder Literal ""\n"" append StatementExpression MethodInvocation stringBuilder Literal ""datapoints (value/timestamp):"" append StatementExpression MethodInvocation stringBuilder Literal ""\n"" append LocalVariableDeclaration BasicType boolean VariableDeclarator first Literal true StatementExpression MethodInvocation stringBuilder Literal ""["" append ForStatement EnhancedForControl VariableDeclaration ReferenceType Number VariableDeclarator m MemberReference datapoints BlockStatement IfStatement MemberReference ! first BlockStatement StatementExpression MethodInvocation stringBuilder Literal "","" append End StatementExpression MethodInvocation stringBuilder Literal ""["" append StatementExpression MethodInvocation stringBuilder MemberReference ArraySelector Literal 0 m append StatementExpression MethodInvocation stringBuilder Literal "","" append StatementExpression MethodInvocation stringBuilder MemberReference ArraySelector Literal 1 MethodInvocation longValue m append StatementExpression MethodInvocation stringBuilder Literal ""]"" append StatementExpression Assignment MemberReference first Literal false = End StatementExpression MethodInvocation stringBuilder Literal ""]"" append ReturnStatement MethodInvocation stringBuilder toString",0
278,278,,1
100,100,CompilationUnit PackageDeclaration org.apache.ambari.server.orm.dao Import com.google.inject.Inject Import com.google.inject.Provider Import com.google.inject.persist.Transactional Import org.apache.ambari.server.orm.entities.ExecutionCommandEntity Import javax.persistence.EntityManager ClassDeclaration Modifier public ExecutionCommandDAO FieldDeclaration Annotation Inject ReferenceType Provider TypeArgument ReferenceType EntityManager VariableDeclarator entityManagerProvider MethodDeclaration Modifier public Annotation Transactional ReferenceType ExecutionCommandEntity findByPK FormalParameter BasicType long taskId ReturnStatement MethodInvocation entityManagerProvider MethodInvocation ClassReference ReferenceType ExecutionCommandEntity MemberReference taskId find get MethodDeclaration Modifier public Annotation Transactional create FormalParameter ReferenceType ExecutionCommandEntity stageEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference stageEntity persist get MethodDeclaration Modifier public Annotation Transactional ReferenceType ExecutionCommandEntity merge FormalParameter ReferenceType ExecutionCommandEntity stageEntity ReturnStatement MethodInvocation entityManagerProvider MethodInvocation MemberReference stageEntity merge get MethodDeclaration Modifier public Annotation Transactional remove FormalParameter ReferenceType ExecutionCommandEntity stageEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MethodInvocation MemberReference stageEntity merge remove get MethodDeclaration Modifier public Annotation Transactional removeByPK FormalParameter BasicType int taskId StatementExpression MethodInvocation MethodInvocation MemberReference taskId findByPK remove,0
65,65,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server EnumDeclaration Modifier public Role EnumBody EnumConstantDeclaration ZOOKEEPER_SERVER EnumConstantDeclaration ZOOKEEPER_CLIENT EnumConstantDeclaration NAMENODE EnumConstantDeclaration NAMENODE_SERVICE_CHECK EnumConstantDeclaration DATANODE EnumConstantDeclaration HDFS_SERVICE_CHECK EnumConstantDeclaration SECONDARY_NAMENODE EnumConstantDeclaration HDFS_CLIENT EnumConstantDeclaration HBASE_MASTER EnumConstantDeclaration HBASE_REGIONSERVER EnumConstantDeclaration HBASE_CLIENT EnumConstantDeclaration JOBTRACKER EnumConstantDeclaration TASKTRACKER EnumConstantDeclaration MAPREDUCE_CLIENT EnumConstantDeclaration JAVA_JCE EnumConstantDeclaration KERBEROS_SERVER EnumConstantDeclaration KERBEROS_CLIENT EnumConstantDeclaration KERBEROS_ADMIN_CLIENT EnumConstantDeclaration HADOOP_CLIENT EnumConstantDeclaration JOBTRACKER_SERVICE_CHECK EnumConstantDeclaration MAPREDUCE_SERVICE_CHECK EnumConstantDeclaration ZOOKEEPER_SERVICE_CHECK EnumConstantDeclaration ZOOKEEPER_QUORUM_SERVICE_CHECK EnumConstantDeclaration HBASE_SERVICE_CHECK EnumConstantDeclaration MYSQL_SERVER EnumConstantDeclaration HIVE_SERVER EnumConstantDeclaration HIVE_METASTORE EnumConstantDeclaration HIVE_CLIENT EnumConstantDeclaration HIVE_SERVICE_CHECK EnumConstantDeclaration HCAT EnumConstantDeclaration HCAT_SERVICE_CHECK EnumConstantDeclaration OOZIE_CLIENT EnumConstantDeclaration OOZIE_SERVER EnumConstantDeclaration OOZIE_SERVICE_CHECK EnumConstantDeclaration PIG EnumConstantDeclaration PIG_SERVICE_CHECK EnumConstantDeclaration SQOOP EnumConstantDeclaration SQOOP_SERVICE_CHECK EnumConstantDeclaration WEBHCAT_SERVER EnumConstantDeclaration WEBHCAT_SERVICE_CHECK EnumConstantDeclaration DASHBOARD EnumConstantDeclaration DASHBOARD_SERVICE_CHECK EnumConstantDeclaration NAGIOS_SERVER EnumConstantDeclaration GANGLIA_SERVER EnumConstantDeclaration GANGLIA_MONITOR EnumConstantDeclaration GMOND_SERVICE_CHECK EnumConstantDeclaration GMETAD_SERVICE_CHECK EnumConstantDeclaration MONTOR_WEBSERVER EnumConstantDeclaration DECOMMISSION_DATANODE",0
191,191,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.internal Import org.apache.ambari.server.controller.spi.Predicate Import org.apache.ambari.server.controller.spi.Request Import org.apache.ambari.server.controller.spi.Resource ClassDeclaration Modifier public /**
 * Resource provider event used to update resource provider observers.
 */ ResourceProviderEvent FieldDeclaration Modifier private final ReferenceType Resource ReferenceType Type VariableDeclarator resourceType FieldDeclaration Modifier private final ReferenceType Type VariableDeclarator type FieldDeclaration Modifier private final ReferenceType Request VariableDeclarator request FieldDeclaration Modifier private final ReferenceType Predicate VariableDeclarator predicate ConstructorDeclaration Modifier public ResourceProviderEvent FormalParameter ReferenceType Resource ReferenceType Type resourceType FormalParameter ReferenceType Type type FormalParameter ReferenceType Request request FormalParameter ReferenceType Predicate predicate StatementExpression Assignment This MemberReference resourceType MemberReference resourceType = StatementExpression Assignment This MemberReference type MemberReference type = StatementExpression Assignment This MemberReference request MemberReference request = StatementExpression Assignment This MemberReference predicate MemberReference predicate = MethodDeclaration /**
   * Get the associated resource type.
   *
   * @return the resource type
   */ Modifier public ReferenceType Resource ReferenceType Type getResourceType ReturnStatement MemberReference resourceType MethodDeclaration /**
   * Get the event type.
   *
   * @return the event type
   */ Modifier public ReferenceType Type getType ReturnStatement MemberReference type MethodDeclaration /**
   * Get the request object that was used for the operation that generated this event.
   *
   * @return the request object
   */ Modifier public ReferenceType Request getRequest ReturnStatement MemberReference request MethodDeclaration /**
   * Get the predicate object that was used for the operation that generated this event.
   *
   * @return the predicate object
   */ Modifier public ReferenceType Predicate getPredicate ReturnStatement MemberReference predicate EnumDeclaration Modifier public Type EnumBody EnumConstantDeclaration Create EnumConstantDeclaration Update EnumConstantDeclaration Delete",0
109,109,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.svccomphost Import java.util  Import java.util.Map.Entry Import java.util.concurrent.locks.Lock Import java.util.concurrent.locks.ReadWriteLock Import java.util.concurrent.locks.ReentrantReadWriteLock Import org.apache.ambari.server.AmbariException Import org.apache.ambari.server.controller.ServiceComponentHostResponse Import org.apache.ambari.server.orm.dao.HostComponentConfigMappingDAO Import org.apache.ambari.server.orm.dao.HostComponentDesiredConfigMappingDAO Import org.apache.ambari.server.orm.dao.HostComponentDesiredStateDAO Import org.apache.ambari.server.orm.dao.HostComponentStateDAO Import org.apache.ambari.server.orm.dao.HostDAO Import org.apache.ambari.server.orm.dao.ServiceComponentDesiredStateDAO Import org.apache.ambari.server.orm.entities.HostComponentConfigMappingEntity Import org.apache.ambari.server.orm.entities.HostComponentDesiredConfigMappingEntity Import org.apache.ambari.server.orm.entities.HostComponentDesiredStateEntity Import org.apache.ambari.server.orm.entities.HostComponentDesiredStateEntityPK Import org.apache.ambari.server.orm.entities.HostComponentStateEntity Import org.apache.ambari.server.orm.entities.HostComponentStateEntityPK Import org.apache.ambari.server.orm.entities.HostEntity Import org.apache.ambari.server.orm.entities.ServiceComponentDesiredStateEntity Import org.apache.ambari.server.orm.entities.ServiceComponentDesiredStateEntityPK Import org.apache.ambari.server.state.Cluster Import org.apache.ambari.server.state.Clusters Import org.apache.ambari.server.state.Config Import org.apache.ambari.server.state.Host Import org.apache.ambari.server.state.ServiceComponent Import org.apache.ambari.server.state.ServiceComponentHost Import org.apache.ambari.server.state.ServiceComponentHostEvent Import org.apache.ambari.server.state.ServiceComponentHostEventType Import org.apache.ambari.server.state.StackId Import org.apache.ambari.server.state.State Import org.apache.ambari.server.state.fsm.InvalidStateTransitionException Import org.apache.ambari.server.state.fsm.SingleArcTransition Import org.apache.ambari.server.state.fsm.StateMachine Import org.apache.ambari.server.state.fsm.StateMachineFactory Import org.slf4j.Logger Import org.slf4j.LoggerFactory Import com.google.gson.Gson Import com.google.inject.Inject Import com.google.inject.Injector Import com.google.inject.assistedinject.Assisted Import com.google.inject.assistedinject.AssistedInject Import com.google.inject.persist.Transactional ClassDeclaration Modifier public ServiceComponentHostImpl FieldDeclaration Modifier private final static ReferenceType Logger VariableDeclarator LOG MethodInvocation LoggerFactory ClassReference ReferenceType ServiceComponentHostImpl getLogger FieldDeclaration Modifier private final ReferenceType Lock VariableDeclarator readLock FieldDeclaration Modifier private final ReferenceType Lock VariableDeclarator writeLock FieldDeclaration Modifier private final ReferenceType ServiceComponent VariableDeclarator serviceComponent FieldDeclaration Modifier private final ReferenceType Host VariableDeclarator host FieldDeclaration Modifier private BasicType boolean VariableDeclarator persisted Literal false FieldDeclaration Annotation Inject ReferenceType Gson VariableDeclarator gson FieldDeclaration Annotation Inject ReferenceType HostComponentStateDAO VariableDeclarator hostComponentStateDAO FieldDeclaration Annotation Inject ReferenceType HostComponentDesiredStateDAO VariableDeclarator hostComponentDesiredStateDAO FieldDeclaration Annotation Inject ReferenceType HostDAO VariableDeclarator hostDAO FieldDeclaration Annotation Inject ReferenceType ServiceComponentDesiredStateDAO VariableDeclarator serviceComponentDesiredStateDAO FieldDeclaration Annotation Inject ReferenceType Clusters VariableDeclarator clusters FieldDeclaration Annotation Inject ReferenceType HostComponentDesiredConfigMappingDAO VariableDeclarator hostComponentDesiredConfigMappingDAO FieldDeclaration Annotation Inject ReferenceType HostComponentConfigMappingDAO VariableDeclarator hostComponentConfigMappingDAO FieldDeclaration Modifier private ReferenceType HostComponentStateEntity VariableDeclarator stateEntity FieldDeclaration Modifier private ReferenceType HostComponentDesiredStateEntity VariableDeclarator desiredStateEntity FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator configs FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator desiredConfigs FieldDeclaration Modifier private BasicType long VariableDeclarator lastOpStartTime FieldDeclaration Modifier private BasicType long VariableDeclarator lastOpEndTime FieldDeclaration Modifier private BasicType long VariableDeclarator lastOpLastUpdateTime FieldDeclaration Modifier private final static ReferenceType StateMachineFactory TypeArgument ReferenceType ServiceComponentHostImpl TypeArgument ReferenceType State TypeArgument ReferenceType ServiceComponentHostEventType TypeArgument ReferenceType ServiceComponentHostEvent VariableDeclarator daemonStateMachineFactory ClassCreator MethodInvocation MemberReference State INIT MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_INSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State INSTALLING MemberReference State INSTALLED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_SUCCEEDED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State INSTALLED MemberReference State INSTALLED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_SUCCEEDED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State INSTALLING MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_IN_PROGRESS ClassCreator ReferenceType ServiceComponentHostOpInProgressTransition addTransition MethodInvocation MemberReference State INSTALLING MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_INSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State INSTALLING MemberReference State INSTALL_FAILED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_FAILED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State INSTALL_FAILED MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_RESTART ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State INSTALL_FAILED MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_INSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State INSTALLED MemberReference State STARTING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_START ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State INSTALLED MemberReference State UNINSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_UNINSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State INSTALLED MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_INSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State INSTALLED MemberReference State STOPPING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_STOP ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State STARTING MemberReference State STARTING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_IN_PROGRESS ClassCreator ReferenceType ServiceComponentHostOpInProgressTransition addTransition MethodInvocation MemberReference State STARTING MemberReference State STARTING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_START ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State STARTING MemberReference State STARTED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_SUCCEEDED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State STARTING MemberReference State START_FAILED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_FAILED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State START_FAILED MemberReference State STARTING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_RESTART ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State START_FAILED MemberReference State STARTING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_START ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State START_FAILED MemberReference State STOPPING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_STOP ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State STARTED MemberReference State STOPPING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_STOP ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State STOPPING MemberReference State STOPPING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_IN_PROGRESS ClassCreator ReferenceType ServiceComponentHostOpInProgressTransition addTransition MethodInvocation MemberReference State STOPPING MemberReference State INSTALLED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_SUCCEEDED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State STOPPING MemberReference State STOP_FAILED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_FAILED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State STOP_FAILED MemberReference State STOPPING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_RESTART ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State STOP_FAILED MemberReference State STOPPING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_STOP ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State UNINSTALLING MemberReference State UNINSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_IN_PROGRESS ClassCreator ReferenceType ServiceComponentHostOpInProgressTransition addTransition MethodInvocation MemberReference State UNINSTALLING MemberReference State UNINSTALLED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_SUCCEEDED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State UNINSTALLING MemberReference State UNINSTALL_FAILED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_FAILED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State UNINSTALL_FAILED MemberReference State UNINSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_RESTART ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State UNINSTALL_FAILED MemberReference State UNINSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_UNINSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State UNINSTALLED MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_INSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State UNINSTALLED MemberReference State WIPING_OUT MemberReference ServiceComponentHostEventType HOST_SVCCOMP_WIPEOUT ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State WIPING_OUT MemberReference State WIPING_OUT MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_IN_PROGRESS ClassCreator ReferenceType ServiceComponentHostOpInProgressTransition addTransition MethodInvocation MemberReference State WIPING_OUT MemberReference State INIT MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_SUCCEEDED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State WIPING_OUT MemberReference State WIPEOUT_FAILED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_FAILED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State WIPEOUT_FAILED MemberReference State WIPING_OUT MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_RESTART ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State WIPEOUT_FAILED MemberReference State WIPING_OUT MemberReference ServiceComponentHostEventType HOST_SVCCOMP_WIPEOUT ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation installTopology ReferenceType StateMachineFactory TypeArgument ReferenceType ServiceComponentHostImpl TypeArgument ReferenceType State TypeArgument ReferenceType ServiceComponentHostEventType TypeArgument ReferenceType ServiceComponentHostEvent MemberReference State INIT FieldDeclaration Modifier private final static ReferenceType StateMachineFactory TypeArgument ReferenceType ServiceComponentHostImpl TypeArgument ReferenceType State TypeArgument ReferenceType ServiceComponentHostEventType TypeArgument ReferenceType ServiceComponentHostEvent VariableDeclarator clientStateMachineFactory ClassCreator MethodInvocation MemberReference State INIT MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_INSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State INSTALLING MemberReference State INSTALLED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_SUCCEEDED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State INSTALLED MemberReference State INSTALLED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_SUCCEEDED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State INSTALLING MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_INSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State INSTALLING MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_IN_PROGRESS ClassCreator ReferenceType ServiceComponentHostOpInProgressTransition addTransition MethodInvocation MemberReference State INSTALLING MemberReference State INSTALL_FAILED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_FAILED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State INSTALL_FAILED MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_RESTART ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State INSTALL_FAILED MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_INSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State INSTALLED MemberReference State UNINSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_UNINSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State INSTALLED MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_INSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State UNINSTALLING MemberReference State UNINSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_IN_PROGRESS ClassCreator ReferenceType ServiceComponentHostOpInProgressTransition addTransition MethodInvocation MemberReference State UNINSTALLING MemberReference State UNINSTALLED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_SUCCEEDED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State UNINSTALLING MemberReference State UNINSTALL_FAILED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_FAILED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State UNINSTALL_FAILED MemberReference State UNINSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_RESTART ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State UNINSTALL_FAILED MemberReference State UNINSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_UNINSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State UNINSTALLED MemberReference State INSTALLING MemberReference ServiceComponentHostEventType HOST_SVCCOMP_INSTALL ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State UNINSTALLED MemberReference State WIPING_OUT MemberReference ServiceComponentHostEventType HOST_SVCCOMP_WIPEOUT ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State WIPING_OUT MemberReference State WIPING_OUT MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_IN_PROGRESS ClassCreator ReferenceType ServiceComponentHostOpInProgressTransition addTransition MethodInvocation MemberReference State WIPING_OUT MemberReference State INIT MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_SUCCEEDED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State WIPING_OUT MemberReference State WIPEOUT_FAILED MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_FAILED ClassCreator ReferenceType ServiceComponentHostOpCompletedTransition addTransition MethodInvocation MemberReference State WIPEOUT_FAILED MemberReference State WIPING_OUT MemberReference ServiceComponentHostEventType HOST_SVCCOMP_OP_RESTART ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation MemberReference State WIPEOUT_FAILED MemberReference State WIPING_OUT MemberReference ServiceComponentHostEventType HOST_SVCCOMP_WIPEOUT ClassCreator ReferenceType ServiceComponentHostOpStartedTransition addTransition MethodInvocation installTopology ReferenceType StateMachineFactory TypeArgument ReferenceType ServiceComponentHostImpl TypeArgument ReferenceType State TypeArgument ReferenceType ServiceComponentHostEventType TypeArgument ReferenceType ServiceComponentHostEvent MemberReference State INIT FieldDeclaration Modifier private final ReferenceType StateMachine TypeArgument ReferenceType State TypeArgument ReferenceType ServiceComponentHostEventType TypeArgument ReferenceType ServiceComponentHostEvent VariableDeclarator stateMachine ClassDeclaration Modifier static ServiceComponentHostOpCompletedTransition MethodDeclaration Modifier public Annotation Override transition FormalParameter ReferenceType ServiceComponentHostImpl impl FormalParameter ReferenceType ServiceComponentHostEvent event StatementExpression MethodInvocation impl MethodInvocation event getType MethodInvocation event getOpTimestamp updateLastOpInfo ReferenceType SingleArcTransition TypeArgument ReferenceType ServiceComponentHostImpl TypeArgument ReferenceType ServiceComponentHostEvent ClassDeclaration Modifier static ServiceComponentHostOpStartedTransition MethodDeclaration Modifier public Annotation Override transition FormalParameter ReferenceType ServiceComponentHostImpl impl FormalParameter ReferenceType ServiceComponentHostEvent event StatementExpression MethodInvocation impl MethodInvocation event getType MethodInvocation event getOpTimestamp updateLastOpInfo IfStatement BinaryOperation == MethodInvocation event getType MemberReference ServiceComponentHostEventType HOST_SVCCOMP_START BlockStatement LocalVariableDeclaration ReferenceType ServiceComponentHostStartEvent VariableDeclarator e Cast ReferenceType ServiceComponentHostStartEvent MemberReference event IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + Literal ""Updating live state configs during START event"" Literal "", updated configs set size="" MethodInvocation e MethodInvocation size getConfigs debug End StatementExpression MethodInvocation impl MethodInvocation e getConfigs setConfigs IfStatement BinaryOperation == MethodInvocation event getType MemberReference ServiceComponentHostEventType HOST_SVCCOMP_INSTALL BlockStatement LocalVariableDeclaration ReferenceType ServiceComponentHostInstallEvent VariableDeclarator e Cast ReferenceType ServiceComponentHostInstallEvent MemberReference event IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + Literal ""Updating live stack version during INSTALL event"" Literal "", new stack verion="" MethodInvocation e getStackId debug End StatementExpression MethodInvocation impl ClassCreator ReferenceType StackId MethodInvocation e getStackId setStackVersion End End ReferenceType SingleArcTransition TypeArgument ReferenceType ServiceComponentHostImpl TypeArgument ReferenceType ServiceComponentHostEvent ClassDeclaration Modifier static ServiceComponentHostOpInProgressTransition MethodDeclaration Modifier public Annotation Override transition FormalParameter ReferenceType ServiceComponentHostImpl impl FormalParameter ReferenceType ServiceComponentHostEvent event StatementExpression MethodInvocation impl MethodInvocation event getType MethodInvocation event getOpTimestamp updateLastOpInfo ReferenceType SingleArcTransition TypeArgument ReferenceType ServiceComponentHostImpl TypeArgument ReferenceType ServiceComponentHostEvent MethodDeclaration Modifier private resetLastOpInfo TryStatement StatementExpression MethodInvocation writeLock lock StatementExpression MethodInvocation Literal - 1 setLastOpStartTime StatementExpression MethodInvocation Literal - 1 setLastOpLastUpdateTime StatementExpression MethodInvocation Literal - 1 setLastOpEndTime StatementExpression MethodInvocation writeLock unlock MethodDeclaration Modifier private updateLastOpInfo FormalParameter ReferenceType ServiceComponentHostEventType eventType FormalParameter BasicType long time TryStatement StatementExpression MethodInvocation writeLock lock SwitchStatement MemberReference eventType SwitchStatementCase HOST_SVCCOMP_INSTALL HOST_SVCCOMP_START HOST_SVCCOMP_STOP HOST_SVCCOMP_UNINSTALL HOST_SVCCOMP_WIPEOUT HOST_SVCCOMP_OP_RESTART StatementExpression MethodInvocation resetLastOpInfo StatementExpression MethodInvocation MemberReference time setLastOpStartTime BreakStatement SwitchStatementCase HOST_SVCCOMP_OP_FAILED HOST_SVCCOMP_OP_SUCCEEDED StatementExpression MethodInvocation MemberReference time setLastOpLastUpdateTime StatementExpression MethodInvocation MemberReference time setLastOpEndTime BreakStatement SwitchStatementCase HOST_SVCCOMP_OP_IN_PROGRESS StatementExpression MethodInvocation MemberReference time setLastOpLastUpdateTime BreakStatement End StatementExpression MethodInvocation writeLock unlock ConstructorDeclaration Modifier public Annotation AssistedInject ServiceComponentHostImpl FormalParameter Annotation Assisted ReferenceType ServiceComponent serviceComponent FormalParameter Annotation Assisted ReferenceType String hostName FormalParameter Annotation Assisted BasicType boolean isClient FormalParameter ReferenceType Injector injector StatementExpression MethodInvocation injector This injectMembers IfStatement MemberReference isClient BlockStatement StatementExpression Assignment This MemberReference stateMachine MethodInvocation clientStateMachineFactory This make = BlockStatement StatementExpression Assignment This MemberReference stateMachine MethodInvocation daemonStateMachineFactory This make = End LocalVariableDeclaration ReferenceType ReadWriteLock VariableDeclarator rwLock ClassCreator ReferenceType ReentrantReadWriteLock StatementExpression Assignment This MemberReference readLock MethodInvocation rwLock readLock = StatementExpression Assignment This MemberReference writeLock MethodInvocation rwLock writeLock = StatementExpression Assignment This MemberReference serviceComponent MemberReference serviceComponent = StatementExpression Assignment MemberReference stateEntity ClassCreator ReferenceType HostComponentStateEntity = StatementExpression MethodInvocation stateEntity MethodInvocation serviceComponent getClusterId setClusterId StatementExpression MethodInvocation stateEntity MethodInvocation serviceComponent getName setComponentName StatementExpression MethodInvocation stateEntity MethodInvocation serviceComponent getServiceName setServiceName StatementExpression MethodInvocation stateEntity MemberReference hostName setHostName StatementExpression MethodInvocation stateEntity MethodInvocation stateMachine getCurrentState setCurrentState StatementExpression MethodInvocation stateEntity MethodInvocation gson ClassCreator ReferenceType StackId toJson setCurrentStackVersion StatementExpression Assignment MemberReference desiredStateEntity ClassCreator ReferenceType HostComponentDesiredStateEntity = StatementExpression MethodInvocation desiredStateEntity MethodInvocation serviceComponent getClusterId setClusterId StatementExpression MethodInvocation desiredStateEntity MethodInvocation serviceComponent getName setComponentName StatementExpression MethodInvocation desiredStateEntity MethodInvocation serviceComponent getServiceName setServiceName StatementExpression MethodInvocation desiredStateEntity MemberReference hostName setHostName StatementExpression MethodInvocation desiredStateEntity MemberReference State INIT setDesiredState StatementExpression MethodInvocation desiredStateEntity MethodInvocation gson MethodInvocation serviceComponent getDesiredStackVersion toJson setDesiredStackVersion TryStatement StatementExpression Assignment This MemberReference host MethodInvocation clusters MemberReference hostName getHost = CatchClause CatchClauseParameter AmbariException e StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Host '{}' was not found"" MemberReference hostName error ThrowStatement ClassCreator ReferenceType RuntimeException MemberReference e StatementExpression This MethodInvocation resetLastOpInfo StatementExpression Assignment This MemberReference desiredConfigs ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String = StatementExpression Assignment This MemberReference configs ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String = ConstructorDeclaration Modifier public Annotation AssistedInject ServiceComponentHostImpl FormalParameter Annotation Assisted ReferenceType ServiceComponent serviceComponent FormalParameter Annotation Assisted ReferenceType HostComponentStateEntity stateEntity FormalParameter Annotation Assisted ReferenceType HostComponentDesiredStateEntity desiredStateEntity FormalParameter ReferenceType Injector injector StatementExpression MethodInvocation injector This injectMembers LocalVariableDeclaration ReferenceType ReadWriteLock VariableDeclarator rwLock ClassCreator ReferenceType ReentrantReadWriteLock StatementExpression Assignment This MemberReference readLock MethodInvocation rwLock readLock = StatementExpression Assignment This MemberReference writeLock MethodInvocation rwLock writeLock = StatementExpression Assignment This MemberReference serviceComponent MemberReference serviceComponent = StatementExpression Assignment This MemberReference desiredStateEntity MemberReference desiredStateEntity = StatementExpression Assignment This MemberReference stateEntity MemberReference stateEntity = IfStatement MethodInvocation serviceComponent isClientComponent BlockStatement StatementExpression Assignment This MemberReference stateMachine MethodInvocation clientStateMachineFactory This make = BlockStatement StatementExpression Assignment This MemberReference stateMachine MethodInvocation daemonStateMachineFactory This make = End StatementExpression This MemberReference stateMachine MethodInvocation MethodInvocation stateEntity getCurrentState setCurrentState TryStatement StatementExpression Assignment This MemberReference host MethodInvocation clusters MethodInvocation stateEntity getHostName getHost = CatchClause CatchClauseParameter AmbariException e StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Host '{}' was not found "" MethodInvocation stateEntity getHostName error ThrowStatement ClassCreator ReferenceType RuntimeException MemberReference e StatementExpression Assignment MemberReference desiredConfigs ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String = StatementExpression Assignment MemberReference configs ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String = ForStatement EnhancedForControl VariableDeclaration ReferenceType HostComponentDesiredConfigMappingEntity VariableDeclarator entity MethodInvocation desiredStateEntity getHostComponentDesiredConfigMappingEntities BlockStatement StatementExpression MethodInvocation desiredConfigs MethodInvocation entity getConfigType MethodInvocation entity getVersionTag put End StatementExpression Assignment MemberReference persisted Literal true = MethodDeclaration Modifier public Annotation Override ReferenceType State getState TryStatement StatementExpression MethodInvocation readLock lock ReturnStatement MethodInvocation stateMachine getCurrentState StatementExpression MethodInvocation readLock unlock MethodDeclaration Modifier public Annotation Override setState FormalParameter ReferenceType State state TryStatement StatementExpression MethodInvocation writeLock lock StatementExpression MethodInvocation stateMachine MemberReference state setCurrentState StatementExpression MethodInvocation stateEntity MemberReference state setCurrentState StatementExpression MethodInvocation saveIfPersisted StatementExpression MethodInvocation writeLock unlock MethodDeclaration Modifier public Annotation Override Annotation Transactional handleEvent FormalParameter ReferenceType ServiceComponentHostEvent event InvalidStateTransitionException IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Handling ServiceComponentHostEvent event,"" Literal "" eventType="" MethodInvocation event MethodInvocation name getType Literal "", event="" MethodInvocation event toString debug End LocalVariableDeclaration ReferenceType State VariableDeclarator oldState MethodInvocation getState TryStatement StatementExpression MethodInvocation writeLock lock TryStatement StatementExpression MethodInvocation stateMachine MethodInvocation event getType MemberReference event doTransition StatementExpression MethodInvocation stateEntity MethodInvocation stateMachine getCurrentState setCurrentState StatementExpression MethodInvocation saveIfPersisted CatchClause CatchClauseParameter InvalidStateTransitionException e StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Can't handle ServiceComponentHostEvent event at"" Literal "" current state"" Literal "", serviceComponentName="" This MethodInvocation getServiceComponentName Literal "", hostName="" This MethodInvocation getHostName Literal "", currentState="" MemberReference oldState Literal "", eventType="" MethodInvocation event getType Literal "", event="" MemberReference event error ThrowStatement MemberReference e StatementExpression MethodInvocation writeLock unlock IfStatement MethodInvocation ! oldState MethodInvocation getState equals BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""ServiceComponentHost transitioned to a new state"" Literal "", serviceComponentName="" This MethodInvocation getServiceComponentName Literal "", hostName="" This MethodInvocation getHostName Literal "", oldState="" MemberReference oldState Literal "", currentState="" MethodInvocation getState Literal "", eventType="" MethodInvocation event MethodInvocation name getType Literal "", event="" MemberReference event debug End End MethodDeclaration Modifier public Annotation Override ReferenceType String getServiceComponentName ReturnStatement MethodInvocation serviceComponent getName MethodDeclaration Modifier public Annotation Override ReferenceType String getHostName ReturnStatement MethodInvocation host getHostName MethodDeclaration /**
   * @return the lastOpStartTime
   */ Modifier public BasicType long getLastOpStartTime TryStatement StatementExpression MethodInvocation readLock lock ReturnStatement MemberReference lastOpStartTime StatementExpression MethodInvocation readLock unlock MethodDeclaration /**
   * @param lastOpStartTime the lastOpStartTime to set
   */ Modifier public setLastOpStartTime FormalParameter BasicType long lastOpStartTime TryStatement StatementExpression MethodInvocation writeLock lock StatementExpression Assignment This MemberReference lastOpStartTime MemberReference lastOpStartTime = StatementExpression MethodInvocation writeLock unlock MethodDeclaration /**
   * @return the lastOpEndTime
   */ Modifier public BasicType long getLastOpEndTime TryStatement StatementExpression MethodInvocation readLock lock ReturnStatement MemberReference lastOpEndTime StatementExpression MethodInvocation readLock unlock MethodDeclaration /**
   * @param lastOpEndTime the lastOpEndTime to set
   */ Modifier public setLastOpEndTime FormalParameter BasicType long lastOpEndTime TryStatement StatementExpression MethodInvocation writeLock lock StatementExpression Assignment This MemberReference lastOpEndTime MemberReference lastOpEndTime = StatementExpression MethodInvocation writeLock unlock MethodDeclaration /**
   * @return the lastOpLastUpdateTime
   */ Modifier public BasicType long getLastOpLastUpdateTime TryStatement StatementExpression MethodInvocation readLock lock ReturnStatement MemberReference lastOpLastUpdateTime StatementExpression MethodInvocation readLock unlock MethodDeclaration /**
   * @param lastOpLastUpdateTime the lastOpLastUpdateTime to set
   */ Modifier public setLastOpLastUpdateTime FormalParameter BasicType long lastOpLastUpdateTime TryStatement StatementExpression MethodInvocation writeLock lock StatementExpression Assignment This MemberReference lastOpLastUpdateTime MemberReference lastOpLastUpdateTime = StatementExpression MethodInvocation writeLock unlock MethodDeclaration Modifier public Annotation Override BasicType long getClusterId ReturnStatement MethodInvocation serviceComponent getClusterId MethodDeclaration Modifier public Annotation Override ReferenceType String getServiceName ReturnStatement MethodInvocation serviceComponent getServiceName MethodDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getConfigVersions TryStatement StatementExpression MethodInvocation readLock lock IfStatement BinaryOperation != This MemberReference configs Literal null BlockStatement ReturnStatement MethodInvocation Collections MemberReference configs unmodifiableMap BlockStatement ReturnStatement ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String End StatementExpression MethodInvocation readLock unlock MethodDeclaration Modifier public Annotation Override ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config getConfigs AmbariException TryStatement StatementExpression MethodInvocation readLock lock LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator map ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Config LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation getClusterId getClusterById ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator entry MethodInvocation configs entrySet BlockStatement LocalVariableDeclaration ReferenceType Config VariableDeclarator config MethodInvocation cluster MethodInvocation entry getKey MethodInvocation entry getValue getDesiredConfig IfStatement BinaryOperation != Literal null MemberReference config BlockStatement StatementExpression MethodInvocation map MethodInvocation entry getKey MemberReference config put End End ReturnStatement MemberReference map StatementExpression MethodInvocation readLock unlock MethodDeclaration Annotation Transactional setConfigs FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String configs TryStatement StatementExpression MethodInvocation writeLock lock LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator deletedTypes ClassCreator ReferenceType HashSet TypeArgument ReferenceType String ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator type This MemberReference configs MethodInvocation keySet BlockStatement IfStatement MethodInvocation ! configs MemberReference type containsKey BlockStatement StatementExpression MethodInvocation deletedTypes MemberReference type add End End LocalVariableDeclaration BasicType long VariableDeclarator now MethodInvocation Long ClassCreator MethodInvocation getTime ReferenceType java ReferenceType util ReferenceType Date valueOf ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator entry MethodInvocation configs entrySet BlockStatement LocalVariableDeclaration BasicType boolean VariableDeclarator contains Literal false ForStatement EnhancedForControl VariableDeclaration ReferenceType HostComponentConfigMappingEntity VariableDeclarator mappingEntity MethodInvocation stateEntity getHostComponentConfigMappingEntities BlockStatement IfStatement MethodInvocation entry MethodInvocation MethodInvocation mappingEntity getConfigType equals getKey BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Updating live config to ServiceComponentHost"" Literal "", clusterId="" MethodInvocation stateEntity getClusterId Literal "", serviceName="" MethodInvocation stateEntity getServiceName Literal "", componentName="" MethodInvocation stateEntity getComponentName Literal "", hostname="" MethodInvocation stateEntity getHostName Literal "", configType="" MethodInvocation entry getKey Literal "", configVersionTag="" MethodInvocation entry getValue debug End StatementExpression Assignment MemberReference contains Literal true = StatementExpression MethodInvocation mappingEntity MethodInvocation entry getValue setVersionTag StatementExpression MethodInvocation mappingEntity MemberReference now setTimestamp BreakStatement End End IfStatement MemberReference ! contains BlockStatement LocalVariableDeclaration ReferenceType HostComponentConfigMappingEntity VariableDeclarator newEntity ClassCreator ReferenceType HostComponentConfigMappingEntity StatementExpression MethodInvocation newEntity MethodInvocation stateEntity getClusterId setClusterId StatementExpression MethodInvocation newEntity MethodInvocation stateEntity getServiceName setServiceName StatementExpression MethodInvocation newEntity MethodInvocation stateEntity getComponentName setComponentName StatementExpression MethodInvocation newEntity MethodInvocation stateEntity getHostName setHostName StatementExpression MethodInvocation newEntity MethodInvocation entry getKey setConfigType StatementExpression MethodInvocation newEntity MethodInvocation entry getValue setVersionTag StatementExpression MethodInvocation newEntity MemberReference now setTimestamp IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Adding new live config to ServiceComponentHost"" Literal "", clusterId="" MethodInvocation stateEntity getClusterId Literal "", serviceName="" MethodInvocation stateEntity getServiceName Literal "", componentName="" MethodInvocation stateEntity getComponentName Literal "", hostname="" MethodInvocation stateEntity getHostName Literal "", configType="" MethodInvocation entry getKey Literal "", configVersionTag="" MethodInvocation entry getValue debug End StatementExpression MethodInvocation stateEntity MethodInvocation MemberReference newEntity add getHostComponentConfigMappingEntities StatementExpression MethodInvocation newEntity MemberReference stateEntity setHostComponentStateEntity End End IfStatement MethodInvocation ! deletedTypes isEmpty BlockStatement LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType HostComponentConfigMappingEntity VariableDeclarator deleteEntities MethodInvocation hostComponentConfigMappingDAO MethodInvocation stateEntity getClusterId MethodInvocation stateEntity getServiceName MethodInvocation stateEntity getComponentName MethodInvocation stateEntity getHostName MemberReference deletedTypes findByHostComponentAndType ForStatement EnhancedForControl VariableDeclaration ReferenceType HostComponentConfigMappingEntity VariableDeclarator deleteEntity MemberReference deleteEntities BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Deleting live config to ServiceComponentHost"" Literal "", clusterId="" MethodInvocation stateEntity getClusterId Literal "", serviceName="" MethodInvocation stateEntity getServiceName Literal "", componentName="" MethodInvocation stateEntity getComponentName Literal "", hostname="" MethodInvocation stateEntity getHostName Literal "", configType="" MethodInvocation deleteEntity getConfigType Literal "", configVersionTag="" MethodInvocation deleteEntity getVersionTag debug End StatementExpression MethodInvocation stateEntity MethodInvocation MemberReference deleteEntity remove getHostComponentConfigMappingEntities IfStatement MemberReference persisted BlockStatement StatementExpression MethodInvocation hostComponentConfigMappingDAO MemberReference deleteEntity remove End End End StatementExpression Assignment This MemberReference configs MemberReference configs = StatementExpression MethodInvocation saveIfPersisted StatementExpression MethodInvocation writeLock unlock MethodDeclaration Modifier public Annotation Override ReferenceType StackId getStackVersion TryStatement StatementExpression MethodInvocation readLock lock ReturnStatement MethodInvocation gson MethodInvocation stateEntity getCurrentStackVersion ClassReference ReferenceType StackId fromJson StatementExpression MethodInvocation readLock unlock MethodDeclaration Modifier public Annotation Override setStackVersion FormalParameter ReferenceType StackId stackVersion TryStatement StatementExpression MethodInvocation writeLock lock StatementExpression MethodInvocation stateEntity MethodInvocation gson MemberReference stackVersion toJson setCurrentStackVersion StatementExpression MethodInvocation saveIfPersisted StatementExpression MethodInvocation writeLock unlock MethodDeclaration Modifier public Annotation Override ReferenceType State getDesiredState TryStatement StatementExpression MethodInvocation readLock lock ReturnStatement MethodInvocation desiredStateEntity getDesiredState StatementExpression MethodInvocation readLock unlock MethodDeclaration Modifier public Annotation Override setDesiredState FormalParameter ReferenceType State state TryStatement StatementExpression MethodInvocation writeLock lock StatementExpression MethodInvocation desiredStateEntity MemberReference state setDesiredState StatementExpression MethodInvocation saveIfPersisted StatementExpression MethodInvocation writeLock unlock MethodDeclaration Modifier public Annotation Override ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getDesiredConfigVersionsRecursive TryStatement StatementExpression MethodInvocation readLock lock LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator fullDesiredConfigVersions ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator desiredConfs MethodInvocation getDesiredConfigs ForStatement EnhancedForControl VariableDeclaration ReferenceType Config VariableDeclarator c MethodInvocation desiredConfs values BlockStatement StatementExpression MethodInvocation fullDesiredConfigVersions MethodInvocation c getType MethodInvocation c getVersionTag put End ReturnStatement MemberReference fullDesiredConfigVersions StatementExpression MethodInvocation readLock unlock MethodDeclaration Modifier public Annotation Override ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config getDesiredConfigs LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator map ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Config TryStatement StatementExpression MethodInvocation readLock lock ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator entry MethodInvocation desiredConfigs entrySet BlockStatement LocalVariableDeclaration ReferenceType Config VariableDeclarator config MethodInvocation clusters MethodInvocation MethodInvocation entry getKey MethodInvocation entry getValue getDesiredConfig MethodInvocation getClusterId getClusterById IfStatement BinaryOperation != Literal null MemberReference config BlockStatement StatementExpression MethodInvocation map MethodInvocation entry getKey MemberReference config put End End CatchClause CatchClauseParameter AmbariException e ReturnStatement Literal null StatementExpression MethodInvocation readLock unlock LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator compConfigs MethodInvocation serviceComponent getDesiredConfigs ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator entry MethodInvocation compConfigs entrySet BlockStatement IfStatement MethodInvocation ! map MethodInvocation entry getKey containsKey BlockStatement StatementExpression MethodInvocation map MethodInvocation entry getKey MethodInvocation entry getValue put End End ReturnStatement MethodInvocation Collections MemberReference map unmodifiableMap MethodDeclaration Modifier public Annotation Override Annotation Transactional updateDesiredConfigs FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config configs TryStatement StatementExpression MethodInvocation writeLock lock LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator deletedTypes ClassCreator ReferenceType HashSet TypeArgument ReferenceType String ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator type This MemberReference desiredConfigs MethodInvocation keySet BlockStatement IfStatement MethodInvocation ! configs MemberReference type containsKey BlockStatement StatementExpression MethodInvocation deletedTypes MemberReference type add End End ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator entry MethodInvocation configs entrySet BlockStatement LocalVariableDeclaration BasicType boolean VariableDeclarator contains Literal false ForStatement EnhancedForControl VariableDeclaration ReferenceType HostComponentDesiredConfigMappingEntity VariableDeclarator desiredConfigMappingEntity MethodInvocation desiredStateEntity getHostComponentDesiredConfigMappingEntities BlockStatement IfStatement MethodInvocation entry MethodInvocation MethodInvocation desiredConfigMappingEntity getConfigType equals getKey BlockStatement StatementExpression Assignment MemberReference contains Literal true = StatementExpression MethodInvocation desiredConfigMappingEntity MethodInvocation entry MethodInvocation getVersionTag getValue setVersionTag StatementExpression MethodInvocation desiredConfigMappingEntity ClassCreator MethodInvocation getTime ReferenceType Date setTimestamp BreakStatement End End IfStatement MemberReference ! contains BlockStatement LocalVariableDeclaration ReferenceType HostComponentDesiredConfigMappingEntity VariableDeclarator newEntity ClassCreator ReferenceType HostComponentDesiredConfigMappingEntity StatementExpression MethodInvocation newEntity MethodInvocation desiredStateEntity getClusterId setClusterId StatementExpression MethodInvocation newEntity MethodInvocation desiredStateEntity getServiceName setServiceName StatementExpression MethodInvocation newEntity MethodInvocation desiredStateEntity getComponentName setComponentName StatementExpression MethodInvocation newEntity MethodInvocation desiredStateEntity getHostName setHostName StatementExpression MethodInvocation newEntity MethodInvocation entry getKey setConfigType StatementExpression MethodInvocation newEntity MethodInvocation entry MethodInvocation getVersionTag getValue setVersionTag StatementExpression MethodInvocation newEntity ClassCreator MethodInvocation getTime ReferenceType Date setTimestamp StatementExpression MethodInvocation newEntity MemberReference desiredStateEntity setHostComponentDesiredStateEntity StatementExpression MethodInvocation desiredStateEntity MethodInvocation MemberReference newEntity add getHostComponentDesiredConfigMappingEntities End StatementExpression This MemberReference desiredConfigs MethodInvocation MethodInvocation entry getKey MethodInvocation entry MethodInvocation getVersionTag getValue put End IfStatement MethodInvocation ! deletedTypes isEmpty BlockStatement IfStatement MemberReference persisted BlockStatement LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType HostComponentDesiredConfigMappingEntity VariableDeclarator deleteEntities MethodInvocation hostComponentDesiredConfigMappingDAO MethodInvocation stateEntity getClusterId MethodInvocation stateEntity getServiceName MethodInvocation stateEntity getComponentName MethodInvocation stateEntity getHostName MemberReference deletedTypes findByHostComponentAndType ForStatement EnhancedForControl VariableDeclaration ReferenceType HostComponentDesiredConfigMappingEntity VariableDeclarator deleteEntity MemberReference deleteEntities BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Deleting desired config to ServiceComponentHost"" Literal "", clusterId="" MethodInvocation stateEntity getClusterId Literal "", serviceName="" MethodInvocation stateEntity getServiceName Literal "", componentName="" MethodInvocation stateEntity getComponentName Literal "", hostname="" MethodInvocation stateEntity getHostName Literal "", configType="" MethodInvocation deleteEntity getConfigType Literal "", configVersionTag="" MethodInvocation deleteEntity getVersionTag debug End StatementExpression MethodInvocation desiredStateEntity MethodInvocation MemberReference deleteEntity remove getHostComponentDesiredConfigMappingEntities StatementExpression MethodInvocation hostComponentDesiredConfigMappingDAO MemberReference deleteEntity remove End BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator deletedType MemberReference deletedTypes BlockStatement StatementExpression MethodInvocation desiredConfigs MemberReference deletedType remove End End End StatementExpression MethodInvocation saveIfPersisted StatementExpression MethodInvocation writeLock unlock MethodDeclaration Modifier public Annotation Override ReferenceType StackId getDesiredStackVersion TryStatement StatementExpression MethodInvocation readLock lock ReturnStatement MethodInvocation gson MethodInvocation desiredStateEntity getDesiredStackVersion ClassReference ReferenceType StackId fromJson StatementExpression MethodInvocation readLock unlock MethodDeclaration Modifier public Annotation Override setDesiredStackVersion FormalParameter ReferenceType StackId stackVersion TryStatement StatementExpression MethodInvocation writeLock lock StatementExpression MethodInvocation desiredStateEntity MethodInvocation gson MemberReference stackVersion toJson setDesiredStackVersion StatementExpression MethodInvocation saveIfPersisted StatementExpression MethodInvocation writeLock unlock MethodDeclaration Modifier public Annotation Override ReferenceType ServiceComponentHostResponse convertToResponse TryStatement StatementExpression MethodInvocation readLock lock LocalVariableDeclaration ReferenceType ServiceComponentHostResponse VariableDeclarator r ClassCreator ReferenceType ServiceComponentHostResponse MethodInvocation serviceComponent getClusterName MethodInvocation serviceComponent getServiceName MethodInvocation serviceComponent getName MethodInvocation getHostName MemberReference configs MemberReference desiredConfigs MethodInvocation MethodInvocation toString getState MethodInvocation MethodInvocation getStackId getStackVersion MethodInvocation MethodInvocation toString getDesiredState ReturnStatement MemberReference r StatementExpression MethodInvocation readLock unlock MethodDeclaration Modifier public Annotation Override ReferenceType String getClusterName ReturnStatement MethodInvocation serviceComponent getClusterName MethodDeclaration Modifier public Annotation Override debugDump FormalParameter ReferenceType StringBuilder sb TryStatement StatementExpression MethodInvocation readLock lock StatementExpression MethodInvocation sb BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""ServiceComponentHost={ hostname="" MethodInvocation getHostName Literal "", serviceComponentName="" MethodInvocation serviceComponent getName Literal "", clusterName="" MethodInvocation serviceComponent getClusterName Literal "", serviceName="" MethodInvocation serviceComponent getServiceName Literal "", desiredStackVersion="" MethodInvocation getDesiredStackVersion Literal "", desiredState="" MethodInvocation getDesiredState Literal "", stackVersion="" MethodInvocation getStackVersion Literal "", state="" MethodInvocation getState Literal "" }"" append StatementExpression MethodInvocation readLock unlock MethodDeclaration Modifier public Annotation Override BasicType boolean isPersisted TryStatement StatementExpression MethodInvocation readLock lock ReturnStatement MemberReference persisted StatementExpression MethodInvocation readLock unlock MethodDeclaration Modifier public Annotation Override persist TryStatement StatementExpression MethodInvocation writeLock lock IfStatement MemberReference ! persisted BlockStatement StatementExpression MethodInvocation persistEntities StatementExpression MethodInvocation refresh StatementExpression MethodInvocation host refresh StatementExpression MethodInvocation serviceComponent refresh StatementExpression Assignment MemberReference persisted Literal true = BlockStatement StatementExpression MethodInvocation saveIfPersisted End StatementExpression MethodInvocation writeLock unlock MethodDeclaration Modifier protected Annotation Transactional persistEntities LocalVariableDeclaration ReferenceType HostEntity VariableDeclarator hostEntity MethodInvocation hostDAO MethodInvocation getHostName findByName StatementExpression MethodInvocation hostEntity MethodInvocation MemberReference stateEntity add getHostComponentStateEntities StatementExpression MethodInvocation hostEntity MethodInvocation MemberReference desiredStateEntity add getHostComponentDesiredStateEntities LocalVariableDeclaration ReferenceType ServiceComponentDesiredStateEntityPK VariableDeclarator dpk ClassCreator ReferenceType ServiceComponentDesiredStateEntityPK StatementExpression MethodInvocation dpk MethodInvocation serviceComponent getClusterId setClusterId StatementExpression MethodInvocation dpk MethodInvocation serviceComponent getServiceName setServiceName StatementExpression MethodInvocation dpk MethodInvocation serviceComponent getName setComponentName LocalVariableDeclaration ReferenceType ServiceComponentDesiredStateEntity VariableDeclarator serviceComponentDesiredStateEntity MethodInvocation serviceComponentDesiredStateDAO MemberReference dpk findByPK StatementExpression MethodInvocation serviceComponentDesiredStateEntity MethodInvocation MemberReference desiredStateEntity add getHostComponentDesiredStateEntities StatementExpression MethodInvocation desiredStateEntity MemberReference serviceComponentDesiredStateEntity setServiceComponentDesiredStateEntity StatementExpression MethodInvocation desiredStateEntity MemberReference hostEntity setHostEntity StatementExpression MethodInvocation stateEntity MemberReference serviceComponentDesiredStateEntity setServiceComponentDesiredStateEntity StatementExpression MethodInvocation stateEntity MemberReference hostEntity setHostEntity StatementExpression MethodInvocation hostComponentStateDAO MemberReference stateEntity create StatementExpression MethodInvocation hostComponentDesiredStateDAO MemberReference desiredStateEntity create StatementExpression MethodInvocation serviceComponentDesiredStateDAO MemberReference serviceComponentDesiredStateEntity merge StatementExpression MethodInvocation hostDAO MemberReference hostEntity merge MethodDeclaration Modifier public synchronized Annotation Override Annotation Transactional refresh IfStatement MethodInvocation isPersisted BlockStatement LocalVariableDeclaration ReferenceType HostComponentStateEntityPK VariableDeclarator pk ClassCreator ReferenceType HostComponentStateEntityPK LocalVariableDeclaration ReferenceType HostComponentDesiredStateEntityPK VariableDeclarator dpk ClassCreator ReferenceType HostComponentDesiredStateEntityPK StatementExpression MethodInvocation pk MethodInvocation getClusterId setClusterId StatementExpression MethodInvocation pk MethodInvocation getServiceComponentName setComponentName StatementExpression MethodInvocation pk MethodInvocation getServiceName setServiceName StatementExpression MethodInvocation pk MethodInvocation getHostName setHostName StatementExpression MethodInvocation dpk MethodInvocation getClusterId setClusterId StatementExpression MethodInvocation dpk MethodInvocation getServiceComponentName setComponentName StatementExpression MethodInvocation dpk MethodInvocation getServiceName setServiceName StatementExpression MethodInvocation dpk MethodInvocation getHostName setHostName StatementExpression Assignment MemberReference stateEntity MethodInvocation hostComponentStateDAO MemberReference pk findByPK = StatementExpression Assignment MemberReference desiredStateEntity MethodInvocation hostComponentDesiredStateDAO MemberReference dpk findByPK = StatementExpression MethodInvocation hostComponentStateDAO MemberReference stateEntity refresh StatementExpression MethodInvocation hostComponentDesiredStateDAO MemberReference desiredStateEntity refresh End MethodDeclaration Modifier private Annotation Transactional saveIfPersisted IfStatement MethodInvocation isPersisted BlockStatement StatementExpression MethodInvocation hostComponentStateDAO MemberReference stateEntity merge StatementExpression MethodInvocation hostComponentDesiredStateDAO MemberReference desiredStateEntity merge End MethodDeclaration Modifier public synchronized Annotation Override BasicType boolean canBeRemoved TryStatement StatementExpression MethodInvocation readLock lock LocalVariableDeclaration ReferenceType State VariableDeclarator desiredState MethodInvocation getDesiredState LocalVariableDeclaration ReferenceType State VariableDeclarator liveState MethodInvocation getState IfStatement BinaryOperation && BinaryOperation || BinaryOperation == MemberReference desiredState MemberReference State INIT BinaryOperation == MemberReference desiredState MemberReference State UNINSTALLED BinaryOperation || BinaryOperation == MemberReference liveState MemberReference State INIT BinaryOperation == MemberReference liveState MemberReference State UNINSTALLED BlockStatement ReturnStatement Literal true End StatementExpression MethodInvocation readLock unlock ReturnStatement Literal false MethodDeclaration Modifier public Annotation Override deleteDesiredConfigs FormalParameter ReferenceType Set TypeArgument ReferenceType String configTypes TryStatement StatementExpression MethodInvocation writeLock lock ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator configType MemberReference configTypes BlockStatement StatementExpression MethodInvocation desiredConfigs MemberReference configType remove End StatementExpression MethodInvocation hostComponentDesiredConfigMappingDAO MemberReference configTypes removeByType StatementExpression MethodInvocation writeLock unlock ReferenceType ServiceComponentHost",0
307,307,,1
371,371,,1
43,43,CompilationUnit PackageDeclaration org.apache.ambari.server.actionmanager Import org.apache.ambari.server.orm.entities.HostRoleCommandEntity InterfaceDeclaration Modifier public HostRoleCommandFactory MethodDeclaration ReferenceType HostRoleCommand createExisting FormalParameter ReferenceType HostRoleCommandEntity hostRoleCommandEntity,1
84,84,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.actionmanager Import java.util.Collection Import java.util.List Import java.util.Set Import org.apache.ambari.server.Role Import org.apache.ambari.server.agent.CommandReport InterfaceDeclaration Modifier public ActionDBAccessor MethodDeclaration Modifier public ReferenceType Stage getAction FormalParameter ReferenceType String actionId MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType Stage getAllStages FormalParameter BasicType long requestId MethodDeclaration Modifier public abortOperation FormalParameter BasicType long requestId MethodDeclaration Modifier public timeoutHostRole FormalParameter ReferenceType String host FormalParameter BasicType long requestId FormalParameter BasicType long stageId FormalParameter ReferenceType Role role MethodDeclaration /**
   * Returns all the pending stages, including queued and not-queued.
   * A stage is considered in progress if it is in progress for any host.
   */ Modifier public ReferenceType List TypeArgument ReferenceType Stage getStagesInProgress MethodDeclaration Modifier public persistActions FormalParameter ReferenceType List TypeArgument ReferenceType Stage stages MethodDeclaration Modifier public updateHostRoleState FormalParameter ReferenceType String hostname FormalParameter BasicType long requestId FormalParameter BasicType long stageId FormalParameter ReferenceType String role FormalParameter ReferenceType CommandReport report MethodDeclaration Modifier public abortHostRole FormalParameter ReferenceType String host FormalParameter BasicType long requestId FormalParameter BasicType long stageId FormalParameter ReferenceType Role role MethodDeclaration /**
   * Return the last persisted Request ID as seen when the DBAccessor object
   * was initialized.
   * Value should remain unchanged through the lifetime of the object instance.
   * @return Request Id seen at init time
   */ Modifier public BasicType long getLastPersistedRequestIdWhenInitialized MethodDeclaration /**
   * Updates scheduled stage.
   * @param s
   * @param hostname
   * @param roleStr
   */ Modifier public hostRoleScheduled FormalParameter ReferenceType Stage s FormalParameter ReferenceType String hostname FormalParameter ReferenceType String roleStr MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType HostRoleCommand getRequestTasks FormalParameter BasicType long requestId MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType HostRoleCommand getAllTasksByRequestIds FormalParameter ReferenceType Collection TypeArgument ReferenceType Long requestIds MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType HostRoleCommand getTasksByRequestAndTaskIds FormalParameter ReferenceType Collection TypeArgument ReferenceType Long requestIds FormalParameter ReferenceType Collection TypeArgument ReferenceType Long taskIds MethodDeclaration Modifier public ReferenceType Collection TypeArgument ReferenceType HostRoleCommand getTasks FormalParameter ReferenceType Collection TypeArgument ReferenceType Long taskIds MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType Stage getStagesByHostRoleStatus FormalParameter ReferenceType Set TypeArgument ReferenceType HostRoleStatus statuses MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType Long getRequests MethodDeclaration Modifier public ReferenceType HostRoleCommand getTask FormalParameter BasicType long taskId MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType Long getRequestsByStatus FormalParameter ReferenceType RequestStatus status",0
90,90,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services Import org.apache.ambari.server.api.resources.ResourceInstance Import org.apache.ambari.server.controller.spi.Resource Import javax.ws.rs.GET Import javax.ws.rs.Path Import javax.ws.rs.PathParam Import javax.ws.rs.Produces Import javax.ws.rs.core.Context Import javax.ws.rs.core.HttpHeaders Import javax.ws.rs.core.Response Import javax.ws.rs.core.UriInfo Import java.util.HashMap Import java.util.Map ClassDeclaration Modifier public /**
 * Service responsible for task resource requests.
 */ TaskService FieldDeclaration /**
   * Parent cluster id.
   */ Modifier private ReferenceType String VariableDeclarator m_clusterName FieldDeclaration /**
   * Parent request id.
   */ Modifier private ReferenceType String VariableDeclarator m_requestId ConstructorDeclaration Modifier public /**
   * Constructor.
   *
   * @param clusterName  cluster id
   * @param requestId    request id
   */ TaskService FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String requestId StatementExpression Assignment MemberReference m_clusterName MemberReference clusterName = StatementExpression Assignment MemberReference m_requestId MemberReference requestId = MethodDeclaration /**
   * Handles GET: /clusters/{clusterID}/requests/{requestID}/tasks/{taskID}
   * Get a specific task.
   *
   * @param headers  http headers
   * @param ui       uri info
   * @param taskId   component id
   *
   * @return a task resource representation
   */ Modifier public Annotation GET Annotation Path Literal ""{taskId}"" Annotation Produces Literal ""text/plain"" ReferenceType Response getTask FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""taskId"" ReferenceType String taskId ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type GET MethodInvocation MemberReference m_clusterName MemberReference m_requestId MemberReference taskId createTaskResource handleRequest MethodDeclaration /**
   * Handles GET: /clusters/{clusterID}/requests/{requestID}/tasks
   * Get all tasks for a request.
   *
   * @param headers http headers
   * @param ui      uri info
   *
   * @return task collection resource representation
   */ Modifier public Annotation GET Annotation Produces Literal ""text/plain"" ReferenceType Response getComponents FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type GET MethodInvocation MemberReference m_clusterName MemberReference m_requestId Literal null createTaskResource handleRequest MethodDeclaration /**
   * Create a task resource instance.
   *
   * @param clusterName  cluster name
   * @param requestId    request id
   * @param taskId       task id
   *
   * @return a task resource instance
   */ ReferenceType ResourceInstance createTaskResource FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String requestId FormalParameter ReferenceType String taskId LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String VariableDeclarator mapIds ClassCreator ReferenceType HashMap TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String StatementExpression MethodInvocation mapIds MemberReference Resource.Type Cluster MemberReference clusterName put StatementExpression MethodInvocation mapIds MemberReference Resource.Type Request MemberReference requestId put StatementExpression MethodInvocation mapIds MemberReference Resource.Type Task MemberReference taskId put ReturnStatement MethodInvocation MemberReference Resource.Type Task MemberReference mapIds createResource ReferenceType BaseService",1
381,381,,0
54,54,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.rest Import javax.ws.rs.GET Import javax.ws.rs.Path Import javax.ws.rs.Produces Import javax.ws.rs.core.MediaType ClassDeclaration Modifier public Annotation Path Literal ""/check"" /**
 * A simple POJO to do a health check on the server to see if its running
 * or not
 */ HealthCheck FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator status Literal ""RUNNING"" MethodDeclaration Modifier public Annotation GET Annotation Produces MemberReference MediaType TEXT_PLAIN ReferenceType String plainTextCheck ReturnStatement MemberReference status MethodDeclaration Modifier public Annotation GET Annotation Produces MemberReference MediaType TEXT_XML ReferenceType String xmlCheck ReturnStatement BinaryOperation + BinaryOperation + BinaryOperation + Literal ""<?xml version=\""1.0\""?>"" Literal ""<status> "" MemberReference status Literal ""</status>"" MethodDeclaration Modifier public Annotation GET Annotation Produces MemberReference MediaType TEXT_HTML ReferenceType String htmlCheck ReturnStatement BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""<html> "" Literal ""<title>"" Literal ""Status"" Literal ""</title>"" Literal ""<body><h1>"" MemberReference status Literal ""</body></h1>"" Literal ""</html> """,0
374,374,,0
230,230,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.actionmanager Import java.util.ArrayList Import java.util.HashMap Import java.util.List Import java.util.Map Import java.util.Set Import java.util.TreeMap Import org.apache.ambari.server.Role Import org.apache.ambari.server.RoleCommand Import org.apache.ambari.server.agent.ExecutionCommand Import org.apache.ambari.server.orm.dao.HostDAO Import org.apache.ambari.server.orm.dao.HostRoleCommandDAO Import org.apache.ambari.server.orm.dao.StageDAO Import org.apache.ambari.server.orm.entities.HostEntity Import org.apache.ambari.server.orm.entities.HostRoleCommandEntity Import org.apache.ambari.server.orm.entities.RoleSuccessCriteriaEntity Import org.apache.ambari.server.orm.entities.StageEntity Import org.apache.ambari.server.state.ServiceComponentHostEvent Import org.apache.ambari.server.utils.StageUtils Import org.slf4j.Logger Import org.slf4j.LoggerFactory Import com.google.inject.Injector Import com.google.inject.assistedinject.Assisted Import com.google.inject.assistedinject.AssistedInject ClassDeclaration Modifier public Stage FieldDeclaration Modifier private static ReferenceType Logger VariableDeclarator LOG MethodInvocation LoggerFactory ClassReference ReferenceType Stage getLogger FieldDeclaration Modifier private final BasicType long VariableDeclarator requestId FieldDeclaration Modifier private final ReferenceType String VariableDeclarator clusterName FieldDeclaration Modifier private BasicType long VariableDeclarator stageId Literal - 1 FieldDeclaration Modifier private final ReferenceType String VariableDeclarator logDir FieldDeclaration Modifier private BasicType int VariableDeclarator taskTimeout Literal - 1 FieldDeclaration Modifier private BasicType int VariableDeclarator perTaskTimeFactor Literal 60000 FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType Role TypeArgument ReferenceType Float VariableDeclarator successFactors ClassCreator ReferenceType HashMap TypeArgument ReferenceType Role TypeArgument ReferenceType Float FieldDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType HostRoleCommand VariableDeclarator hostRoleCommands ClassCreator ReferenceType TreeMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType HostRoleCommand FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType List TypeArgument ReferenceType ExecutionCommandWrapper VariableDeclarator commandsToSend ClassCreator ReferenceType TreeMap TypeArgument ReferenceType String TypeArgument ReferenceType List TypeArgument ReferenceType ExecutionCommandWrapper ConstructorDeclaration Modifier public Annotation AssistedInject Stage FormalParameter Annotation Assisted BasicType long requestId FormalParameter Annotation Assisted Literal ""logDir"" ReferenceType String logDir FormalParameter Annotation Assisted Literal ""clusterName"" ReferenceType String clusterName StatementExpression Assignment This MemberReference requestId MemberReference requestId = StatementExpression Assignment This MemberReference logDir MemberReference logDir = StatementExpression Assignment This MemberReference clusterName MemberReference clusterName = ConstructorDeclaration Modifier public Annotation AssistedInject /**
   * Creates Stage existing in database
   * @param actionId ""requestId-stageId"" string
   */ Stage FormalParameter Annotation Assisted ReferenceType String actionId FormalParameter ReferenceType Injector injector StatementExpression ExplicitConstructorInvocation MethodInvocation injector MethodInvocation MemberReference actionId findByActionId ClassReference ReferenceType StageDAO getInstance MemberReference injector ConstructorDeclaration Modifier public Annotation AssistedInject Stage FormalParameter Annotation Assisted ReferenceType StageEntity stageEntity FormalParameter ReferenceType Injector injector LocalVariableDeclaration ReferenceType HostRoleCommandDAO VariableDeclarator hostRoleCommandDAO MethodInvocation injector ClassReference ReferenceType HostRoleCommandDAO getInstance LocalVariableDeclaration ReferenceType HostDAO VariableDeclarator hostDAO MethodInvocation injector ClassReference ReferenceType HostDAO getInstance LocalVariableDeclaration ReferenceType HostRoleCommandFactory VariableDeclarator hostRoleCommandFactory MethodInvocation injector ClassReference ReferenceType HostRoleCommandFactory getInstance StatementExpression Assignment MemberReference requestId MethodInvocation stageEntity getRequestId = StatementExpression Assignment MemberReference stageId MethodInvocation stageEntity getStageId = StatementExpression Assignment MemberReference logDir MethodInvocation stageEntity getLogInfo = StatementExpression Assignment MemberReference clusterName MethodInvocation stageEntity MethodInvocation getClusterName getCluster = ForStatement EnhancedForControl VariableDeclaration ReferenceType HostEntity VariableDeclarator hostEntity MethodInvocation hostDAO MemberReference stageEntity findByStage BlockStatement LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType HostRoleCommandEntity VariableDeclarator commands MethodInvocation hostRoleCommandDAO MemberReference stageEntity MemberReference hostEntity findSortedCommandsByStageAndHost StatementExpression MethodInvocation commandsToSend MethodInvocation hostEntity getHostName ClassCreator ReferenceType ArrayList TypeArgument ReferenceType ExecutionCommandWrapper put StatementExpression MethodInvocation hostRoleCommands MethodInvocation hostEntity getHostName ClassCreator ReferenceType TreeMap TypeArgument ReferenceType String TypeArgument ReferenceType HostRoleCommand put ForStatement EnhancedForControl VariableDeclaration ReferenceType HostRoleCommandEntity VariableDeclarator command MemberReference commands BlockStatement LocalVariableDeclaration ReferenceType HostRoleCommand VariableDeclarator hostRoleCommand MethodInvocation hostRoleCommandFactory MemberReference command createExisting StatementExpression MethodInvocation hostRoleCommands MethodInvocation MethodInvocation hostRoleCommand MethodInvocation toString getRole MemberReference hostRoleCommand put MethodInvocation hostEntity getHostName get StatementExpression MethodInvocation commandsToSend MethodInvocation MethodInvocation hostRoleCommand getExecutionCommandWrapper add MethodInvocation hostEntity getHostName get End End ForStatement EnhancedForControl VariableDeclaration ReferenceType RoleSuccessCriteriaEntity VariableDeclarator successCriteriaEntity MethodInvocation stageEntity getRoleSuccessCriterias BlockStatement StatementExpression MethodInvocation successFactors MethodInvocation successCriteriaEntity getRole MethodInvocation successCriteriaEntity MethodInvocation floatValue getSuccessFactor put End MethodDeclaration /**
   * Creates object to be persisted in database
   * @return StageEntity
   */ Modifier public synchronized ReferenceType StageEntity constructNewPersistenceEntity LocalVariableDeclaration ReferenceType StageEntity VariableDeclarator stageEntity ClassCreator ReferenceType StageEntity StatementExpression MethodInvocation stageEntity MemberReference requestId setRequestId StatementExpression MethodInvocation stageEntity MethodInvocation getStageId setStageId StatementExpression MethodInvocation stageEntity MemberReference logDir setLogInfo StatementExpression MethodInvocation stageEntity ClassCreator ReferenceType ArrayList TypeArgument ReferenceType HostRoleCommandEntity setHostRoleCommands StatementExpression MethodInvocation stageEntity ClassCreator ReferenceType ArrayList TypeArgument ReferenceType RoleSuccessCriteriaEntity setRoleSuccessCriterias ForStatement EnhancedForControl VariableDeclaration ReferenceType Role VariableDeclarator role MethodInvocation successFactors keySet BlockStatement LocalVariableDeclaration ReferenceType RoleSuccessCriteriaEntity VariableDeclarator roleSuccessCriteriaEntity ClassCreator ReferenceType RoleSuccessCriteriaEntity StatementExpression MethodInvocation roleSuccessCriteriaEntity MemberReference role setRole StatementExpression MethodInvocation roleSuccessCriteriaEntity MemberReference stageEntity setStage StatementExpression MethodInvocation roleSuccessCriteriaEntity MethodInvocation successFactors MethodInvocation doubleValue MemberReference role get setSuccessFactor StatementExpression MethodInvocation stageEntity MethodInvocation MemberReference roleSuccessCriteriaEntity add getRoleSuccessCriterias End ReturnStatement MemberReference stageEntity MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType HostRoleCommand getOrderedHostRoleCommands LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType HostRoleCommand VariableDeclarator commands ClassCreator ReferenceType ArrayList TypeArgument ReferenceType HostRoleCommand ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator hostName MethodInvocation hostRoleCommands keySet BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType ExecutionCommandWrapper VariableDeclarator executionCommandWrapper MethodInvocation commandsToSend MemberReference hostName get BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType HostRoleCommand VariableDeclarator hostRoleCommand MethodInvocation hostRoleCommands MethodInvocation values MemberReference hostName get BlockStatement IfStatement BinaryOperation == MethodInvocation hostRoleCommand getExecutionCommandWrapper MemberReference executionCommandWrapper BlockStatement StatementExpression MethodInvocation commands MemberReference hostRoleCommand add End End End End ReturnStatement MemberReference commands MethodDeclaration Modifier public synchronized setStageId FormalParameter BasicType long stageId IfStatement BinaryOperation != This MemberReference stageId Literal - 1 BlockStatement ThrowStatement ClassCreator ReferenceType RuntimeException Literal ""Attempt to set stageId again! Not allowed."" End StatementExpression Assignment This MemberReference stageId MemberReference stageId = ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator host This MemberReference commandsToSend MethodInvocation keySet BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType ExecutionCommandWrapper VariableDeclarator wrapper This MemberReference commandsToSend MethodInvocation MemberReference host get BlockStatement LocalVariableDeclaration ReferenceType ExecutionCommand VariableDeclarator cmd MethodInvocation wrapper getExecutionCommand StatementExpression MethodInvocation cmd MethodInvocation StageUtils MemberReference requestId MemberReference stageId getActionId setCommandId End End MethodDeclaration Modifier public synchronized BasicType long getStageId ReturnStatement MemberReference stageId MethodDeclaration Modifier public ReferenceType String getActionId ReturnStatement MethodInvocation StageUtils MemberReference requestId MethodInvocation getStageId getActionId MethodDeclaration /**
   * A new host role command is created for execution.
   * Creates both ExecutionCommand and HostRoleCommand objects and
   * adds them to the Stage. This should be called only once for a host-role
   * for a given stage.
   */ Modifier public synchronized addHostRoleExecutionCommand FormalParameter ReferenceType String host FormalParameter ReferenceType Role role FormalParameter ReferenceType RoleCommand command FormalParameter ReferenceType ServiceComponentHostEvent event FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String serviceName LocalVariableDeclaration ReferenceType HostRoleCommand VariableDeclarator hrc ClassCreator ReferenceType HostRoleCommand MemberReference host MemberReference role MemberReference event MemberReference command LocalVariableDeclaration ReferenceType ExecutionCommand VariableDeclarator cmd ClassCreator ReferenceType ExecutionCommand LocalVariableDeclaration ReferenceType ExecutionCommandWrapper VariableDeclarator wrapper ClassCreator ReferenceType ExecutionCommandWrapper MemberReference cmd StatementExpression MethodInvocation hrc MemberReference wrapper setExecutionCommandWrapper StatementExpression MethodInvocation cmd MemberReference host setHostname StatementExpression MethodInvocation cmd MemberReference clusterName setClusterName StatementExpression MethodInvocation cmd MemberReference serviceName setServiceName StatementExpression MethodInvocation cmd This MethodInvocation getActionId setCommandId StatementExpression MethodInvocation cmd MemberReference role setRole StatementExpression MethodInvocation cmd MemberReference command setRoleCommand LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType HostRoleCommand VariableDeclarator hrcMap This MemberReference hostRoleCommands MethodInvocation MemberReference host get IfStatement BinaryOperation == MemberReference hrcMap Literal null BlockStatement StatementExpression Assignment MemberReference hrcMap ClassCreator ReferenceType TreeMap TypeArgument ReferenceType String TypeArgument ReferenceType HostRoleCommand = StatementExpression This MemberReference hostRoleCommands MethodInvocation MemberReference host MemberReference hrcMap put End IfStatement BinaryOperation != MethodInvocation hrcMap MethodInvocation role toString get Literal null BlockStatement ThrowStatement ClassCreator ReferenceType RuntimeException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Setting the host role command second time for same stage: stage="" This MethodInvocation getActionId Literal "", host="" MemberReference host Literal "", role="" MemberReference role End StatementExpression MethodInvocation hrcMap MethodInvocation role toString MemberReference hrc put LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType ExecutionCommandWrapper VariableDeclarator execCmdList This MemberReference commandsToSend MethodInvocation MemberReference host get IfStatement BinaryOperation == MemberReference execCmdList Literal null BlockStatement StatementExpression Assignment MemberReference execCmdList ClassCreator ReferenceType ArrayList TypeArgument ReferenceType ExecutionCommandWrapper = StatementExpression This MemberReference commandsToSend MethodInvocation MemberReference host MemberReference execCmdList put End IfStatement MethodInvocation execCmdList MemberReference wrapper contains BlockStatement ThrowStatement ClassCreator ReferenceType RuntimeException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Setting the execution command second time for same stage: stage="" This MethodInvocation getActionId Literal "", host="" MemberReference host Literal "", role="" MemberReference role End StatementExpression MethodInvocation execCmdList MemberReference wrapper add MethodDeclaration /**
   *
   * @return list of hosts
   */ Modifier public synchronized ReferenceType List TypeArgument ReferenceType String getHosts LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType String VariableDeclarator hlist ClassCreator ReferenceType ArrayList TypeArgument ReferenceType String ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator h This MemberReference hostRoleCommands MethodInvocation keySet BlockStatement StatementExpression MethodInvocation hlist MemberReference h add End ReturnStatement MemberReference hlist MethodDeclaration Modifier synchronized BasicType float getSuccessFactor FormalParameter ReferenceType Role r LocalVariableDeclaration ReferenceType Float VariableDeclarator f MethodInvocation successFactors MemberReference r get IfStatement BinaryOperation == MemberReference f Literal null BlockStatement IfStatement BinaryOperation || BinaryOperation || BinaryOperation || MethodInvocation r MemberReference Role DATANODE equals MethodInvocation r MemberReference Role TASKTRACKER equals MethodInvocation r MemberReference Role GANGLIA_MONITOR equals MethodInvocation r MemberReference Role HBASE_REGIONSERVER equals BlockStatement ReturnStatement Cast BasicType float Literal 0.5 BlockStatement ReturnStatement Literal 1 End BlockStatement ReturnStatement MemberReference f End MethodDeclaration Modifier public synchronized setSuccessFactors FormalParameter ReferenceType Map TypeArgument ReferenceType Role TypeArgument ReferenceType Float suc StatementExpression Assignment MemberReference successFactors MemberReference suc = MethodDeclaration Modifier public synchronized ReferenceType Map TypeArgument ReferenceType Role TypeArgument ReferenceType Float getSuccessFactors ReturnStatement MemberReference successFactors MethodDeclaration Modifier public BasicType long getRequestId ReturnStatement MemberReference requestId MethodDeclaration Modifier public ReferenceType String getClusterName ReturnStatement MemberReference clusterName MethodDeclaration Modifier public BasicType long getLastAttemptTime FormalParameter ReferenceType String host FormalParameter ReferenceType String role ReturnStatement This MemberReference hostRoleCommands MethodInvocation MemberReference host get MethodInvocation MemberReference role get MethodInvocation getLastAttemptTime MethodDeclaration Modifier public BasicType short getAttemptCount FormalParameter ReferenceType String host FormalParameter ReferenceType String role ReturnStatement This MemberReference hostRoleCommands MethodInvocation MemberReference host get MethodInvocation MemberReference role get MethodInvocation getAttemptCount MethodDeclaration Modifier public incrementAttemptCount FormalParameter ReferenceType String hostname FormalParameter ReferenceType String role StatementExpression This MemberReference hostRoleCommands MethodInvocation MemberReference hostname get MethodInvocation MemberReference role get MethodInvocation incrementAttemptCount MethodDeclaration Modifier public setLastAttemptTime FormalParameter ReferenceType String host FormalParameter ReferenceType String role FormalParameter BasicType long t StatementExpression This MemberReference hostRoleCommands MethodInvocation MemberReference host get MethodInvocation MemberReference role get MethodInvocation MemberReference t setLastAttemptTime MethodDeclaration Modifier public ReferenceType ExecutionCommandWrapper getExecutionCommandWrapper FormalParameter ReferenceType String hostname FormalParameter ReferenceType String role LocalVariableDeclaration ReferenceType HostRoleCommand VariableDeclarator hrc MethodInvocation hostRoleCommands MethodInvocation MemberReference role get MemberReference hostname get IfStatement BinaryOperation != MemberReference hrc Literal null BlockStatement ReturnStatement MethodInvocation hrc getExecutionCommandWrapper BlockStatement ReturnStatement Literal null End MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType ExecutionCommandWrapper getExecutionCommands FormalParameter ReferenceType String hostname ReturnStatement MethodInvocation commandsToSend MemberReference hostname get MethodDeclaration Modifier public BasicType long getStartTime FormalParameter ReferenceType String hostname FormalParameter ReferenceType String role ReturnStatement This MemberReference hostRoleCommands MethodInvocation MemberReference hostname get MethodInvocation MemberReference role get MethodInvocation getStartTime MethodDeclaration Modifier public setStartTime FormalParameter ReferenceType String hostname FormalParameter ReferenceType String role FormalParameter BasicType long startTime StatementExpression This MemberReference hostRoleCommands MethodInvocation MemberReference hostname get MethodInvocation MemberReference role get MethodInvocation MemberReference startTime setStartTime MethodDeclaration Modifier public ReferenceType HostRoleStatus getHostRoleStatus FormalParameter ReferenceType String hostname FormalParameter ReferenceType String role ReturnStatement This MemberReference hostRoleCommands MethodInvocation MemberReference hostname get MethodInvocation MemberReference role get MethodInvocation getStatus MethodDeclaration Modifier public setHostRoleStatus FormalParameter ReferenceType String host FormalParameter ReferenceType String role FormalParameter ReferenceType HostRoleStatus status StatementExpression This MemberReference hostRoleCommands MethodInvocation MemberReference host get MethodInvocation MemberReference role get MethodInvocation MemberReference status setStatus MethodDeclaration Modifier public ReferenceType ServiceComponentHostEventWrapper getFsmEvent FormalParameter ReferenceType String hostname FormalParameter ReferenceType String roleStr ReturnStatement This MemberReference hostRoleCommands MethodInvocation MemberReference hostname get MethodInvocation MemberReference roleStr get MethodInvocation getEvent MethodDeclaration Modifier public setExitCode FormalParameter ReferenceType String hostname FormalParameter ReferenceType String role FormalParameter BasicType int exitCode StatementExpression This MemberReference hostRoleCommands MethodInvocation MemberReference hostname get MethodInvocation MemberReference role get MethodInvocation MemberReference exitCode setExitCode MethodDeclaration Modifier public BasicType int getExitCode FormalParameter ReferenceType String hostname FormalParameter ReferenceType String role ReturnStatement This MemberReference hostRoleCommands MethodInvocation MemberReference hostname get MethodInvocation MemberReference role get MethodInvocation getExitCode MethodDeclaration Modifier public setStderr FormalParameter ReferenceType String hostname FormalParameter ReferenceType String role FormalParameter ReferenceType String stdErr StatementExpression This MemberReference hostRoleCommands MethodInvocation MemberReference hostname get MethodInvocation MemberReference role get MethodInvocation MemberReference stdErr setStderr MethodDeclaration Modifier public setStdout FormalParameter ReferenceType String hostname FormalParameter ReferenceType String role FormalParameter ReferenceType String stdOut StatementExpression This MemberReference hostRoleCommands MethodInvocation MemberReference hostname get MethodInvocation MemberReference role get MethodInvocation MemberReference stdOut setStdout MethodDeclaration Modifier public synchronized BasicType boolean isStageInProgress ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator host MethodInvocation hostRoleCommands keySet BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator role MethodInvocation hostRoleCommands MethodInvocation keySet MemberReference host get BlockStatement LocalVariableDeclaration ReferenceType HostRoleCommand VariableDeclarator hrc MethodInvocation hostRoleCommands MethodInvocation MemberReference role get MemberReference host get IfStatement BinaryOperation == MemberReference hrc Literal null BlockStatement ReturnStatement Literal false End IfStatement BinaryOperation || BinaryOperation || MethodInvocation hrc MethodInvocation MemberReference HostRoleStatus PENDING equals getStatus MethodInvocation hrc MethodInvocation MemberReference HostRoleStatus QUEUED equals getStatus MethodInvocation hrc MethodInvocation MemberReference HostRoleStatus IN_PROGRESS equals getStatus BlockStatement ReturnStatement Literal true End End End ReturnStatement Literal false MethodDeclaration Modifier public synchronized BasicType boolean doesStageHaveHostRoleStatus FormalParameter ReferenceType Set TypeArgument ReferenceType HostRoleStatus statuses ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator host MethodInvocation hostRoleCommands keySet BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator role MethodInvocation hostRoleCommands MethodInvocation keySet MemberReference host get BlockStatement LocalVariableDeclaration ReferenceType HostRoleCommand VariableDeclarator hrc MethodInvocation hostRoleCommands MethodInvocation MemberReference role get MemberReference host get IfStatement BinaryOperation == MemberReference hrc Literal null BlockStatement ReturnStatement Literal false End ForStatement EnhancedForControl VariableDeclaration ReferenceType HostRoleStatus VariableDeclarator status MemberReference statuses IfStatement MethodInvocation hrc MethodInvocation MemberReference status equals getStatus BlockStatement ReturnStatement Literal true End End End End ReturnStatement Literal false MethodDeclaration Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType List TypeArgument ReferenceType ExecutionCommandWrapper getExecutionCommands ReturnStatement This MemberReference commandsToSend MethodDeclaration Modifier public ReferenceType String getLogDir ReturnStatement This MemberReference logDir MethodDeclaration Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType HostRoleCommand getHostRoleCommands ReturnStatement MemberReference hostRoleCommands MethodDeclaration /**
   * This method should be used only in stage planner. To add
   * a new execution command use
   * {@link #addHostRoleExecutionCommand(String, Role, RoleCommand,
   * ServiceComponentHostEvent, String, String)}
   */ Modifier public synchronized addExecutionCommandWrapper FormalParameter ReferenceType Stage origStage FormalParameter ReferenceType String hostname FormalParameter ReferenceType Role r LocalVariableDeclaration ReferenceType String VariableDeclarator role MethodInvocation r toString IfStatement BinaryOperation == MethodInvocation commandsToSend MemberReference hostname get Literal null BlockStatement StatementExpression MethodInvocation commandsToSend MemberReference hostname ClassCreator ReferenceType ArrayList TypeArgument ReferenceType ExecutionCommandWrapper put End StatementExpression MethodInvocation commandsToSend MethodInvocation MethodInvocation origStage MemberReference hostname MemberReference role getExecutionCommandWrapper add MemberReference hostname get IfStatement BinaryOperation == MethodInvocation hostRoleCommands MemberReference hostname get Literal null BlockStatement StatementExpression MethodInvocation hostRoleCommands MemberReference hostname ClassCreator ReferenceType TreeMap TypeArgument ReferenceType String TypeArgument ReferenceType HostRoleCommand put End StatementExpression MethodInvocation hostRoleCommands MethodInvocation MemberReference role MethodInvocation origStage MemberReference hostname MemberReference role getHostRoleCommand put MemberReference hostname get MethodDeclaration ReferenceType HostRoleCommand getHostRoleCommand FormalParameter ReferenceType String hostname FormalParameter ReferenceType String role ReturnStatement MethodInvocation hostRoleCommands MethodInvocation MemberReference role get MemberReference hostname get MethodDeclaration Modifier public synchronized BasicType int getTaskTimeout IfStatement BinaryOperation == MemberReference taskTimeout Literal - 1 BlockStatement LocalVariableDeclaration BasicType int VariableDeclarator maxTasks Literal 0 ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator host MethodInvocation commandsToSend keySet BlockStatement IfStatement BinaryOperation > MethodInvocation commandsToSend MethodInvocation size MemberReference host get MemberReference maxTasks BlockStatement StatementExpression Assignment MemberReference maxTasks MethodInvocation commandsToSend MethodInvocation size MemberReference host get = End End StatementExpression Assignment MemberReference taskTimeout BinaryOperation * MemberReference maxTasks MemberReference perTaskTimeFactor = End ReturnStatement MemberReference taskTimeout MethodDeclaration Modifier public synchronized Annotation Override ReferenceType String toString LocalVariableDeclaration ReferenceType StringBuilder VariableDeclarator builder ClassCreator ReferenceType StringBuilder StatementExpression MethodInvocation builder Literal ""STAGE DESCRIPTION BEGIN\n"" append StatementExpression MethodInvocation builder BinaryOperation + BinaryOperation + Literal ""requestId="" MemberReference requestId Literal ""\n"" append StatementExpression MethodInvocation builder BinaryOperation + BinaryOperation + Literal ""stageId="" MemberReference stageId Literal ""\n"" append StatementExpression MethodInvocation builder BinaryOperation + BinaryOperation + Literal ""clusterName="" MemberReference clusterName Literal ""\n"" append StatementExpression MethodInvocation builder BinaryOperation + BinaryOperation + Literal ""logDir="" MemberReference logDir Literal ""\n"" append StatementExpression MethodInvocation builder Literal ""Success Factors:\n"" append ForStatement EnhancedForControl VariableDeclaration ReferenceType Role VariableDeclarator r MethodInvocation successFactors keySet BlockStatement StatementExpression MethodInvocation builder BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""  role: "" MemberReference r Literal "", factor: "" MethodInvocation successFactors MemberReference r get Literal ""\n"" append End ForStatement EnhancedForControl VariableDeclaration ReferenceType HostRoleCommand VariableDeclarator hostRoleCommand MethodInvocation getOrderedHostRoleCommands BlockStatement StatementExpression MethodInvocation builder MethodInvocation MethodInvocation hostRoleCommand getHostName append MethodInvocation Literal "" :\n"" append Literal ""HOST: "" append StatementExpression MethodInvocation builder MethodInvocation hostRoleCommand MethodInvocation getJson getExecutionCommandWrapper append StatementExpression MethodInvocation builder Literal ""\n"" append StatementExpression MethodInvocation builder MethodInvocation hostRoleCommand toString append StatementExpression MethodInvocation builder Literal ""\n"" append End StatementExpression MethodInvocation builder Literal ""STAGE DESCRIPTION END\n"" append ReturnStatement MethodInvocation builder toString",0
321,321,,1
229,229,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.actionmanager Import java.util  Import org.apache.ambari.server.Role Import org.apache.ambari.server.agent.CommandReport Import org.apache.ambari.server.agent.ExecutionCommand Import org.slf4j.Logger Import org.slf4j.LoggerFactory Import com.google.inject.Singleton ClassDeclaration Modifier public Annotation Singleton ActionDBInMemoryImpl FieldDeclaration Modifier private final BasicType long VariableDeclarator lastRequestId Literal 0 FieldDeclaration Modifier private static ReferenceType Logger VariableDeclarator LOG MethodInvocation LoggerFactory ClassReference ReferenceType ActionDBInMemoryImpl getLogger FieldDeclaration ReferenceType List TypeArgument ReferenceType Stage VariableDeclarator stageList ClassCreator ReferenceType ArrayList TypeArgument ReferenceType Stage MethodDeclaration Modifier public synchronized Annotation Override ReferenceType Stage getAction FormalParameter ReferenceType String actionId ForStatement EnhancedForControl VariableDeclaration ReferenceType Stage VariableDeclarator s MemberReference stageList BlockStatement IfStatement MethodInvocation s MethodInvocation MemberReference actionId equals getActionId BlockStatement ReturnStatement MemberReference s End End ReturnStatement Literal null MethodDeclaration Modifier public synchronized Annotation Override ReferenceType List TypeArgument ReferenceType Stage getAllStages FormalParameter BasicType long requestId LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType Stage VariableDeclarator l ClassCreator ReferenceType ArrayList TypeArgument ReferenceType Stage ForStatement EnhancedForControl VariableDeclaration ReferenceType Stage VariableDeclarator s MemberReference stageList BlockStatement IfStatement BinaryOperation == MethodInvocation s getRequestId MemberReference requestId BlockStatement StatementExpression MethodInvocation l MemberReference s add End End ReturnStatement MemberReference l MethodDeclaration Modifier public synchronized Annotation Override abortOperation FormalParameter BasicType long requestId ForStatement EnhancedForControl VariableDeclaration ReferenceType Stage VariableDeclarator s MemberReference stageList BlockStatement IfStatement BinaryOperation == MethodInvocation s getRequestId MemberReference requestId BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator host MethodInvocation s MethodInvocation keySet getHostRoleCommands BlockStatement LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType HostRoleCommand VariableDeclarator roleCommands MethodInvocation s MethodInvocation MemberReference host get getHostRoleCommands ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator role MethodInvocation roleCommands keySet BlockStatement LocalVariableDeclaration ReferenceType HostRoleCommand VariableDeclarator cmd MethodInvocation roleCommands MemberReference role get LocalVariableDeclaration ReferenceType HostRoleStatus VariableDeclarator status MethodInvocation s MemberReference host MethodInvocation cmd MethodInvocation toString getRole getHostRoleStatus IfStatement BinaryOperation || BinaryOperation || MethodInvocation status MemberReference HostRoleStatus IN_PROGRESS equals MethodInvocation status MemberReference HostRoleStatus QUEUED equals MethodInvocation status MemberReference HostRoleStatus PENDING equals BlockStatement StatementExpression MethodInvocation s MemberReference host MethodInvocation cmd MethodInvocation toString getRole MemberReference HostRoleStatus ABORTED setHostRoleStatus End End End End End MethodDeclaration Modifier public synchronized Annotation Override timeoutHostRole FormalParameter ReferenceType String host FormalParameter BasicType long requestId FormalParameter BasicType long stageId FormalParameter ReferenceType Role role ForStatement EnhancedForControl VariableDeclaration ReferenceType Stage VariableDeclarator s MemberReference stageList BlockStatement StatementExpression MethodInvocation s MemberReference host MethodInvocation role toString MemberReference HostRoleStatus TIMEDOUT setHostRoleStatus End MethodDeclaration Modifier public synchronized Annotation Override ReferenceType List TypeArgument ReferenceType Stage getStagesInProgress LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType Stage VariableDeclarator l ClassCreator ReferenceType ArrayList TypeArgument ReferenceType Stage ForStatement EnhancedForControl VariableDeclaration ReferenceType Stage VariableDeclarator s MemberReference stageList BlockStatement IfStatement MethodInvocation s isStageInProgress BlockStatement StatementExpression MethodInvocation l MemberReference s add End End ReturnStatement MemberReference l MethodDeclaration Modifier public synchronized Annotation Override persistActions FormalParameter ReferenceType List TypeArgument ReferenceType Stage stages ForStatement EnhancedForControl VariableDeclaration ReferenceType Stage VariableDeclarator s MemberReference stages BlockStatement StatementExpression MethodInvocation stageList MemberReference s add End MethodDeclaration Modifier public synchronized Annotation Override updateHostRoleState FormalParameter ReferenceType String hostname FormalParameter BasicType long requestId FormalParameter BasicType long stageId FormalParameter ReferenceType String role FormalParameter ReferenceType CommandReport report StatementExpression MethodInvocation LOG BinaryOperation + Literal ""DEBUG stages to iterate: "" MethodInvocation stageList size info ForStatement EnhancedForControl VariableDeclaration ReferenceType Stage VariableDeclarator s MemberReference stageList BlockStatement IfStatement BinaryOperation && BinaryOperation == MethodInvocation s getRequestId MemberReference requestId BinaryOperation == MethodInvocation s getStageId MemberReference stageId BlockStatement StatementExpression MethodInvocation s MemberReference hostname MemberReference role MethodInvocation HostRoleStatus MethodInvocation report getStatus valueOf setHostRoleStatus StatementExpression MethodInvocation s MemberReference hostname MemberReference role MethodInvocation report getExitCode setExitCode StatementExpression MethodInvocation s MemberReference hostname MemberReference role MethodInvocation report getStdErr setStderr StatementExpression MethodInvocation s MemberReference hostname MemberReference role MethodInvocation report getStdOut setStdout End End MethodDeclaration Modifier public Annotation Override abortHostRole FormalParameter ReferenceType String host FormalParameter BasicType long requestId FormalParameter BasicType long stageId FormalParameter ReferenceType Role role LocalVariableDeclaration ReferenceType CommandReport VariableDeclarator report ClassCreator ReferenceType CommandReport StatementExpression MethodInvocation report Literal 999 setExitCode StatementExpression MethodInvocation report Literal ""Host Role in invalid state"" setStdErr StatementExpression MethodInvocation report Literal """" setStdOut StatementExpression MethodInvocation report Literal ""ABORTED"" setStatus StatementExpression MethodInvocation MemberReference host MemberReference requestId MemberReference stageId MethodInvocation role toString MemberReference report updateHostRoleState MethodDeclaration Modifier public synchronized Annotation Override BasicType long getLastPersistedRequestIdWhenInitialized ReturnStatement MemberReference lastRequestId MethodDeclaration Modifier public Annotation Override hostRoleScheduled FormalParameter ReferenceType Stage s FormalParameter ReferenceType String hostname FormalParameter ReferenceType String roleStr MethodDeclaration Modifier public Annotation Override ReferenceType List TypeArgument ReferenceType HostRoleCommand getRequestTasks FormalParameter BasicType long requestId ReturnStatement Literal null MethodDeclaration Modifier public Annotation Override ReferenceType List TypeArgument ReferenceType HostRoleCommand getAllTasksByRequestIds FormalParameter ReferenceType Collection TypeArgument ReferenceType Long requestIds ReturnStatement Literal null MethodDeclaration Modifier public Annotation Override ReferenceType List TypeArgument ReferenceType HostRoleCommand getTasksByRequestAndTaskIds FormalParameter ReferenceType Collection TypeArgument ReferenceType Long requestIds FormalParameter ReferenceType Collection TypeArgument ReferenceType Long taskIds ReturnStatement Literal null MethodDeclaration Modifier public Annotation Override ReferenceType Collection TypeArgument ReferenceType HostRoleCommand getTasks FormalParameter ReferenceType Collection TypeArgument ReferenceType Long taskIds ReturnStatement Literal null MethodDeclaration Modifier public Annotation Override ReferenceType List TypeArgument ReferenceType Stage getStagesByHostRoleStatus FormalParameter ReferenceType Set TypeArgument ReferenceType HostRoleStatus statuses LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType Stage VariableDeclarator l ClassCreator ReferenceType ArrayList TypeArgument ReferenceType Stage ForStatement EnhancedForControl VariableDeclaration ReferenceType Stage VariableDeclarator s MemberReference stageList BlockStatement IfStatement MethodInvocation s MemberReference statuses doesStageHaveHostRoleStatus BlockStatement StatementExpression MethodInvocation l MemberReference s add End End ReturnStatement MemberReference l MethodDeclaration Modifier public synchronized Annotation Override ReferenceType List TypeArgument ReferenceType Long getRequests LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType Long VariableDeclarator requestIds ClassCreator ReferenceType HashSet TypeArgument ReferenceType Long ForStatement EnhancedForControl VariableDeclaration ReferenceType Stage VariableDeclarator s MemberReference stageList BlockStatement StatementExpression MethodInvocation requestIds MethodInvocation s getRequestId add End LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType Long VariableDeclarator ids ClassCreator ReferenceType ArrayList TypeArgument ReferenceType Long StatementExpression MethodInvocation ids MemberReference requestIds addAll ReturnStatement MemberReference ids MethodDeclaration Modifier public ReferenceType HostRoleCommand getTask FormalParameter BasicType long taskId ForStatement EnhancedForControl VariableDeclaration ReferenceType Stage VariableDeclarator s MemberReference stageList BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator host MethodInvocation s MethodInvocation keySet getHostRoleCommands BlockStatement LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType HostRoleCommand VariableDeclarator map MethodInvocation s MethodInvocation MemberReference host get getHostRoleCommands ForStatement EnhancedForControl VariableDeclaration ReferenceType HostRoleCommand VariableDeclarator hostRoleCommand MethodInvocation map values BlockStatement IfStatement BinaryOperation == MethodInvocation hostRoleCommand getTaskId MemberReference taskId BlockStatement ReturnStatement MemberReference hostRoleCommand End End End End ReturnStatement Literal null MethodDeclaration Modifier public Annotation Override ReferenceType List TypeArgument ReferenceType Long getRequestsByStatus FormalParameter ReferenceType RequestStatus status ThrowStatement ClassCreator ReferenceType RuntimeException Literal ""Functionality not implemented"" ReferenceType ActionDBAccessor",0
200,200,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.actionmanager Import java.util.Collection Import java.util.List Import java.util.Set Import java.util.concurrent.atomic.AtomicLong Import org.apache.ambari.server.agent.ActionQueue Import org.apache.ambari.server.agent.CommandReport Import org.apache.ambari.server.state.Clusters Import org.apache.ambari.server.utils.StageUtils Import org.slf4j.Logger Import org.slf4j.LoggerFactory Import com.google.inject.Inject Import com.google.inject.Singleton Import com.google.inject.name.Named ClassDeclaration Modifier public Annotation Singleton /**
 * This class acts as the interface for action manager with other components.
 */ ActionManager FieldDeclaration Modifier private final ReferenceType ActionScheduler VariableDeclarator scheduler FieldDeclaration Modifier private final ReferenceType ActionDBAccessor VariableDeclarator db FieldDeclaration Modifier private final ReferenceType ActionQueue VariableDeclarator actionQueue FieldDeclaration Modifier private static ReferenceType Logger VariableDeclarator LOG MethodInvocation LoggerFactory ClassReference ReferenceType ActionManager getLogger FieldDeclaration Modifier private final ReferenceType AtomicLong VariableDeclarator requestCounter ConstructorDeclaration Modifier public Annotation Inject ActionManager FormalParameter Annotation Named Literal ""schedulerSleeptime"" BasicType long schedulerSleepTime FormalParameter Annotation Named Literal ""actionTimeout"" BasicType long actionTimeout FormalParameter ReferenceType ActionQueue aq FormalParameter ReferenceType Clusters fsm FormalParameter ReferenceType ActionDBAccessor db StatementExpression Assignment This MemberReference actionQueue MemberReference aq = StatementExpression Assignment This MemberReference db MemberReference db = StatementExpression Assignment MemberReference scheduler ClassCreator ReferenceType ActionScheduler MemberReference schedulerSleepTime MemberReference actionTimeout MemberReference db MemberReference actionQueue MemberReference fsm Literal 2 = StatementExpression Assignment MemberReference requestCounter ClassCreator ReferenceType AtomicLong MethodInvocation db getLastPersistedRequestIdWhenInitialized = MethodDeclaration Modifier public start StatementExpression MethodInvocation LOG Literal ""Starting scheduler thread"" info StatementExpression MethodInvocation scheduler start MethodDeclaration Modifier public shutdown StatementExpression MethodInvocation scheduler stop MethodDeclaration Modifier public sendActions FormalParameter ReferenceType List TypeArgument ReferenceType Stage stages ForStatement EnhancedForControl VariableDeclaration ReferenceType Stage VariableDeclarator s MemberReference stages BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Persisting stage into db: "" MethodInvocation s toString info End StatementExpression MethodInvocation db MemberReference stages persistActions MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType Stage getRequestStatus FormalParameter BasicType long requestId ReturnStatement MethodInvocation db MemberReference requestId getAllStages MethodDeclaration Modifier public ReferenceType Stage getAction FormalParameter BasicType long requestId FormalParameter BasicType long stageId ReturnStatement MethodInvocation db MethodInvocation StageUtils MemberReference requestId MemberReference stageId getActionId getAction MethodDeclaration Modifier public processTaskResponse FormalParameter ReferenceType String hostname FormalParameter ReferenceType List TypeArgument ReferenceType CommandReport reports IfStatement BinaryOperation == MemberReference reports Literal null BlockStatement ReturnStatement End ForStatement EnhancedForControl VariableDeclaration ReferenceType CommandReport VariableDeclarator report MemberReference reports BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Processing command report : "" MethodInvocation report toString debug End LocalVariableDeclaration ReferenceType String VariableDeclarator actionId MethodInvocation report getActionId LocalVariableDeclaration BasicType long VariableDeclarator requestStageIds MethodInvocation StageUtils MemberReference actionId getRequestStage LocalVariableDeclaration BasicType long VariableDeclarator requestId MemberReference ArraySelector Literal 0 requestStageIds LocalVariableDeclaration BasicType long VariableDeclarator stageId MemberReference ArraySelector Literal 1 requestStageIds LocalVariableDeclaration ReferenceType HostRoleCommand VariableDeclarator command MethodInvocation db MethodInvocation report getTaskId getTask IfStatement BinaryOperation == MemberReference command Literal null BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + Literal ""The task "" MethodInvocation report getTaskId Literal "" is invalid"" warn ContinueStatement End IfStatement BinaryOperation && MethodInvocation ! command MethodInvocation MemberReference HostRoleStatus IN_PROGRESS equals getStatus MethodInvocation ! command MethodInvocation MemberReference HostRoleStatus QUEUED equals getStatus BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + Literal ""The task "" MethodInvocation command getTaskId Literal "" is not in progress, ignoring update"" warn ContinueStatement End StatementExpression MethodInvocation db MemberReference hostname MemberReference requestId MemberReference stageId MethodInvocation report getRole MemberReference report updateHostRoleState End MethodDeclaration Modifier public handleLostHost FormalParameter ReferenceType String host MethodDeclaration Modifier public BasicType long getNextRequestId ReturnStatement MethodInvocation requestCounter incrementAndGet MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType HostRoleCommand getRequestTasks FormalParameter BasicType long requestId ReturnStatement MethodInvocation db MemberReference requestId getRequestTasks MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType HostRoleCommand getAllTasksByRequestIds FormalParameter ReferenceType Collection TypeArgument ReferenceType Long requestIds ReturnStatement MethodInvocation db MemberReference requestIds getAllTasksByRequestIds MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType HostRoleCommand getTasksByRequestAndTaskIds FormalParameter ReferenceType Collection TypeArgument ReferenceType Long requestIds FormalParameter ReferenceType Collection TypeArgument ReferenceType Long taskIds ReturnStatement MethodInvocation db MemberReference requestIds MemberReference taskIds getTasksByRequestAndTaskIds MethodDeclaration Modifier public ReferenceType Collection TypeArgument ReferenceType HostRoleCommand getTasks FormalParameter ReferenceType Collection TypeArgument ReferenceType Long taskIds ReturnStatement MethodInvocation db MemberReference taskIds getTasks MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType Stage getRequestsByHostRoleStatus FormalParameter ReferenceType Set TypeArgument ReferenceType HostRoleStatus statuses ReturnStatement MethodInvocation db MemberReference statuses getStagesByHostRoleStatus MethodDeclaration /**
   * Returns last 20 requests
   * @return
   */ Modifier public ReferenceType List TypeArgument ReferenceType Long getRequests ReturnStatement MethodInvocation db getRequests MethodDeclaration /**
   * Returns last 20 requests
   * @return
   */ Modifier public ReferenceType List TypeArgument ReferenceType Long getRequestsByStatus FormalParameter ReferenceType RequestStatus status ReturnStatement MethodInvocation db MemberReference status getRequestsByStatus",0
143,143,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state Import org.apache.ambari.server.state.fsm.event.AbstractEvent ClassDeclaration Modifier public abstract /**
 * Base class for all events that affect the Host FSM
 */ HostEvent FieldDeclaration /**
   * Hostname of the Host
   */ Modifier private final ReferenceType String VariableDeclarator hostName ConstructorDeclaration Modifier public HostEvent FormalParameter ReferenceType String hostName FormalParameter ReferenceType HostEventType type StatementExpression SuperConstructorInvocation MemberReference type StatementExpression Assignment This MemberReference hostName MemberReference hostName = MethodDeclaration /**
   * @return the hostName
   */ Modifier public ReferenceType String getHostName ReturnStatement MemberReference hostName ReferenceType AbstractEvent TypeArgument ReferenceType HostEventType",0
373,373,,0
108,108,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.security.authorization Import com.google.inject.Singleton Import org.apache.ambari.server.orm.entities.RoleEntity Import org.springframework.security.core.GrantedAuthority Import org.springframework.security.core.authority.SimpleGrantedAuthority Import java.util.ArrayList Import java.util.Collection Import java.util.List ClassDeclaration Modifier public Annotation Singleton AuthorizationHelper MethodDeclaration /**
   * Converts collection of RoleEntities to collection of GrantedAuthorities
   */ Modifier public ReferenceType Collection TypeArgument ReferenceType GrantedAuthority convertRolesToAuthorities FormalParameter ReferenceType Collection TypeArgument ReferenceType RoleEntity roleEntities LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType GrantedAuthority VariableDeclarator authorities ClassCreator ReferenceType ArrayList TypeArgument ReferenceType GrantedAuthority MethodInvocation roleEntities size ForStatement EnhancedForControl VariableDeclaration ReferenceType RoleEntity VariableDeclarator roleEntity MemberReference roleEntities BlockStatement StatementExpression MethodInvocation authorities ClassCreator ReferenceType SimpleGrantedAuthority MethodInvocation roleEntity MethodInvocation toUpperCase getRoleName add End ReturnStatement MemberReference authorities",0
125,125,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.ganglia Import org.apache.ambari.server.controller.internal.PropertyInfo Import org.apache.ambari.server.controller.spi.Resource Import org.apache.ambari.server.controller.utilities.StreamProvider Import java.util.Map ClassDeclaration Modifier public /**
 * Ganglia property provider implementation for host component resources.
 */ GangliaHostComponentPropertyProvider ConstructorDeclaration Modifier public GangliaHostComponentPropertyProvider FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType PropertyInfo componentPropertyInfoMap FormalParameter ReferenceType StreamProvider streamProvider FormalParameter ReferenceType GangliaHostProvider hostProvider FormalParameter ReferenceType String clusterNamePropertyId FormalParameter ReferenceType String hostNamePropertyId FormalParameter ReferenceType String componentNamePropertyId StatementExpression SuperConstructorInvocation MemberReference componentPropertyInfoMap MemberReference streamProvider MemberReference hostProvider MemberReference clusterNamePropertyId MemberReference hostNamePropertyId MemberReference componentNamePropertyId MethodDeclaration Modifier protected Annotation Override ReferenceType String getHostName FormalParameter ReferenceType Resource resource ReturnStatement Cast ReferenceType String MethodInvocation resource MethodInvocation getHostNamePropertyId getPropertyValue MethodDeclaration Modifier protected Annotation Override ReferenceType String getComponentName FormalParameter ReferenceType Resource resource ReturnStatement Cast ReferenceType String MethodInvocation resource MethodInvocation getComponentNamePropertyId getPropertyValue MethodDeclaration Modifier protected Annotation Override ReferenceType String getGangliaClusterName FormalParameter ReferenceType Resource resource FormalParameter ReferenceType String clusterName ReturnStatement MethodInvocation GANGLIA_CLUSTER_NAMES MethodInvocation MemberReference resource getComponentName get ReferenceType GangliaPropertyProvider",0
49,49,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server ClassDeclaration Modifier public Annotation SuppressWarnings Literal ""serial"" ServiceNotFoundException ConstructorDeclaration Modifier public ServiceNotFoundException FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String serviceName StatementExpression SuperConstructorInvocation BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Service not found"" Literal "", clusterName="" MemberReference clusterName Literal "", serviceName="" MemberReference serviceName ReferenceType ObjectNotFoundException",0
162,162,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.log4j.common Import java.io.IOException Import org.apache.log4j.spi.LoggingEvent InterfaceDeclaration Modifier public LogStore MethodDeclaration persist FormalParameter ReferenceType LoggingEvent originalEvent FormalParameter ReferenceType Object parsedEvent IOException MethodDeclaration close IOException",0
19,19,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.spi ClassDeclaration Modifier public /**
 * Indicates that a system exception occurred.
 */ SystemException ConstructorDeclaration Modifier public /**
   * Constructor.
   *
   * @param msg        message
   * @param throwable  root exception
   */ SystemException FormalParameter ReferenceType String msg FormalParameter ReferenceType Throwable throwable StatementExpression SuperConstructorInvocation MemberReference msg MemberReference throwable ReferenceType Exception",0
260,260,,0
62,62,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.dao Import com.google.inject.Inject Import com.google.inject.Provider Import com.google.inject.persist.Transactional Import org.apache.ambari.server.orm.entities.UserEntity Import javax.persistence.EntityManager Import javax.persistence.NoResultException Import javax.persistence.TypedQuery Import java.util.List ClassDeclaration Modifier public UserDAO FieldDeclaration Annotation Inject ReferenceType Provider TypeArgument ReferenceType EntityManager VariableDeclarator entityManagerProvider FieldDeclaration Annotation Inject ReferenceType DaoUtils VariableDeclarator daoUtils MethodDeclaration Modifier public Annotation Transactional ReferenceType UserEntity findByPK FormalParameter ReferenceType Integer userPK ReturnStatement MethodInvocation entityManagerProvider MethodInvocation ClassReference ReferenceType UserEntity MemberReference userPK find get MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType UserEntity findAll LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType UserEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation Literal ""SELECT user FROM UserEntity user"" ClassReference ReferenceType UserEntity createQuery get ReturnStatement MethodInvocation daoUtils MemberReference query selectList MethodDeclaration Modifier public Annotation Transactional ReferenceType UserEntity findLocalUserByName FormalParameter ReferenceType String userName LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType UserEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation Literal ""localUserByName"" ClassReference ReferenceType UserEntity createNamedQuery get StatementExpression MethodInvocation query Literal ""username"" MethodInvocation userName toLowerCase setParameter TryStatement ReturnStatement MethodInvocation query getSingleResult CatchClause CatchClauseParameter NoResultException e ReturnStatement Literal null MethodDeclaration Modifier public Annotation Transactional ReferenceType UserEntity findLdapUserByName FormalParameter ReferenceType String userName LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType UserEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation Literal ""ldapUserByName"" ClassReference ReferenceType UserEntity createNamedQuery get StatementExpression MethodInvocation query Literal ""username"" MethodInvocation userName toLowerCase setParameter TryStatement ReturnStatement MethodInvocation query getSingleResult CatchClause CatchClauseParameter NoResultException e ReturnStatement Literal null MethodDeclaration Modifier public Annotation Transactional create FormalParameter ReferenceType UserEntity user StatementExpression MethodInvocation user MethodInvocation user MethodInvocation toLowerCase getUserName setUserName StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference user persist get MethodDeclaration Modifier public Annotation Transactional ReferenceType UserEntity merge FormalParameter ReferenceType UserEntity user StatementExpression MethodInvocation user MethodInvocation user MethodInvocation toLowerCase getUserName setUserName ReturnStatement MethodInvocation entityManagerProvider MethodInvocation MemberReference user merge get MethodDeclaration Modifier public Annotation Transactional remove FormalParameter ReferenceType UserEntity user StatementExpression MethodInvocation entityManagerProvider MethodInvocation MethodInvocation MemberReference user merge remove get MethodDeclaration Modifier public Annotation Transactional removeByPK FormalParameter ReferenceType Integer userPK StatementExpression MethodInvocation MethodInvocation MemberReference userPK findByPK remove",0
270,270,,0
215,215,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state ClassDeclaration Modifier public ComponentInfo FieldDeclaration Modifier private ReferenceType String VariableDeclarator name FieldDeclaration Modifier private ReferenceType String VariableDeclarator category MethodDeclaration Modifier public ReferenceType String getName ReturnStatement MemberReference name MethodDeclaration Modifier public setName FormalParameter ReferenceType String name StatementExpression Assignment This MemberReference name MemberReference name = MethodDeclaration Modifier public ReferenceType String getCategory ReturnStatement MemberReference category MethodDeclaration Modifier public setCategory FormalParameter ReferenceType String category StatementExpression Assignment This MemberReference category MemberReference category = MethodDeclaration Modifier public BasicType boolean isClient ReturnStatement Literal MethodInvocation MemberReference category equals ""CLIENT"" MethodDeclaration Modifier public BasicType boolean isMaster ReturnStatement Literal MethodInvocation MemberReference category equals ""MASTER""",0
156,156,"CompilationUnit PackageDeclaration org.apache.ambari.server.orm.entities Import org.apache.ambari.server.Role Import org.apache.ambari.server.RoleCommand Import org.apache.ambari.server.actionmanager.HostRoleStatus Import javax.persistence  ClassDeclaration Modifier public Annotation Table ElementValuePair name Literal ""host_role_command"" ElementValuePair schema Literal ""ambari"" ElementValuePair catalog Literal """" Annotation Entity Annotation Cacheable Literal false Annotation SequenceGenerator ElementValuePair name Literal ""ambari.host_role_command_task_id_seq"" ElementValuePair allocationSize Literal 1 HostRoleCommandEntity FieldDeclaration Modifier private ReferenceType Long VariableDeclarator taskId MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""task_id"" Annotation Id Annotation GeneratedValue ElementValuePair strategy MemberReference GenerationType SEQUENCE ElementValuePair generator Literal ""ambari.host_role_command_task_id_seq"" ReferenceType Long getTaskId ReturnStatement MemberReference taskId MethodDeclaration Modifier public setTaskId FormalParameter ReferenceType Long taskId StatementExpression Assignment This MemberReference taskId MemberReference taskId = FieldDeclaration Modifier private ReferenceType Long VariableDeclarator requestId MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""request_id"" ElementValuePair insertable Literal false ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Basic ReferenceType Long getRequestId ReturnStatement MemberReference requestId MethodDeclaration Modifier public setRequestId FormalParameter ReferenceType Long requestId StatementExpression Assignment This MemberReference requestId MemberReference requestId = FieldDeclaration Modifier private ReferenceType Long VariableDeclarator stageId MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""stage_id"" ElementValuePair insertable Literal false ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Basic ReferenceType Long getStageId ReturnStatement MemberReference stageId MethodDeclaration Modifier public setStageId FormalParameter ReferenceType Long stageId StatementExpression Assignment This MemberReference stageId MemberReference stageId = FieldDeclaration Modifier private ReferenceType String VariableDeclarator hostName MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""host_name"" ElementValuePair insertable Literal false ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Basic ReferenceType String getHostName ReturnStatement MemberReference hostName MethodDeclaration Modifier public setHostName FormalParameter ReferenceType String hostName StatementExpression Assignment This MemberReference hostName MemberReference hostName = FieldDeclaration Modifier private ReferenceType Role VariableDeclarator role MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""role"" Annotation Enumerated MemberReference EnumType STRING ReferenceType Role getRole ReturnStatement MemberReference role MethodDeclaration Modifier public setRole FormalParameter ReferenceType Role role StatementExpression Assignment This MemberReference role MemberReference role = FieldDeclaration Modifier private ReferenceType String VariableDeclarator event Literal """" MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""event"" ElementValuePair nullable Literal false ElementValuePair length Literal 32000 Annotation Basic ReferenceType String getEvent ReturnStatement MemberReference event MethodDeclaration Modifier public setEvent FormalParameter ReferenceType String event StatementExpression Assignment This MemberReference event MemberReference event = FieldDeclaration Modifier private ReferenceType Integer VariableDeclarator exitcode Literal 0 MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""exitcode"" ElementValuePair nullable Literal false Annotation Basic ReferenceType Integer getExitcode ReturnStatement MemberReference exitcode MethodDeclaration Modifier public setExitcode FormalParameter ReferenceType Integer exitcode StatementExpression Assignment This MemberReference exitcode MemberReference exitcode = FieldDeclaration Modifier private ReferenceType HostRoleStatus VariableDeclarator status MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""status"" Annotation Enumerated MemberReference EnumType STRING ReferenceType HostRoleStatus getStatus ReturnStatement MemberReference status MethodDeclaration Modifier public setStatus FormalParameter ReferenceType HostRoleStatus status StatementExpression Assignment This MemberReference status MemberReference status = FieldDeclaration Modifier private BasicType byte VariableDeclarator stdError ArrayCreator BasicType byte Literal 0 MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""std_error"" ElementValuePair nullable Literal false Annotation Lob Annotation Basic BasicType byte getStdError ReturnStatement MemberReference stdError MethodDeclaration Modifier public setStdError FormalParameter BasicType byte stdError StatementExpression Assignment This MemberReference stdError MemberReference stdError = FieldDeclaration Modifier private BasicType byte VariableDeclarator stdOut ArrayCreator BasicType byte Literal 0 MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""std_out"" ElementValuePair nullable Literal false Annotation Lob Annotation Basic BasicType byte getStdOut ReturnStatement MemberReference stdOut MethodDeclaration Modifier public setStdOut FormalParameter BasicType byte stdOut StatementExpression Assignment This MemberReference stdOut MemberReference stdOut = FieldDeclaration Modifier private ReferenceType Long VariableDeclarator startTime Literal - 1L MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""start_time"" ElementValuePair nullable Literal false Annotation Basic ReferenceType Long getStartTime ReturnStatement MemberReference startTime MethodDeclaration Modifier public setStartTime FormalParameter ReferenceType Long startTime StatementExpression Assignment This MemberReference startTime MemberReference startTime = FieldDeclaration Modifier private ReferenceType Long VariableDeclarator lastAttemptTime Literal - 1L MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""last_attempt_time"" ElementValuePair nullable Literal false Annotation Basic ReferenceType Long getLastAttemptTime ReturnStatement MemberReference lastAttemptTime MethodDeclaration Modifier public setLastAttemptTime FormalParameter ReferenceType Long lastAttemptTime StatementExpression Assignment This MemberReference lastAttemptTime MemberReference lastAttemptTime = FieldDeclaration Modifier private ReferenceType Short VariableDeclarator attemptCount Literal 0 MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""attempt_count"" ElementValuePair nullable Literal false Annotation Basic ReferenceType Short getAttemptCount ReturnStatement MemberReference attemptCount MethodDeclaration Modifier public setAttemptCount FormalParameter ReferenceType Short attemptCount StatementExpression Assignment This MemberReference attemptCount MemberReference attemptCount = FieldDeclaration Modifier private ReferenceType RoleCommand VariableDeclarator roleCommand MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""role_command"" Annotation Enumerated MemberReference EnumType STRING ReferenceType RoleCommand getRoleCommand ReturnStatement MemberReference roleCommand MethodDeclaration Modifier public setRoleCommand FormalParameter ReferenceType RoleCommand roleCommand StatementExpression Assignment This MemberReference roleCommand MemberReference roleCommand = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType HostRoleCommandEntity VariableDeclarator that Cast ReferenceType HostRoleCommandEntity MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference attemptCount Literal null MethodInvocation ! attemptCount MemberReference that attemptCount equals BinaryOperation != MemberReference that attemptCount Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference event Literal null MethodInvocation ! event MemberReference that event equals BinaryOperation != MemberReference that event Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference exitcode Literal null MethodInvocation ! exitcode MemberReference that exitcode equals BinaryOperation != MemberReference that exitcode Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference hostName Literal null MethodInvocation ! hostName MemberReference that hostName equals BinaryOperation != MemberReference that hostName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference lastAttemptTime Literal null MethodInvocation ! lastAttemptTime MemberReference that lastAttemptTime equals BinaryOperation != MemberReference that lastAttemptTime Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference requestId Literal null MethodInvocation ! requestId MemberReference that requestId equals BinaryOperation != MemberReference that requestId Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference role Literal null MethodInvocation ! role MemberReference that role equals BinaryOperation != MemberReference that role Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference stageId Literal null MethodInvocation ! stageId MemberReference that stageId equals BinaryOperation != MemberReference that stageId Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference startTime Literal null MethodInvocation ! startTime MemberReference that startTime equals BinaryOperation != MemberReference that startTime Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference status Literal null MethodInvocation ! status MemberReference that status equals BinaryOperation != MemberReference that status Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference stdError Literal null MethodInvocation ! stdError MemberReference that stdError equals BinaryOperation != MemberReference that stdError Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference stdOut Literal null MethodInvocation ! stdOut MemberReference that stdOut equals BinaryOperation != MemberReference that stdOut Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference taskId Literal null MethodInvocation ! taskId MemberReference that taskId equals BinaryOperation != MemberReference that taskId Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference taskId Literal null MethodInvocation taskId hashCode Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference requestId Literal null MethodInvocation requestId hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference stageId Literal null MethodInvocation stageId hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference hostName Literal null MethodInvocation hostName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference role Literal null MethodInvocation role hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference event Literal null MethodInvocation event hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference exitcode Literal null MethodInvocation exitcode hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference status Literal null MethodInvocation status hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference stdError Literal null MethodInvocation stdError hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference stdOut Literal null MethodInvocation stdOut hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference startTime Literal null MethodInvocation startTime hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference lastAttemptTime Literal null MethodInvocation lastAttemptTime hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference attemptCount Literal null MethodInvocation attemptCount hashCode Literal 0 = ReturnStatement MemberReference result FieldDeclaration Modifier private ReferenceType ExecutionCommandEntity VariableDeclarator executionCommand MethodDeclaration Modifier public Annotation OneToOne ElementValuePair mappedBy Literal ""hostRoleCommand"" ReferenceType ExecutionCommandEntity getExecutionCommand ReturnStatement MemberReference executionCommand MethodDeclaration Modifier public setExecutionCommand FormalParameter ReferenceType ExecutionCommandEntity executionCommandsByTaskId StatementExpression Assignment This MemberReference executionCommand MemberReference executionCommandsByTaskId = FieldDeclaration Modifier private ReferenceType StageEntity VariableDeclarator stage MethodDeclaration Modifier public Annotation ManyToOne Annotation JoinColumns ElementArrayValue Annotation JoinColumn ElementValuePair name Literal ""request_id"" ElementValuePair referencedColumnName Literal ""request_id"" ElementValuePair nullable Literal false Annotation JoinColumn ElementValuePair name Literal ""stage_id"" ElementValuePair referencedColumnName Literal ""stage_id"" ElementValuePair nullable Literal false ReferenceType StageEntity getStage ReturnStatement MemberReference stage MethodDeclaration Modifier public setStage FormalParameter ReferenceType StageEntity stage StatementExpression Assignment This MemberReference stage MemberReference stage = FieldDeclaration Modifier private ReferenceType HostEntity VariableDeclarator host MethodDeclaration Modifier public Annotation ManyToOne Annotation JoinColumn ElementValuePair name Literal ""host_name"" ElementValuePair referencedColumnName Literal ""host_name"" ElementValuePair nullable Literal false ReferenceType HostEntity getHost ReturnStatement MemberReference host MethodDeclaration Modifier public setHost FormalParameter ReferenceType HostEntity host StatementExpression Assignment This MemberReference host MemberReference host =",0
79,79,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.resources Import org.apache.ambari.server.api.query.Query Import org.apache.ambari.server.api.query.QueryImpl Import org.apache.ambari.server.controller.spi.ClusterController Import org.apache.ambari.server.controller.spi.Resource Import org.apache.ambari.server.controller.utilities.ClusterControllerHelper Import java.util.HashMap Import java.util.Map Import java.util.Set ClassDeclaration Modifier public /**
 * Resource instance which contains request specific state.
 */ ResourceInstanceImpl FieldDeclaration /**
   * Query associated with the resource definition.
   */ Modifier private ReferenceType Query VariableDeclarator m_query FieldDeclaration /**
   * Map of primary and foreign keys and values necessary to identify the resource.
   */ Modifier private ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String VariableDeclarator m_mapResourceIds ClassCreator ReferenceType HashMap TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String FieldDeclaration /**
   * Definition for the resource type.  The definition contains all information specific to the
   * resource type.
   */ Modifier private ReferenceType ResourceDefinition VariableDeclarator m_resourceDefinition FieldDeclaration /**
   * Sub-resource instances of this resource.
   * Map of resource resource name to resource instance.
   */ Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType ResourceInstance VariableDeclarator m_mapSubResources FieldDeclaration /**
   * Factory for creating resource instances.
   * Used to create sub-resource instances.
   */ Modifier private ReferenceType ResourceInstanceFactory VariableDeclarator m_resourceFactory FieldDeclaration /**
   * Cluster controller reference.
   */ Modifier private ReferenceType ClusterController VariableDeclarator m_controller MethodInvocation ClusterControllerHelper getClusterController ConstructorDeclaration Modifier public ResourceInstanceImpl FormalParameter ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String mapIds FormalParameter ReferenceType ResourceDefinition resourceDefinition FormalParameter ReferenceType ResourceInstanceFactory resourceFactory StatementExpression Assignment MemberReference m_resourceDefinition MemberReference resourceDefinition = StatementExpression Assignment MemberReference m_query ClassCreator ReferenceType QueryImpl This = StatementExpression Assignment MemberReference m_resourceFactory MemberReference resourceFactory = StatementExpression MethodInvocation MemberReference mapIds setIds MethodDeclaration Modifier public Annotation Override setIds FormalParameter ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String mapIds StatementExpression MethodInvocation m_mapResourceIds MemberReference mapIds putAll MethodDeclaration Modifier public Annotation Override ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String getIds ReturnStatement ClassCreator ReferenceType HashMap TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String MemberReference m_mapResourceIds MethodDeclaration Modifier public Annotation Override ReferenceType Query getQuery ReturnStatement MemberReference m_query MethodDeclaration Modifier public Annotation Override ReferenceType ResourceDefinition getResourceDefinition ReturnStatement MemberReference m_resourceDefinition MethodDeclaration Modifier public Annotation Override ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType ResourceInstance getSubResources IfStatement BinaryOperation == MemberReference m_mapSubResources Literal null BlockStatement StatementExpression Assignment MemberReference m_mapSubResources ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType ResourceInstance = LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType SubResourceDefinition VariableDeclarator setSubResourceDefs MethodInvocation MethodInvocation getSubResourceDefinitions getResourceDefinition ForStatement EnhancedForControl VariableDeclaration ReferenceType SubResourceDefinition VariableDeclarator subResDef MemberReference setSubResourceDefs BlockStatement LocalVariableDeclaration ReferenceType ResourceInstance VariableDeclarator resource MethodInvocation m_resourceFactory MethodInvocation subResDef getType MethodInvocation getIds createResource StatementExpression MethodInvocation resource MethodInvocation MethodInvocation m_controller MethodInvocation MethodInvocation subResDef getType getKeyPropertyId MethodInvocation subResDef getType getSchema addProperty getQuery ForStatement EnhancedForControl VariableDeclaration ReferenceType Resource ReferenceType Type VariableDeclarator fkType MethodInvocation subResDef getAdditionalForeignKeys BlockStatement StatementExpression MethodInvocation resource MethodInvocation MethodInvocation m_controller MethodInvocation MemberReference fkType getKeyPropertyId MethodInvocation subResDef getType getSchema addProperty getQuery End LocalVariableDeclaration ReferenceType String VariableDeclarator subResourceName TernaryExpression MethodInvocation subResDef isCollection MethodInvocation resource MethodInvocation getPluralName getResourceDefinition MethodInvocation resource MethodInvocation getSingularName getResourceDefinition StatementExpression MethodInvocation m_mapSubResources MemberReference subResourceName MemberReference resource put End End ReturnStatement MemberReference m_mapSubResources MethodDeclaration Modifier public Annotation Override BasicType boolean isCollectionResource ReturnStatement BinaryOperation == MethodInvocation MethodInvocation MethodInvocation MethodInvocation getType getResourceDefinition get getIds Literal null MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType ResourceInstanceImpl VariableDeclarator that Cast ReferenceType ResourceInstanceImpl MemberReference o ReturnStatement TernaryExpression BinaryOperation && BinaryOperation && BinaryOperation && MethodInvocation m_mapResourceIds MemberReference that m_mapResourceIds equals MethodInvocation m_query MemberReference that m_query equals MethodInvocation m_resourceDefinition MemberReference that m_resourceDefinition equals BinaryOperation == MemberReference m_mapSubResources Literal null BinaryOperation == MemberReference that m_mapSubResources Literal null MethodInvocation m_mapSubResources MemberReference that m_mapSubResources equals MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result MethodInvocation m_query hashCode StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result MethodInvocation m_mapResourceIds hashCode = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result MethodInvocation m_resourceDefinition hashCode = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference m_mapSubResources Literal null MethodInvocation m_mapSubResources hashCode Literal 0 = ReturnStatement MemberReference result ReferenceType ResourceInstance",1
320,320,,0
9,9,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller Import com.google.gson.Gson Import com.google.inject.Scopes Import com.google.inject.assistedinject.FactoryModuleBuilder Import com.google.inject.matcher.Matchers Import com.google.inject.persist.Transactional Import com.google.inject.persist.jpa.JpaPersistModule Import org.apache.ambari.server.actionmanager  Import org.apache.ambari.server.api.services.AmbariMetaInfo Import org.apache.ambari.server.configuration.Configuration Import org.apache.ambari.server.orm.PersistenceType Import org.apache.ambari.server.orm.dao.ClearEntityManagerInterceptor Import org.apache.ambari.server.state  Import org.apache.ambari.server.state.cluster.ClusterFactory Import org.apache.ambari.server.state.cluster.ClusterImpl Import org.apache.ambari.server.state.cluster.ClustersImpl Import org.apache.ambari.server.state.host.HostFactory Import org.apache.ambari.server.state.host.HostImpl Import com.google.inject.AbstractModule Import com.google.inject.name.Names Import org.apache.ambari.server.state.svccomphost.ServiceComponentHostImpl Import org.springframework.security.crypto.password.PasswordEncoder Import org.springframework.security.crypto.password.StandardPasswordEncoder Import java.util.Properties ClassDeclaration Modifier public /**
 * Used for injection purposes.
 *
 */ ControllerModule FieldDeclaration Modifier private final ReferenceType Configuration VariableDeclarator configuration FieldDeclaration Modifier private final ReferenceType AmbariMetaInfo VariableDeclarator ambariMetaInfo ConstructorDeclaration Modifier public ControllerModule Exception StatementExpression Assignment MemberReference configuration ClassCreator ReferenceType Configuration = StatementExpression Assignment MemberReference ambariMetaInfo ClassCreator ReferenceType AmbariMetaInfo MemberReference configuration = ConstructorDeclaration Modifier public ControllerModule FormalParameter ReferenceType Properties properties Exception StatementExpression Assignment MemberReference configuration ClassCreator ReferenceType Configuration MemberReference properties = StatementExpression Assignment MemberReference ambariMetaInfo ClassCreator ReferenceType AmbariMetaInfo MemberReference configuration = MethodDeclaration Modifier protected Annotation Override configure StatementExpression MethodInvocation bindInterceptors StatementExpression MethodInvocation installFactories StatementExpression MethodInvocation MethodInvocation MemberReference configuration toInstance ClassReference ReferenceType Configuration bind StatementExpression MethodInvocation MethodInvocation MemberReference ambariMetaInfo toInstance ClassReference ReferenceType AmbariMetaInfo bind StatementExpression MethodInvocation MethodInvocation ClassCreator ReferenceType StandardPasswordEncoder toInstance ClassReference ReferenceType PasswordEncoder bind LocalVariableDeclaration ReferenceType JpaPersistModule VariableDeclarator jpaPersistModule ClassCreator ReferenceType JpaPersistModule MethodInvocation configuration MethodInvocation getUnitName getPersistenceType IfStatement BinaryOperation == MethodInvocation configuration getPersistenceType MemberReference PersistenceType POSTGRES BlockStatement LocalVariableDeclaration ReferenceType Properties VariableDeclarator properties ClassCreator ReferenceType Properties StatementExpression MethodInvocation properties Literal ""javax.persistence.jdbc.user"" MethodInvocation configuration getDatabaseUser setProperty StatementExpression MethodInvocation properties Literal ""javax.persistence.jdbc.password"" MethodInvocation configuration getDatabasePassword setProperty StatementExpression MethodInvocation jpaPersistModule MemberReference properties properties End StatementExpression MethodInvocation MemberReference jpaPersistModule install StatementExpression MethodInvocation MethodInvocation MemberReference Scopes SINGLETON in ClassReference ReferenceType Gson bind StatementExpression MethodInvocation MethodInvocation ClassReference ReferenceType ClustersImpl to ClassReference ReferenceType Clusters bind StatementExpression MethodInvocation MethodInvocation ClassReference ReferenceType ActionDBAccessorImpl to ClassReference ReferenceType ActionDBAccessor bind StatementExpression MethodInvocation MethodInvocation MethodInvocation Names Literal ""schedulerSleeptime"" named annotatedWith MethodInvocation Literal 10000L to bindConstant StatementExpression MethodInvocation MethodInvocation MethodInvocation Names Literal ""actionTimeout"" named annotatedWith MethodInvocation Literal 300000L to bindConstant StatementExpression MethodInvocation MethodInvocation ClassReference ReferenceType AmbariManagementControllerImpl to ClassReference ReferenceType AmbariManagementController bind MethodDeclaration Modifier private installFactories StatementExpression MethodInvocation ClassCreator MethodInvocation ClassReference ReferenceType Cluster ClassReference ReferenceType ClusterImpl implement MethodInvocation ClassReference ReferenceType ClusterFactory build ReferenceType FactoryModuleBuilder install StatementExpression MethodInvocation ClassCreator MethodInvocation ClassReference ReferenceType Host ClassReference ReferenceType HostImpl implement MethodInvocation ClassReference ReferenceType HostFactory build ReferenceType FactoryModuleBuilder install StatementExpression MethodInvocation ClassCreator MethodInvocation ClassReference ReferenceType Service ClassReference ReferenceType ServiceImpl implement MethodInvocation ClassReference ReferenceType ServiceFactory build ReferenceType FactoryModuleBuilder install StatementExpression MethodInvocation ClassCreator MethodInvocation ClassReference ReferenceType ServiceComponent ClassReference ReferenceType ServiceComponentImpl implement MethodInvocation ClassReference ReferenceType ServiceComponentFactory build ReferenceType FactoryModuleBuilder install StatementExpression MethodInvocation ClassCreator MethodInvocation ClassReference ReferenceType ServiceComponentHost ClassReference ReferenceType ServiceComponentHostImpl implement MethodInvocation ClassReference ReferenceType ServiceComponentHostFactory build ReferenceType FactoryModuleBuilder install StatementExpression MethodInvocation ClassCreator MethodInvocation ClassReference ReferenceType Config ClassReference ReferenceType ConfigImpl implement MethodInvocation ClassReference ReferenceType ConfigFactory build ReferenceType FactoryModuleBuilder install StatementExpression MethodInvocation ClassCreator MethodInvocation ClassReference ReferenceType StageFactory build ReferenceType FactoryModuleBuilder install StatementExpression MethodInvocation ClassCreator MethodInvocation ClassReference ReferenceType HostRoleCommandFactory build ReferenceType FactoryModuleBuilder install MethodDeclaration Modifier private bindInterceptors LocalVariableDeclaration ReferenceType ClearEntityManagerInterceptor VariableDeclarator clearEntityManagerInterceptor ClassCreator ReferenceType ClearEntityManagerInterceptor StatementExpression MethodInvocation MemberReference clearEntityManagerInterceptor requestInjection StatementExpression MethodInvocation MethodInvocation Matchers any MethodInvocation Matchers ClassReference ReferenceType Transactional annotatedWith MemberReference clearEntityManagerInterceptor bindInterceptor ReferenceType AbstractModule",0
33,33,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.entities Import javax.persistence.Column Import javax.persistence.Id Import java.io.Serializable ClassDeclaration Modifier public Annotation SuppressWarnings Literal ""serial"" HostComponentDesiredStateEntityPK FieldDeclaration Modifier private ReferenceType Long VariableDeclarator clusterId MethodDeclaration Modifier public Annotation Id Annotation Column ElementValuePair name Literal ""cluster_id"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair length Literal 10 ReferenceType Long getClusterId ReturnStatement MemberReference clusterId MethodDeclaration Modifier public setClusterId FormalParameter ReferenceType Long clusterId StatementExpression Assignment This MemberReference clusterId MemberReference clusterId = FieldDeclaration Modifier private ReferenceType String VariableDeclarator serviceName MethodDeclaration Modifier public Annotation Id Annotation Column ElementValuePair name Literal ""service_name"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ReferenceType String getServiceName ReturnStatement MemberReference serviceName MethodDeclaration Modifier public setServiceName FormalParameter ReferenceType String serviceName StatementExpression Assignment This MemberReference serviceName MemberReference serviceName = FieldDeclaration Modifier private ReferenceType String VariableDeclarator hostName MethodDeclaration Modifier public Annotation Id Annotation Column ElementValuePair name Literal ""host_name"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ReferenceType String getHostName ReturnStatement MemberReference hostName MethodDeclaration Modifier public setHostName FormalParameter ReferenceType String hostName StatementExpression Assignment This MemberReference hostName MemberReference hostName = FieldDeclaration Modifier private ReferenceType String VariableDeclarator componentName MethodDeclaration Modifier public Annotation Id Annotation Column ElementValuePair name Literal ""component_name"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ReferenceType String getComponentName ReturnStatement MemberReference componentName MethodDeclaration Modifier public setComponentName FormalParameter ReferenceType String componentName StatementExpression Assignment This MemberReference componentName MemberReference componentName = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType HostComponentDesiredStateEntityPK VariableDeclarator that Cast ReferenceType HostComponentDesiredStateEntityPK MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation ! clusterId MemberReference that clusterId equals BinaryOperation != MemberReference that clusterId Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation ! componentName MemberReference that componentName equals BinaryOperation != MemberReference that componentName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference hostName Literal null MethodInvocation ! hostName MemberReference that hostName equals BinaryOperation != MemberReference that hostName Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation clusterId intValue Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference hostName Literal null MethodInvocation hostName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation componentName hashCode Literal 0 = ReturnStatement MemberReference result ReferenceType Serializable",1
14,14,CompilationUnit PackageDeclaration org.apache.ambari.server.orm.dao Import com.google.inject.Inject Import com.google.inject.Provider Import com.google.inject.persist.Transactional Import org.apache.ambari.server.orm.entities.RoleSuccessCriteriaEntity Import org.apache.ambari.server.orm.entities.RoleSuccessCriteriaEntityPK Import javax.persistence.EntityManager ClassDeclaration Modifier public RoleSuccessCriteriaDAO FieldDeclaration Annotation Inject ReferenceType Provider TypeArgument ReferenceType EntityManager VariableDeclarator entityManagerProvider MethodDeclaration Modifier public Annotation Transactional ReferenceType RoleSuccessCriteriaEntity findByPK FormalParameter ReferenceType RoleSuccessCriteriaEntityPK roleSuccessCriteriaEntityPK StatementExpression MethodInvocation entityManagerProvider MethodInvocation clear get ReturnStatement MethodInvocation entityManagerProvider MethodInvocation ClassReference ReferenceType RoleSuccessCriteriaEntity MemberReference roleSuccessCriteriaEntityPK find get MethodDeclaration Modifier public Annotation Transactional create FormalParameter ReferenceType RoleSuccessCriteriaEntity stageEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference stageEntity persist get MethodDeclaration Modifier public Annotation Transactional ReferenceType RoleSuccessCriteriaEntity merge FormalParameter ReferenceType RoleSuccessCriteriaEntity stageEntity ReturnStatement MethodInvocation entityManagerProvider MethodInvocation MemberReference stageEntity merge get MethodDeclaration Modifier public Annotation Transactional remove FormalParameter ReferenceType RoleSuccessCriteriaEntity stageEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MethodInvocation MemberReference stageEntity merge remove get MethodDeclaration Modifier public Annotation Transactional removeByPK FormalParameter ReferenceType RoleSuccessCriteriaEntityPK roleSuccessCriteriaEntityPK StatementExpression MethodInvocation MethodInvocation MemberReference roleSuccessCriteriaEntityPK findByPK remove,0
325,325,,0
368,368,,0
218,218,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.host Import org.apache.ambari.server.state.HostEvent Import org.apache.ambari.server.state.HostEventType ClassDeclaration Modifier public HostHeartbeatLostEvent ConstructorDeclaration Modifier public HostHeartbeatLostEvent FormalParameter ReferenceType String hostName StatementExpression SuperConstructorInvocation MemberReference hostName MemberReference HostEventType HOST_HEARTBEAT_LOST ReferenceType HostEvent",1
74,74,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services Import org.apache.ambari.server.api.resources.ResourceInstance Import org.apache.ambari.server.controller.spi.Resource Import javax.ws.rs  Import javax.ws.rs.core  Import java.util.HashMap Import java.util.Map ClassDeclaration Modifier public /**
 * Service responsible for components resource requests.
 */ ComponentService FieldDeclaration /**
   * Parent cluster id.
   */ Modifier private ReferenceType String VariableDeclarator m_clusterName FieldDeclaration /**
   * Parent service id.
   */ Modifier private ReferenceType String VariableDeclarator m_serviceName ConstructorDeclaration Modifier public /**
   * Constructor.
   *
   * @param clusterName cluster id
   * @param serviceName service id
   */ ComponentService FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String serviceName StatementExpression Assignment MemberReference m_clusterName MemberReference clusterName = StatementExpression Assignment MemberReference m_serviceName MemberReference serviceName = MethodDeclaration /**
   * Handles GET: /clusters/{clusterID}/services/{serviceID}/components/{componentID}
   * Get a specific component.
   *
   * @param headers       http headers
   * @param ui            uri info
   * @param componentName component id
   * @return a component resource representation
   */ Modifier public Annotation GET Annotation Path Literal ""{componentName}"" Annotation Produces Literal ""text/plain"" ReferenceType Response getComponent FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""componentName"" ReferenceType String componentName ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type GET MethodInvocation MemberReference m_clusterName MemberReference m_serviceName MemberReference componentName createComponentResource handleRequest MethodDeclaration /**
   * Handles GET: /clusters/{clusterID}/services/{serviceID}/components
   * Get all components for a service.
   *
   * @param headers http headers
   * @param ui      uri info
   * @return component collection resource representation
   */ Modifier public Annotation GET Annotation Produces Literal ""text/plain"" ReferenceType Response getComponents FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type GET MethodInvocation MemberReference m_clusterName MemberReference m_serviceName Literal null createComponentResource handleRequest MethodDeclaration /**
   * Handles: POST /clusters/{clusterID}/services/{serviceID}/components
   * Create components by specifying an array of components in the http body.
   * This is used to create multiple components in a single request.
   *
   * @param body          http body
   * @param headers       http headers
   * @param ui            uri info
   *
   * @return status code only, 201 if successful
   */ Modifier public Annotation POST Annotation Produces Literal ""text/plain"" ReferenceType Response createComponents FormalParameter ReferenceType String body FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui ReturnStatement MethodInvocation MemberReference headers MemberReference body MemberReference ui MemberReference Request.Type POST MethodInvocation MemberReference m_clusterName MemberReference m_serviceName Literal null createComponentResource handleRequest MethodDeclaration /**
   * Handles: POST /clusters/{clusterID}/services/{serviceID}/components/{componentID}
   * Create a specific component.
   *
   * @param body          http body
   * @param headers       http headers
   * @param ui            uri info
   * @param componentName component id
   *
   * @return information regarding the created component
   */ Modifier public Annotation POST Annotation Path Literal ""{componentName}"" Annotation Produces Literal ""text/plain"" ReferenceType Response createComponent FormalParameter ReferenceType String body FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""componentName"" ReferenceType String componentName ReturnStatement MethodInvocation MemberReference headers MemberReference body MemberReference ui MemberReference Request.Type POST MethodInvocation MemberReference m_clusterName MemberReference m_serviceName MemberReference componentName createComponentResource handleRequest MethodDeclaration /**
   * Handles: PUT /clusters/{clusterID}/services/{serviceID}/components/{componentID}
   * Update a specific component.
   *
   * @param body          http body
   * @param headers       http headers
   * @param ui            uri info
   * @param componentName component id
   *
   * @return information regarding the updated component
   */ Modifier public Annotation PUT Annotation Path Literal ""{componentName}"" Annotation Produces Literal ""text/plain"" ReferenceType Response updateComponent FormalParameter ReferenceType String body FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""componentName"" ReferenceType String componentName ReturnStatement MethodInvocation MemberReference headers MemberReference body MemberReference ui MemberReference Request.Type PUT MethodInvocation MemberReference m_clusterName MemberReference m_serviceName MemberReference componentName createComponentResource handleRequest MethodDeclaration /**
   * Handles: PUT /clusters/{clusterID}/services/{serviceID}/components
   * Update multiple components.
   *
   * @param body          http body
   * @param headers       http headers
   * @param ui            uri info
   *
   * @return information regarding the updated component
   */ Modifier public Annotation PUT Annotation Produces Literal ""text/plain"" ReferenceType Response updateComponents FormalParameter ReferenceType String body FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui ReturnStatement MethodInvocation MemberReference headers MemberReference body MemberReference ui MemberReference Request.Type PUT MethodInvocation MemberReference m_clusterName MemberReference m_serviceName Literal null createComponentResource handleRequest MethodDeclaration /**
   * Handles: DELETE /clusters/{clusterID}/services/{serviceID}/components/{componentID}
   * Delete a specific component.
   *
   * @param headers     http headers
   * @param ui          uri info
   * @param componentName cluster id
   * @return information regarding the deleted cluster
   */ Modifier public Annotation DELETE Annotation Path Literal ""{componentName}"" Annotation Produces Literal ""text/plain"" ReferenceType Response deleteComponent FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""componentName"" ReferenceType String componentName ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type DELETE MethodInvocation MemberReference m_clusterName MemberReference m_serviceName MemberReference componentName createComponentResource handleRequest MethodDeclaration /**
   * Create a component resource instance.
   *
   *
   * @param clusterName   cluster name
   * @param serviceName   service name
   * @param componentName component name
   *
   * @return a component resource instance
   */ ReferenceType ResourceInstance createComponentResource FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String serviceName FormalParameter ReferenceType String componentName LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String VariableDeclarator mapIds ClassCreator ReferenceType HashMap TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String StatementExpression MethodInvocation mapIds MemberReference Resource.Type Cluster MemberReference clusterName put StatementExpression MethodInvocation mapIds MemberReference Resource.Type Service MemberReference serviceName put StatementExpression MethodInvocation mapIds MemberReference Resource.Type Component MemberReference componentName put ReturnStatement MethodInvocation MemberReference Resource.Type Component MemberReference mapIds createResource ReferenceType BaseService",0
13,13,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services.persistence Import org.apache.ambari.server.api.resources.ResourceInstance Import org.apache.ambari.server.controller.spi  Import org.apache.ambari.server.controller.utilities.PropertyHelper Import java.util.HashMap Import java.util.Map Import java.util.Set ClassDeclaration Modifier public /**
 * Persistence Manager implementation.
 */ PersistenceManagerImpl FieldDeclaration /**
   * Cluster Controller reference.
   */ Modifier private ReferenceType ClusterController VariableDeclarator m_controller ConstructorDeclaration Modifier public /**
   * Constructor.
   *
   * @param controller  the cluster controller
   */ PersistenceManagerImpl FormalParameter ReferenceType ClusterController controller StatementExpression Assignment MemberReference m_controller MemberReference controller = MethodDeclaration Modifier public Annotation Override ReferenceType RequestStatus create FormalParameter ReferenceType ResourceInstance resource FormalParameter ReferenceType Set TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object setProperties UnsupportedPropertyException SystemException ResourceAlreadyExistsException NoSuchParentResourceException LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String VariableDeclarator mapResourceIds MethodInvocation resource getIds LocalVariableDeclaration ReferenceType Resource ReferenceType Type VariableDeclarator type MethodInvocation resource MethodInvocation getType getResourceDefinition LocalVariableDeclaration ReferenceType Schema VariableDeclarator schema MethodInvocation m_controller MemberReference type getSchema IfStatement BinaryOperation == MethodInvocation setProperties size Literal 0 BlockStatement StatementExpression MethodInvocation setProperties ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Object add End ForStatement EnhancedForControl VariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object VariableDeclarator mapProperties MemberReference setProperties BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Map ReferenceType Entry TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String VariableDeclarator entry MethodInvocation mapResourceIds entrySet BlockStatement LocalVariableDeclaration ReferenceType String VariableDeclarator property MethodInvocation schema MethodInvocation entry getKey getKeyPropertyId IfStatement MethodInvocation ! mapProperties MemberReference property containsKey BlockStatement StatementExpression MethodInvocation mapProperties MemberReference property MethodInvocation entry getValue put End End End ReturnStatement MethodInvocation m_controller MemberReference type MethodInvocation MemberReference setProperties createControllerRequest createResources MethodDeclaration Modifier public Annotation Override ReferenceType RequestStatus update FormalParameter ReferenceType ResourceInstance resource FormalParameter ReferenceType Set TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object setProperties UnsupportedPropertyException SystemException NoSuchParentResourceException NoSuchResourceException ReturnStatement MethodInvocation m_controller MethodInvocation resource MethodInvocation getType getResourceDefinition MethodInvocation MemberReference setProperties createControllerRequest MethodInvocation resource MethodInvocation getPredicate getQuery updateResources MethodDeclaration Modifier public Annotation Override ReferenceType RequestStatus delete FormalParameter ReferenceType ResourceInstance resource FormalParameter ReferenceType Set TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object setProperties UnsupportedPropertyException SystemException NoSuchParentResourceException NoSuchResourceException ReturnStatement MethodInvocation m_controller MethodInvocation resource MethodInvocation getType getResourceDefinition MethodInvocation resource MethodInvocation getPredicate getQuery deleteResources MethodDeclaration Modifier protected ReferenceType Request createControllerRequest FormalParameter ReferenceType Set TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object setProperties ReturnStatement MethodInvocation PropertyHelper MemberReference setProperties getCreateRequest ReferenceType PersistenceManager",0
379,379,,0
323,323,,0
362,362,,0
106,106,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.internal Import org.apache.ambari.server.controller.spi.TemporalInfo ClassDeclaration Modifier public /**
* Temporal query data.
*/ TemporalInfoImpl FieldDeclaration Modifier private BasicType long VariableDeclarator m_startTime FieldDeclaration Modifier private BasicType long VariableDeclarator m_endTime FieldDeclaration Modifier private BasicType long VariableDeclarator m_step ConstructorDeclaration Modifier public TemporalInfoImpl FormalParameter BasicType long startTime FormalParameter BasicType long endTime FormalParameter BasicType long step StatementExpression Assignment MemberReference m_startTime MemberReference startTime = StatementExpression Assignment MemberReference m_endTime MemberReference endTime = StatementExpression Assignment MemberReference m_step MemberReference step = MethodDeclaration Modifier public Annotation Override ReferenceType Long getStartTime ReturnStatement MemberReference m_startTime MethodDeclaration Modifier public Annotation Override ReferenceType Long getEndTime ReturnStatement MemberReference m_endTime MethodDeclaration Modifier public Annotation Override ReferenceType Long getStep ReturnStatement MemberReference m_step MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType TemporalInfoImpl VariableDeclarator that Cast ReferenceType TemporalInfoImpl MemberReference o ReturnStatement BinaryOperation && BinaryOperation && BinaryOperation == MemberReference m_endTime MemberReference that m_endTime BinaryOperation == MemberReference m_startTime MemberReference that m_startTime BinaryOperation == MemberReference m_step MemberReference that m_step MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result Cast BasicType int BinaryOperation ^ MemberReference m_startTime BinaryOperation >>> MemberReference m_startTime Literal 32 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result Cast BasicType int BinaryOperation ^ MemberReference m_endTime BinaryOperation >>> MemberReference m_endTime Literal 32 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result Cast BasicType int BinaryOperation ^ MemberReference m_step BinaryOperation >>> MemberReference m_step Literal 32 = ReturnStatement MemberReference result ReferenceType TemporalInfo",1
16,16,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller Import java.util.Set ClassDeclaration Modifier public /**
 * Used for create Cluster
 */ ClusterRequest FieldDeclaration Modifier private ReferenceType Long VariableDeclarator clusterId FieldDeclaration Modifier private ReferenceType String VariableDeclarator clusterName FieldDeclaration Modifier private ReferenceType String VariableDeclarator stackVersion FieldDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator hostNames ConstructorDeclaration Modifier public ClusterRequest FormalParameter ReferenceType Long clusterId FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String stackVersion FormalParameter ReferenceType Set TypeArgument ReferenceType String hostNames StatementExpression SuperConstructorInvocation StatementExpression Assignment This MemberReference clusterId MemberReference clusterId = StatementExpression Assignment This MemberReference clusterName MemberReference clusterName = StatementExpression Assignment This MemberReference stackVersion MemberReference stackVersion = StatementExpression Assignment This MemberReference hostNames MemberReference hostNames = MethodDeclaration /**
   * @return the clusterId
   */ Modifier public ReferenceType Long getClusterId ReturnStatement MemberReference clusterId MethodDeclaration /**
   * @return the clusterName
   */ Modifier public ReferenceType String getClusterName ReturnStatement MemberReference clusterName MethodDeclaration /**
   * @return the stackVersion
   */ Modifier public ReferenceType String getStackVersion ReturnStatement MemberReference stackVersion MethodDeclaration /**
   * @param clusterId the clusterId to set
   */ Modifier public setClusterId FormalParameter ReferenceType Long clusterId StatementExpression Assignment This MemberReference clusterId MemberReference clusterId = MethodDeclaration /**
   * @param clusterName the clusterName to set
   */ Modifier public setClusterName FormalParameter ReferenceType String clusterName StatementExpression Assignment This MemberReference clusterName MemberReference clusterName = MethodDeclaration /**
   * @param stackVersion the stackVersion to set
   */ Modifier public setStackVersion FormalParameter ReferenceType String stackVersion StatementExpression Assignment This MemberReference stackVersion MemberReference stackVersion = MethodDeclaration Modifier public ReferenceType Set TypeArgument ReferenceType String getHostNames ReturnStatement MemberReference hostNames MethodDeclaration Modifier public setHostNames FormalParameter ReferenceType Set TypeArgument ReferenceType String hostNames StatementExpression Assignment This MemberReference hostNames MemberReference hostNames = MethodDeclaration Modifier public Annotation Override ReferenceType String toString LocalVariableDeclaration ReferenceType StringBuilder VariableDeclarator sb ClassCreator ReferenceType StringBuilder StatementExpression MethodInvocation sb BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""{"" Literal "" clusterName="" MemberReference clusterName Literal "", clusterId="" MemberReference clusterId Literal "", hosts=["" append IfStatement BinaryOperation != MemberReference hostNames Literal null BlockStatement LocalVariableDeclaration BasicType int VariableDeclarator i Literal 0 ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator hostName MemberReference hostNames BlockStatement IfStatement BinaryOperation != MemberReference i Literal 0 BlockStatement StatementExpression MethodInvocation sb Literal "","" append End StatementExpression MemberReference ++ i StatementExpression MethodInvocation sb MemberReference hostName append End End StatementExpression MethodInvocation sb Literal ""] }"" append ReturnStatement MethodInvocation sb toString",0
358,358,,0
311,311,,0
279,279,,0
282,282,,0
317,317,,1
250,250,,0
396,396,,0
298,298,,0
217,217,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.internal Import org.apache.ambari.server.controller.AmbariServer Import org.apache.ambari.server.controller.ganglia.GangliaComponentPropertyProvider Import org.apache.ambari.server.controller.ganglia.GangliaHostComponentPropertyProvider Import org.apache.ambari.server.controller.ganglia.GangliaHostPropertyProvider Import org.apache.ambari.server.controller.ganglia.GangliaReportPropertyProvider Import org.apache.ambari.server.controller.ganglia.GangliaHostProvider Import org.apache.ambari.server.controller.jmx.JMXHostProvider Import org.apache.ambari.server.controller.jmx.JMXPropertyProvider Import org.apache.ambari.server.controller.spi  Import org.apache.ambari.server.controller.utilities.PredicateBuilder Import org.apache.ambari.server.controller.utilities.PropertyHelper Import org.apache.ambari.server.controller.AmbariManagementController Import com.google.inject.Inject Import org.slf4j.Logger Import org.slf4j.LoggerFactory Import java.util.HashMap Import java.util.LinkedList Import java.util.List Import java.util.Map Import java.util.Set ClassDeclaration Modifier public /**
 * The default provider module implementation.
 */ DefaultProviderModule FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator HOST_CLUSTER_NAME_PROPERTY_ID MethodInvocation PropertyHelper Literal ""HostRoles"" Literal ""cluster_name"" getPropertyId FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator HOST_NAME_PROPERTY_ID MethodInvocation PropertyHelper Literal ""Hosts"" Literal ""host_name"" getPropertyId FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator HOST_IP_PROPERTY_ID MethodInvocation PropertyHelper Literal ""Hosts"" Literal ""ip"" getPropertyId FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator HOST_ATTRIBUTES_PROPERTY_ID MethodInvocation PropertyHelper Literal ""Hosts"" Literal ""attributes"" getPropertyId FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator CLUSTER_NAME_PROPERTY_ID MethodInvocation PropertyHelper Literal ""Clusters"" Literal ""cluster_name"" getPropertyId FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator HOST_COMPONENT_CLUSTER_NAME_PROPERTY_ID MethodInvocation PropertyHelper Literal ""HostRoles"" Literal ""cluster_name"" getPropertyId FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator HOST_COMPONENT_HOST_NAME_PROPERTY_ID MethodInvocation PropertyHelper Literal ""HostRoles"" Literal ""host_name"" getPropertyId FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator HOST_COMPONENT_COMPONENT_NAME_PROPERTY_ID MethodInvocation PropertyHelper Literal ""HostRoles"" Literal ""component_name"" getPropertyId FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator GANGLIA_SERVER Literal ""GANGLIA_SERVER"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator GANGLIA_SERVER_OLD Literal ""GANGLIA_MONITOR_SERVER"" FieldDeclaration /**
   * The map of resource providers.
   */ Modifier private final ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType ResourceProvider VariableDeclarator resourceProviders ClassCreator ReferenceType HashMap TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType ResourceProvider FieldDeclaration /**
   * The map of lists of property providers.
   */ Modifier private final ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType List TypeArgument ReferenceType PropertyProvider VariableDeclarator propertyProviders ClassCreator ReferenceType HashMap TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType List TypeArgument ReferenceType PropertyProvider FieldDeclaration Modifier private Annotation Inject ReferenceType AmbariManagementController VariableDeclarator managementController FieldDeclaration /**
   * The map of hosts.
   */ Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator clusterHostMap FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator clusterHostComponentMap FieldDeclaration /**
   * The host name of the Ganglia collector.
   */ Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator clusterGangliaCollectorMap FieldDeclaration Modifier private volatile BasicType boolean VariableDeclarator initialized Literal false FieldDeclaration Modifier final protected static ReferenceType Logger VariableDeclarator LOG MethodInvocation LoggerFactory ClassReference ReferenceType DefaultProviderModule getLogger ConstructorDeclaration Modifier public /**
   * Create a default provider module.
   */ DefaultProviderModule IfStatement BinaryOperation == MemberReference managementController Literal null BlockStatement StatementExpression Assignment MemberReference managementController MethodInvocation AmbariServer getController = End MethodDeclaration Modifier public Annotation Override ReferenceType ResourceProvider getResourceProvider FormalParameter ReferenceType Resource ReferenceType Type type IfStatement MethodInvocation ! propertyProviders MemberReference type containsKey BlockStatement StatementExpression MethodInvocation MemberReference type createResourceProvider End ReturnStatement MethodInvocation resourceProviders MemberReference type get MethodDeclaration Modifier public Annotation Override ReferenceType List TypeArgument ReferenceType PropertyProvider getPropertyProviders FormalParameter ReferenceType Resource ReferenceType Type type IfStatement MethodInvocation ! propertyProviders MemberReference type containsKey BlockStatement StatementExpression MethodInvocation MemberReference type createPropertyProviders End ReturnStatement MethodInvocation propertyProviders MemberReference type get MethodDeclaration Modifier public Annotation Override update FormalParameter ReferenceType ResourceProviderEvent event LocalVariableDeclaration ReferenceType Resource ReferenceType Type VariableDeclarator type MethodInvocation event getResourceType IfStatement BinaryOperation || BinaryOperation || BinaryOperation == MemberReference type MemberReference Resource.Type Cluster BinaryOperation == MemberReference type MemberReference Resource.Type Host BinaryOperation == MemberReference type MemberReference Resource.Type HostComponent BlockStatement StatementExpression MethodInvocation resetInit End MethodDeclaration Modifier public Annotation Override ReferenceType String getHostName FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String componentName SystemException StatementExpression MethodInvocation checkInit ReturnStatement MethodInvocation clusterHostComponentMap MethodInvocation MemberReference componentName get MemberReference clusterName get MethodDeclaration Modifier public Annotation Override ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getHostMapping FormalParameter ReferenceType String clusterName SystemException StatementExpression MethodInvocation checkInit ReturnStatement MethodInvocation clusterHostMap MemberReference clusterName get MethodDeclaration Modifier public Annotation Override ReferenceType String getGangliaCollectorHostName FormalParameter ReferenceType String clusterName SystemException StatementExpression MethodInvocation checkInit ReturnStatement MethodInvocation clusterGangliaCollectorMap MemberReference clusterName get MethodDeclaration Modifier protected putResourceProvider FormalParameter ReferenceType Resource ReferenceType Type type FormalParameter ReferenceType ResourceProvider resourceProvider StatementExpression MethodInvocation resourceProviders MemberReference type MemberReference resourceProvider put MethodDeclaration Modifier protected createResourceProvider FormalParameter ReferenceType Resource ReferenceType Type type LocalVariableDeclaration ReferenceType ResourceProvider VariableDeclarator resourceProvider MethodInvocation ResourceProviderImpl MemberReference type MethodInvocation PropertyHelper MemberReference type getPropertyIds MethodInvocation PropertyHelper MemberReference type getKeyPropertyIds MemberReference managementController getResourceProvider IfStatement BinaryOperation instanceof MemberReference resourceProvider ReferenceType ObservableResourceProvider BlockStatement StatementExpression Cast ReferenceType ObservableResourceProvider MemberReference resourceProvider End StatementExpression MethodInvocation MemberReference type MemberReference resourceProvider putResourceProvider MethodDeclaration Modifier protected putPropertyProviders FormalParameter ReferenceType Resource ReferenceType Type type FormalParameter ReferenceType List TypeArgument ReferenceType PropertyProvider providers StatementExpression MethodInvocation propertyProviders MemberReference type MemberReference providers put MethodDeclaration Modifier protected createPropertyProviders FormalParameter ReferenceType Resource ReferenceType Type type LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType PropertyProvider VariableDeclarator providers ClassCreator ReferenceType LinkedList TypeArgument ReferenceType PropertyProvider LocalVariableDeclaration ReferenceType URLStreamProvider VariableDeclarator streamProvider ClassCreator ReferenceType URLStreamProvider SwitchStatement MemberReference type SwitchStatementCase Cluster StatementExpression MethodInvocation providers ClassCreator ReferenceType GangliaReportPropertyProvider MethodInvocation PropertyHelper MethodInvocation Literal ""*"" get MemberReference type getGangliaPropertyIds MemberReference streamProvider This MethodInvocation PropertyHelper Literal ""Clusters"" Literal ""cluster_name"" getPropertyId add BreakStatement SwitchStatementCase Host StatementExpression MethodInvocation providers ClassCreator ReferenceType GangliaHostPropertyProvider MethodInvocation PropertyHelper MemberReference type getGangliaPropertyIds MemberReference streamProvider This MethodInvocation PropertyHelper Literal ""Hosts"" Literal ""cluster_name"" getPropertyId MethodInvocation PropertyHelper Literal ""Hosts"" Literal ""host_name"" getPropertyId add BreakStatement SwitchStatementCase Component StatementExpression MethodInvocation providers ClassCreator ReferenceType JMXPropertyProvider MethodInvocation PropertyHelper MemberReference type getJMXPropertyIds MemberReference streamProvider This MethodInvocation PropertyHelper Literal ""ServiceComponentInfo"" Literal ""cluster_name"" getPropertyId Literal null MethodInvocation PropertyHelper Literal ""ServiceComponentInfo"" Literal ""component_name"" getPropertyId add StatementExpression MethodInvocation providers ClassCreator ReferenceType GangliaComponentPropertyProvider MethodInvocation PropertyHelper MemberReference type getGangliaPropertyIds MemberReference streamProvider This MethodInvocation PropertyHelper Literal ""ServiceComponentInfo"" Literal ""cluster_name"" getPropertyId MethodInvocation PropertyHelper Literal ""ServiceComponentInfo"" Literal ""component_name"" getPropertyId add BreakStatement SwitchStatementCase HostComponent StatementExpression MethodInvocation providers ClassCreator ReferenceType JMXPropertyProvider MethodInvocation PropertyHelper MemberReference type getJMXPropertyIds MemberReference streamProvider This MethodInvocation PropertyHelper Literal ""HostRoles"" Literal ""cluster_name"" getPropertyId MethodInvocation PropertyHelper Literal ""HostRoles"" Literal ""host_name"" getPropertyId MethodInvocation PropertyHelper Literal ""HostRoles"" Literal ""component_name"" getPropertyId add StatementExpression MethodInvocation providers ClassCreator ReferenceType GangliaHostComponentPropertyProvider MethodInvocation PropertyHelper MemberReference type getGangliaPropertyIds MemberReference streamProvider This MethodInvocation PropertyHelper Literal ""HostRoles"" Literal ""cluster_name"" getPropertyId MethodInvocation PropertyHelper Literal ""HostRoles"" Literal ""host_name"" getPropertyId MethodInvocation PropertyHelper Literal ""HostRoles"" Literal ""component_name"" getPropertyId add BreakStatement SwitchStatementCase BreakStatement End StatementExpression MethodInvocation MemberReference type MemberReference providers putPropertyProviders MethodDeclaration Modifier private checkInit SystemException IfStatement MemberReference ! initialized BlockStatement SynchronizedStatement This IfStatement MemberReference ! initialized BlockStatement StatementExpression MethodInvocation initProviderMaps StatementExpression Assignment MemberReference initialized Literal true = End End MethodDeclaration Modifier private resetInit IfStatement MemberReference initialized BlockStatement SynchronizedStatement This StatementExpression Assignment MemberReference initialized Literal false = End MethodDeclaration Modifier private initProviderMaps SystemException LocalVariableDeclaration ReferenceType ResourceProvider VariableDeclarator provider MethodInvocation MemberReference Resource.Type Cluster getResourceProvider LocalVariableDeclaration ReferenceType Request VariableDeclarator request MethodInvocation PropertyHelper MemberReference CLUSTER_NAME_PROPERTY_ID getReadRequest TryStatement LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType Resource VariableDeclarator clusters MethodInvocation provider MemberReference request Literal null getResources StatementExpression Assignment MemberReference clusterHostMap ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String = StatementExpression Assignment MemberReference clusterHostComponentMap ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String = StatementExpression Assignment MemberReference clusterGangliaCollectorMap ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String = ForStatement EnhancedForControl VariableDeclaration ReferenceType Resource VariableDeclarator cluster MemberReference clusters BlockStatement LocalVariableDeclaration ReferenceType String VariableDeclarator clusterName Cast ReferenceType String MethodInvocation cluster MemberReference CLUSTER_NAME_PROPERTY_ID getPropertyValue StatementExpression Assignment MemberReference provider MethodInvocation MemberReference Resource.Type Host getResourceProvider = StatementExpression Assignment MemberReference request MethodInvocation PropertyHelper MemberReference HOST_NAME_PROPERTY_ID MemberReference HOST_IP_PROPERTY_ID MemberReference HOST_ATTRIBUTES_PROPERTY_ID getReadRequest = LocalVariableDeclaration ReferenceType Predicate VariableDeclarator predicate ClassCreator MethodInvocation MemberReference HOST_CLUSTER_NAME_PROPERTY_ID property MethodInvocation MemberReference clusterName equals MethodInvocation toPredicate ReferenceType PredicateBuilder LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType Resource VariableDeclarator hosts MethodInvocation provider MemberReference request MemberReference predicate getResources LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator hostMap MethodInvocation clusterHostMap MemberReference clusterName get IfStatement BinaryOperation == MemberReference hostMap Literal null BlockStatement StatementExpression Assignment MemberReference hostMap ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String = StatementExpression MethodInvocation clusterHostMap MemberReference clusterName MemberReference hostMap put End ForStatement EnhancedForControl VariableDeclaration ReferenceType Resource VariableDeclarator host MemberReference hosts BlockStatement StatementExpression MethodInvocation hostMap Cast ReferenceType String MethodInvocation host MemberReference HOST_NAME_PROPERTY_ID getPropertyValue Cast ReferenceType String MethodInvocation host MemberReference HOST_IP_PROPERTY_ID getPropertyValue put End StatementExpression Assignment MemberReference provider MethodInvocation MemberReference Resource.Type HostComponent getResourceProvider = StatementExpression Assignment MemberReference request MethodInvocation PropertyHelper MemberReference HOST_COMPONENT_HOST_NAME_PROPERTY_ID MemberReference HOST_COMPONENT_COMPONENT_NAME_PROPERTY_ID getReadRequest = StatementExpression Assignment MemberReference predicate ClassCreator MethodInvocation MemberReference HOST_COMPONENT_CLUSTER_NAME_PROPERTY_ID property MethodInvocation MemberReference clusterName equals MethodInvocation toPredicate ReferenceType PredicateBuilder = LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType Resource VariableDeclarator hostComponents MethodInvocation provider MemberReference request MemberReference predicate getResources LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator hostComponentMap MethodInvocation clusterHostComponentMap MemberReference clusterName get IfStatement BinaryOperation == MemberReference hostComponentMap Literal null BlockStatement StatementExpression Assignment MemberReference hostComponentMap ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String = StatementExpression MethodInvocation clusterHostComponentMap MemberReference clusterName MemberReference hostComponentMap put End ForStatement EnhancedForControl VariableDeclaration ReferenceType Resource VariableDeclarator hostComponent MemberReference hostComponents BlockStatement LocalVariableDeclaration ReferenceType String VariableDeclarator componentName Cast ReferenceType String MethodInvocation hostComponent MemberReference HOST_COMPONENT_COMPONENT_NAME_PROPERTY_ID getPropertyValue LocalVariableDeclaration ReferenceType String VariableDeclarator hostName Cast ReferenceType String MethodInvocation hostComponent MemberReference HOST_COMPONENT_HOST_NAME_PROPERTY_ID getPropertyValue StatementExpression MethodInvocation hostComponentMap MemberReference componentName MethodInvocation hostMap MemberReference hostName get put IfStatement BinaryOperation || MethodInvocation componentName MemberReference GANGLIA_SERVER equals MethodInvocation componentName MemberReference GANGLIA_SERVER_OLD equals BlockStatement StatementExpression MethodInvocation clusterGangliaCollectorMap MemberReference clusterName MethodInvocation clusterHostMap MethodInvocation MemberReference hostName get MemberReference clusterName get put End End End CatchClause CatchClauseParameter UnsupportedPropertyException e IfStatement MethodInvocation LOG isErrorEnabled BlockStatement StatementExpression MethodInvocation LOG Literal ""Caught UnsupportedPropertyException while trying to get the host mappings."" MemberReference e error End ThrowStatement ClassCreator ReferenceType SystemException BinaryOperation + Literal ""An exception occurred while initializing the host mappings: "" MemberReference e MemberReference e CatchClause CatchClauseParameter NoSuchResourceException e IfStatement MethodInvocation LOG isErrorEnabled BlockStatement StatementExpression MethodInvocation LOG Literal ""Caught NoSuchResourceException exception while trying to get the host mappings."" MemberReference e error End ThrowStatement ClassCreator ReferenceType SystemException BinaryOperation + Literal ""An exception occurred while initializing the host mappings: "" MemberReference e MemberReference e CatchClause CatchClauseParameter NoSuchParentResourceException e IfStatement MethodInvocation LOG isErrorEnabled BlockStatement StatementExpression MethodInvocation LOG Literal ""Caught NoSuchParentResourceException exception while trying to get the host mappings."" MemberReference e error End ThrowStatement ClassCreator ReferenceType SystemException BinaryOperation + Literal ""An exception occurred while initializing the host mappings: "" MemberReference e MemberReference e ReferenceType ProviderModule ReferenceType ResourceProviderObserver ReferenceType JMXHostProvider ReferenceType GangliaHostProvider",0
281,281,,1
182,182,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the ""License""); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.eventdb.model Import java.sql.ResultSet Import java.sql.SQLException Import java.util.List Import javax.xml.bind.annotation.XmlAccessType Import javax.xml.bind.annotation.XmlAccessorType Import javax.xml.bind.annotation.XmlRootElement Import org.apache.ambari.eventdb.model.Workflows.WorkflowDBEntry ClassDeclaration Modifier public Annotation XmlRootElement Annotation XmlAccessorType MemberReference XmlAccessType FIELD DataTable FieldDeclaration BasicType int VariableDeclarator sEcho FieldDeclaration BasicType int VariableDeclarator iTotalRecords FieldDeclaration BasicType int VariableDeclarator iTotalDisplayRecords FieldDeclaration ReferenceType List TypeArgument ReferenceType WorkflowDBEntry VariableDeclarator aaData FieldDeclaration ReferenceType Summary VariableDeclarator summary ClassDeclaration Modifier public static Annotation XmlRootElement Annotation XmlAccessorType MemberReference XmlAccessType FIELD Summary EnumDeclaration Modifier public static SummaryFields EnumBody EnumConstantDeclaration numRows EnumConstantDeclaration avgJobs EnumConstantDeclaration minJobs EnumConstantDeclaration maxJobs EnumConstantDeclaration avgInput EnumConstantDeclaration minInput EnumConstantDeclaration maxInput EnumConstantDeclaration avgOutput EnumConstantDeclaration minOutput EnumConstantDeclaration maxOutput EnumConstantDeclaration avgDuration EnumConstantDeclaration minDuration EnumConstantDeclaration maxDuration EnumConstantDeclaration youngest EnumConstantDeclaration oldest MethodDeclaration Modifier public BasicType int getInt FormalParameter ReferenceType ResultSet rs SQLException ReturnStatement MethodInvocation rs This MethodInvocation toString getInt MethodDeclaration Modifier public BasicType long getLong FormalParameter ReferenceType ResultSet rs SQLException ReturnStatement MethodInvocation rs This MethodInvocation toString getLong MethodDeclaration Modifier public BasicType double getDouble FormalParameter ReferenceType ResultSet rs SQLException ReturnStatement MethodInvocation rs This MethodInvocation toString getDouble FieldDeclaration BasicType int VariableDeclarator numRows FieldDeclaration ReferenceType AvgData VariableDeclarator jobs FieldDeclaration ReferenceType AvgData VariableDeclarator input FieldDeclaration ReferenceType AvgData VariableDeclarator output FieldDeclaration ReferenceType AvgData VariableDeclarator duration FieldDeclaration ReferenceType Times VariableDeclarator times MethodDeclaration Modifier public BasicType int getNumRows ReturnStatement MemberReference numRows MethodDeclaration Modifier public setNumRows FormalParameter BasicType int numRows StatementExpression Assignment This MemberReference numRows MemberReference numRows = MethodDeclaration Modifier public ReferenceType AvgData getJobs ReturnStatement MemberReference jobs MethodDeclaration Modifier public setJobs FormalParameter ReferenceType AvgData jobs StatementExpression Assignment This MemberReference jobs MemberReference jobs = MethodDeclaration Modifier public ReferenceType AvgData getInput ReturnStatement MemberReference input MethodDeclaration Modifier public setInput FormalParameter ReferenceType AvgData input StatementExpression Assignment This MemberReference input MemberReference input = MethodDeclaration Modifier public ReferenceType AvgData getOutput ReturnStatement MemberReference output MethodDeclaration Modifier public setOutput FormalParameter ReferenceType AvgData output StatementExpression Assignment This MemberReference output MemberReference output = MethodDeclaration Modifier public ReferenceType AvgData getDuration ReturnStatement MemberReference duration MethodDeclaration Modifier public setDuration FormalParameter ReferenceType AvgData duration StatementExpression Assignment This MemberReference duration MemberReference duration = MethodDeclaration Modifier public ReferenceType Times getTimes ReturnStatement MemberReference times MethodDeclaration Modifier public setTimes FormalParameter ReferenceType Times times StatementExpression Assignment This MemberReference times MemberReference times = ClassDeclaration Modifier public static Annotation XmlRootElement Annotation XmlAccessorType MemberReference XmlAccessType FIELD AvgData FieldDeclaration BasicType double VariableDeclarator avg FieldDeclaration BasicType long VariableDeclarator min FieldDeclaration BasicType long VariableDeclarator max MethodDeclaration Modifier public BasicType double getAvg ReturnStatement MemberReference avg MethodDeclaration Modifier public setAvg FormalParameter BasicType double avg StatementExpression Assignment This MemberReference avg MemberReference avg = MethodDeclaration Modifier public BasicType long getMin ReturnStatement MemberReference min MethodDeclaration Modifier public setMin FormalParameter BasicType long min StatementExpression Assignment This MemberReference min MemberReference min = MethodDeclaration Modifier public BasicType long getMax ReturnStatement MemberReference max MethodDeclaration Modifier public setMax FormalParameter BasicType long max StatementExpression Assignment This MemberReference max MemberReference max = ClassDeclaration Modifier public static Annotation XmlRootElement Annotation XmlAccessorType MemberReference XmlAccessType FIELD Times FieldDeclaration BasicType long VariableDeclarator oldest FieldDeclaration BasicType long VariableDeclarator youngest MethodDeclaration Modifier public BasicType long getOldest ReturnStatement MemberReference oldest MethodDeclaration Modifier public setOldest FormalParameter BasicType long oldest StatementExpression Assignment This MemberReference oldest MemberReference oldest = MethodDeclaration Modifier public BasicType long getYoungest ReturnStatement MemberReference youngest MethodDeclaration Modifier public setYoungest FormalParameter BasicType long youngest StatementExpression Assignment This MemberReference youngest MemberReference youngest = ConstructorDeclaration Modifier public DataTable MethodDeclaration Modifier public BasicType int getsEcho ReturnStatement MemberReference sEcho MethodDeclaration Modifier public setsEcho FormalParameter BasicType int sEcho StatementExpression Assignment This MemberReference sEcho MemberReference sEcho = MethodDeclaration Modifier public BasicType int getiTotalRecords ReturnStatement MemberReference iTotalRecords MethodDeclaration Modifier public setiTotalRecords FormalParameter BasicType int iTotalRecords StatementExpression Assignment This MemberReference iTotalRecords MemberReference iTotalRecords = MethodDeclaration Modifier public BasicType int getiTotalDisplayRecords ReturnStatement MemberReference iTotalDisplayRecords MethodDeclaration Modifier public setiTotalDisplayRecords FormalParameter BasicType int iTotalDisplayRecords StatementExpression Assignment This MemberReference iTotalDisplayRecords MemberReference iTotalDisplayRecords = MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType WorkflowDBEntry getAaData ReturnStatement MemberReference aaData MethodDeclaration Modifier public setAaData FormalParameter ReferenceType List TypeArgument ReferenceType WorkflowDBEntry aaData StatementExpression Assignment This MemberReference aaData MemberReference aaData = MethodDeclaration Modifier public ReferenceType Summary getSummary ReturnStatement MemberReference summary MethodDeclaration Modifier public setSummary FormalParameter ReferenceType Summary summary StatementExpression Assignment This MemberReference summary MemberReference summary =",0
15,15,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services Import org.apache.ambari.server.api.resources.ResourceInstance Import javax.ws.rs.core.HttpHeaders Import javax.ws.rs.core.UriInfo ClassDeclaration Modifier public /**
 * A DELETE request.
 */ DeleteRequest ConstructorDeclaration Modifier public /**
   * Constructor.
   *
   * @param headers     http headers
   * @param body        http body
   * @param uriInfo     uri information
   * @param resource    associated resource definition
   */ DeleteRequest FormalParameter ReferenceType HttpHeaders headers FormalParameter ReferenceType String body FormalParameter ReferenceType UriInfo uriInfo FormalParameter ReferenceType ResourceInstance resource StatementExpression SuperConstructorInvocation MemberReference headers MemberReference body MemberReference uriInfo MemberReference resource MethodDeclaration Modifier public Annotation Override ReferenceType Type getRequestType ReturnStatement MemberReference Type DELETE ReferenceType BaseRequest",0
181,181,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.predicate Import org.apache.ambari.server.controller.spi.Resource ClassDeclaration Modifier public /**
 * Predicate that checks equality of a given value to a {@link Resource} property.
 */ EqualsPredicate ConstructorDeclaration Modifier public EqualsPredicate FormalParameter ReferenceType String propertyId FormalParameter ReferenceType Comparable TypeArgument ReferenceType T value StatementExpression SuperConstructorInvocation MemberReference propertyId MemberReference value MethodDeclaration Modifier public Annotation Override BasicType boolean evaluate FormalParameter ReferenceType Resource resource LocalVariableDeclaration ReferenceType Object VariableDeclarator propertyValue MethodInvocation resource MethodInvocation getPropertyId getPropertyValue ReturnStatement BinaryOperation && BinaryOperation != MemberReference propertyValue Literal null BinaryOperation == MethodInvocation MemberReference propertyValue compareValueTo Literal 0 MethodDeclaration Modifier public Annotation Override ReferenceType String getOperator ReturnStatement Literal ""="" TypeParameter T ReferenceType ComparisonPredicate TypeArgument ReferenceType T",1
114,114,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.agent Import java.util.List Import org.codehaus.jackson.annotate.JsonProperty ClassDeclaration Modifier public /**
 * Command to report the status of a list of services in roles.
 */ StatusCommand ConstructorDeclaration Modifier public StatusCommand StatementExpression SuperConstructorInvocation MemberReference AgentCommandType STATUS_COMMAND FieldDeclaration Modifier private ReferenceType String VariableDeclarator clusterName FieldDeclaration Modifier private ReferenceType String VariableDeclarator serviceName FieldDeclaration Modifier private ReferenceType String VariableDeclarator componentName MethodDeclaration Modifier public Annotation JsonProperty Literal ""clusterName"" ReferenceType String getClusterName ReturnStatement MemberReference clusterName MethodDeclaration Modifier public Annotation JsonProperty Literal ""clusterName"" setClusterName FormalParameter ReferenceType String clusterName StatementExpression Assignment This MemberReference clusterName MemberReference clusterName = MethodDeclaration Modifier public Annotation JsonProperty Literal ""serviceName"" ReferenceType String getServiceName ReturnStatement MemberReference serviceName MethodDeclaration Modifier public Annotation JsonProperty Literal ""serviceName"" setServiceName FormalParameter ReferenceType String serviceName StatementExpression Assignment This MemberReference serviceName MemberReference serviceName = MethodDeclaration Modifier public Annotation JsonProperty Literal ""componentName"" ReferenceType String getComponentName ReturnStatement MemberReference componentName MethodDeclaration Modifier public Annotation JsonProperty Literal ""componentName"" setComponentName FormalParameter ReferenceType String componentName StatementExpression Assignment This MemberReference componentName MemberReference componentName = ReferenceType AgentCommand",1
345,345,,0
391,391,,0
346,346,,0
380,380,,0
296,296,,0
53,53,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state Import java.util.Map Import java.util.Set Import com.google.inject.persist.Transactional Import org.apache.ambari.server.AmbariException Import org.apache.ambari.server.controller.ServiceComponentHostResponse Import org.apache.ambari.server.state.fsm.InvalidStateTransitionException InterfaceDeclaration Modifier public ServiceComponentHost MethodDeclaration /**
   * Get the Cluster that this object maps to
   */ Modifier public BasicType long getClusterId MethodDeclaration /**
   * Get the Cluster that this object maps to
   */ Modifier public ReferenceType String getClusterName MethodDeclaration /**
   * Get the Service this object maps to
   * @return Name of the Service
   */ Modifier public ReferenceType String getServiceName MethodDeclaration /**
   * Get the ServiceComponent this object maps to
   * @return Name of the ServiceComponent
   */ Modifier public ReferenceType String getServiceComponentName MethodDeclaration /**
   * Get the Host this object maps to
   * @return Host's hostname
   */ Modifier public ReferenceType String getHostName MethodDeclaration /**
   * Send a ServiceComponentHostState event to the StateMachine
   * @param event Event to handle
   * @throws InvalidStateTransitionException
   */ Modifier public handleEvent FormalParameter ReferenceType ServiceComponentHostEvent event InvalidStateTransitionException MethodDeclaration Modifier public ReferenceType State getDesiredState MethodDeclaration Modifier public setDesiredState FormalParameter ReferenceType State state MethodDeclaration Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config getDesiredConfigs MethodDeclaration Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getDesiredConfigVersionsRecursive MethodDeclaration Modifier public updateDesiredConfigs FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config configs MethodDeclaration Modifier public deleteDesiredConfigs FormalParameter ReferenceType Set TypeArgument ReferenceType String configTypes MethodDeclaration Modifier public ReferenceType StackId getDesiredStackVersion MethodDeclaration Modifier public setDesiredStackVersion FormalParameter ReferenceType StackId stackVersion MethodDeclaration Modifier public ReferenceType State getState MethodDeclaration Modifier public setState FormalParameter ReferenceType State state MethodDeclaration Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config getConfigs AmbariException MethodDeclaration Modifier public ReferenceType StackId getStackVersion MethodDeclaration Modifier public setStackVersion FormalParameter ReferenceType StackId stackVersion MethodDeclaration Modifier public ReferenceType ServiceComponentHostResponse convertToResponse MethodDeclaration BasicType boolean isPersisted MethodDeclaration Annotation Transactional persist MethodDeclaration refresh MethodDeclaration Modifier public debugDump FormalParameter ReferenceType StringBuilder sb MethodDeclaration Modifier public BasicType boolean canBeRemoved",0
196,196,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.agent Import org.codehaus.jackson.annotate.JsonProperty ClassDeclaration Modifier public CommandReport FieldDeclaration ReferenceType String VariableDeclarator role FieldDeclaration ReferenceType String VariableDeclarator actionId FieldDeclaration ReferenceType String VariableDeclarator stdout FieldDeclaration ReferenceType String VariableDeclarator stderr FieldDeclaration ReferenceType String VariableDeclarator status FieldDeclaration BasicType int VariableDeclarator exitCode FieldDeclaration Modifier private ReferenceType String VariableDeclarator clusterName FieldDeclaration Modifier private ReferenceType String VariableDeclarator serviceName FieldDeclaration Modifier private BasicType long VariableDeclarator taskId MethodDeclaration Modifier public Annotation JsonProperty Literal ""taskId"" BasicType long getTaskId ReturnStatement MemberReference taskId MethodDeclaration Modifier public Annotation JsonProperty Literal ""taskId"" setTaskId FormalParameter BasicType long taskId StatementExpression Assignment This MemberReference taskId MemberReference taskId = MethodDeclaration Modifier public Annotation JsonProperty Literal ""clusterName"" setClusterName FormalParameter ReferenceType String clusterName StatementExpression Assignment This MemberReference clusterName MemberReference clusterName = MethodDeclaration Modifier public Annotation JsonProperty Literal ""clusterName"" ReferenceType String getClusterName ReturnStatement This MemberReference clusterName MethodDeclaration Modifier public Annotation JsonProperty Literal ""actionId"" ReferenceType String getActionId ReturnStatement This MemberReference actionId MethodDeclaration Modifier public Annotation JsonProperty Literal ""actionId"" setActionId FormalParameter ReferenceType String actionId StatementExpression Assignment This MemberReference actionId MemberReference actionId = MethodDeclaration Modifier public Annotation JsonProperty Literal ""stderr"" ReferenceType String getStdErr ReturnStatement This MemberReference stderr MethodDeclaration Modifier public Annotation JsonProperty Literal ""stderr"" setStdErr FormalParameter ReferenceType String stderr StatementExpression Assignment This MemberReference stderr MemberReference stderr = MethodDeclaration Modifier public Annotation JsonProperty Literal ""exitcode"" BasicType int getExitCode ReturnStatement This MemberReference exitCode MethodDeclaration Modifier public Annotation JsonProperty Literal ""exitcode"" setExitCode FormalParameter BasicType int exitCode StatementExpression Assignment This MemberReference exitCode MemberReference exitCode = MethodDeclaration Modifier public Annotation JsonProperty Literal ""stdout"" ReferenceType String getStdOut ReturnStatement This MemberReference stdout MethodDeclaration Modifier public Annotation JsonProperty Literal ""stdout"" setStdOut FormalParameter ReferenceType String stdout StatementExpression Assignment This MemberReference stdout MemberReference stdout = MethodDeclaration Modifier public Annotation JsonProperty Literal ""role"" ReferenceType String getRole ReturnStatement MemberReference role MethodDeclaration Modifier public Annotation JsonProperty Literal ""role"" setRole FormalParameter ReferenceType String role StatementExpression Assignment This MemberReference role MemberReference role = MethodDeclaration Modifier public Annotation JsonProperty Literal ""status"" ReferenceType String getStatus ReturnStatement MemberReference status MethodDeclaration Modifier public Annotation JsonProperty Literal ""status"" setStatus FormalParameter ReferenceType String status StatementExpression Assignment This MemberReference status MemberReference status = MethodDeclaration Modifier public Annotation JsonProperty Literal ""serviceName"" ReferenceType String getServiceName ReturnStatement MemberReference serviceName MethodDeclaration Modifier public Annotation JsonProperty Literal ""serviceName"" setServiceName FormalParameter ReferenceType String serviceName StatementExpression Assignment This MemberReference serviceName MemberReference serviceName = MethodDeclaration Modifier public Annotation Override ReferenceType String toString ReturnStatement BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""CommandReport{"" Literal ""role='"" MemberReference role Literal '\'' Literal "", actionId='"" MemberReference actionId Literal '\'' Literal "", status='"" MemberReference status Literal '\'' Literal "", exitCode="" MemberReference exitCode Literal "", clusterName='"" MemberReference clusterName Literal '\'' Literal "", serviceName='"" MemberReference serviceName Literal '\'' Literal "", taskId="" MemberReference taskId Literal '}'",0
88,88,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller ClassDeclaration Modifier public RequestStatusRequest FieldDeclaration Modifier private final ReferenceType Long VariableDeclarator requestId FieldDeclaration Modifier private final ReferenceType String VariableDeclarator requestStatus ConstructorDeclaration Modifier public RequestStatusRequest FormalParameter ReferenceType Long requestId FormalParameter ReferenceType String requestStatus StatementExpression SuperConstructorInvocation StatementExpression Assignment This MemberReference requestId MemberReference requestId = StatementExpression Assignment This MemberReference requestStatus MemberReference requestStatus = MethodDeclaration /**
   * @return the requestId
   */ Modifier public ReferenceType Long getRequestId ReturnStatement MemberReference requestId MethodDeclaration /**
   * @return the requestStatus
   */ Modifier public ReferenceType String getRequestStatus ReturnStatement MemberReference requestStatus",1
123,123,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.bootstrap Import java.io.File Import java.io.IOException Import java.net.InetAddress Import java.util.ArrayList Import java.util.List Import org.apache.ambari.server.bootstrap.BSResponse.BSRunStat Import org.apache.ambari.server.configuration.Configuration Import org.apache.commons.logging.Log Import org.apache.commons.logging.LogFactory Import com.google.inject.Inject Import com.google.inject.Singleton ClassDeclaration Modifier public Annotation Singleton BootStrapImpl FieldDeclaration Modifier private ReferenceType File VariableDeclarator bootStrapDir FieldDeclaration Modifier private ReferenceType String VariableDeclarator bootScript FieldDeclaration Modifier private ReferenceType String VariableDeclarator bootSetupAgentScript FieldDeclaration Modifier private ReferenceType String VariableDeclarator bootSetupAgentPassword FieldDeclaration Modifier private ReferenceType BSRunner VariableDeclarator bsRunner FieldDeclaration Modifier private ReferenceType String VariableDeclarator masterHostname FieldDeclaration BasicType long VariableDeclarator timeout FieldDeclaration Modifier private static ReferenceType Log VariableDeclarator LOG MethodInvocation LogFactory ClassReference ReferenceType BootStrapImpl getLog FieldDeclaration BasicType int VariableDeclarator requestId Literal 0 FieldDeclaration Modifier private ReferenceType FifoLinkedHashMap TypeArgument ReferenceType Long TypeArgument ReferenceType BootStrapStatus VariableDeclarator bsStatus ConstructorDeclaration Modifier public Annotation Inject BootStrapImpl FormalParameter ReferenceType Configuration conf IOException StatementExpression Assignment This MemberReference bootStrapDir MethodInvocation conf getBootStrapDir = StatementExpression Assignment This MemberReference bootScript MethodInvocation conf getBootStrapScript = StatementExpression Assignment This MemberReference bootSetupAgentScript MethodInvocation conf getBootSetupAgentScript = StatementExpression Assignment This MemberReference bootSetupAgentPassword MethodInvocation conf getBootSetupAgentPassword = StatementExpression Assignment This MemberReference bsStatus ClassCreator ReferenceType FifoLinkedHashMap TypeArgument ReferenceType Long TypeArgument ReferenceType BootStrapStatus = StatementExpression Assignment This MemberReference masterHostname MethodInvocation conf MethodInvocation InetAddress MethodInvocation getCanonicalHostName getLocalHost getMasterHostname = MethodDeclaration /**
   * Return {@link BootStrapStatus} for a given responseId.
   * @param requestId the responseId for which the status needs to be returned.
   * @return status for a specific response id. A response Id of -1 means the
   * latest responseId.
   */ Modifier public synchronized ReferenceType BootStrapStatus getStatus FormalParameter BasicType long requestId IfStatement MethodInvocation ! bsStatus MethodInvocation Long MemberReference requestId valueOf containsKey BlockStatement ReturnStatement Literal null End ReturnStatement MethodInvocation bsStatus MethodInvocation Long MemberReference requestId valueOf get MethodDeclaration /**
   * update status of a request. Mostly called by the status collector thread.
   * @param requestId the request id.
   * @param status the status of the update.
   */ Modifier synchronized updateStatus FormalParameter BasicType long requestId FormalParameter ReferenceType BootStrapStatus status StatementExpression MethodInvocation bsStatus MethodInvocation Long MemberReference requestId valueOf MemberReference status put MethodDeclaration Modifier public synchronized init IOException IfStatement MethodInvocation ! bootStrapDir exists BlockStatement LocalVariableDeclaration BasicType boolean VariableDeclarator mkdirs MethodInvocation bootStrapDir mkdirs IfStatement MemberReference ! mkdirs ThrowStatement ClassCreator ReferenceType IOException BinaryOperation + BinaryOperation + Literal ""Unable to make directory for "" Literal ""bootstrap "" MemberReference bootStrapDir End End MethodDeclaration Modifier public synchronized ReferenceType BSResponse runBootStrap FormalParameter ReferenceType SshHostInfo info LocalVariableDeclaration ReferenceType BSResponse VariableDeclarator response ClassCreator ReferenceType BSResponse StatementExpression MethodInvocation LOG BinaryOperation + Literal ""BootStrapping hosts "" MethodInvocation info hostListAsString info IfStatement BinaryOperation != MemberReference bsRunner Literal null BlockStatement StatementExpression MethodInvocation response Literal ""BootStrap in Progress: Cannot Run more than one."" setLog StatementExpression MethodInvocation response MemberReference BSRunStat ERROR setStatus ReturnStatement MemberReference response End StatementExpression MemberReference ++ requestId StatementExpression Assignment MemberReference bsRunner ClassCreator ReferenceType BSRunner This MemberReference info MethodInvocation bootStrapDir toString MemberReference bootScript MemberReference bootSetupAgentScript MemberReference bootSetupAgentPassword MemberReference requestId Literal 0L This MemberReference masterHostname MethodInvocation info isVerbose = StatementExpression MethodInvocation bsRunner start StatementExpression MethodInvocation response MemberReference BSRunStat OK setStatus StatementExpression MethodInvocation response Literal ""Running Bootstrap now."" setLog StatementExpression MethodInvocation response MemberReference requestId setRequestId ReturnStatement MemberReference response MethodDeclaration /**
   * @param hosts
   * @return
   */ Modifier public synchronized ReferenceType List TypeArgument ReferenceType BSHostStatus getHostInfo FormalParameter ReferenceType List TypeArgument ReferenceType String hosts LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType BSHostStatus VariableDeclarator statuses ClassCreator ReferenceType ArrayList TypeArgument ReferenceType BSHostStatus IfStatement BinaryOperation || BinaryOperation || BinaryOperation == Literal null MemberReference hosts BinaryOperation == Literal 0 MethodInvocation hosts size BinaryOperation && BinaryOperation == MethodInvocation hosts size Literal 1 MethodInvocation hosts MethodInvocation Literal ""*"" equals Literal 0 get BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType BootStrapStatus VariableDeclarator status MethodInvocation bsStatus values BlockStatement IfStatement BinaryOperation != Literal null MethodInvocation status getHostsStatus StatementExpression MethodInvocation statuses MethodInvocation status getHostsStatus addAll End End BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType BootStrapStatus VariableDeclarator status MethodInvocation bsStatus values BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType BSHostStatus VariableDeclarator hostStatus MethodInvocation status getHostsStatus BlockStatement IfStatement BinaryOperation != Literal - 1 MethodInvocation hosts MethodInvocation hostStatus getHostName indexOf BlockStatement StatementExpression MethodInvocation statuses MemberReference hostStatus add End End End End ReturnStatement MemberReference statuses MethodDeclaration /**
   *
   */ Modifier public synchronized reset StatementExpression Assignment MemberReference bsRunner Literal null =",0
289,289,,0
180,180,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.entities Import javax.persistence.Column Import javax.persistence.Id Import java.io.Serializable ClassDeclaration Modifier public HostComponentConfigMappingEntityPK FieldDeclaration Modifier private ReferenceType Long VariableDeclarator clusterId FieldDeclaration Modifier private ReferenceType String VariableDeclarator serviceName FieldDeclaration Modifier private ReferenceType String VariableDeclarator componentName FieldDeclaration Modifier private ReferenceType String VariableDeclarator hostName FieldDeclaration Modifier private ReferenceType String VariableDeclarator configType MethodDeclaration Modifier public Annotation Id Annotation Column ElementValuePair name Literal ""cluster_id"" ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair nullable Literal false ElementValuePair length Literal 10 ReferenceType Long getClusterId ReturnStatement MemberReference clusterId MethodDeclaration Modifier public setClusterId FormalParameter ReferenceType Long clusterId StatementExpression Assignment This MemberReference clusterId MemberReference clusterId = MethodDeclaration Modifier public Annotation Id Annotation Column ElementValuePair name Literal ""service_name"" ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair nullable Literal false ReferenceType String getServiceName ReturnStatement MemberReference serviceName MethodDeclaration Modifier public setServiceName FormalParameter ReferenceType String serviceName StatementExpression Assignment This MemberReference serviceName MemberReference serviceName = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""component_name"" ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair nullable Literal false Annotation Id ReferenceType String getComponentName ReturnStatement MemberReference componentName MethodDeclaration Modifier public setComponentName FormalParameter ReferenceType String name StatementExpression Assignment MemberReference componentName MemberReference name = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""host_name"" ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair nullable Literal false Annotation Id ReferenceType String getHostName ReturnStatement MemberReference hostName MethodDeclaration Modifier public setHostName FormalParameter ReferenceType String name StatementExpression Assignment MemberReference hostName MemberReference name = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""config_type"" ElementValuePair insertable Literal true ElementValuePair updatable Literal false ElementValuePair nullable Literal false Annotation Id ReferenceType String getConfigType ReturnStatement MemberReference configType MethodDeclaration Modifier public setConfigType FormalParameter ReferenceType String configType StatementExpression Assignment This MemberReference configType MemberReference configType = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType HostComponentConfigMappingEntityPK VariableDeclarator that Cast ReferenceType HostComponentConfigMappingEntityPK MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation ! clusterId MemberReference that clusterId equals BinaryOperation != MemberReference that clusterId Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation ! componentName MemberReference that componentName equals BinaryOperation != MemberReference that componentName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation ! serviceName MemberReference that serviceName equals BinaryOperation != MemberReference that serviceName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference hostName Literal null MethodInvocation ! hostName MemberReference that hostName equals BinaryOperation != MemberReference that hostName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference configType Literal null MethodInvocation ! configType MemberReference that configType equals BinaryOperation != MemberReference that configType Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation clusterId intValue Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation serviceName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation componentName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference hostName Literal null MethodInvocation hostName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference configType Literal null MethodInvocation configType hashCode Literal 0 = ReturnStatement MemberReference result ReferenceType Serializable",0
189,189,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.spi InterfaceDeclaration Modifier public /**
 * The predicate is used to filter the resources returned from the cluster
 * controller.  The predicate can examine a resource object and determine
 * whether or not it should be included in the returned results.
 */ Predicate MethodDeclaration /**
   * Evaluate the predicate for the given resource.
   *
   * @param resource the resource to evaluate the predicate against
   * @return the result of applying the predicate to the given resource
   */ Modifier public BasicType boolean evaluate FormalParameter ReferenceType Resource resource",0
7,7,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.host Import org.apache.ambari.server.state.HostEvent Import org.apache.ambari.server.state.HostEventType Import org.apache.ambari.server.state.HostHealthStatus ClassDeclaration Modifier public HostUnhealthyHeartbeatEvent FieldDeclaration Modifier private final BasicType long VariableDeclarator heartbeatTime FieldDeclaration Modifier private final ReferenceType HostHealthStatus VariableDeclarator healthStatus ConstructorDeclaration Modifier public HostUnhealthyHeartbeatEvent FormalParameter ReferenceType String hostName FormalParameter BasicType long heartbeatTime FormalParameter ReferenceType HostHealthStatus healthStatus StatementExpression SuperConstructorInvocation MemberReference hostName MemberReference HostEventType HOST_HEARTBEAT_UNHEALTHY StatementExpression Assignment This MemberReference heartbeatTime MemberReference heartbeatTime = StatementExpression Assignment This MemberReference healthStatus MemberReference healthStatus = MethodDeclaration /**
   * @return the heartbeatTime
   */ Modifier public BasicType long getHeartbeatTime ReturnStatement MemberReference heartbeatTime MethodDeclaration /**
   * @return the healthStatus
   */ Modifier public ReferenceType HostHealthStatus getHealthStatus ReturnStatement MemberReference healthStatus ReferenceType HostEvent",0
78,78,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.predicate Import java.util.Collections Import java.util.Set ClassDeclaration Modifier public abstract /**
 * Predicate that is associated with a resource property.
 */ PropertyPredicate FieldDeclaration Modifier private final ReferenceType String VariableDeclarator propertyId ConstructorDeclaration Modifier public PropertyPredicate FormalParameter ReferenceType String propertyId AssertStatement BinaryOperation != MemberReference propertyId Literal null StatementExpression Assignment This MemberReference propertyId MemberReference propertyId = MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType String getPropertyIds ReturnStatement MethodInvocation Collections MemberReference propertyId singleton MethodDeclaration Modifier public ReferenceType String getPropertyId ReturnStatement MemberReference propertyId MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o BlockStatement ReturnStatement Literal true End IfStatement BinaryOperation instanceof MemberReference o ReferenceType PropertyPredicate BlockStatement ReturnStatement Literal false End LocalVariableDeclaration ReferenceType PropertyPredicate VariableDeclarator that Cast ReferenceType PropertyPredicate MemberReference o ReturnStatement TernaryExpression BinaryOperation == MemberReference propertyId Literal null BinaryOperation == MemberReference that propertyId Literal null MethodInvocation propertyId MemberReference that propertyId equals MethodDeclaration Modifier public Annotation Override BasicType int hashCode ReturnStatement TernaryExpression BinaryOperation != MemberReference propertyId Literal null MethodInvocation propertyId hashCode Literal 0 ReferenceType BasePredicate",0
42,42,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.dao Import com.google.inject.Inject Import com.google.inject.Provider Import com.google.inject.persist.Transactional Import org.apache.ambari.server.orm.entities.ClusterStateEntity Import javax.persistence.EntityManager ClassDeclaration Modifier public ClusterStateDAO FieldDeclaration Annotation Inject ReferenceType Provider TypeArgument ReferenceType EntityManager VariableDeclarator entityManagerProvider MethodDeclaration Modifier public Annotation Transactional ReferenceType ClusterStateEntity findByPK FormalParameter ReferenceType String clusterName ReturnStatement MethodInvocation entityManagerProvider MethodInvocation ClassReference ReferenceType ClusterStateEntity MemberReference clusterName find get MethodDeclaration Modifier public Annotation Transactional refresh FormalParameter ReferenceType ClusterStateEntity clusterStateEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference clusterStateEntity refresh get MethodDeclaration Modifier public Annotation Transactional create FormalParameter ReferenceType ClusterStateEntity clusterStateEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference clusterStateEntity persist get MethodDeclaration Modifier public Annotation Transactional ReferenceType ClusterStateEntity merge FormalParameter ReferenceType ClusterStateEntity clusterStateEntity ReturnStatement MethodInvocation entityManagerProvider MethodInvocation MemberReference clusterStateEntity merge get MethodDeclaration Modifier public Annotation Transactional remove FormalParameter ReferenceType ClusterStateEntity clusterStateEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MethodInvocation MemberReference clusterStateEntity merge remove get MethodDeclaration Modifier public Annotation Transactional removeByPK FormalParameter ReferenceType String clusterName StatementExpression MethodInvocation MethodInvocation MemberReference clusterName findByPK remove",0
300,300,,0
136,136,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server ClassDeclaration Modifier public /**
 * Thrown when an attempt is made to create an already existing resource.
 */ DuplicateResourceException ConstructorDeclaration Modifier public /**
   * Constructor.
   *
   * @param message  message
   */ DuplicateResourceException FormalParameter ReferenceType String message StatementExpression SuperConstructorInvocation MemberReference message ReferenceType AmbariException",0
28,28,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller Import java.util.Set ClassDeclaration Modifier public ClusterResponse FieldDeclaration Modifier private final ReferenceType Long VariableDeclarator clusterId FieldDeclaration Modifier private final ReferenceType String VariableDeclarator clusterName FieldDeclaration Modifier private final ReferenceType Set TypeArgument ReferenceType String VariableDeclarator hostNames FieldDeclaration Modifier private final ReferenceType String VariableDeclarator desiredStackVersion ConstructorDeclaration Modifier public ClusterResponse FormalParameter ReferenceType Long clusterId FormalParameter ReferenceType String clusterName FormalParameter ReferenceType Set TypeArgument ReferenceType String hostNames FormalParameter ReferenceType String desiredStackVersion StatementExpression SuperConstructorInvocation StatementExpression Assignment This MemberReference clusterId MemberReference clusterId = StatementExpression Assignment This MemberReference clusterName MemberReference clusterName = StatementExpression Assignment This MemberReference hostNames MemberReference hostNames = StatementExpression Assignment This MemberReference desiredStackVersion MemberReference desiredStackVersion = MethodDeclaration /**
   * @return the clusterId
   */ Modifier public ReferenceType Long getClusterId ReturnStatement MemberReference clusterId MethodDeclaration /**
   * @return the clusterName
   */ Modifier public ReferenceType String getClusterName ReturnStatement MemberReference clusterName MethodDeclaration /**
   * @return the host names
   */ Modifier public ReferenceType Set TypeArgument ReferenceType String getHostNames ReturnStatement MemberReference hostNames MethodDeclaration Modifier public Annotation Override ReferenceType String toString LocalVariableDeclaration ReferenceType StringBuilder VariableDeclarator sb ClassCreator ReferenceType StringBuilder StatementExpression MethodInvocation sb BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""{"" Literal "" clusterName="" MemberReference clusterName Literal "", clusterId="" MemberReference clusterId Literal "", desiredStackVersion="" MemberReference desiredStackVersion Literal "", hosts=["" append IfStatement BinaryOperation != MemberReference hostNames Literal null BlockStatement LocalVariableDeclaration BasicType int VariableDeclarator i Literal 0 ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator hostName MemberReference hostNames BlockStatement IfStatement BinaryOperation != MemberReference i Literal 0 BlockStatement StatementExpression MethodInvocation sb Literal "","" append End StatementExpression MemberReference ++ i StatementExpression MethodInvocation sb MemberReference hostName append End End StatementExpression MethodInvocation sb Literal ""] }"" append ReturnStatement MethodInvocation sb toString MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType ClusterResponse VariableDeclarator that Cast ReferenceType ClusterResponse MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation ! clusterId MemberReference that clusterId equals BinaryOperation != MemberReference that clusterId Literal null BlockStatement ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference clusterName Literal null MethodInvocation ! clusterName MemberReference that clusterName equals BinaryOperation != MemberReference that clusterName Literal null BlockStatement ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation clusterId intValue Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 71 MemberReference result TernaryExpression BinaryOperation != MemberReference clusterName Literal null MethodInvocation clusterName hashCode Literal 0 = ReturnStatement MemberReference result MethodDeclaration /**
   * @return the desiredStackVersion
   */ Modifier public ReferenceType String getDesiredStackVersion ReturnStatement MemberReference desiredStackVersion",1
166,166,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.agent EnumDeclaration Modifier public RegistrationStatus EnumBody EnumConstantDeclaration OK EnumConstantDeclaration FAILED",1
273,273,,0
207,207,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.ganglia Import org.apache.ambari.server.controller.internal.PropertyInfo Import org.apache.ambari.server.controller.spi.Resource Import org.apache.ambari.server.controller.utilities.StreamProvider Import java.util.Map ClassDeclaration Modifier public /**
 * Ganglia property provider implementation for component resources.
 */ GangliaComponentPropertyProvider ConstructorDeclaration Modifier public GangliaComponentPropertyProvider FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType PropertyInfo componentMetrics FormalParameter ReferenceType StreamProvider streamProvider FormalParameter ReferenceType GangliaHostProvider hostProvider FormalParameter ReferenceType String clusterNamePropertyId FormalParameter ReferenceType String componentNamePropertyId StatementExpression SuperConstructorInvocation MemberReference componentMetrics MemberReference streamProvider MemberReference hostProvider MemberReference clusterNamePropertyId Literal null MemberReference componentNamePropertyId MethodDeclaration Modifier protected Annotation Override ReferenceType String getHostName FormalParameter ReferenceType Resource resource ReturnStatement Literal ""__SummaryInfo__"" MethodDeclaration Modifier protected Annotation Override ReferenceType String getComponentName FormalParameter ReferenceType Resource resource ReturnStatement Cast ReferenceType String MethodInvocation resource MethodInvocation getComponentNamePropertyId getPropertyValue MethodDeclaration Modifier protected Annotation Override ReferenceType String getGangliaClusterName FormalParameter ReferenceType Resource resource FormalParameter ReferenceType String clusterName ReturnStatement MethodInvocation GANGLIA_CLUSTER_NAMES MethodInvocation MemberReference resource getComponentName get ReferenceType GangliaPropertyProvider",0
2,2,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm Import com.google.inject.Inject Import com.google.inject.persist.PersistService ClassDeclaration Modifier public /**
 * This class needs to be instantiated with guice to initialize Guice-persist
 */ GuiceJpaInitializer ConstructorDeclaration Modifier public Annotation Inject GuiceJpaInitializer FormalParameter ReferenceType PersistService service StatementExpression MethodInvocation service start",0
171,171,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.internal Import org.apache.ambari.server.controller.spi.Request Import org.apache.ambari.server.controller.spi.TemporalInfo Import java.util  Import java.util.Map.Entry ClassDeclaration Modifier public /**
 * Default request implementation.
 */ RequestImpl FieldDeclaration /**
   * The property ids associated with this request.  Used for requests that
   * get resource values.
   */ Modifier private final ReferenceType Set TypeArgument ReferenceType String VariableDeclarator propertyIds FieldDeclaration /**
   * The properties associated with this request.  Used for requests that create
   * resources or update resource values.
   */ Modifier private final ReferenceType Set TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object VariableDeclarator properties FieldDeclaration /**
   * Map of property to temporal info.
   */ Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType TemporalInfo VariableDeclarator m_mapTemporalInfo ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType TemporalInfo ConstructorDeclaration Modifier public /**
   * Create a request.
   *
   * @param propertyIds      the property ids associated with the request; may be null
   * @param properties       the properties associated with the request; may be null
   * @param mapTemporalInfo  the temporal info
   */ RequestImpl FormalParameter ReferenceType Set TypeArgument ReferenceType String propertyIds FormalParameter ReferenceType Set TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object properties FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType TemporalInfo mapTemporalInfo StatementExpression Assignment This MemberReference propertyIds TernaryExpression BinaryOperation == MemberReference propertyIds Literal null MethodInvocation Collections ClassCreator ReferenceType HashSet TypeArgument ReferenceType String unmodifiableSet MethodInvocation Collections MemberReference propertyIds unmodifiableSet = StatementExpression Assignment This MemberReference properties TernaryExpression BinaryOperation == MemberReference properties Literal null MethodInvocation Collections ClassCreator ReferenceType HashSet TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object unmodifiableSet MethodInvocation Collections MemberReference properties unmodifiableSet = StatementExpression MethodInvocation MemberReference mapTemporalInfo setTemporalInfo MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType String getPropertyIds ReturnStatement MemberReference propertyIds MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object getProperties ReturnStatement MemberReference properties MethodDeclaration Modifier public Annotation Override ReferenceType TemporalInfo getTemporalInfo FormalParameter ReferenceType String id ReturnStatement MethodInvocation m_mapTemporalInfo MemberReference id get MethodDeclaration Modifier private setTemporalInfo FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType TemporalInfo mapTemporalInfo StatementExpression Assignment MemberReference m_mapTemporalInfo MemberReference mapTemporalInfo = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType RequestImpl VariableDeclarator request Cast ReferenceType RequestImpl MemberReference o ReturnStatement BinaryOperation && TernaryExpression BinaryOperation == MemberReference properties Literal null BinaryOperation != MemberReference request properties Literal null MethodInvocation ! properties MemberReference request properties equals TernaryExpression BinaryOperation == MemberReference propertyIds Literal null BinaryOperation != MemberReference request propertyIds Literal null MethodInvocation ! propertyIds MemberReference request propertyIds equals MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference propertyIds Literal null MethodInvocation propertyIds hashCode Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference properties Literal null MethodInvocation properties hashCode Literal 0 = ReturnStatement MemberReference result MethodDeclaration Modifier public ReferenceType String toString LocalVariableDeclaration ReferenceType StringBuilder VariableDeclarator sb ClassCreator ReferenceType StringBuilder StatementExpression MethodInvocation sb BinaryOperation + Literal ""Request:"" Literal "", propertyIds=["" append ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator pId MemberReference propertyIds BlockStatement StatementExpression MethodInvocation sb MethodInvocation MemberReference pId append MethodInvocation Literal "" }, "" append Literal "" { propertyName="" append End StatementExpression MethodInvocation sb Literal "" ], properties=[ "" append ForStatement EnhancedForControl VariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object VariableDeclarator map MemberReference properties BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType Object VariableDeclarator entry MethodInvocation map entrySet BlockStatement StatementExpression MethodInvocation sb MethodInvocation MethodInvocation entry getKey append MethodInvocation Literal "", propertyValue="" append MethodInvocation MethodInvocation entry MethodInvocation toString getValue append MethodInvocation Literal "" }, "" append Literal "" { propertyName="" append End End StatementExpression MethodInvocation sb Literal "" ], temporalInfo=["" append IfStatement BinaryOperation == MemberReference m_mapTemporalInfo Literal null BlockStatement StatementExpression MethodInvocation sb Literal ""null"" append BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType TemporalInfo VariableDeclarator entry MethodInvocation m_mapTemporalInfo entrySet BlockStatement StatementExpression MethodInvocation sb MethodInvocation MethodInvocation entry getKey append MethodInvocation Literal "", temporalInfo="" append MethodInvocation MethodInvocation entry MethodInvocation toString getValue append Literal "" { propertyName="" append End End StatementExpression MethodInvocation sb Literal "" ]"" append ReturnStatement MethodInvocation sb toString ReferenceType Request",1
288,288,,0
204,204,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.cluster Import org.apache.ambari.server.orm.entities.ClusterEntity Import org.apache.ambari.server.state.Cluster InterfaceDeclaration Modifier public /**
 * Factory interface for Guice injections
 */ ClusterFactory MethodDeclaration ReferenceType Cluster create FormalParameter ReferenceType ClusterEntity clusterEntity",0
271,271,,0
124,124,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.agent ClassDeclaration Modifier public /**
 * Status of the host as described by the agent.
 *
 */ HostStatus ConstructorDeclaration Modifier public HostStatus FormalParameter ReferenceType Status status FormalParameter ReferenceType String cause StatementExpression SuperConstructorInvocation StatementExpression Assignment This MemberReference status MemberReference status = StatementExpression Assignment This MemberReference cause MemberReference cause = ConstructorDeclaration Modifier public HostStatus StatementExpression SuperConstructorInvocation EnumDeclaration Modifier public Status EnumBody EnumConstantDeclaration HEALTHY EnumConstantDeclaration UNHEALTHY FieldDeclaration ReferenceType Status VariableDeclarator status FieldDeclaration ReferenceType String VariableDeclarator cause MethodDeclaration Modifier public ReferenceType Status getStatus ReturnStatement MemberReference status MethodDeclaration Modifier public setStatus FormalParameter ReferenceType Status status StatementExpression Assignment This MemberReference status MemberReference status = MethodDeclaration Modifier public ReferenceType String getCause ReturnStatement MemberReference cause MethodDeclaration Modifier public setCause FormalParameter ReferenceType String cause StatementExpression Assignment This MemberReference cause MemberReference cause = MethodDeclaration Modifier public Annotation Override ReferenceType String toString ReturnStatement BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""HostStatus{"" Literal ""status="" MemberReference status Literal "", cause='"" MemberReference cause Literal '\'' Literal '}'",0
51,51,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.log4j.common.store Import java.io.IOException Import java.sql.Connection Import java.sql.DriverManager Import java.sql.SQLException Import org.apache.ambari.log4j.common.LogStore Import org.apache.ambari.log4j.common.LogStoreUpdateProvider Import org.apache.log4j.spi.LoggingEvent ClassDeclaration Modifier public DatabaseStore FieldDeclaration Modifier private final ReferenceType String VariableDeclarator database FieldDeclaration Modifier private final ReferenceType String VariableDeclarator user FieldDeclaration Modifier private final ReferenceType String VariableDeclarator password FieldDeclaration Modifier private final ReferenceType Connection VariableDeclarator connection FieldDeclaration Modifier private final ReferenceType LogStoreUpdateProvider VariableDeclarator updateProvider ConstructorDeclaration Modifier public DatabaseStore FormalParameter ReferenceType String driver FormalParameter ReferenceType String database FormalParameter ReferenceType String user FormalParameter ReferenceType String password FormalParameter ReferenceType LogStoreUpdateProvider updateProvider IOException TryStatement StatementExpression MethodInvocation Class MemberReference driver forName CatchClause CatchClauseParameter ClassNotFoundException e StatementExpression MethodInvocation System.err BinaryOperation + Literal ""Can't load driver - "" MemberReference driver println ThrowStatement ClassCreator ReferenceType RuntimeException BinaryOperation + Literal ""Can't load driver - "" MemberReference driver StatementExpression Assignment This MemberReference database MemberReference database = StatementExpression Assignment This MemberReference user TernaryExpression BinaryOperation == MemberReference user Literal null Literal """" MemberReference user = StatementExpression Assignment This MemberReference password TernaryExpression BinaryOperation == MemberReference password Literal null Literal """" MemberReference password = TryStatement StatementExpression Assignment This MemberReference connection MethodInvocation DriverManager This MemberReference database This MemberReference user This MemberReference password getConnection = CatchClause CatchClauseParameter SQLException sqle ThrowStatement ClassCreator ReferenceType IOException BinaryOperation + Literal ""Can't connect to database "" This MemberReference database MemberReference sqle StatementExpression Assignment This MemberReference updateProvider MemberReference updateProvider = StatementExpression This MemberReference updateProvider MethodInvocation This MemberReference connection init MethodDeclaration Modifier public Annotation Override persist FormalParameter ReferenceType LoggingEvent originalEvent FormalParameter ReferenceType Object parsedEvent IOException StatementExpression MethodInvocation updateProvider MemberReference originalEvent MemberReference parsedEvent update MethodDeclaration Modifier public Annotation Override close IOException TryStatement StatementExpression MethodInvocation connection close CatchClause CatchClauseParameter SQLException sqle ThrowStatement ClassCreator ReferenceType IOException BinaryOperation + Literal ""Failed to close connectionto database "" This MemberReference database MemberReference sqle ReferenceType LogStore",0
221,221,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller Import java.util.Map ClassDeclaration Modifier public ServiceComponentResponse FieldDeclaration Modifier private ReferenceType Long VariableDeclarator clusterId FieldDeclaration Modifier private ReferenceType String VariableDeclarator clusterName FieldDeclaration Modifier private ReferenceType String VariableDeclarator serviceName FieldDeclaration Modifier private ReferenceType String VariableDeclarator componentName FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator configVersions FieldDeclaration Modifier private ReferenceType String VariableDeclarator desiredStackVersion FieldDeclaration Modifier private ReferenceType String VariableDeclarator desiredState ConstructorDeclaration Modifier public ServiceComponentResponse FormalParameter ReferenceType Long clusterId FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String serviceName FormalParameter ReferenceType String componentName FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String configVersions FormalParameter ReferenceType String desiredStackVersion FormalParameter ReferenceType String desiredState StatementExpression SuperConstructorInvocation StatementExpression Assignment This MemberReference clusterId MemberReference clusterId = StatementExpression Assignment This MemberReference clusterName MemberReference clusterName = StatementExpression Assignment This MemberReference serviceName MemberReference serviceName = StatementExpression Assignment This MemberReference componentName MemberReference componentName = StatementExpression Assignment This MemberReference configVersions MemberReference configVersions = StatementExpression Assignment This MemberReference desiredStackVersion MemberReference desiredStackVersion = StatementExpression Assignment This MemberReference desiredState MemberReference desiredState = MethodDeclaration /**
   * @return the serviceName
   */ Modifier public ReferenceType String getServiceName ReturnStatement MemberReference serviceName MethodDeclaration /**
   * @param serviceName the serviceName to set
   */ Modifier public setServiceName FormalParameter ReferenceType String serviceName StatementExpression Assignment This MemberReference serviceName MemberReference serviceName = MethodDeclaration /**
   * @return the componentName
   */ Modifier public ReferenceType String getComponentName ReturnStatement MemberReference componentName MethodDeclaration /**
   * @param componentName the componentName to set
   */ Modifier public setComponentName FormalParameter ReferenceType String componentName StatementExpression Assignment This MemberReference componentName MemberReference componentName = MethodDeclaration /**
   * @return the configVersions
   */ Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getConfigVersions ReturnStatement MemberReference configVersions MethodDeclaration /**
   * @param configVersions the configVersions to set
   */ Modifier public setConfigVersions FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String configVersions StatementExpression Assignment This MemberReference configVersions MemberReference configVersions = MethodDeclaration /**
   * @return the clusterId
   */ Modifier public ReferenceType Long getClusterId ReturnStatement MemberReference clusterId MethodDeclaration /**
   * @param clusterId the clusterId to set
   */ Modifier public setClusterId FormalParameter ReferenceType Long clusterId StatementExpression Assignment This MemberReference clusterId MemberReference clusterId = MethodDeclaration /**
   * @return the clusterName
   */ Modifier public ReferenceType String getClusterName ReturnStatement MemberReference clusterName MethodDeclaration /**
   * @param clusterName the clusterName to set
   */ Modifier public setClusterName FormalParameter ReferenceType String clusterName StatementExpression Assignment This MemberReference clusterName MemberReference clusterName = MethodDeclaration /**
   * @return the desiredState
   */ Modifier public ReferenceType String getDesiredState ReturnStatement MemberReference desiredState MethodDeclaration /**
   * @param desiredState the desiredState to set
   */ Modifier public setDesiredState FormalParameter ReferenceType String desiredState StatementExpression Assignment This MemberReference desiredState MemberReference desiredState = MethodDeclaration /**
   * @return the desiredStackVersion
   */ Modifier public ReferenceType String getDesiredStackVersion ReturnStatement MemberReference desiredStackVersion MethodDeclaration /**
   * @param desiredStackVersion the desiredStackVersion to set
   */ Modifier public setDesiredStackVersion FormalParameter ReferenceType String desiredStackVersion StatementExpression Assignment This MemberReference desiredStackVersion MemberReference desiredStackVersion = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType ServiceComponentResponse VariableDeclarator that Cast ReferenceType ServiceComponentResponse MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference clusterName Literal null MethodInvocation ! clusterName MemberReference that clusterName equals BinaryOperation != MemberReference that clusterName Literal null BlockStatement ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation ! serviceName MemberReference that serviceName equals BinaryOperation != MemberReference that serviceName Literal null BlockStatement ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation ! componentName MemberReference that componentName equals BinaryOperation != MemberReference that componentName Literal null BlockStatement ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation clusterId intValue Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 71 MemberReference result TernaryExpression BinaryOperation != MemberReference clusterName Literal null MethodInvocation clusterName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 71 MemberReference result TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation serviceName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 71 MemberReference result TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation componentName hashCode Literal 0 = ReturnStatement MemberReference result",0
280,280,,1
184,184,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.entities Import javax.persistence.Column Import javax.persistence.Id Import java.io.Serializable ClassDeclaration Modifier public Annotation SuppressWarnings Literal ""serial"" ServiceComponentDesiredStateEntityPK FieldDeclaration Modifier private ReferenceType Long VariableDeclarator clusterId MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""cluster_id"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair length Literal 10 Annotation Id ReferenceType Long getClusterId ReturnStatement MemberReference clusterId MethodDeclaration Modifier public setClusterId FormalParameter ReferenceType Long clusterId StatementExpression Assignment This MemberReference clusterId MemberReference clusterId = FieldDeclaration Modifier private ReferenceType String VariableDeclarator serviceName MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""service_name"" ElementValuePair nullable Literal false ElementValuePair insertable Literal false ElementValuePair updatable Literal false Annotation Id ReferenceType String getServiceName ReturnStatement MemberReference serviceName MethodDeclaration Modifier public setServiceName FormalParameter ReferenceType String serviceName StatementExpression Assignment This MemberReference serviceName MemberReference serviceName = FieldDeclaration Modifier private ReferenceType String VariableDeclarator componentName MethodDeclaration Modifier public Annotation Id Annotation Column ElementValuePair name Literal ""component_name"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ReferenceType String getComponentName ReturnStatement MemberReference componentName MethodDeclaration Modifier public setComponentName FormalParameter ReferenceType String componentName StatementExpression Assignment This MemberReference componentName MemberReference componentName = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType ServiceComponentDesiredStateEntityPK VariableDeclarator that Cast ReferenceType ServiceComponentDesiredStateEntityPK MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation ! clusterId MemberReference that clusterId equals BinaryOperation != MemberReference that clusterId Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation ! componentName MemberReference that componentName equals BinaryOperation != MemberReference that componentName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation ! serviceName MemberReference that serviceName equals BinaryOperation != MemberReference that serviceName Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation clusterId intValue Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation serviceName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation componentName hashCode Literal 0 = ReturnStatement MemberReference result ReferenceType Serializable",0
251,251,,1
235,235,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.action ClassDeclaration Modifier public ActionType FieldDeclaration Modifier public final ReferenceType String VariableDeclarator actionName ConstructorDeclaration Modifier public ActionType FormalParameter ReferenceType String actionName StatementExpression SuperConstructorInvocation StatementExpression Assignment This MemberReference actionName MemberReference actionName =",1
261,261,,1
68,68,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.spi Import java.util.Map Import java.util.Set InterfaceDeclaration Modifier public /**
 * The schema is used to describe all of the properties that a resource type
 * supports.
 */ Schema MethodDeclaration /**
   * Get the property id for the property that uniquely identifies
   * the given resource type for the resource described by this schema.
   * </p>
   * For example, the resource 'HostComponent' is uniquely identified by
   * its associated 'Cluster', 'Host' and 'Component' resources.  Passing
   * the 'Host' resource type to
   * {@link Schema#getKeyPropertyId(org.apache.ambari.server.controller.spi.Resource.Type)}
   * on a schema object of a 'HostComponent' resource will return the id of the
   * property of the foreign key reference from the 'HostComponent' to the 'Host'.
   *
   * @param type the resource type
   * @return the key property id for the given resource type
   */ Modifier public ReferenceType String getKeyPropertyId FormalParameter ReferenceType Resource ReferenceType Type type MethodDeclaration /**
   * Get this schema's map of category and property names.  The map
   * is keyed by category name and contains sets of property names
   * for each category.
   *
   * @return the map of category and property names
   */ Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String getCategoryProperties",1
40,40,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.host Import org.apache.ambari.server.orm.entities.HostEntity Import org.apache.ambari.server.state.Host InterfaceDeclaration Modifier public HostFactory MethodDeclaration ReferenceType Host create FormalParameter ReferenceType HostEntity hostEntity FormalParameter BasicType boolean persisted",0
168,168,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services Import com.google.inject.Inject Import com.google.inject.Singleton Import org.apache.ambari.server.configuration.Configuration Import org.apache.ambari.server.state  Import org.slf4j.Logger Import org.slf4j.LoggerFactory Import org.w3c.dom  Import org.xml.sax.SAXException Import javax.xml.parsers.DocumentBuilder Import javax.xml.parsers.DocumentBuilderFactory Import javax.xml.parsers.ParserConfigurationException Import java.io.File Import java.io.IOException Import java.util.ArrayList Import java.util.HashMap Import java.util.List Import java.util.Map ClassDeclaration Modifier public Annotation Singleton /**
 * ServiceInfo responsible getting information about cluster.
 */ AmbariMetaInfo FieldDeclaration Modifier private ReferenceType List TypeArgument ReferenceType StackInfo VariableDeclarator stacksResult ClassCreator ReferenceType ArrayList TypeArgument ReferenceType StackInfo FieldDeclaration Modifier private ReferenceType File VariableDeclarator stackRoot FieldDeclaration Modifier private final static ReferenceType Logger VariableDeclarator LOG MethodInvocation LoggerFactory ClassReference ReferenceType AmbariMetaInfo getLogger FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator SERVICES_FOLDER_NAME Literal ""services"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator SERVICE_METAINFO_FILE_NAME Literal ""metainfo.xml"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator SERVICE_CONFIG_FOLDER_NAME Literal ""configuration"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator SERVICE_CONFIG_FILE_NAME_POSTFIX Literal ""-site.xml"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator REPOSITORY_FILE_NAME Literal ""repoinfo.xml"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator REPOSITORY_FOLDER_NAME Literal ""repos"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator REPOSITORY_XML_MAIN_BLOCK_NAME Literal ""os"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator REPOSITORY_XML_ATTRIBUTE_OS_TYPE Literal ""type"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator REPOSITORY_XML_REPO_BLOCK_NAME Literal ""repo"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator REPOSITORY_XML_PROPERTY_BASEURL Literal ""baseurl"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator REPOSITORY_XML_PROPERTY_REPOID Literal ""repoid"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator REPOSITORY_XML_PROPERTY_REPONAME Literal ""reponame"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator REPOSITORY_XML_PROPERTY_MIRRORSLIST Literal ""mirrorslist"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator METAINFO_XML_MAIN_BLOCK_NAME Literal ""metainfo"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator METAINFO_XML_PROPERTY_VERSION Literal ""version"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator METAINFO_XML_PROPERTY_USER Literal ""user"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator METAINFO_XML_PROPERTY_COMMENT Literal ""comment"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator METAINFO_XML_PROPERTY_COMPONENT_MAIN Literal ""component"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator METAINFO_XML_PROPERTY_COMPONENT_NAME Literal ""name"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator METAINFO_XML_PROPERTY_COMPONENT_CATEGORY Literal ""category"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator PROPERTY_XML_MAIN_BLOCK_NAME Literal ""property"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator PROPERTY_XML_PROPERTY_NAME Literal ""name"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator PROPERTY_XML_PROPERTY_VALUE Literal ""value"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator PROPERTY_XML_PROPERTY_DESCRIPTION Literal ""description"" ConstructorDeclaration Modifier public Annotation Inject /**
     * Ambari Meta Info Object
     *
     * @param conf Configuration API to be used.
     * @throws Exception
     */ AmbariMetaInfo FormalParameter ReferenceType Configuration conf Exception LocalVariableDeclaration ReferenceType String VariableDeclarator stackPath MethodInvocation conf getMetadataPath StatementExpression Assignment This MemberReference stackRoot ClassCreator ReferenceType File MemberReference stackPath = ConstructorDeclaration Modifier public Annotation Inject AmbariMetaInfo FormalParameter ReferenceType File stackRoot Exception StatementExpression Assignment This MemberReference stackRoot MemberReference stackRoot = MethodDeclaration /**
     * Initialize the Ambari Meta Info
     *
     * @throws Exception throws exception if not able to parse the Meta data.
     */ Modifier public init Exception StatementExpression MethodInvocation MemberReference stackRoot getConfigurationInformation MethodDeclaration /**
     * Get component category
     *
     * @param stackName
     * @param version
     * @param serviceName
     * @param componentName
     * @return component component Info
     */ Modifier public ReferenceType ComponentInfo getComponentCategory FormalParameter ReferenceType String stackName FormalParameter ReferenceType String version FormalParameter ReferenceType String serviceName FormalParameter ReferenceType String componentName LocalVariableDeclaration ReferenceType ComponentInfo VariableDeclarator component Literal null LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType ComponentInfo VariableDeclarator components MethodInvocation MemberReference stackName MemberReference version MemberReference serviceName getComponentsByService IfStatement BinaryOperation != MemberReference components Literal null ForStatement EnhancedForControl VariableDeclaration ReferenceType ComponentInfo VariableDeclarator cmp MemberReference components BlockStatement IfStatement MethodInvocation cmp MethodInvocation MemberReference componentName equals getName BlockStatement StatementExpression Assignment MemberReference component MemberReference cmp = BreakStatement End End End ReturnStatement MemberReference component MethodDeclaration /**
     * Get components by service
     *
     * @param stackName
     * @param version
     * @param serviceName
     * @return
     */ Modifier public ReferenceType List TypeArgument ReferenceType ComponentInfo getComponentsByService FormalParameter ReferenceType String stackName FormalParameter ReferenceType String version FormalParameter ReferenceType String serviceName LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType ComponentInfo VariableDeclarator componentsResult Literal null LocalVariableDeclaration ReferenceType ServiceInfo VariableDeclarator service MethodInvocation MemberReference stackName MemberReference version MemberReference serviceName getServiceInfo IfStatement BinaryOperation != MemberReference service Literal null StatementExpression Assignment MemberReference componentsResult MethodInvocation service getComponents = End ReturnStatement MemberReference componentsResult MethodDeclaration Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType List TypeArgument ReferenceType RepositoryInfo getRepository FormalParameter ReferenceType String stackName FormalParameter ReferenceType String version LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType List TypeArgument ReferenceType RepositoryInfo VariableDeclarator reposResult Literal null LocalVariableDeclaration ReferenceType StackInfo VariableDeclarator stack MethodInvocation MemberReference stackName MemberReference version getStackInfo IfStatement BinaryOperation != MemberReference stack Literal null BlockStatement LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType RepositoryInfo VariableDeclarator repository MethodInvocation stack getRepositories StatementExpression Assignment MemberReference reposResult ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType List TypeArgument ReferenceType RepositoryInfo = ForStatement EnhancedForControl VariableDeclaration ReferenceType RepositoryInfo VariableDeclarator repo MemberReference repository BlockStatement IfStatement MethodInvocation ! reposResult MethodInvocation repo getOsType containsKey BlockStatement StatementExpression MethodInvocation reposResult MethodInvocation repo getOsType ClassCreator ReferenceType ArrayList TypeArgument ReferenceType RepositoryInfo put End StatementExpression MethodInvocation reposResult MethodInvocation MemberReference repo add MethodInvocation repo getOsType get End End ReturnStatement MemberReference reposResult MethodDeclaration Modifier public BasicType boolean isSupportedStack FormalParameter ReferenceType String stackName FormalParameter ReferenceType String version LocalVariableDeclaration BasicType boolean VariableDeclarator exist Literal false LocalVariableDeclaration ReferenceType StackInfo VariableDeclarator stack MethodInvocation MemberReference stackName MemberReference version getStackInfo IfStatement BinaryOperation == MemberReference stack Literal null StatementExpression Assignment MemberReference exist Literal true = End ReturnStatement MemberReference exist MethodDeclaration Modifier public BasicType boolean isValidService FormalParameter ReferenceType String stackName FormalParameter ReferenceType String version FormalParameter ReferenceType String serviceName LocalVariableDeclaration ReferenceType ServiceInfo VariableDeclarator service MethodInvocation MemberReference stackName MemberReference version MemberReference serviceName getServiceInfo ReturnStatement BinaryOperation != MemberReference service Literal null MethodDeclaration Modifier public BasicType boolean isValidServiceComponent FormalParameter ReferenceType String stackName FormalParameter ReferenceType String version FormalParameter ReferenceType String serviceName FormalParameter ReferenceType String componentName LocalVariableDeclaration ReferenceType ServiceInfo VariableDeclarator service MethodInvocation MemberReference stackName MemberReference version MemberReference serviceName getServiceInfo IfStatement BinaryOperation == MemberReference service Literal null BlockStatement ReturnStatement Literal false End ForStatement EnhancedForControl VariableDeclaration ReferenceType ComponentInfo VariableDeclarator compInfo MethodInvocation service getComponents BlockStatement IfStatement MethodInvocation compInfo MethodInvocation MemberReference componentName equals getName BlockStatement ReturnStatement Literal true End End ReturnStatement Literal false MethodDeclaration /**
     * Get the name of a service given the component name.
     *
     * @param stackName     the stack name
     * @param version       the stack version
     * @param componentName the component name
     * @return the service name
     */ Modifier public ReferenceType String getComponentToService FormalParameter ReferenceType String stackName FormalParameter ReferenceType String version FormalParameter ReferenceType String componentName IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Looking for service for component"" Literal "", stackName="" MemberReference stackName Literal "", stackVersion="" MemberReference version Literal "", componentName="" MemberReference componentName debug End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType ServiceInfo VariableDeclarator services MethodInvocation MemberReference stackName MemberReference version getServices LocalVariableDeclaration ReferenceType String VariableDeclarator retService Literal null IfStatement BinaryOperation || BinaryOperation == MemberReference services Literal null MethodInvocation services isEmpty BlockStatement ReturnStatement MemberReference retService End LocalVariableDeclaration BasicType boolean VariableDeclarator found Literal false ForStatement EnhancedForControl VariableDeclaration ReferenceType Map ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType ServiceInfo VariableDeclarator entry MethodInvocation services entrySet BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType ComponentInfo VariableDeclarator compInfo MethodInvocation entry MethodInvocation getComponents getValue BlockStatement IfStatement MethodInvocation compInfo MethodInvocation MemberReference componentName equals getName BlockStatement StatementExpression Assignment MemberReference retService MethodInvocation entry getKey = StatementExpression Assignment MemberReference found Literal true = BreakStatement End End IfStatement MemberReference found BreakStatement End End ReturnStatement MemberReference retService MethodDeclaration /**
     * Get the service configs supported for a service in a particular stack
     *
     * @param stackName   the stack name
     * @param version     the version of the stack
     * @param serviceName the name of the service in the stack
     * @return the config knobs supported for the service
     */ Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getSupportedConfigs FormalParameter ReferenceType String stackName FormalParameter ReferenceType String version FormalParameter ReferenceType String serviceName LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator propertiesResult ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType ServiceInfo VariableDeclarator service MethodInvocation MemberReference stackName MemberReference version MemberReference serviceName getServiceInfo IfStatement BinaryOperation != MemberReference service Literal null IfStatement MethodInvocation serviceName MethodInvocation service getName equals BlockStatement LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType PropertyInfo VariableDeclarator properties MethodInvocation service getProperties IfStatement BinaryOperation != MemberReference properties Literal null ForStatement EnhancedForControl VariableDeclaration ReferenceType PropertyInfo VariableDeclarator propertyInfo MemberReference properties BlockStatement LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator fileProperties MethodInvocation propertiesResult MethodInvocation propertyInfo getFilename get IfStatement BinaryOperation == MemberReference fileProperties Literal null BlockStatement StatementExpression Assignment MemberReference fileProperties ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String = StatementExpression MethodInvocation fileProperties MethodInvocation propertyInfo getName MethodInvocation propertyInfo getValue put StatementExpression MethodInvocation propertiesResult MethodInvocation propertyInfo getFilename MemberReference fileProperties put BlockStatement StatementExpression MethodInvocation fileProperties MethodInvocation propertyInfo getName MethodInvocation propertyInfo getValue put End End End End End ReturnStatement MemberReference propertiesResult MethodDeclaration /**
     * Given a stack name and version return all the services with info
     *
     * @param stackName the stack name
     * @param version   the version of the stack
     * @return the information of abt varios services that are supported in the
     *         stack
     */ Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType ServiceInfo getServices FormalParameter ReferenceType String stackName FormalParameter ReferenceType String version LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType ServiceInfo VariableDeclarator servicesInfoResult ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType ServiceInfo LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType ServiceInfo VariableDeclarator services Literal null LocalVariableDeclaration ReferenceType StackInfo VariableDeclarator stack MethodInvocation MemberReference stackName MemberReference version getStackInfo IfStatement BinaryOperation == MemberReference stack Literal null ReturnStatement Literal null End StatementExpression Assignment MemberReference services MethodInvocation stack getServices = IfStatement BinaryOperation != MemberReference services Literal null ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceInfo VariableDeclarator service MemberReference services BlockStatement StatementExpression MethodInvocation servicesInfoResult MethodInvocation service getName MemberReference service put End End ReturnStatement MemberReference servicesInfoResult MethodDeclaration Modifier public ReferenceType ServiceInfo getServiceInfo FormalParameter ReferenceType String stackName FormalParameter ReferenceType String version FormalParameter ReferenceType String serviceName LocalVariableDeclaration ReferenceType ServiceInfo VariableDeclarator serviceInfoResult Literal null LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType ServiceInfo VariableDeclarator services Literal null LocalVariableDeclaration ReferenceType StackInfo VariableDeclarator stack MethodInvocation MemberReference stackName MemberReference version getStackInfo IfStatement BinaryOperation == MemberReference stack Literal null ReturnStatement Literal null End StatementExpression Assignment MemberReference services MethodInvocation stack getServices = IfStatement BinaryOperation != MemberReference services Literal null ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceInfo VariableDeclarator service MemberReference services BlockStatement IfStatement MethodInvocation serviceName MethodInvocation service getName equals BlockStatement StatementExpression Assignment MemberReference serviceInfoResult MemberReference service = BreakStatement End End End ReturnStatement MemberReference serviceInfoResult MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType ServiceInfo getSupportedServices FormalParameter ReferenceType String stackName FormalParameter ReferenceType String version LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType ServiceInfo VariableDeclarator servicesResulr Literal null LocalVariableDeclaration ReferenceType StackInfo VariableDeclarator stack MethodInvocation MemberReference stackName MemberReference version getStackInfo IfStatement BinaryOperation != MemberReference stack Literal null StatementExpression Assignment MemberReference servicesResulr MethodInvocation stack getServices = End ReturnStatement MemberReference servicesResulr MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType StackInfo getSupportedStacks ReturnStatement MemberReference stacksResult MethodDeclaration Modifier public ReferenceType StackInfo getStackInfo FormalParameter ReferenceType String stackName FormalParameter ReferenceType String version LocalVariableDeclaration ReferenceType StackInfo VariableDeclarator stackInfoResult Literal null ForStatement EnhancedForControl VariableDeclaration ReferenceType StackInfo VariableDeclarator stack MemberReference stacksResult BlockStatement IfStatement BinaryOperation && MethodInvocation stackName MethodInvocation stack getName equals MethodInvocation version MethodInvocation stack getVersion equals BlockStatement StatementExpression Assignment MemberReference stackInfoResult MemberReference stack = BreakStatement End End ReturnStatement MemberReference stackInfoResult MethodDeclaration Modifier private getConfigurationInformation FormalParameter ReferenceType File stackRoot Exception IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + Literal ""Loading stack information"" Literal "", stackRoot="" MethodInvocation stackRoot getAbsolutePath debug End IfStatement BinaryOperation && MethodInvocation ! stackRoot isDirectory MethodInvocation ! stackRoot exists ThrowStatement ClassCreator ReferenceType IOException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal """" MemberReference Configuration METADETA_DIR_PATH Literal "" should be a directory with stack"" Literal "", stackRoot="" MethodInvocation stackRoot getAbsolutePath End LocalVariableDeclaration ReferenceType File VariableDeclarator stacks MethodInvocation stackRoot listFiles ForStatement EnhancedForControl VariableDeclaration ReferenceType File VariableDeclarator stackFolder MemberReference stacks BlockStatement IfStatement MethodInvocation stackFolder isFile ContinueStatement End LocalVariableDeclaration ReferenceType File VariableDeclarator concretStacks MethodInvocation stackFolder listFiles ForStatement EnhancedForControl VariableDeclaration ReferenceType File VariableDeclarator stack MemberReference concretStacks BlockStatement IfStatement MethodInvocation stack isFile ContinueStatement End LocalVariableDeclaration ReferenceType StackInfo VariableDeclarator stackInfo ClassCreator ReferenceType StackInfo StatementExpression MethodInvocation stackInfo MethodInvocation stackFolder getName setName StatementExpression MethodInvocation stackInfo MethodInvocation stack getName setVersion IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Adding new stack to known stacks"" Literal "", stackName="" MethodInvocation stackFolder getName Literal "", stackVersion="" MethodInvocation stack getName debug End StatementExpression MethodInvocation stacksResult MemberReference stackInfo add LocalVariableDeclaration ReferenceType File VariableDeclarator repositoryFolder ClassCreator ReferenceType File BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + MethodInvocation stack getAbsolutePath MemberReference File separator MemberReference REPOSITORY_FOLDER_NAME MemberReference File separator MemberReference REPOSITORY_FILE_NAME IfStatement MethodInvocation repositoryFolder exists BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Adding repositories to stack"" Literal "", stackName="" MethodInvocation stackFolder getName Literal "", stackVersion="" MethodInvocation stack getName Literal "", repoFolder="" MethodInvocation repositoryFolder getPath debug End LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType RepositoryInfo VariableDeclarator repositoryInfoList MethodInvocation MemberReference repositoryFolder getRepository StatementExpression MethodInvocation stackInfo MethodInvocation MemberReference repositoryInfoList addAll getRepositories End LocalVariableDeclaration ReferenceType File VariableDeclarator servicesRootFolder ClassCreator ReferenceType File BinaryOperation + BinaryOperation + MethodInvocation stack getAbsolutePath MemberReference File separator MemberReference SERVICES_FOLDER_NAME LocalVariableDeclaration ReferenceType File VariableDeclarator servicesFolders MethodInvocation servicesRootFolder listFiles IfStatement BinaryOperation != MemberReference servicesFolders Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType File VariableDeclarator serviceFolder MemberReference servicesFolders BlockStatement LocalVariableDeclaration ReferenceType ServiceInfo VariableDeclarator serviceInfo ClassCreator ReferenceType ServiceInfo StatementExpression MethodInvocation serviceInfo MethodInvocation serviceFolder getName setName StatementExpression MethodInvocation stackInfo MethodInvocation MemberReference serviceInfo add getServices IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Adding new service to stack"" Literal "", stackName="" MethodInvocation stackFolder getName Literal "", stackVersion="" MethodInvocation stack getName Literal "", serviceName="" MethodInvocation serviceInfo getName debug End LocalVariableDeclaration ReferenceType File VariableDeclarator metainfoFile ClassCreator ReferenceType File BinaryOperation + BinaryOperation + MethodInvocation serviceFolder getAbsolutePath MemberReference File separator MemberReference SERVICE_METAINFO_FILE_NAME IfStatement MethodInvocation metainfoFile exists BlockStatement StatementExpression MethodInvocation MemberReference metainfoFile MemberReference serviceInfo setMetaInfo End LocalVariableDeclaration ReferenceType File VariableDeclarator serviceConfigFolder ClassCreator ReferenceType File BinaryOperation + BinaryOperation + MethodInvocation serviceFolder getAbsolutePath MemberReference File separator MemberReference SERVICE_CONFIG_FOLDER_NAME LocalVariableDeclaration ReferenceType File VariableDeclarator configFiles MethodInvocation serviceConfigFolder listFiles IfStatement BinaryOperation != MemberReference configFiles Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType File VariableDeclarator config MemberReference configFiles BlockStatement IfStatement MethodInvocation config MethodInvocation MemberReference SERVICE_CONFIG_FILE_NAME_POSTFIX endsWith getName BlockStatement StatementExpression MethodInvocation serviceInfo MethodInvocation MethodInvocation MemberReference config getProperties addAll getProperties End End End End End End End MethodDeclaration Modifier private ReferenceType List TypeArgument ReferenceType RepositoryInfo getRepository FormalParameter ReferenceType File repositoryFile ParserConfigurationException IOException SAXException LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType RepositoryInfo VariableDeclarator repositorysInfo ClassCreator ReferenceType ArrayList TypeArgument ReferenceType RepositoryInfo LocalVariableDeclaration ReferenceType DocumentBuilderFactory VariableDeclarator dbFactory MethodInvocation DocumentBuilderFactory newInstance LocalVariableDeclaration ReferenceType DocumentBuilder VariableDeclarator dBuilder MethodInvocation dbFactory newDocumentBuilder LocalVariableDeclaration ReferenceType Document VariableDeclarator doc MethodInvocation dBuilder MemberReference repositoryFile parse LocalVariableDeclaration ReferenceType NodeList VariableDeclarator osNodes MethodInvocation doc MemberReference REPOSITORY_XML_MAIN_BLOCK_NAME getElementsByTagName ForStatement ForControl VariableDeclaration BasicType int VariableDeclarator index Literal 0 BinaryOperation < MemberReference index MethodInvocation osNodes getLength MemberReference ++ index BlockStatement LocalVariableDeclaration ReferenceType Node VariableDeclarator osNode MethodInvocation osNodes MemberReference index item IfStatement BinaryOperation == MethodInvocation osNode getNodeType MemberReference Node ELEMENT_NODE BlockStatement IfStatement MethodInvocation ! osNode MethodInvocation MemberReference REPOSITORY_XML_MAIN_BLOCK_NAME equals getNodeName BlockStatement ContinueStatement End LocalVariableDeclaration ReferenceType NamedNodeMap VariableDeclarator attrs MethodInvocation osNode getAttributes LocalVariableDeclaration ReferenceType Node VariableDeclarator osAttr MethodInvocation attrs MemberReference REPOSITORY_XML_ATTRIBUTE_OS_TYPE getNamedItem IfStatement BinaryOperation == MemberReference osAttr Literal null BlockStatement ContinueStatement End LocalVariableDeclaration ReferenceType String VariableDeclarator osType MethodInvocation osAttr getNodeValue LocalVariableDeclaration ReferenceType NodeList VariableDeclarator repoNodes MethodInvocation osNode getChildNodes ForStatement ForControl VariableDeclaration BasicType int VariableDeclarator j Literal 0 BinaryOperation < MemberReference j MethodInvocation repoNodes getLength MemberReference ++ j BlockStatement LocalVariableDeclaration ReferenceType Node VariableDeclarator repoNode MethodInvocation repoNodes MemberReference j item IfStatement BinaryOperation || BinaryOperation != MethodInvocation repoNode getNodeType MemberReference Node ELEMENT_NODE MethodInvocation ! repoNode MethodInvocation MemberReference REPOSITORY_XML_REPO_BLOCK_NAME equals getNodeName BlockStatement ContinueStatement End LocalVariableDeclaration ReferenceType Element VariableDeclarator property Cast ReferenceType Element MemberReference repoNode LocalVariableDeclaration ReferenceType String VariableDeclarator repoId MethodInvocation MemberReference REPOSITORY_XML_PROPERTY_REPOID MemberReference property getTagValue LocalVariableDeclaration ReferenceType String VariableDeclarator repoName MethodInvocation MemberReference REPOSITORY_XML_PROPERTY_REPONAME MemberReference property getTagValue LocalVariableDeclaration ReferenceType String VariableDeclarator baseUrl MethodInvocation MemberReference REPOSITORY_XML_PROPERTY_BASEURL MemberReference property getTagValue LocalVariableDeclaration ReferenceType String VariableDeclarator mirrorsList MethodInvocation MemberReference REPOSITORY_XML_PROPERTY_MIRRORSLIST MemberReference property getTagValue LocalVariableDeclaration ReferenceType String VariableDeclarator osTypes MethodInvocation osType Literal "","" split ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator os MemberReference osTypes BlockStatement LocalVariableDeclaration ReferenceType RepositoryInfo VariableDeclarator repositoryInfo ClassCreator ReferenceType RepositoryInfo StatementExpression MethodInvocation repositoryInfo MethodInvocation os trim setOsType StatementExpression MethodInvocation repositoryInfo MemberReference repoId setRepoId StatementExpression MethodInvocation repositoryInfo MemberReference repoName setRepoName StatementExpression MethodInvocation repositoryInfo MemberReference baseUrl setBaseUrl StatementExpression MethodInvocation repositoryInfo MemberReference mirrorsList setMirrorsList IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + Literal ""Adding repo to stack"" Literal "", repoInfo="" MethodInvocation repositoryInfo toString debug End StatementExpression MethodInvocation repositorysInfo MemberReference repositoryInfo add End End End End ReturnStatement MemberReference repositorysInfo MethodDeclaration Modifier private setMetaInfo FormalParameter ReferenceType File metainfoFile FormalParameter ReferenceType ServiceInfo serviceInfo LocalVariableDeclaration ReferenceType DocumentBuilderFactory VariableDeclarator dbFactory MethodInvocation DocumentBuilderFactory newInstance LocalVariableDeclaration ReferenceType Document VariableDeclarator doc Literal null LocalVariableDeclaration ReferenceType DocumentBuilder VariableDeclarator dBuilder Literal null TryStatement StatementExpression Assignment MemberReference dBuilder MethodInvocation dbFactory newDocumentBuilder = StatementExpression Assignment MemberReference doc MethodInvocation dBuilder MemberReference metainfoFile parse = CatchClause CatchClauseParameter SAXException e StatementExpression MethodInvocation LOG Literal ""Error while parsing metainf.xml"" MemberReference e error CatchClause CatchClauseParameter IOException e StatementExpression MethodInvocation LOG Literal ""Error while open metainf.xml"" MemberReference e error CatchClause CatchClauseParameter ParserConfigurationException e StatementExpression MethodInvocation LOG Literal ""Error while parsing metainf.xml"" MemberReference e error IfStatement BinaryOperation == MemberReference doc Literal null ReturnStatement End StatementExpression MethodInvocation doc MethodInvocation normalize getDocumentElement LocalVariableDeclaration ReferenceType NodeList VariableDeclarator metaInfoNodes MethodInvocation doc MemberReference METAINFO_XML_MAIN_BLOCK_NAME getElementsByTagName IfStatement BinaryOperation > MethodInvocation metaInfoNodes getLength Literal 0 BlockStatement LocalVariableDeclaration ReferenceType Node VariableDeclarator metaInfoNode MethodInvocation metaInfoNodes Literal 0 item IfStatement BinaryOperation == MethodInvocation metaInfoNode getNodeType MemberReference Node ELEMENT_NODE BlockStatement LocalVariableDeclaration ReferenceType Element VariableDeclarator metaInfoElem Cast ReferenceType Element MemberReference metaInfoNode StatementExpression MethodInvocation serviceInfo MethodInvocation MemberReference METAINFO_XML_PROPERTY_VERSION MemberReference metaInfoElem getTagValue setVersion StatementExpression MethodInvocation serviceInfo MethodInvocation MemberReference METAINFO_XML_PROPERTY_USER MemberReference metaInfoElem getTagValue setUser StatementExpression MethodInvocation serviceInfo MethodInvocation MemberReference METAINFO_XML_PROPERTY_COMMENT MemberReference metaInfoElem getTagValue setComment End End LocalVariableDeclaration ReferenceType NodeList VariableDeclarator componentInfoNodes MethodInvocation doc MemberReference METAINFO_XML_PROPERTY_COMPONENT_MAIN getElementsByTagName IfStatement BinaryOperation > MethodInvocation componentInfoNodes getLength Literal 0 BlockStatement ForStatement ForControl VariableDeclaration BasicType int VariableDeclarator index Literal 0 BinaryOperation < MemberReference index MethodInvocation componentInfoNodes getLength MemberReference ++ index BlockStatement LocalVariableDeclaration ReferenceType Node VariableDeclarator componentInfoNode MethodInvocation componentInfoNodes MemberReference index item IfStatement BinaryOperation == MethodInvocation componentInfoNode getNodeType MemberReference Node ELEMENT_NODE BlockStatement LocalVariableDeclaration ReferenceType Element VariableDeclarator componentInfoElem Cast ReferenceType Element MemberReference componentInfoNode LocalVariableDeclaration ReferenceType ComponentInfo VariableDeclarator componentInfo ClassCreator ReferenceType ComponentInfo StatementExpression MethodInvocation componentInfo MethodInvocation MemberReference METAINFO_XML_PROPERTY_COMPONENT_NAME MemberReference componentInfoElem getTagValue setName StatementExpression MethodInvocation componentInfo MethodInvocation MemberReference METAINFO_XML_PROPERTY_COMPONENT_CATEGORY MemberReference componentInfoElem getTagValue setCategory StatementExpression MethodInvocation serviceInfo MethodInvocation MemberReference componentInfo add getComponents End End End MethodDeclaration Modifier private ReferenceType List TypeArgument ReferenceType PropertyInfo getProperties FormalParameter ReferenceType File propertyFile LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType PropertyInfo VariableDeclarator resultPropertyList ClassCreator ReferenceType ArrayList TypeArgument ReferenceType PropertyInfo TryStatement LocalVariableDeclaration ReferenceType DocumentBuilderFactory VariableDeclarator dbFactory MethodInvocation DocumentBuilderFactory newInstance LocalVariableDeclaration ReferenceType DocumentBuilder VariableDeclarator dBuilder MethodInvocation dbFactory newDocumentBuilder LocalVariableDeclaration ReferenceType Document VariableDeclarator doc MethodInvocation dBuilder MemberReference propertyFile parse StatementExpression MethodInvocation doc MethodInvocation normalize getDocumentElement LocalVariableDeclaration ReferenceType NodeList VariableDeclarator propertyNodes MethodInvocation doc MemberReference PROPERTY_XML_MAIN_BLOCK_NAME getElementsByTagName ForStatement ForControl VariableDeclaration BasicType int VariableDeclarator index Literal 0 BinaryOperation < MemberReference index MethodInvocation propertyNodes getLength MemberReference ++ index BlockStatement LocalVariableDeclaration ReferenceType Node VariableDeclarator node MethodInvocation propertyNodes MemberReference index item IfStatement BinaryOperation == MethodInvocation node getNodeType MemberReference Node ELEMENT_NODE BlockStatement LocalVariableDeclaration ReferenceType Element VariableDeclarator property Cast ReferenceType Element MemberReference node LocalVariableDeclaration ReferenceType PropertyInfo VariableDeclarator propertyInfo ClassCreator ReferenceType PropertyInfo StatementExpression MethodInvocation propertyInfo MethodInvocation MemberReference PROPERTY_XML_PROPERTY_NAME MemberReference property getTagValue setName StatementExpression MethodInvocation propertyInfo MethodInvocation MemberReference PROPERTY_XML_PROPERTY_VALUE MemberReference property getTagValue setValue StatementExpression MethodInvocation propertyInfo MethodInvocation MemberReference PROPERTY_XML_PROPERTY_DESCRIPTION MemberReference property getTagValue setDescription StatementExpression MethodInvocation propertyInfo MethodInvocation propertyFile getName setFilename IfStatement BinaryOperation || BinaryOperation == MethodInvocation propertyInfo getName Literal null BinaryOperation == MethodInvocation propertyInfo getValue Literal null ContinueStatement End StatementExpression MethodInvocation resultPropertyList MemberReference propertyInfo add End End CatchClause CatchClauseParameter Exception e StatementExpression MethodInvocation e printStackTrace ReturnStatement Literal null ReturnStatement MemberReference resultPropertyList MethodDeclaration Modifier private ReferenceType String getTagValue FormalParameter ReferenceType String sTag FormalParameter ReferenceType Element rawElement LocalVariableDeclaration ReferenceType String VariableDeclarator result Literal null IfStatement BinaryOperation && BinaryOperation != MethodInvocation rawElement MemberReference sTag getElementsByTagName Literal null BinaryOperation > MethodInvocation rawElement MethodInvocation getLength MemberReference sTag getElementsByTagName Literal 0 BlockStatement IfStatement BinaryOperation != MethodInvocation rawElement MethodInvocation Literal 0 item MemberReference sTag getElementsByTagName Literal null BlockStatement LocalVariableDeclaration ReferenceType NodeList VariableDeclarator element MethodInvocation rawElement MethodInvocation Literal 0 item MethodInvocation getChildNodes MemberReference sTag getElementsByTagName IfStatement BinaryOperation && BinaryOperation != MemberReference element Literal null BinaryOperation != MethodInvocation element Literal 0 item Literal null BlockStatement LocalVariableDeclaration ReferenceType Node VariableDeclarator value Cast ReferenceType Node MethodInvocation element Literal 0 item StatementExpression Assignment MemberReference result MethodInvocation value getNodeValue = End End End ReturnStatement MemberReference result MethodDeclaration Modifier public BasicType boolean areOsTypesCompatible FormalParameter ReferenceType String type1 FormalParameter ReferenceType String type2 IfStatement BinaryOperation || BinaryOperation == MemberReference type1 Literal null BinaryOperation == MemberReference type2 Literal null BlockStatement ReturnStatement Literal false End IfStatement MethodInvocation type1 MemberReference type2 equals BlockStatement ReturnStatement Literal true End IfStatement BinaryOperation || MethodInvocation type1 Literal ""redhat5"" equals MethodInvocation type1 Literal ""centos5"" equals BlockStatement IfStatement BinaryOperation || MethodInvocation type2 Literal ""centos5"" equals MethodInvocation type2 Literal ""redhat5"" equals BlockStatement ReturnStatement Literal true End IfStatement BinaryOperation || MethodInvocation type1 Literal ""redhat6"" equals MethodInvocation type1 Literal ""centos6"" equals BlockStatement IfStatement BinaryOperation || MethodInvocation type2 Literal ""centos6"" equals MethodInvocation type2 Literal ""redhat6"" equals BlockStatement ReturnStatement Literal true End End End ReturnStatement Literal false",0
245,245,,0
61,61,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services Import org.apache.ambari.server.api.resources.ResourceInstance Import org.apache.ambari.server.controller.spi.Resource Import javax.ws.rs  Import javax.ws.rs.core  Import java.util.Collections ClassDeclaration Modifier public Annotation Path Literal ""/clusters/"" /**
 * Service responsible for cluster resource requests.
 */ ClusterService MethodDeclaration /**
   * Handles: GET /clusters/{clusterID}
   * Get a specific cluster.
   *
   * @param headers     http headers
   * @param ui          uri info
   * @param clusterName cluster id
   * @return cluster instance representation
   */ Modifier public Annotation GET Annotation Path Literal ""{clusterName}"" Annotation Produces Literal ""text/plain"" ReferenceType Response getCluster FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""clusterName"" ReferenceType String clusterName ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type GET MethodInvocation MemberReference clusterName createClusterResource handleRequest MethodDeclaration /**
   * Handles: GET  /clusters
   * Get all clusters.
   *
   * @param headers http headers
   * @param ui      uri info
   * @return cluster collection resource representation
   */ Modifier public Annotation GET Annotation Produces Literal ""text/plain"" ReferenceType Response getClusters FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type GET MethodInvocation Literal null createClusterResource handleRequest MethodDeclaration /**
   * Handles: POST /clusters/{clusterID}
   * Create a specific cluster.
   *
   * @param headers     http headers
   * @param ui          uri info
   * @param clusterName cluster id
   * @return information regarding the created cluster
   */ Modifier public Annotation POST Annotation Path Literal ""{clusterName}"" Annotation Produces Literal ""text/plain"" ReferenceType Response createCluster FormalParameter ReferenceType String body FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""clusterName"" ReferenceType String clusterName ReturnStatement MethodInvocation MemberReference headers MemberReference body MemberReference ui MemberReference Request.Type POST MethodInvocation MemberReference clusterName createClusterResource handleRequest MethodDeclaration /**
   * Handles: PUT /clusters/{clusterID}
   * Update a specific cluster.
   *
   * @param headers     http headers
   * @param ui          uri info
   * @param clusterName cluster id
   * @return information regarding the updated cluster
   */ Modifier public Annotation PUT Annotation Path Literal ""{clusterName}"" Annotation Produces Literal ""text/plain"" ReferenceType Response updateCluster FormalParameter ReferenceType String body FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""clusterName"" ReferenceType String clusterName ReturnStatement MethodInvocation MemberReference headers MemberReference body MemberReference ui MemberReference Request.Type PUT MethodInvocation MemberReference clusterName createClusterResource handleRequest MethodDeclaration /**
   * Handles: DELETE /clusters/{clusterID}
   * Delete a specific cluster.
   *
   * @param headers     http headers
   * @param ui          uri info
   * @param clusterName cluster id
   * @return information regarding the deleted cluster
   */ Modifier public Annotation DELETE Annotation Path Literal ""{clusterName}"" Annotation Produces Literal ""text/plain"" ReferenceType Response deleteCluster FormalParameter Annotation Context ReferenceType HttpHeaders headers FormalParameter Annotation Context ReferenceType UriInfo ui FormalParameter Annotation PathParam Literal ""clusterName"" ReferenceType String clusterName ReturnStatement MethodInvocation MemberReference headers Literal null MemberReference ui MemberReference Request.Type DELETE MethodInvocation MemberReference clusterName createClusterResource handleRequest MethodDeclaration /**
   * Get the hosts sub-resource
   *
   * @param clusterName cluster id
   * @return the hosts service
   */ Modifier public Annotation Path Literal ""{clusterName}/hosts"" ReferenceType HostService getHostHandler FormalParameter Annotation PathParam Literal ""clusterName"" ReferenceType String clusterName ReturnStatement ClassCreator ReferenceType HostService MemberReference clusterName MethodDeclaration /**
   * Get the services sub-resource
   *
   * @param clusterName cluster id
   * @return the services service
   */ Modifier public Annotation Path Literal ""{clusterName}/services"" ReferenceType ServiceService getServiceHandler FormalParameter Annotation PathParam Literal ""clusterName"" ReferenceType String clusterName ReturnStatement ClassCreator ReferenceType ServiceService MemberReference clusterName MethodDeclaration /**
   * Gets the configurations sub-resource.
   *
   * @param clusterName  the cluster name
   * @return the configuration service
   */ Modifier public Annotation Path Literal ""{clusterName}/configurations"" ReferenceType ConfigurationService getConfigurationHandler FormalParameter Annotation PathParam Literal ""clusterName"" ReferenceType String clusterName ReturnStatement ClassCreator ReferenceType ConfigurationService MemberReference clusterName MethodDeclaration /**
   * Gets the requests sub-resource.
   */ Modifier public Annotation Path Literal ""{clusterName}/requests"" ReferenceType RequestService getRequestHandler FormalParameter Annotation PathParam Literal ""clusterName"" ReferenceType String clusterName ReturnStatement ClassCreator ReferenceType RequestService MemberReference clusterName MethodDeclaration /**
   * Get the host component resource without specifying the parent host component.
   * Allows accessing host component resources across hosts.
   *
   * @param clusterName the cluster name
   * @return  the host component service with no parent set
   */ Modifier public Annotation Path Literal ""{clusterName}/host_components"" ReferenceType HostComponentService getHostComponentHandler FormalParameter Annotation PathParam Literal ""clusterName"" ReferenceType String clusterName ReturnStatement ClassCreator ReferenceType HostComponentService MemberReference clusterName Literal null MethodDeclaration /**
   * Create a cluster resource instance.
   *
   * @param clusterName cluster name
   *
   * @return a cluster resource instance
   */ ReferenceType ResourceInstance createClusterResource FormalParameter ReferenceType String clusterName ReturnStatement MethodInvocation MemberReference Resource.Type Cluster MethodInvocation Collections MemberReference Resource.Type Cluster MemberReference clusterName singletonMap createResource ReferenceType BaseService",0
27,27,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.entities Import java.util.Collection Import javax.persistence  Import org.apache.ambari.server.state.State ClassDeclaration Modifier public Annotation javax.persistence.IdClass ClassReference ReferenceType HostComponentDesiredStateEntityPK Annotation javax.persistence.Table ElementValuePair name Literal ""hostcomponentdesiredstate"" ElementValuePair schema Literal ""ambari"" ElementValuePair catalog Literal """" Annotation Entity HostComponentDesiredStateEntity FieldDeclaration Modifier private ReferenceType Long VariableDeclarator clusterId MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""cluster_id"" ElementValuePair nullable Literal false ElementValuePair insertable Literal false ElementValuePair updatable Literal false ElementValuePair length Literal 10 Annotation Id ReferenceType Long getClusterId ReturnStatement MemberReference clusterId MethodDeclaration Modifier public setClusterId FormalParameter ReferenceType Long clusterId StatementExpression Assignment This MemberReference clusterId MemberReference clusterId = FieldDeclaration Modifier private ReferenceType String VariableDeclarator serviceName MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""service_name"" ElementValuePair nullable Literal false ElementValuePair insertable Literal false ElementValuePair updatable Literal false Annotation Id ReferenceType String getServiceName ReturnStatement MemberReference serviceName MethodDeclaration Modifier public setServiceName FormalParameter ReferenceType String serviceName StatementExpression Assignment This MemberReference serviceName MemberReference serviceName = FieldDeclaration Modifier private ReferenceType String VariableDeclarator hostName Literal """" MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""host_name"" ElementValuePair nullable Literal false ElementValuePair insertable Literal false ElementValuePair updatable Literal false Annotation Id ReferenceType String getHostName ReturnStatement MemberReference hostName MethodDeclaration Modifier public setHostName FormalParameter ReferenceType String hostName StatementExpression Assignment This MemberReference hostName MemberReference hostName = FieldDeclaration Modifier private ReferenceType String VariableDeclarator componentName Literal """" MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""component_name"" ElementValuePair nullable Literal false ElementValuePair insertable Literal false ElementValuePair updatable Literal false Annotation Id ReferenceType String getComponentName ReturnStatement MemberReference componentName MethodDeclaration Modifier public setComponentName FormalParameter ReferenceType String componentName StatementExpression Assignment This MemberReference componentName MemberReference componentName = FieldDeclaration Modifier private ReferenceType State VariableDeclarator desiredState MemberReference State INIT MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""desired_state"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true Annotation Enumerated ElementValuePair value MemberReference EnumType STRING Annotation Basic ReferenceType State getDesiredState ReturnStatement MemberReference desiredState MethodDeclaration Modifier public setDesiredState FormalParameter ReferenceType State desiredState StatementExpression Assignment This MemberReference desiredState MemberReference desiredState = FieldDeclaration Modifier private ReferenceType String VariableDeclarator desiredStackVersion Literal """" MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""desired_stack_version"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true Annotation Basic ReferenceType String getDesiredStackVersion ReturnStatement MemberReference desiredStackVersion MethodDeclaration Modifier public setDesiredStackVersion FormalParameter ReferenceType String desiredStackVersion StatementExpression Assignment This MemberReference desiredStackVersion MemberReference desiredStackVersion = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType HostComponentDesiredStateEntity VariableDeclarator that Cast ReferenceType HostComponentDesiredStateEntity MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation ! clusterId MemberReference that clusterId equals BinaryOperation != MemberReference that clusterId Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation ! componentName MemberReference that componentName equals BinaryOperation != MemberReference that componentName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference desiredStackVersion Literal null MethodInvocation ! desiredStackVersion MemberReference that desiredStackVersion equals BinaryOperation != MemberReference that desiredStackVersion Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference desiredState Literal null MethodInvocation ! desiredState MemberReference that desiredState equals BinaryOperation != MemberReference that desiredState Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference hostName Literal null MethodInvocation ! hostName MemberReference that hostName equals BinaryOperation != MemberReference that hostName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation ! serviceName MemberReference that serviceName equals BinaryOperation != MemberReference that serviceName Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation clusterId intValue Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference hostName Literal null MethodInvocation hostName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation componentName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference desiredState Literal null MethodInvocation desiredState hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference desiredStackVersion Literal null MethodInvocation desiredStackVersion hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation serviceName hashCode Literal 0 = ReturnStatement MemberReference result FieldDeclaration Modifier private ReferenceType ServiceComponentDesiredStateEntity VariableDeclarator serviceComponentDesiredStateEntity MethodDeclaration Modifier public Annotation ManyToOne Annotation JoinColumns ElementArrayValue Annotation JoinColumn ElementValuePair name Literal ""cluster_id"" ElementValuePair referencedColumnName Literal ""cluster_id"" ElementValuePair nullable Literal false Annotation JoinColumn ElementValuePair name Literal ""service_name"" ElementValuePair referencedColumnName Literal ""service_name"" ElementValuePair nullable Literal false Annotation JoinColumn ElementValuePair name Literal ""component_name"" ElementValuePair referencedColumnName Literal ""component_name"" ElementValuePair nullable Literal false ReferenceType ServiceComponentDesiredStateEntity getServiceComponentDesiredStateEntity ReturnStatement MemberReference serviceComponentDesiredStateEntity MethodDeclaration Modifier public setServiceComponentDesiredStateEntity FormalParameter ReferenceType ServiceComponentDesiredStateEntity serviceComponentDesiredStateEntity StatementExpression Assignment This MemberReference serviceComponentDesiredStateEntity MemberReference serviceComponentDesiredStateEntity = FieldDeclaration Modifier private ReferenceType HostEntity VariableDeclarator hostEntity MethodDeclaration Modifier public Annotation ManyToOne Annotation javax.persistence.JoinColumn ElementValuePair name Literal ""host_name"" ElementValuePair referencedColumnName Literal ""host_name"" ElementValuePair nullable Literal false ReferenceType HostEntity getHostEntity ReturnStatement MemberReference hostEntity MethodDeclaration Modifier public setHostEntity FormalParameter ReferenceType HostEntity hostEntity StatementExpression Assignment This MemberReference hostEntity MemberReference hostEntity = FieldDeclaration Modifier private ReferenceType Collection TypeArgument ReferenceType HostComponentDesiredConfigMappingEntity VariableDeclarator desiredConfigMappingEntities MethodDeclaration Modifier public Annotation OneToMany ElementValuePair mappedBy Literal ""hostComponentDesiredStateEntity"" ElementValuePair cascade MemberReference CascadeType ALL ReferenceType Collection TypeArgument ReferenceType HostComponentDesiredConfigMappingEntity getHostComponentDesiredConfigMappingEntities ReturnStatement MemberReference desiredConfigMappingEntities MethodDeclaration Modifier public setHostComponentDesiredConfigMappingEntities FormalParameter ReferenceType Collection TypeArgument ReferenceType HostComponentDesiredConfigMappingEntity entities StatementExpression Assignment MemberReference desiredConfigMappingEntities MemberReference entities =",1
10,10,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.entities Import javax.persistence.CascadeType Import javax.persistence.Entity Import javax.persistence.Id Import javax.persistence.JoinColumn Import javax.persistence.JoinTable Import javax.persistence.ManyToMany Import java.util.Set ClassDeclaration Modifier public Annotation javax.persistence.Table ElementValuePair name Literal ""roles"" ElementValuePair schema Literal ""ambari"" ElementValuePair catalog Literal """" Annotation Entity RoleEntity FieldDeclaration Modifier private ReferenceType String VariableDeclarator roleName MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""role_name"" Annotation Id ReferenceType String getRoleName ReturnStatement MemberReference roleName MethodDeclaration Modifier public setRoleName FormalParameter ReferenceType String roleName StatementExpression Assignment This MemberReference roleName MemberReference roleName = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType RoleEntity VariableDeclarator that Cast ReferenceType RoleEntity MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference roleName Literal null MethodInvocation ! roleName MemberReference that roleName equals BinaryOperation != MemberReference that roleName Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode ReturnStatement TernaryExpression BinaryOperation != MemberReference roleName Literal null MethodInvocation roleName hashCode Literal 0 FieldDeclaration Modifier private ReferenceType Set TypeArgument ReferenceType org ReferenceType apache ReferenceType ambari ReferenceType server ReferenceType orm ReferenceType entities ReferenceType UserEntity VariableDeclarator userEntities MethodDeclaration Modifier public Annotation JoinTable ElementValuePair name Literal ""user_roles"" ElementValuePair catalog Literal """" ElementValuePair schema Literal ""ambari"" ElementValuePair joinColumns ElementArrayValue Annotation JoinColumn ElementValuePair name Literal ""role_name"" ElementValuePair referencedColumnName Literal ""role_name"" ElementValuePair inverseJoinColumns ElementArrayValue Annotation JoinColumn ElementValuePair name Literal ""user_id"" ElementValuePair referencedColumnName Literal ""user_id"" Annotation ManyToMany ElementValuePair cascade MemberReference CascadeType ALL ReferenceType Set TypeArgument ReferenceType org ReferenceType apache ReferenceType ambari ReferenceType server ReferenceType orm ReferenceType entities ReferenceType UserEntity getUserEntities ReturnStatement MemberReference userEntities MethodDeclaration Modifier public setUserEntities FormalParameter ReferenceType Set TypeArgument ReferenceType org ReferenceType apache ReferenceType ambari ReferenceType server ReferenceType orm ReferenceType entities ReferenceType UserEntity userEntities StatementExpression Assignment This MemberReference userEntities MemberReference userEntities =",0
101,101,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services Import org.apache.ambari.server.api.resources.ResourceInstance Import javax.ws.rs.core.HttpHeaders Import javax.ws.rs.core.UriInfo ClassDeclaration Modifier public /**
 * A PUT request.
 */ PutRequest ConstructorDeclaration Modifier public /**
   * Constructor.
   *
   * @param headers     http headers
   * @param body        http body
   * @param uriInfo     uri information
   * @param resource    associated resource definition
   */ PutRequest FormalParameter ReferenceType HttpHeaders headers FormalParameter ReferenceType String body FormalParameter ReferenceType UriInfo uriInfo FormalParameter ReferenceType ResourceInstance resource StatementExpression SuperConstructorInvocation MemberReference headers MemberReference body MemberReference uriInfo MemberReference resource MethodDeclaration Modifier public Annotation Override ReferenceType Type getRequestType ReturnStatement MemberReference Type PUT ReferenceType BaseRequest",0
85,85,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller Import java.util.Map ClassDeclaration Modifier public ServiceComponentHostResponse FieldDeclaration Modifier private ReferenceType String VariableDeclarator clusterName FieldDeclaration Modifier private ReferenceType String VariableDeclarator serviceName FieldDeclaration Modifier private ReferenceType String VariableDeclarator componentName FieldDeclaration Modifier private ReferenceType String VariableDeclarator hostname FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator configs FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator desiredConfigs FieldDeclaration Modifier private ReferenceType String VariableDeclarator liveState FieldDeclaration Modifier private ReferenceType String VariableDeclarator stackVersion FieldDeclaration Modifier private ReferenceType String VariableDeclarator desiredState ConstructorDeclaration Modifier public ServiceComponentHostResponse FormalParameter ReferenceType String clusterName FormalParameter ReferenceType String serviceName FormalParameter ReferenceType String componentName FormalParameter ReferenceType String hostname FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String configVersions FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String desiredConfigs FormalParameter ReferenceType String liveState FormalParameter ReferenceType String stackVersion FormalParameter ReferenceType String desiredState StatementExpression SuperConstructorInvocation StatementExpression Assignment This MemberReference clusterName MemberReference clusterName = StatementExpression Assignment This MemberReference serviceName MemberReference serviceName = StatementExpression Assignment This MemberReference componentName MemberReference componentName = StatementExpression Assignment This MemberReference hostname MemberReference hostname = StatementExpression Assignment This MemberReference configs MemberReference configVersions = StatementExpression Assignment This MemberReference desiredConfigs MemberReference desiredConfigs = StatementExpression Assignment This MemberReference liveState MemberReference liveState = StatementExpression Assignment This MemberReference stackVersion MemberReference stackVersion = StatementExpression Assignment This MemberReference desiredState MemberReference desiredState = MethodDeclaration /**
   * @return the serviceName
   */ Modifier public ReferenceType String getServiceName ReturnStatement MemberReference serviceName MethodDeclaration /**
   * @param serviceName the serviceName to set
   */ Modifier public setServiceName FormalParameter ReferenceType String serviceName StatementExpression Assignment This MemberReference serviceName MemberReference serviceName = MethodDeclaration /**
   * @return the componentName
   */ Modifier public ReferenceType String getComponentName ReturnStatement MemberReference componentName MethodDeclaration /**
   * @param componentName the componentName to set
   */ Modifier public setComponentName FormalParameter ReferenceType String componentName StatementExpression Assignment This MemberReference componentName MemberReference componentName = MethodDeclaration /**
   * @return the hostname
   */ Modifier public ReferenceType String getHostname ReturnStatement MemberReference hostname MethodDeclaration /**
   * @param hostname the hostname to set
   */ Modifier public setHostname FormalParameter ReferenceType String hostname StatementExpression Assignment This MemberReference hostname MemberReference hostname = MethodDeclaration /**
   * @return the configVersions
   */ Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getConfigs ReturnStatement MemberReference configs MethodDeclaration /**
   * @param configVersions the configVersions to set
   */ Modifier public setConfigs FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String configVersions StatementExpression Assignment This MemberReference configs MemberReference configVersions = MethodDeclaration /**
   * @return the liveState
   */ Modifier public ReferenceType String getLiveState ReturnStatement MemberReference liveState MethodDeclaration /**
   * @param liveState the liveState to set
   */ Modifier public setLiveState FormalParameter ReferenceType String liveState StatementExpression Assignment This MemberReference liveState MemberReference liveState = MethodDeclaration /**
   * @return the stackVersion
   */ Modifier public ReferenceType String getStackVersion ReturnStatement MemberReference stackVersion MethodDeclaration /**
   * @param stackVersion the stackVersion to set
   */ Modifier public setStackVersion FormalParameter ReferenceType String stackVersion StatementExpression Assignment This MemberReference stackVersion MemberReference stackVersion = MethodDeclaration /**
   * @return the desiredState
   */ Modifier public ReferenceType String getDesiredState ReturnStatement MemberReference desiredState MethodDeclaration /**
   * @param desiredState the desiredState to set
   */ Modifier public setDesiredState FormalParameter ReferenceType String desiredState StatementExpression Assignment This MemberReference desiredState MemberReference desiredState = MethodDeclaration /**
   * @return the clusterName
   */ Modifier public ReferenceType String getClusterName ReturnStatement MemberReference clusterName MethodDeclaration /**
   * @param clusterName the clusterName to set
   */ Modifier public setClusterName FormalParameter ReferenceType String clusterName StatementExpression Assignment This MemberReference clusterName MemberReference clusterName = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType ServiceComponentHostResponse VariableDeclarator that Cast ReferenceType ServiceComponentHostResponse MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference clusterName Literal null MethodInvocation ! clusterName MemberReference that clusterName equals BinaryOperation != MemberReference that clusterName Literal null BlockStatement ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation ! serviceName MemberReference that serviceName equals BinaryOperation != MemberReference that serviceName Literal null BlockStatement ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation ! componentName MemberReference that componentName equals BinaryOperation != MemberReference that componentName Literal null BlockStatement ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference hostname Literal null MethodInvocation ! hostname MemberReference that hostname equals BinaryOperation != MemberReference that hostname Literal null BlockStatement ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference clusterName Literal null MethodInvocation clusterName hashCode Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 71 MemberReference result TernaryExpression BinaryOperation != MemberReference serviceName Literal null MethodInvocation serviceName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 71 MemberReference result TernaryExpression BinaryOperation != MemberReference componentName Literal null MethodInvocation componentName hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 71 MemberReference result TernaryExpression BinaryOperation != MemberReference hostname Literal null MethodInvocation hostname hashCode Literal 0 = ReturnStatement MemberReference result MethodDeclaration Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getDesiredConfigs ReturnStatement MemberReference desiredConfigs",0
353,353,,0
112,112,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services Import org.apache.ambari.server.api.resources  Import org.apache.ambari.server.api.services.parsers.JsonPropertyParser Import org.apache.ambari.server.api.services.parsers.RequestBodyParser Import org.apache.ambari.server.api.services.serializers.JsonSerializer Import org.apache.ambari.server.api.services.serializers.ResultSerializer Import org.apache.ambari.server.controller.internal.TemporalInfoImpl Import org.apache.ambari.server.controller.predicate  Import org.apache.ambari.server.controller.spi.Predicate Import org.apache.ambari.server.controller.spi.TemporalInfo Import javax.ws.rs.core.HttpHeaders Import javax.ws.rs.core.UriInfo Import java.io.UnsupportedEncodingException Import java.net.URLDecoder Import java.util  Import java.util.regex.Matcher Import java.util.regex.Pattern ClassDeclaration Modifier public abstract /**
 * Request implementation.
 */ BaseRequest FieldDeclaration /**
   * URI information
   */ Modifier private ReferenceType UriInfo VariableDeclarator m_uriInfo FieldDeclaration /**
   * Http headers
   */ Modifier private ReferenceType HttpHeaders VariableDeclarator m_headers FieldDeclaration /**
   * Http Body
   */ Modifier private ReferenceType String VariableDeclarator m_body FieldDeclaration /**
   * Predicate operators.
   */ Modifier private ReferenceType Pattern VariableDeclarator m_pattern MethodInvocation Pattern Literal ""!=|>=|<=|=|>|<"" compile FieldDeclaration /**
   * Associated resource definition
   */ Modifier private ReferenceType ResourceInstance VariableDeclarator m_resource ConstructorDeclaration Modifier public /**
   * Constructor.
   *
   * @param headers      http headers
   * @param body         http body
   * @param uriInfo      uri information
   * @param resource     associated resource definition
   */ BaseRequest FormalParameter ReferenceType HttpHeaders headers FormalParameter ReferenceType String body FormalParameter ReferenceType UriInfo uriInfo FormalParameter ReferenceType ResourceInstance resource StatementExpression Assignment MemberReference m_headers MemberReference headers = StatementExpression Assignment MemberReference m_body MemberReference body = StatementExpression Assignment MemberReference m_uriInfo MemberReference uriInfo = StatementExpression Assignment MemberReference m_resource MemberReference resource = MethodDeclaration Modifier public Annotation Override ReferenceType ResourceInstance getResource ReturnStatement MemberReference m_resource MethodDeclaration Modifier public Annotation Override ReferenceType String getURI TryStatement ReturnStatement MethodInvocation URLDecoder MethodInvocation m_uriInfo MethodInvocation toASCIIString getRequestUri Literal ""UTF-8"" decode CatchClause CatchClauseParameter UnsupportedEncodingException e ThrowStatement ClassCreator ReferenceType RuntimeException BinaryOperation + Literal ""Unable to decode URI: "" MemberReference e MemberReference e MethodDeclaration Modifier public Annotation Override BasicType int getAPIVersion ReturnStatement Literal 0 MethodDeclaration Modifier public Annotation Override ReferenceType Predicate getQueryPredicate LocalVariableDeclaration ReferenceType String VariableDeclarator uri MethodInvocation getURI LocalVariableDeclaration BasicType int VariableDeclarator qsBegin MethodInvocation uri Literal ""?"" indexOf IfStatement BinaryOperation == MemberReference qsBegin Literal - 1 ReturnStatement Literal null End LocalVariableDeclaration ReferenceType String VariableDeclarator tokens MethodInvocation uri MethodInvocation Literal ""&"" split BinaryOperation + MemberReference qsBegin Literal 1 substring LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType BasePredicate VariableDeclarator setPredicates ClassCreator ReferenceType HashSet TypeArgument ReferenceType BasePredicate ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator outerToken MemberReference tokens BlockStatement IfStatement MethodInvocation outerToken Literal ""_="" startsWith BlockStatement ContinueStatement End IfStatement BinaryOperation && BinaryOperation != MemberReference outerToken Literal null MethodInvocation ! outerToken Literal ""fields"" startsWith BlockStatement StatementExpression MethodInvocation setPredicates TernaryExpression MethodInvocation outerToken Literal ""|"" contains MethodInvocation MemberReference outerToken handleOrPredicate MethodInvocation MemberReference outerToken createPredicate add End End IfStatement BinaryOperation == MethodInvocation setPredicates size Literal 1 BlockStatement ReturnStatement MethodInvocation setPredicates MethodInvocation next iterator IfStatement BinaryOperation > MethodInvocation setPredicates size Literal 1 BlockStatement ReturnStatement ClassCreator ReferenceType AndPredicate MethodInvocation setPredicates ArrayCreator ReferenceType BasePredicate MethodInvocation setPredicates size toArray BlockStatement ReturnStatement Literal null End End MethodDeclaration Modifier public Annotation Override ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType TemporalInfo getFields LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType TemporalInfo VariableDeclarator mapProperties LocalVariableDeclaration ReferenceType String VariableDeclarator partialResponseFields MethodInvocation m_uriInfo MethodInvocation Literal ""fields"" getFirst getQueryParameters IfStatement BinaryOperation == MemberReference partialResponseFields Literal null BlockStatement StatementExpression Assignment MemberReference mapProperties MethodInvocation Collections emptyMap = BlockStatement LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator setMatches ClassCreator ReferenceType HashSet TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Pattern VariableDeclarator re MethodInvocation Pattern Literal ""[^,\\[]*?\\[[^\\]]*?\\]|[^,]+"" compile LocalVariableDeclaration ReferenceType Matcher VariableDeclarator m MethodInvocation re MemberReference partialResponseFields matcher WhileStatement MethodInvocation m find BlockStatement ForStatement ForControl VariableDeclaration BasicType int VariableDeclarator groupIdx Literal 0 BinaryOperation < MemberReference groupIdx BinaryOperation + MethodInvocation m groupCount Literal 1 MemberReference ++ groupIdx BlockStatement StatementExpression MethodInvocation setMatches MethodInvocation m MemberReference groupIdx group add End End StatementExpression Assignment MemberReference mapProperties ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType TemporalInfo MethodInvocation setMatches size = ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator field MemberReference setMatches BlockStatement LocalVariableDeclaration ReferenceType TemporalInfo VariableDeclarator temporalInfo Literal null IfStatement MethodInvocation field Literal ""["" contains BlockStatement LocalVariableDeclaration ReferenceType String VariableDeclarator temporalData MethodInvocation field MethodInvocation Literal "","" split BinaryOperation + MethodInvocation field Literal '[' indexOf Literal 1 MethodInvocation field Literal ']' indexOf substring StatementExpression Assignment MemberReference field MethodInvocation field Literal 0 MethodInvocation field Literal '[' indexOf substring = LocalVariableDeclaration BasicType long VariableDeclarator start MethodInvocation Long MemberReference ArraySelector Literal 0 MethodInvocation trim temporalData parseLong LocalVariableDeclaration BasicType long VariableDeclarator end Literal - 1 LocalVariableDeclaration BasicType long VariableDeclarator step Literal - 1 IfStatement BinaryOperation >= MemberReference temporalData length Literal 2 BlockStatement StatementExpression Assignment MemberReference end MethodInvocation Long MemberReference ArraySelector Literal 1 MethodInvocation trim temporalData parseLong = IfStatement BinaryOperation == MemberReference temporalData length Literal 3 BlockStatement StatementExpression Assignment MemberReference step MethodInvocation Long MemberReference ArraySelector Literal 2 MethodInvocation trim temporalData parseLong = End End StatementExpression Assignment MemberReference temporalInfo ClassCreator ReferenceType TemporalInfoImpl MemberReference start MemberReference end MemberReference step = End StatementExpression MethodInvocation mapProperties MemberReference field MemberReference temporalInfo put End End ReturnStatement MemberReference mapProperties MethodDeclaration Modifier public Annotation Override ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType List TypeArgument ReferenceType String getHttpHeaders ReturnStatement MethodInvocation m_headers getRequestHeaders MethodDeclaration Modifier public Annotation Override ReferenceType String getHttpBody ReturnStatement MemberReference m_body MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object getHttpBodyProperties ReturnStatement MethodInvocation MethodInvocation MethodInvocation getHttpBody parse getHttpBodyParser MethodDeclaration Modifier public Annotation Override ReferenceType ResultSerializer getResultSerializer ReturnStatement ClassCreator ReferenceType JsonSerializer MethodDeclaration Modifier public Annotation Override ReferenceType ResultPostProcessor getResultPostProcessor ReturnStatement ClassCreator ReferenceType ResultPostProcessorImpl This MethodDeclaration Modifier private ReferenceType BasePredicate createPredicate FormalParameter ReferenceType String token LocalVariableDeclaration ReferenceType Matcher VariableDeclarator m MethodInvocation m_pattern MemberReference token matcher StatementExpression MethodInvocation m find LocalVariableDeclaration ReferenceType String VariableDeclarator propertyId MethodInvocation token Literal 0 MethodInvocation m start substring LocalVariableDeclaration ReferenceType String VariableDeclarator value MethodInvocation token MethodInvocation m end substring LocalVariableDeclaration ReferenceType String VariableDeclarator operator MethodInvocation m group IfStatement MethodInvocation operator Literal ""="" equals BlockStatement ReturnStatement ClassCreator ReferenceType EqualsPredicate TypeArgument ReferenceType String MemberReference propertyId MemberReference value IfStatement MethodInvocation operator Literal ""!="" equals BlockStatement ReturnStatement ClassCreator ReferenceType NotPredicate ClassCreator ReferenceType EqualsPredicate TypeArgument ReferenceType String MemberReference propertyId MemberReference value IfStatement MethodInvocation operator Literal ""<"" equals BlockStatement ReturnStatement ClassCreator ReferenceType LessPredicate TypeArgument ReferenceType String MemberReference propertyId MemberReference value IfStatement MethodInvocation operator Literal "">"" equals BlockStatement ReturnStatement ClassCreator ReferenceType GreaterPredicate TypeArgument ReferenceType String MemberReference propertyId MemberReference value IfStatement MethodInvocation operator Literal ""<="" equals BlockStatement ReturnStatement ClassCreator ReferenceType LessEqualsPredicate TypeArgument ReferenceType String MemberReference propertyId MemberReference value IfStatement MethodInvocation operator Literal "">="" equals BlockStatement ReturnStatement ClassCreator ReferenceType GreaterEqualsPredicate TypeArgument ReferenceType String MemberReference propertyId MemberReference value BlockStatement ThrowStatement ClassCreator ReferenceType RuntimeException BinaryOperation + Literal ""Unknown operator provided in predicate: "" MemberReference operator End End End End End End MethodDeclaration Modifier private ReferenceType BasePredicate handleOrPredicate FormalParameter ReferenceType String predicate LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType BasePredicate VariableDeclarator setPredicates ClassCreator ReferenceType HashSet TypeArgument ReferenceType BasePredicate LocalVariableDeclaration ReferenceType String VariableDeclarator tokens MethodInvocation predicate Literal ""\\|"" split ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator tok MemberReference tokens BlockStatement StatementExpression MethodInvocation setPredicates MethodInvocation MemberReference tok createPredicate add End ReturnStatement ClassCreator ReferenceType OrPredicate MethodInvocation setPredicates ArrayCreator ReferenceType BasePredicate MethodInvocation setPredicates size toArray MethodDeclaration Modifier protected ReferenceType RequestBodyParser getHttpBodyParser ReturnStatement ClassCreator ReferenceType JsonPropertyParser ReferenceType Request",0
127,127,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.dao Import com.google.inject.Inject Import com.google.inject.Provider Import com.google.inject.persist.Transactional Import org.apache.ambari.server.orm.entities.ServiceDesiredStateEntity Import org.apache.ambari.server.orm.entities.ServiceDesiredStateEntityPK Import javax.persistence.EntityManager ClassDeclaration Modifier public ServiceDesiredStateDAO FieldDeclaration Annotation Inject ReferenceType Provider TypeArgument ReferenceType EntityManager VariableDeclarator entityManagerProvider MethodDeclaration Modifier public Annotation Transactional ReferenceType ServiceDesiredStateEntity findByPK FormalParameter ReferenceType ServiceDesiredStateEntityPK primaryKey ReturnStatement MethodInvocation entityManagerProvider MethodInvocation ClassReference ReferenceType ServiceDesiredStateEntity MemberReference primaryKey find get MethodDeclaration Modifier public Annotation Transactional refresh FormalParameter ReferenceType ServiceDesiredStateEntity serviceDesiredStateEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference serviceDesiredStateEntity refresh get MethodDeclaration Modifier public Annotation Transactional create FormalParameter ReferenceType ServiceDesiredStateEntity serviceDesiredStateEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference serviceDesiredStateEntity persist get MethodDeclaration Modifier public Annotation Transactional ReferenceType ServiceDesiredStateEntity merge FormalParameter ReferenceType ServiceDesiredStateEntity serviceDesiredStateEntity ReturnStatement MethodInvocation entityManagerProvider MethodInvocation MemberReference serviceDesiredStateEntity merge get MethodDeclaration Modifier public Annotation Transactional remove FormalParameter ReferenceType ServiceDesiredStateEntity serviceDesiredStateEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MethodInvocation MemberReference serviceDesiredStateEntity merge remove get MethodDeclaration Modifier public Annotation Transactional removeByPK FormalParameter ReferenceType ServiceDesiredStateEntityPK primaryKey StatementExpression MethodInvocation MethodInvocation MemberReference primaryKey findByPK remove",0
161,161,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.action EnumDeclaration Modifier public ActionEventType EnumBody EnumConstantDeclaration /**
   * Initial state for the Action when triggered.
   */ ACTION_INIT EnumConstantDeclaration /**
   * Action still in progress.
   */ ACTION_IN_PROGRESS EnumConstantDeclaration /**
   * Action completed successfully.
   */ ACTION_COMPLETED EnumConstantDeclaration /**
   * Action failed to complete successfully.
   */ ACTION_FAILED",0
175,175,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.agent Import org.codehaus.jackson.annotate.JsonProperty ClassDeclaration Modifier public /**
 * Information about a mounted disk on a given node
 */ DiskInfo FieldDeclaration ReferenceType String VariableDeclarator available FieldDeclaration ReferenceType String VariableDeclarator mountpoint FieldDeclaration ReferenceType String VariableDeclarator device FieldDeclaration ReferenceType String VariableDeclarator used FieldDeclaration ReferenceType String VariableDeclarator percent FieldDeclaration ReferenceType String VariableDeclarator size FieldDeclaration ReferenceType String VariableDeclarator type ConstructorDeclaration Modifier public /**
   * DiskInfo object that tracks information about a disk.
   * @param mountpoint
   * @param available
   * @param used
   * @param percent
   * @param size
   */ DiskInfo FormalParameter ReferenceType String device FormalParameter ReferenceType String mountpoint FormalParameter ReferenceType String available FormalParameter ReferenceType String used FormalParameter ReferenceType String percent FormalParameter ReferenceType String size FormalParameter ReferenceType String type StatementExpression Assignment This MemberReference device MemberReference device = StatementExpression Assignment This MemberReference mountpoint MemberReference mountpoint = StatementExpression Assignment This MemberReference available MemberReference available = StatementExpression Assignment This MemberReference used MemberReference used = StatementExpression Assignment This MemberReference percent MemberReference percent = StatementExpression Assignment This MemberReference size MemberReference size = StatementExpression Assignment This MemberReference type MemberReference type = ConstructorDeclaration Modifier public /**
   * Needed for Serialization
   */ DiskInfo MethodDeclaration Modifier public Annotation JsonProperty Literal ""available"" setAvailable FormalParameter ReferenceType String available StatementExpression Assignment This MemberReference available MemberReference available = MethodDeclaration Modifier public Annotation JsonProperty Literal ""available"" ReferenceType String getAvailable ReturnStatement This MemberReference available MethodDeclaration Modifier public Annotation JsonProperty Literal ""mountpoint"" ReferenceType String getMountPoint ReturnStatement This MemberReference mountpoint MethodDeclaration Modifier public Annotation JsonProperty Literal ""mountpoint"" setMountPoint FormalParameter ReferenceType String mountpoint StatementExpression Assignment This MemberReference mountpoint MemberReference mountpoint = MethodDeclaration Modifier public Annotation JsonProperty Literal ""type"" ReferenceType String getType ReturnStatement This MemberReference type MethodDeclaration Modifier public Annotation JsonProperty Literal ""type"" setType FormalParameter ReferenceType String type StatementExpression Assignment This MemberReference type MemberReference type = MethodDeclaration Modifier public Annotation JsonProperty Literal ""used"" ReferenceType String getUsed ReturnStatement This MemberReference used MethodDeclaration Modifier public Annotation JsonProperty Literal ""used"" setUsed FormalParameter ReferenceType String used StatementExpression Assignment This MemberReference used MemberReference used = MethodDeclaration Modifier public Annotation JsonProperty Literal ""percent"" ReferenceType String getPercent ReturnStatement This MemberReference percent MethodDeclaration Modifier public Annotation JsonProperty Literal ""percent"" setPercent FormalParameter ReferenceType String percent StatementExpression Assignment This MemberReference percent MemberReference percent = MethodDeclaration Modifier public Annotation JsonProperty Literal ""size"" ReferenceType String getSize ReturnStatement This MemberReference size MethodDeclaration Modifier public Annotation JsonProperty Literal ""size"" setSize FormalParameter ReferenceType String size StatementExpression Assignment This MemberReference size MemberReference size = MethodDeclaration Modifier public Annotation Override ReferenceType String toString ReturnStatement BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""available="" This MemberReference available Literal "",mountpoint="" This MemberReference mountpoint Literal "",used="" This MemberReference used Literal "",percent="" This MemberReference percent Literal "",size="" This MemberReference size Literal "",device="" This MemberReference device Literal "",type="" This MemberReference type",1
94,94,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.handlers Import org.apache.ambari.server.api.services.Request ClassDeclaration Modifier public /**
 * Factory for {@link RequestHandler}
 * Returns the appropriate request handler based on the request.
 */ RequestHandlerFactory MethodDeclaration /**
   * Return an instance of the correct request handler based on the request type.
   *
   * @param requestType the request type.  Is one of {@link Request.Type}
   * @return a request handler for the request
   */ Modifier public ReferenceType RequestHandler getRequestHandler FormalParameter ReferenceType Request ReferenceType Type requestType SwitchStatement MemberReference requestType SwitchStatementCase GET ReturnStatement ClassCreator ReferenceType ReadHandler SwitchStatementCase POST ReturnStatement ClassCreator ReferenceType CreateHandler SwitchStatementCase PUT ReturnStatement ClassCreator ReferenceType UpdateHandler SwitchStatementCase DELETE ReturnStatement ClassCreator ReferenceType DeleteHandler SwitchStatementCase QUERY_POST ReturnStatement ClassCreator ReferenceType QueryCreateHandler SwitchStatementCase ThrowStatement ClassCreator ReferenceType UnsupportedOperationException BinaryOperation + Literal ""Unsupported Request Type: "" MemberReference requestType End",1
285,285,,0
173,173,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the ""License""); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.eventdb.model Import javax.xml.bind.annotation.XmlAccessType Import javax.xml.bind.annotation.XmlAccessorType Import javax.xml.bind.annotation.XmlRootElement ClassDeclaration Modifier public Annotation XmlRootElement Annotation XmlAccessorType MemberReference XmlAccessType FIELD WorkflowContext FieldDeclaration Modifier private ReferenceType String VariableDeclarator workflowId FieldDeclaration Modifier private ReferenceType String VariableDeclarator workflowName FieldDeclaration Modifier private ReferenceType String VariableDeclarator workflowEntityName FieldDeclaration Modifier private ReferenceType WorkflowDag VariableDeclarator workflowDag FieldDeclaration Modifier private ReferenceType WorkflowContext VariableDeclarator parentWorkflowContext ConstructorDeclaration Modifier public WorkflowContext MethodDeclaration Modifier public ReferenceType String getWorkflowId ReturnStatement This MemberReference workflowId MethodDeclaration Modifier public ReferenceType String getWorkflowName ReturnStatement This MemberReference workflowName MethodDeclaration Modifier public ReferenceType String getWorkflowEntityName ReturnStatement This MemberReference workflowEntityName MethodDeclaration Modifier public ReferenceType WorkflowDag getWorkflowDag ReturnStatement This MemberReference workflowDag MethodDeclaration Modifier public ReferenceType WorkflowContext getParentWorkflowContext ReturnStatement This MemberReference parentWorkflowContext MethodDeclaration Modifier public setWorkflowId FormalParameter ReferenceType String wfId StatementExpression Assignment This MemberReference workflowId MemberReference wfId = MethodDeclaration Modifier public setWorkflowName FormalParameter ReferenceType String wfName StatementExpression Assignment This MemberReference workflowName MemberReference wfName = MethodDeclaration Modifier public setWorkflowEntityName FormalParameter ReferenceType String wfEntityName StatementExpression Assignment This MemberReference workflowEntityName MemberReference wfEntityName = MethodDeclaration Modifier public setWorkflowDag FormalParameter ReferenceType WorkflowDag wfDag StatementExpression Assignment This MemberReference workflowDag MemberReference wfDag = MethodDeclaration Modifier public setParentWorkflowContext FormalParameter ReferenceType WorkflowContext pWfContext StatementExpression Assignment This MemberReference parentWorkflowContext MemberReference pWfContext =",1
306,306,,0
138,138,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.host Import org.apache.ambari.server.agent.HostInfo Import org.apache.ambari.server.state.AgentVersion Import org.apache.ambari.server.state.HostEvent Import org.apache.ambari.server.state.HostEventType ClassDeclaration Modifier public HostRegistrationRequestEvent FieldDeclaration Modifier final BasicType long VariableDeclarator registrationTime FieldDeclaration Modifier final ReferenceType HostInfo VariableDeclarator hostInfo FieldDeclaration Modifier final ReferenceType AgentVersion VariableDeclarator agentVersion FieldDeclaration Modifier final ReferenceType String VariableDeclarator publicHostName ConstructorDeclaration Modifier public HostRegistrationRequestEvent FormalParameter ReferenceType String hostName FormalParameter ReferenceType AgentVersion agentVersion FormalParameter BasicType long registrationTime FormalParameter ReferenceType HostInfo hostInfo StatementExpression ExplicitConstructorInvocation MemberReference hostName MemberReference hostName MemberReference agentVersion MemberReference registrationTime MemberReference hostInfo ConstructorDeclaration Modifier public HostRegistrationRequestEvent FormalParameter ReferenceType String hostName FormalParameter ReferenceType String publicName FormalParameter ReferenceType AgentVersion agentVersion FormalParameter BasicType long registrationTime FormalParameter ReferenceType HostInfo hostInfo StatementExpression SuperConstructorInvocation MemberReference hostName MemberReference HostEventType HOST_REGISTRATION_REQUEST StatementExpression Assignment This MemberReference registrationTime MemberReference registrationTime = StatementExpression Assignment This MemberReference hostInfo MemberReference hostInfo = StatementExpression Assignment This MemberReference agentVersion MemberReference agentVersion = StatementExpression Assignment This MemberReference publicHostName TernaryExpression BinaryOperation == Literal null MemberReference publicName MemberReference hostName MemberReference publicName = ReferenceType HostEvent",1
87,87,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.internal Import org.apache.ambari.server.controller.utilities.StreamProvider Import java.io.IOException Import java.io.InputStream Import java.net.URL Import java.net.URLConnection ClassDeclaration Modifier public /**
 * URL based implementation of a stream provider.
 */ URLStreamProvider MethodDeclaration Modifier public Annotation Override ReferenceType InputStream readFrom FormalParameter ReferenceType String spec IOException LocalVariableDeclaration ReferenceType URLConnection VariableDeclarator connection ClassCreator MethodInvocation openConnection ReferenceType URL MemberReference spec StatementExpression MethodInvocation connection Literal true setDoOutput ReturnStatement MethodInvocation connection getInputStream ReferenceType StreamProvider",0
318,318,,1
39,39,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.state.host Import org.apache.ambari.server.state.HostEvent Import org.apache.ambari.server.state.HostEventType ClassDeclaration Modifier public HostHealthyHeartbeatEvent FieldDeclaration Modifier private final BasicType long VariableDeclarator heartbeatTime ConstructorDeclaration Modifier public HostHealthyHeartbeatEvent FormalParameter ReferenceType String hostName FormalParameter BasicType long heartbeatTime StatementExpression SuperConstructorInvocation MemberReference hostName MemberReference HostEventType HOST_HEARTBEAT_HEALTHY StatementExpression Assignment This MemberReference heartbeatTime MemberReference heartbeatTime = MethodDeclaration /**
   * @return the heartbeatTime
   */ Modifier public BasicType long getHeartbeatTime ReturnStatement MemberReference heartbeatTime ReferenceType HostEvent",0
174,174,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.resources Import org.apache.ambari.server.controller.spi.Resource Import java.util.Map InterfaceDeclaration Modifier public /**
 * Factory for creating resource instances.
 */ ResourceInstanceFactory MethodDeclaration /**
   * Create a resource instance.
   *
   * @param type    the type of resource to create
   * @param mapIds  the resource id's which identify the resource
   *
   * @return  a new resource instance of the specified type
   */ Modifier public ReferenceType ResourceInstance createResource FormalParameter ReferenceType Resource ReferenceType Type type FormalParameter ReferenceType Map TypeArgument ReferenceType Resource ReferenceType Type TypeArgument ReferenceType String mapIds",1
366,366,,0
190,190,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.entities Import javax.persistence  Import java.util.Collection ClassDeclaration Modifier public Annotation javax.persistence.Table ElementValuePair name Literal ""hosts"" ElementValuePair schema Literal ""ambari"" ElementValuePair catalog Literal """" Annotation Entity HostEntity FieldDeclaration Modifier private ReferenceType String VariableDeclarator hostName MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""host_name"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true Annotation Id ReferenceType String getHostName ReturnStatement MemberReference hostName MethodDeclaration Modifier public setHostName FormalParameter ReferenceType String hostName StatementExpression Assignment This MemberReference hostName MemberReference hostName = FieldDeclaration Modifier private ReferenceType String VariableDeclarator ipv4 MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""ipv4"" ElementValuePair nullable Literal true ElementValuePair insertable Literal true ElementValuePair updatable Literal true Annotation Basic ReferenceType String getIpv4 ReturnStatement MemberReference ipv4 MethodDeclaration Modifier public setIpv4 FormalParameter ReferenceType String ipv4 StatementExpression Assignment This MemberReference ipv4 MemberReference ipv4 = FieldDeclaration Modifier private ReferenceType String VariableDeclarator ipv6 MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""ipv6"" ElementValuePair nullable Literal true ElementValuePair insertable Literal true ElementValuePair updatable Literal true Annotation Basic ReferenceType String getIpv6 ReturnStatement MemberReference ipv6 MethodDeclaration Modifier public setIpv6 FormalParameter ReferenceType String ipv6 StatementExpression Assignment This MemberReference ipv6 MemberReference ipv6 = FieldDeclaration Modifier private ReferenceType String VariableDeclarator publicHostName MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""public_host_name"" ElementValuePair nullable Literal true ElementValuePair insertable Literal true ElementValuePair updatable Literal true Annotation Basic ReferenceType String getPublicHostName ReturnStatement MemberReference publicHostName MethodDeclaration Modifier public setPublicHostName FormalParameter ReferenceType String name StatementExpression Assignment MemberReference publicHostName MemberReference name = FieldDeclaration Modifier private ReferenceType Long VariableDeclarator totalMem Literal 0L MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""total_mem"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair length Literal 10 Annotation Basic ReferenceType Long getTotalMem ReturnStatement MemberReference totalMem MethodDeclaration Modifier public setTotalMem FormalParameter ReferenceType Long totalMem StatementExpression Assignment This MemberReference totalMem MemberReference totalMem = FieldDeclaration Modifier private ReferenceType Integer VariableDeclarator cpuCount Literal 0 MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""cpu_count"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair length Literal 10 Annotation Basic ReferenceType Integer getCpuCount ReturnStatement MemberReference cpuCount MethodDeclaration Modifier public setCpuCount FormalParameter ReferenceType Integer cpuCount StatementExpression Assignment This MemberReference cpuCount MemberReference cpuCount = FieldDeclaration Modifier private ReferenceType String VariableDeclarator cpuInfo Literal """" MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""cpu_info"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true Annotation Basic ReferenceType String getCpuInfo ReturnStatement MemberReference cpuInfo MethodDeclaration Modifier public setCpuInfo FormalParameter ReferenceType String cpuInfo StatementExpression Assignment This MemberReference cpuInfo MemberReference cpuInfo = FieldDeclaration Modifier private ReferenceType String VariableDeclarator osArch Literal """" MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""os_arch"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true Annotation Basic ReferenceType String getOsArch ReturnStatement MemberReference osArch MethodDeclaration Modifier public setOsArch FormalParameter ReferenceType String osArch StatementExpression Assignment This MemberReference osArch MemberReference osArch = FieldDeclaration Modifier private ReferenceType String VariableDeclarator disksInfo Literal """" MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""disks_info"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair length Literal 2000 Annotation Basic ReferenceType String getDisksInfo ReturnStatement MemberReference disksInfo MethodDeclaration Modifier public setDisksInfo FormalParameter ReferenceType String disksInfo StatementExpression Assignment This MemberReference disksInfo MemberReference disksInfo = FieldDeclaration Modifier private ReferenceType String VariableDeclarator osInfo Literal """" MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""os_info"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair length Literal 1000 Annotation Basic ReferenceType String getOsInfo ReturnStatement MemberReference osInfo MethodDeclaration Modifier public setOsInfo FormalParameter ReferenceType String osInfo StatementExpression Assignment This MemberReference osInfo MemberReference osInfo = FieldDeclaration Modifier private ReferenceType String VariableDeclarator osType Literal """" MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""os_type"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true Annotation Basic ReferenceType String getOsType ReturnStatement MemberReference osType MethodDeclaration Modifier public setOsType FormalParameter ReferenceType String osType StatementExpression Assignment This MemberReference osType MemberReference osType = FieldDeclaration Modifier private ReferenceType String VariableDeclarator discoveryStatus Literal """" MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""discovery_status"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair length Literal 2000 Annotation Basic ReferenceType String getDiscoveryStatus ReturnStatement MemberReference discoveryStatus MethodDeclaration Modifier public setDiscoveryStatus FormalParameter ReferenceType String discoveryStatus StatementExpression Assignment This MemberReference discoveryStatus MemberReference discoveryStatus = FieldDeclaration Modifier private ReferenceType Long VariableDeclarator lastRegistrationTime Literal 0L MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""last_registration_time"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair length Literal 10 Annotation Basic ReferenceType Long getLastRegistrationTime ReturnStatement MemberReference lastRegistrationTime MethodDeclaration Modifier public setLastRegistrationTime FormalParameter ReferenceType Long lastRegistrationTime StatementExpression Assignment This MemberReference lastRegistrationTime MemberReference lastRegistrationTime = FieldDeclaration Modifier private ReferenceType String VariableDeclarator rackInfo Literal ""/default-rack"" MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""rack_info"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true Annotation Basic ReferenceType String getRackInfo ReturnStatement MemberReference rackInfo MethodDeclaration Modifier public setRackInfo FormalParameter ReferenceType String rackInfo StatementExpression Assignment This MemberReference rackInfo MemberReference rackInfo = FieldDeclaration Modifier private ReferenceType String VariableDeclarator hostAttributes Literal """" MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""host_attributes"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true ElementValuePair length Literal 20000 Annotation Basic ReferenceType String getHostAttributes ReturnStatement MemberReference hostAttributes MethodDeclaration Modifier public setHostAttributes FormalParameter ReferenceType String hostAttributes StatementExpression Assignment This MemberReference hostAttributes MemberReference hostAttributes = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType HostEntity VariableDeclarator that Cast ReferenceType HostEntity MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference cpuCount Literal null MethodInvocation ! cpuCount MemberReference that cpuCount equals BinaryOperation != MemberReference that cpuCount Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference lastRegistrationTime Literal null MethodInvocation ! lastRegistrationTime MemberReference that lastRegistrationTime equals BinaryOperation != MemberReference that lastRegistrationTime Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference totalMem Literal null MethodInvocation ! totalMem MemberReference that totalMem equals BinaryOperation != MemberReference that totalMem Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference cpuInfo Literal null MethodInvocation ! cpuInfo MemberReference that cpuInfo equals BinaryOperation != MemberReference that cpuInfo Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference discoveryStatus Literal null MethodInvocation ! discoveryStatus MemberReference that discoveryStatus equals BinaryOperation != MemberReference that discoveryStatus Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference disksInfo Literal null MethodInvocation ! disksInfo MemberReference that disksInfo equals BinaryOperation != MemberReference that disksInfo Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference hostAttributes Literal null MethodInvocation ! hostAttributes MemberReference that hostAttributes equals BinaryOperation != MemberReference that hostAttributes Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference hostName Literal null MethodInvocation ! hostName MemberReference that hostName equals BinaryOperation != MemberReference that hostName Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference ipv4 Literal null MethodInvocation ! ipv4 MemberReference that ipv4 equals BinaryOperation != MemberReference that ipv4 Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference osArch Literal null MethodInvocation ! osArch MemberReference that osArch equals BinaryOperation != MemberReference that osArch Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference osInfo Literal null MethodInvocation ! osInfo MemberReference that osInfo equals BinaryOperation != MemberReference that osInfo Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference osType Literal null MethodInvocation ! osType MemberReference that osType equals BinaryOperation != MemberReference that osType Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference rackInfo Literal null MethodInvocation ! rackInfo MemberReference that rackInfo equals BinaryOperation != MemberReference that rackInfo Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference hostName Literal null MethodInvocation hostName hashCode Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference ipv4 Literal null MethodInvocation ipv4 hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference totalMem Literal null MethodInvocation totalMem intValue Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result MemberReference cpuCount = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference cpuInfo Literal null MethodInvocation cpuInfo hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference osArch Literal null MethodInvocation osArch hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference disksInfo Literal null MethodInvocation disksInfo hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference osInfo Literal null MethodInvocation osInfo hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference osType Literal null MethodInvocation osType hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference discoveryStatus Literal null MethodInvocation discoveryStatus hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference lastRegistrationTime Literal null MethodInvocation lastRegistrationTime intValue Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference rackInfo Literal null MethodInvocation rackInfo hashCode Literal 0 = StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference hostAttributes Literal null MethodInvocation hostAttributes hashCode Literal 0 = ReturnStatement MemberReference result FieldDeclaration Modifier private ReferenceType Collection TypeArgument ReferenceType HostComponentDesiredStateEntity VariableDeclarator hostComponentDesiredStateEntities MethodDeclaration Modifier public Annotation OneToMany ElementValuePair mappedBy Literal ""hostEntity"" ReferenceType Collection TypeArgument ReferenceType HostComponentDesiredStateEntity getHostComponentDesiredStateEntities ReturnStatement MemberReference hostComponentDesiredStateEntities MethodDeclaration Modifier public setHostComponentDesiredStateEntities FormalParameter ReferenceType Collection TypeArgument ReferenceType HostComponentDesiredStateEntity hostComponentDesiredStateEntities StatementExpression Assignment This MemberReference hostComponentDesiredStateEntities MemberReference hostComponentDesiredStateEntities = FieldDeclaration Modifier private ReferenceType Collection TypeArgument ReferenceType HostComponentStateEntity VariableDeclarator hostComponentStateEntities MethodDeclaration Modifier public Annotation OneToMany ElementValuePair mappedBy Literal ""hostEntity"" ReferenceType Collection TypeArgument ReferenceType HostComponentStateEntity getHostComponentStateEntities ReturnStatement MemberReference hostComponentStateEntities MethodDeclaration Modifier public setHostComponentStateEntities FormalParameter ReferenceType Collection TypeArgument ReferenceType HostComponentStateEntity hostComponentStateEntities StatementExpression Assignment This MemberReference hostComponentStateEntities MemberReference hostComponentStateEntities = FieldDeclaration Modifier private ReferenceType Collection TypeArgument ReferenceType ClusterEntity VariableDeclarator clusterEntities MethodDeclaration Modifier public Annotation ManyToMany Annotation JoinTable ElementValuePair name Literal ""ClusterHostMapping"" ElementValuePair catalog Literal """" ElementValuePair schema Literal ""ambari"" ElementValuePair joinColumns ElementArrayValue Annotation JoinColumn ElementValuePair name Literal ""host_name"" ElementValuePair referencedColumnName Literal ""host_name"" ElementValuePair inverseJoinColumns ElementArrayValue Annotation JoinColumn ElementValuePair name Literal ""cluster_id"" ElementValuePair referencedColumnName Literal ""cluster_id"" ReferenceType Collection TypeArgument ReferenceType ClusterEntity getClusterEntities ReturnStatement MemberReference clusterEntities MethodDeclaration Modifier public setClusterEntities FormalParameter ReferenceType Collection TypeArgument ReferenceType ClusterEntity clusterEntities StatementExpression Assignment This MemberReference clusterEntities MemberReference clusterEntities = FieldDeclaration Modifier private ReferenceType HostStateEntity VariableDeclarator hostStateEntity MethodDeclaration Modifier public Annotation OneToOne ElementValuePair mappedBy Literal ""hostEntity"" ReferenceType HostStateEntity getHostStateEntity ReturnStatement MemberReference hostStateEntity MethodDeclaration Modifier public setHostStateEntity FormalParameter ReferenceType HostStateEntity hostStateEntity StatementExpression Assignment This MemberReference hostStateEntity MemberReference hostStateEntity = FieldDeclaration Modifier private ReferenceType Collection TypeArgument ReferenceType HostRoleCommandEntity VariableDeclarator hostRoleCommandEntities MethodDeclaration Modifier public Annotation OneToMany ElementValuePair mappedBy Literal ""host"" ReferenceType Collection TypeArgument ReferenceType HostRoleCommandEntity getHostRoleCommandEntities ReturnStatement MemberReference hostRoleCommandEntities MethodDeclaration Modifier public setHostRoleCommandEntities FormalParameter ReferenceType Collection TypeArgument ReferenceType HostRoleCommandEntity hostRoleCommandEntities StatementExpression Assignment This MemberReference hostRoleCommandEntities MemberReference hostRoleCommandEntities =",1
237,237,"CompilationUnit PackageDeclaration org.apache.ambari.server.orm.entities Import javax.persistence.Column Import javax.persistence.Id Import java.io.Serializable ClassDeclaration Modifier public Annotation SuppressWarnings Literal ""serial"" StageEntityPK FieldDeclaration Modifier private ReferenceType Long VariableDeclarator requestId MethodDeclaration Modifier public Annotation Id Annotation Column ElementValuePair name Literal ""request_id"" ReferenceType Long getRequestId ReturnStatement MemberReference requestId MethodDeclaration Modifier public setRequestId FormalParameter ReferenceType Long requestId StatementExpression Assignment This MemberReference requestId MemberReference requestId = FieldDeclaration Modifier private ReferenceType Long VariableDeclarator stageId MethodDeclaration Modifier public Annotation Id Annotation Column ElementValuePair name Literal ""stage_id"" ReferenceType Long getStageId ReturnStatement MemberReference stageId MethodDeclaration Modifier public setStageId FormalParameter ReferenceType Long stageId StatementExpression Assignment This MemberReference stageId MemberReference stageId = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType StageEntityPK VariableDeclarator that Cast ReferenceType StageEntityPK MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference requestId Literal null MethodInvocation ! requestId MemberReference that requestId equals BinaryOperation != MemberReference that requestId Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference stageId Literal null MethodInvocation ! stageId MemberReference that stageId equals BinaryOperation != MemberReference that stageId Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference requestId Literal null MethodInvocation requestId hashCode Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference stageId Literal null MethodInvocation stageId hashCode Literal 0 = ReturnStatement MemberReference result ReferenceType Serializable",1
153,153,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.log4j.hadoop.mapreduce.jobhistory Import java.io.IOException Import java.sql.Connection Import java.sql.PreparedStatement Import java.sql.ResultSet Import java.sql.SQLException Import java.util.HashMap Import java.util.Map Import java.util.regex.Matcher Import java.util.regex.Pattern Import org.apache.ambari.eventdb.model.WorkflowContext Import org.apache.ambari.eventdb.model.WorkflowDag Import org.apache.ambari.eventdb.model.WorkflowDag.WorkflowDagEntry Import org.apache.ambari.log4j.common.LogStoreUpdateProvider Import org.apache.commons.logging.Log Import org.apache.commons.logging.LogFactory Import org.apache.hadoop.mapreduce.Counter Import org.apache.hadoop.mapreduce.CounterGroup Import org.apache.hadoop.mapreduce.Counters Import org.apache.hadoop.mapreduce.TaskType Import org.apache.hadoop.tools.rumen.HistoryEvent Import org.apache.hadoop.tools.rumen.JhCounter Import org.apache.hadoop.tools.rumen.JhCounterGroup Import org.apache.hadoop.tools.rumen.JhCounters Import org.apache.hadoop.tools.rumen.JobFinishedEvent Import org.apache.hadoop.tools.rumen.JobInfoChangeEvent Import org.apache.hadoop.tools.rumen.JobInitedEvent Import org.apache.hadoop.tools.rumen.JobStatusChangedEvent Import org.apache.hadoop.tools.rumen.JobSubmittedEvent Import org.apache.hadoop.tools.rumen.JobUnsuccessfulCompletionEvent Import org.apache.hadoop.tools.rumen.MapAttemptFinishedEvent Import org.apache.hadoop.tools.rumen.ReduceAttemptFinishedEvent Import org.apache.hadoop.tools.rumen.TaskAttemptFinishedEvent Import org.apache.hadoop.tools.rumen.TaskAttemptStartedEvent Import org.apache.hadoop.tools.rumen.TaskAttemptUnsuccessfulCompletionEvent Import org.apache.hadoop.tools.rumen.TaskFailedEvent Import org.apache.hadoop.tools.rumen.TaskFinishedEvent Import org.apache.hadoop.tools.rumen.TaskStartedEvent Import org.apache.hadoop.util.StringUtils Import org.apache.log4j.spi.LoggingEvent Import org.codehaus.jackson.map.ObjectMapper ClassDeclaration Modifier public MapReduceJobHistoryUpdater FieldDeclaration Modifier private final static ReferenceType Log VariableDeclarator LOG MethodInvocation LogFactory ClassReference ReferenceType MapReduceJobHistoryUpdater getLog FieldDeclaration Modifier private ReferenceType Connection VariableDeclarator connection FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator WORKFLOW_TABLE Literal ""workflow"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator JOB_TABLE Literal ""job"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator TASK_TABLE Literal ""task"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator TASKATTEMPT_TABLE Literal ""taskAttempt"" FieldDeclaration Modifier private ReferenceType PreparedStatement VariableDeclarator workflowPS Literal null FieldDeclaration Modifier private ReferenceType PreparedStatement VariableDeclarator workflowSelectPS Literal null FieldDeclaration Modifier private ReferenceType PreparedStatement VariableDeclarator workflowUpdateTimePS Literal null FieldDeclaration Modifier private ReferenceType PreparedStatement VariableDeclarator workflowUpdateNumCompletedPS Literal null FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType Class TypeArgument ReferenceType HistoryEvent extends TypeArgument ReferenceType PreparedStatement VariableDeclarator entitySqlMap ClassCreator ReferenceType HashMap TypeArgument ReferenceType Class TypeArgument ReferenceType HistoryEvent extends TypeArgument ReferenceType PreparedStatement MethodDeclaration Modifier public Annotation Override init FormalParameter ReferenceType Connection connection IOException StatementExpression Assignment This MemberReference connection MemberReference connection = TryStatement StatementExpression MethodInvocation initializePreparedStatements CatchClause CatchClauseParameter SQLException sqle ThrowStatement ClassCreator ReferenceType IOException MemberReference sqle MethodDeclaration Modifier private initializePreparedStatements SQLException StatementExpression MethodInvocation initializeJobPreparedStatements StatementExpression MethodInvocation initializeTaskPreparedStatements StatementExpression MethodInvocation initializeTaskAttemptPreparedStatements FieldDeclaration Modifier private ReferenceType PreparedStatement VariableDeclarator jobEndUpdate MethodDeclaration Modifier private initializeJobPreparedStatements SQLException LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator jobSubmittedPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""INSERT INTO "" MemberReference JOB_TABLE Literal "" ("" Literal ""jobId, "" Literal ""jobName, "" Literal ""userName, "" Literal ""confPath, "" Literal ""queue, "" Literal ""submitTime, "" Literal ""workflowId, "" Literal ""workflowEntityName "" Literal "") "" Literal ""VALUES"" Literal "" (?, ?, ?, ?, ?, ?, ?, ?)"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType JobSubmittedEvent MemberReference jobSubmittedPrepStmnt put StatementExpression Assignment MemberReference workflowSelectPS MethodInvocation connection BinaryOperation + BinaryOperation + Literal ""SELECT workflowId FROM "" MemberReference WORKFLOW_TABLE Literal "" where workflowId = ?"" prepareStatement = StatementExpression Assignment MemberReference workflowPS MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""INSERT INTO "" MemberReference WORKFLOW_TABLE Literal "" ("" Literal ""workflowId, "" Literal ""workflowName, "" Literal ""workflowContext, "" Literal ""userName, "" Literal ""startTime, "" Literal ""lastUpdateTime, "" Literal ""duration, "" Literal ""numJobsTotal, "" Literal ""numJobsCompleted"" Literal "") "" Literal ""VALUES"" Literal "" (?, ?, ?, ?, ?, ?, 0, ?, 0)"" prepareStatement = StatementExpression Assignment MemberReference workflowUpdateTimePS MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference WORKFLOW_TABLE Literal "" SET "" Literal ""lastUpdateTime = ?, "" Literal ""duration = ? - (SELECT startTime FROM "" MemberReference WORKFLOW_TABLE Literal "" WHERE workflowId = ?) "" Literal ""WHERE workflowId = ?"" prepareStatement = StatementExpression Assignment MemberReference workflowUpdateNumCompletedPS MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference WORKFLOW_TABLE Literal "" SET "" Literal ""lastUpdateTime = ?, "" Literal ""duration = ? - (SELECT startTime FROM "" MemberReference WORKFLOW_TABLE Literal "" WHERE workflowId = selectid), "" Literal ""numJobsCompleted = rows, "" Literal ""inputBytes = input, "" Literal ""outputBytes = output "" Literal ""FROM (SELECT count(*) as rows, sum(inputBytes) as input, "" Literal ""sum(outputBytes) as output, workflowId as selectid FROM "" MemberReference JOB_TABLE Literal "" WHERE workflowId = (SELECT workflowId FROM "" MemberReference JOB_TABLE Literal "" WHERE jobId = ?) AND status = 'SUCCESS' "" Literal ""GROUP BY workflowId) as jobsummary "" Literal ""WHERE workflowId = selectid"" prepareStatement = LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator jobFinishedPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference JOB_TABLE Literal "" SET "" Literal ""finishTime = ?, "" Literal ""finishedMaps = ?, "" Literal ""finishedReduces= ?, "" Literal ""failedMaps = ?, "" Literal ""failedReduces = ?, "" Literal ""inputBytes = ?, "" Literal ""outputBytes = ? "" Literal ""WHERE "" Literal ""jobId = ?"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType JobFinishedEvent MemberReference jobFinishedPrepStmnt put LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator jobInitedPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference JOB_TABLE Literal "" SET "" Literal ""launchTime = ?, "" Literal ""maps = ?, "" Literal ""reduces = ?, "" Literal ""status = ? "" Literal ""WHERE "" Literal ""jobId = ?"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType JobInitedEvent MemberReference jobInitedPrepStmnt put LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator jobStatusChangedPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference JOB_TABLE Literal "" SET "" Literal ""status = ? "" Literal ""WHERE "" Literal ""jobId = ?"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType JobStatusChangedEvent MemberReference jobStatusChangedPrepStmnt put LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator jobInfoChangedPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference JOB_TABLE Literal "" SET "" Literal ""submitTime = ?, "" Literal ""launchTime = ? "" Literal ""WHERE "" Literal ""jobId = ?"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType JobInfoChangeEvent MemberReference jobInfoChangedPrepStmnt put LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator jobUnsuccessfulPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference JOB_TABLE Literal "" SET "" Literal ""finishTime = ?, "" Literal ""finishedMaps = ?, "" Literal ""finishedReduces = ?, "" Literal ""status = ? "" Literal ""WHERE "" Literal ""jobId = ?"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType JobUnsuccessfulCompletionEvent MemberReference jobUnsuccessfulPrepStmnt put StatementExpression Assignment MemberReference jobEndUpdate MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference JOB_TABLE Literal "" SET "" Literal "" mapsRuntime = ("" Literal ""SELECT "" Literal ""SUM("" MemberReference TASKATTEMPT_TABLE Literal "".finishTime"" Literal "" - "" MemberReference TASKATTEMPT_TABLE Literal "".startTime"" Literal "")"" Literal "" FROM "" MemberReference TASKATTEMPT_TABLE Literal "" WHERE "" MemberReference TASKATTEMPT_TABLE Literal "".jobId = "" MemberReference JOB_TABLE Literal "".jobId "" Literal "" AND "" MemberReference TASKATTEMPT_TABLE Literal "".taskType = ?)"" Literal "", "" Literal "" reducesRuntime = ("" Literal ""SELECT SUM("" MemberReference TASKATTEMPT_TABLE Literal "".finishTime"" Literal "" - "" MemberReference TASKATTEMPT_TABLE Literal "".startTime"" Literal "")"" Literal "" FROM "" MemberReference TASKATTEMPT_TABLE Literal "" WHERE "" MemberReference TASKATTEMPT_TABLE Literal "".jobId = "" MemberReference JOB_TABLE Literal "".jobId "" Literal "" AND "" MemberReference TASKATTEMPT_TABLE Literal "".taskType = ?) "" Literal "" WHERE "" Literal ""jobId = ?"" prepareStatement = MethodDeclaration Modifier private initializeTaskPreparedStatements SQLException LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator taskStartedPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""INSERT INTO "" MemberReference TASK_TABLE Literal "" ("" Literal ""jobId, "" Literal ""taskType, "" Literal ""splits, "" Literal ""startTime, "" Literal ""taskId"" Literal "") "" Literal ""VALUES (?, ?, ?, ?, ?)"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType TaskStartedEvent MemberReference taskStartedPrepStmnt put LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator taskFinishedPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference TASK_TABLE Literal "" SET "" Literal ""jobId = ?, "" Literal ""taskType = ?, "" Literal ""status = ?, "" Literal ""finishTime = ? "" Literal "" WHERE "" Literal ""taskId = ?"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType TaskFinishedEvent MemberReference taskFinishedPrepStmnt put LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator taskFailedPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference TASK_TABLE Literal "" SET "" Literal ""jobId = ?, "" Literal ""taskType = ?, "" Literal ""status = ?, "" Literal ""finishTime = ?, "" Literal ""error = ?, "" Literal ""failedAttempt = ? "" Literal ""WHERE "" Literal ""taskId = ?"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType TaskFailedEvent MemberReference taskFailedPrepStmnt put MethodDeclaration Modifier private initializeTaskAttemptPreparedStatements SQLException LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator taskAttemptStartedPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""INSERT INTO "" MemberReference TASKATTEMPT_TABLE Literal "" ("" Literal ""jobId, "" Literal ""taskId, "" Literal ""taskType, "" Literal ""startTime, "" Literal ""taskTracker, "" Literal ""locality, "" Literal ""avataar, "" Literal ""taskAttemptId"" Literal "") "" Literal ""VALUES (?, ?, ?, ?, ?, ?, ?, ?)"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType TaskAttemptStartedEvent MemberReference taskAttemptStartedPrepStmnt put LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator taskAttemptFinishedPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference TASKATTEMPT_TABLE Literal "" SET "" Literal ""jobId = ?, "" Literal ""taskId = ?, "" Literal ""taskType = ?, "" Literal ""finishTime = ?, "" Literal ""status = ?, "" Literal ""taskTracker = ? "" Literal "" WHERE "" Literal ""taskAttemptId = ?"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType TaskAttemptFinishedEvent MemberReference taskAttemptFinishedPrepStmnt put LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator taskAttemptUnsuccessfulPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference TASKATTEMPT_TABLE Literal "" SET "" Literal ""jobId = ?, "" Literal ""taskId = ?, "" Literal ""taskType = ?, "" Literal ""finishTime = ?, "" Literal ""status = ?, "" Literal ""taskTracker = ?, "" Literal ""error = ? "" Literal "" WHERE "" Literal ""taskAttemptId = ?"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType TaskAttemptUnsuccessfulCompletionEvent MemberReference taskAttemptUnsuccessfulPrepStmnt put LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator mapAttemptFinishedPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference TASKATTEMPT_TABLE Literal "" SET "" Literal ""jobId = ?, "" Literal ""taskId = ?, "" Literal ""taskType = ?, "" Literal ""mapFinishTime = ?, "" Literal ""finishTime = ?, "" Literal ""inputBytes = ?, "" Literal ""outputBytes = ?, "" Literal ""status = ?, "" Literal ""taskTracker = ? "" Literal "" WHERE "" Literal ""taskAttemptId = ?"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType MapAttemptFinishedEvent MemberReference mapAttemptFinishedPrepStmnt put LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator reduceAttemptFinishedPrepStmnt MethodInvocation connection BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""UPDATE "" MemberReference TASKATTEMPT_TABLE Literal "" SET "" Literal ""jobId = ?, "" Literal ""taskId = ?, "" Literal ""taskType = ?, "" Literal ""shuffleFinishTime = ?, "" Literal ""sortFinishTime = ?, "" Literal ""finishTime = ?, "" Literal ""inputBytes = ?, "" Literal ""outputBytes = ?, "" Literal ""status = ?, "" Literal ""taskTracker = ? "" Literal "" WHERE "" Literal ""taskAttemptId = ?"" prepareStatement StatementExpression MethodInvocation entitySqlMap ClassReference ReferenceType ReduceAttemptFinishedEvent MemberReference reduceAttemptFinishedPrepStmnt put MethodDeclaration Modifier private doUpdates FormalParameter ReferenceType LoggingEvent originalEvent FormalParameter ReferenceType Object parsedEvent SQLException LocalVariableDeclaration ReferenceType Class TypeArgument ? VariableDeclarator eventClass MethodInvocation parsedEvent getClass LocalVariableDeclaration ReferenceType PreparedStatement VariableDeclarator entityPS MethodInvocation entitySqlMap MemberReference eventClass get IfStatement BinaryOperation == MemberReference entityPS Literal null BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + Literal ""No prepared statement for "" MemberReference eventClass debug ReturnStatement End IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType JobSubmittedEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference workflowSelectPS MemberReference workflowPS MemberReference workflowUpdateTimePS MemberReference originalEvent Cast ReferenceType JobSubmittedEvent MemberReference parsedEvent processJobSubmittedEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType JobFinishedEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference workflowUpdateNumCompletedPS MemberReference originalEvent Cast ReferenceType JobFinishedEvent MemberReference parsedEvent processJobFinishedEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType JobInitedEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference originalEvent Cast ReferenceType JobInitedEvent MemberReference parsedEvent processJobInitedEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType JobStatusChangedEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference originalEvent Cast ReferenceType JobStatusChangedEvent MemberReference parsedEvent processJobStatusChangedEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType JobInfoChangeEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference originalEvent Cast ReferenceType JobInfoChangeEvent MemberReference parsedEvent processJobInfoChangeEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType JobUnsuccessfulCompletionEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference originalEvent Cast ReferenceType JobUnsuccessfulCompletionEvent MemberReference parsedEvent processJobUnsuccessfulEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType TaskStartedEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference originalEvent Cast ReferenceType TaskStartedEvent MemberReference parsedEvent processTaskStartedEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType TaskFinishedEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference originalEvent Cast ReferenceType TaskFinishedEvent MemberReference parsedEvent processTaskFinishedEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType TaskFailedEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference originalEvent Cast ReferenceType TaskFailedEvent MemberReference parsedEvent processTaskFailedEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType TaskAttemptStartedEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference originalEvent Cast ReferenceType TaskAttemptStartedEvent MemberReference parsedEvent processTaskAttemptStartedEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType TaskAttemptFinishedEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference originalEvent Cast ReferenceType TaskAttemptFinishedEvent MemberReference parsedEvent processTaskAttemptFinishedEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType TaskAttemptUnsuccessfulCompletionEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference originalEvent Cast ReferenceType TaskAttemptUnsuccessfulCompletionEvent MemberReference parsedEvent processTaskAttemptUnsuccessfulEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType MapAttemptFinishedEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference originalEvent Cast ReferenceType MapAttemptFinishedEvent MemberReference parsedEvent processMapAttemptFinishedEvent IfStatement BinaryOperation == MemberReference eventClass ClassReference ReferenceType ReduceAttemptFinishedEvent BlockStatement StatementExpression MethodInvocation MemberReference entityPS MemberReference originalEvent Cast ReferenceType ReduceAttemptFinishedEvent MemberReference parsedEvent processReduceAttemptFinishedEvent End End End End End End End End End End End End End End MethodDeclaration Modifier private updateJobStatsAtFinish FormalParameter ReferenceType String jobId TryStatement StatementExpression MethodInvocation jobEndUpdate Literal 1 Literal ""MAP"" setString StatementExpression MethodInvocation jobEndUpdate Literal 2 Literal ""REDUCE"" setString StatementExpression MethodInvocation jobEndUpdate Literal 3 MemberReference jobId setString StatementExpression MethodInvocation jobEndUpdate executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Failed to update mapsRuntime/reducesRuntime for "" MemberReference jobId MemberReference sqle info MethodDeclaration Modifier private static ReferenceType WorkflowContext generateWorkflowContext FormalParameter ReferenceType JobSubmittedEvent historyEvent LocalVariableDeclaration ReferenceType WorkflowDag VariableDeclarator wfDag ClassCreator ReferenceType WorkflowDag LocalVariableDeclaration ReferenceType WorkflowDagEntry VariableDeclarator wfDagEntry ClassCreator ReferenceType WorkflowDagEntry StatementExpression MethodInvocation wfDagEntry Literal ""X"" setSource StatementExpression MethodInvocation wfDag MemberReference wfDagEntry addEntry LocalVariableDeclaration ReferenceType WorkflowContext VariableDeclarator wc ClassCreator ReferenceType WorkflowContext StatementExpression MethodInvocation wc MethodInvocation historyEvent MethodInvocation toString MethodInvocation Literal ""job_"" Literal ""mr_"" replace getJobId setWorkflowId StatementExpression MethodInvocation wc MethodInvocation historyEvent getJobName setWorkflowName StatementExpression MethodInvocation wc Literal ""X"" setWorkflowEntityName StatementExpression MethodInvocation wc MemberReference wfDag setWorkflowDag ReturnStatement MemberReference wc FieldDeclaration Modifier private final static ReferenceType Pattern VariableDeclarator adjPattern MethodInvocation Pattern BinaryOperation + BinaryOperation + Literal ""\""([^\""\\\\]*+(?:\\\\.[^\""\\\\]*+)*+)\"""" Literal ""="" Literal ""\""([^\""\\\\]*+(?:\\\\.[^\""\\\\]*+)*+)\"" "" compile MethodDeclaration Modifier public static ReferenceType WorkflowContext buildWorkflowContext FormalParameter ReferenceType JobSubmittedEvent historyEvent LocalVariableDeclaration ReferenceType String VariableDeclarator workflowId MethodInvocation historyEvent MethodInvocation Literal ""\\"" Literal """" replace getWorkflowId IfStatement MethodInvocation workflowId isEmpty ReturnStatement MethodInvocation MemberReference historyEvent generateWorkflowContext End LocalVariableDeclaration ReferenceType String VariableDeclarator workflowName MethodInvocation historyEvent MethodInvocation Literal ""\\"" Literal """" replace getWorkflowName LocalVariableDeclaration ReferenceType String VariableDeclarator workflowNodeName MethodInvocation historyEvent MethodInvocation Literal ""\\"" Literal """" replace getWorkflowNodeName LocalVariableDeclaration ReferenceType String VariableDeclarator workflowAdjacencies MethodInvocation StringUtils MethodInvocation historyEvent getWorkflowAdjacencies MemberReference StringUtils ESCAPE_CHAR ArrayCreator BasicType char ArrayInitializer Literal '""' Literal '=' Literal '.' unEscapeString LocalVariableDeclaration ReferenceType WorkflowContext VariableDeclarator context ClassCreator ReferenceType WorkflowContext StatementExpression MethodInvocation context MemberReference workflowId setWorkflowId StatementExpression MethodInvocation context MemberReference workflowName setWorkflowName StatementExpression MethodInvocation context MemberReference workflowNodeName setWorkflowEntityName LocalVariableDeclaration ReferenceType WorkflowDag VariableDeclarator dag ClassCreator ReferenceType WorkflowDag LocalVariableDeclaration ReferenceType Matcher VariableDeclarator matcher MethodInvocation adjPattern MemberReference workflowAdjacencies matcher WhileStatement MethodInvocation matcher find BlockStatement LocalVariableDeclaration ReferenceType WorkflowDagEntry VariableDeclarator dagEntry ClassCreator ReferenceType WorkflowDagEntry StatementExpression MethodInvocation dagEntry MethodInvocation matcher MethodInvocation Literal ""\\"" Literal """" replace Literal 1 group setSource LocalVariableDeclaration ReferenceType String VariableDeclarator values MethodInvocation StringUtils MethodInvocation matcher MethodInvocation Literal ""\\"" Literal """" replace Literal 2 group getStrings IfStatement BinaryOperation != MemberReference values Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator target MemberReference values BlockStatement StatementExpression MethodInvocation dagEntry MemberReference target addTarget End End StatementExpression MethodInvocation dag MemberReference dagEntry addEntry End IfStatement MethodInvocation dag MethodInvocation isEmpty getEntries BlockStatement LocalVariableDeclaration ReferenceType WorkflowDagEntry VariableDeclarator wfDagEntry ClassCreator ReferenceType WorkflowDagEntry StatementExpression MethodInvocation wfDagEntry MemberReference workflowNodeName setSource StatementExpression MethodInvocation dag MemberReference wfDagEntry addEntry End StatementExpression MethodInvocation context MemberReference dag setWorkflowDag ReturnStatement MemberReference context MethodDeclaration Modifier private processJobSubmittedEvent FormalParameter ReferenceType PreparedStatement jobPS FormalParameter ReferenceType PreparedStatement workflowSelectPS FormalParameter ReferenceType PreparedStatement workflowPS FormalParameter ReferenceType PreparedStatement workflowUpdateTimePS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType JobSubmittedEvent historyEvent TryStatement LocalVariableDeclaration ReferenceType String VariableDeclarator jobId MethodInvocation historyEvent MethodInvocation toString getJobId StatementExpression MethodInvocation jobPS Literal 1 MemberReference jobId setString StatementExpression MethodInvocation jobPS Literal 2 MethodInvocation historyEvent getJobName setString StatementExpression MethodInvocation jobPS Literal 3 MethodInvocation historyEvent getUserName setString StatementExpression MethodInvocation jobPS Literal 4 MethodInvocation historyEvent getJobConfPath setString StatementExpression MethodInvocation jobPS Literal 5 MethodInvocation historyEvent getJobQueueName setString StatementExpression MethodInvocation jobPS Literal 6 MethodInvocation historyEvent getSubmitTime setLong LocalVariableDeclaration ReferenceType WorkflowContext VariableDeclarator workflowContext MethodInvocation MemberReference historyEvent buildWorkflowContext LocalVariableDeclaration BasicType boolean VariableDeclarator insertWorkflow Literal false TryStatement StatementExpression MethodInvocation workflowSelectPS Literal 1 MethodInvocation workflowContext getWorkflowId setString StatementExpression MethodInvocation workflowSelectPS execute LocalVariableDeclaration ReferenceType ResultSet VariableDeclarator rs MethodInvocation workflowSelectPS getResultSet StatementExpression Assignment MemberReference insertWorkflow MethodInvocation ! rs next = CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG Literal ""workflow select failed with: "" MemberReference sqle warn StatementExpression Assignment MemberReference insertWorkflow Literal false = IfStatement MemberReference insertWorkflow BlockStatement LocalVariableDeclaration ReferenceType WorkflowContext VariableDeclarator sanitizedWC ClassCreator ReferenceType WorkflowContext StatementExpression MethodInvocation sanitizedWC MethodInvocation workflowContext getWorkflowDag setWorkflowDag StatementExpression MethodInvocation sanitizedWC MethodInvocation workflowContext getParentWorkflowContext setParentWorkflowContext LocalVariableDeclaration ReferenceType String VariableDeclarator sanitizedWCString Literal null TryStatement LocalVariableDeclaration ReferenceType ObjectMapper VariableDeclarator om ClassCreator ReferenceType ObjectMapper StatementExpression Assignment MemberReference sanitizedWCString MethodInvocation om MemberReference sanitizedWC writeValueAsString = CatchClause CatchClauseParameter IOException e StatementExpression MethodInvocation e printStackTrace StatementExpression Assignment MemberReference sanitizedWCString Literal """" = StatementExpression MethodInvocation workflowPS Literal 1 MethodInvocation workflowContext getWorkflowId setString StatementExpression MethodInvocation workflowPS Literal 2 MethodInvocation workflowContext getWorkflowName setString StatementExpression MethodInvocation workflowPS Literal 3 MemberReference sanitizedWCString setString StatementExpression MethodInvocation workflowPS Literal 4 MethodInvocation historyEvent getUserName setString StatementExpression MethodInvocation workflowPS Literal 5 MethodInvocation historyEvent getSubmitTime setLong StatementExpression MethodInvocation workflowPS Literal 6 MethodInvocation historyEvent getSubmitTime setLong StatementExpression MethodInvocation workflowPS Literal 7 MethodInvocation workflowContext MethodInvocation size getWorkflowDag setLong StatementExpression MethodInvocation workflowPS executeUpdate StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Successfully inserted workflowId = "" MethodInvocation workflowContext getWorkflowId debug BlockStatement StatementExpression MethodInvocation workflowUpdateTimePS Literal 1 MethodInvocation historyEvent getSubmitTime setLong StatementExpression MethodInvocation workflowUpdateTimePS Literal 2 MethodInvocation historyEvent getSubmitTime setLong StatementExpression MethodInvocation workflowUpdateTimePS Literal 3 MethodInvocation workflowContext getWorkflowId setString StatementExpression MethodInvocation workflowUpdateTimePS Literal 4 MethodInvocation workflowContext getWorkflowId setString StatementExpression MethodInvocation workflowUpdateTimePS executeUpdate StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Successfully updated workflowId = "" MethodInvocation workflowContext getWorkflowId debug End StatementExpression MethodInvocation jobPS Literal 7 MethodInvocation workflowContext getWorkflowId setString StatementExpression MethodInvocation jobPS Literal 8 MethodInvocation workflowContext getWorkflowEntityName setString StatementExpression MethodInvocation jobPS executeUpdate StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Successfully inserted job = "" MemberReference jobId Literal "" and workflowId = "" MethodInvocation workflowContext getWorkflowId debug CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for job "" MethodInvocation historyEvent getJobId Literal "" into "" MemberReference JOB_TABLE MemberReference sqle info CatchClause CatchClauseParameter Exception e StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for job "" MethodInvocation historyEvent getJobId Literal "" into "" MemberReference JOB_TABLE MemberReference e info MethodDeclaration Modifier private processJobFinishedEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType PreparedStatement workflowUpdateNumCompletedPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType JobFinishedEvent historyEvent LocalVariableDeclaration ReferenceType Counters VariableDeclarator counters MethodInvocation historyEvent getMapCounters LocalVariableDeclaration BasicType long VariableDeclarator inputBytes Literal 0 IfStatement BinaryOperation != MemberReference counters Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType CounterGroup VariableDeclarator group MemberReference counters BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Counter VariableDeclarator counter MemberReference group BlockStatement IfStatement MethodInvocation counter MethodInvocation Literal ""HDFS_BYTES_READ"" equals getName StatementExpression Assignment MemberReference inputBytes MethodInvocation counter getValue += End End End End IfStatement BinaryOperation != MethodInvocation historyEvent getFinishedReduces Literal 0 StatementExpression Assignment MemberReference counters MethodInvocation historyEvent getReduceCounters = End LocalVariableDeclaration BasicType long VariableDeclarator outputBytes Literal 0 IfStatement BinaryOperation != MemberReference counters Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType CounterGroup VariableDeclarator group MemberReference counters BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Counter VariableDeclarator counter MemberReference group BlockStatement IfStatement MethodInvocation counter MethodInvocation Literal ""HDFS_BYTES_WRITTEN"" equals getName StatementExpression Assignment MemberReference outputBytes MethodInvocation counter getValue += End End End End TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent getFinishTime setLong StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent getFinishedMaps setInt StatementExpression MethodInvocation entityPS Literal 3 MethodInvocation historyEvent getFinishedReduces setInt StatementExpression MethodInvocation entityPS Literal 4 MethodInvocation historyEvent getFailedMaps setInt StatementExpression MethodInvocation entityPS Literal 5 MethodInvocation historyEvent getFailedReduces setInt StatementExpression MethodInvocation entityPS Literal 6 MemberReference inputBytes setLong StatementExpression MethodInvocation entityPS Literal 7 MemberReference outputBytes setLong StatementExpression MethodInvocation entityPS Literal 8 MethodInvocation historyEvent MethodInvocation toString getJobid setString StatementExpression MethodInvocation entityPS executeUpdate StatementExpression MethodInvocation workflowUpdateNumCompletedPS Literal 1 MethodInvocation historyEvent getFinishTime setLong StatementExpression MethodInvocation workflowUpdateNumCompletedPS Literal 2 MethodInvocation historyEvent getFinishTime setLong StatementExpression MethodInvocation workflowUpdateNumCompletedPS Literal 3 MethodInvocation historyEvent MethodInvocation toString getJobid setString StatementExpression MethodInvocation workflowUpdateNumCompletedPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for job "" MethodInvocation historyEvent getJobid Literal "" into "" MemberReference JOB_TABLE MemberReference sqle info StatementExpression MethodInvocation MethodInvocation historyEvent MethodInvocation toString getJobid updateJobStatsAtFinish MethodDeclaration Modifier private processJobInitedEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType JobInitedEvent historyEvent TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent getLaunchTime setLong StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent getTotalMaps setInt StatementExpression MethodInvocation entityPS Literal 3 MethodInvocation historyEvent getTotalReduces setInt StatementExpression MethodInvocation entityPS Literal 4 MethodInvocation historyEvent getStatus setString StatementExpression MethodInvocation entityPS Literal 5 MethodInvocation historyEvent MethodInvocation toString getJobId setString StatementExpression MethodInvocation entityPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for job "" MethodInvocation historyEvent getJobId Literal "" into "" MemberReference JOB_TABLE MemberReference sqle info MethodDeclaration Modifier private processJobStatusChangedEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType JobStatusChangedEvent historyEvent TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent getStatus setString StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent MethodInvocation toString getJobId setString StatementExpression MethodInvocation entityPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for job "" MethodInvocation historyEvent getJobId Literal "" into "" MemberReference JOB_TABLE MemberReference sqle info MethodDeclaration Modifier private processJobInfoChangeEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType JobInfoChangeEvent historyEvent TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent getSubmitTime setLong StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent getLaunchTime setLong StatementExpression MethodInvocation entityPS Literal 3 MethodInvocation historyEvent MethodInvocation toString getJobId setString StatementExpression MethodInvocation entityPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for job "" MethodInvocation historyEvent getJobId Literal "" into "" MemberReference JOB_TABLE MemberReference sqle info MethodDeclaration Modifier private processJobUnsuccessfulEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType JobUnsuccessfulCompletionEvent historyEvent TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent getFinishTime setLong StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent getFinishedMaps setLong StatementExpression MethodInvocation entityPS Literal 3 MethodInvocation historyEvent getFinishedReduces setLong StatementExpression MethodInvocation entityPS Literal 4 MethodInvocation historyEvent getStatus setString StatementExpression MethodInvocation entityPS Literal 5 MethodInvocation historyEvent MethodInvocation toString getJobId setString StatementExpression MethodInvocation entityPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for job "" MethodInvocation historyEvent getJobId Literal "" into "" MemberReference JOB_TABLE MemberReference sqle info StatementExpression MethodInvocation MethodInvocation historyEvent MethodInvocation toString getJobId updateJobStatsAtFinish MethodDeclaration Modifier private processTaskStartedEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType TaskStartedEvent historyEvent TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent MethodInvocation getJobID MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent MethodInvocation toString getTaskType setString StatementExpression MethodInvocation entityPS Literal 3 MethodInvocation historyEvent getSplitLocations setString StatementExpression MethodInvocation entityPS Literal 4 MethodInvocation historyEvent getStartTime setLong StatementExpression MethodInvocation entityPS Literal 5 MethodInvocation historyEvent MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for task "" MethodInvocation historyEvent getTaskId Literal "" into "" MemberReference TASK_TABLE MemberReference sqle info MethodDeclaration Modifier private processTaskFinishedEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType TaskFinishedEvent historyEvent TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent MethodInvocation getJobID MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent MethodInvocation toString getTaskType setString StatementExpression MethodInvocation entityPS Literal 3 MethodInvocation historyEvent getTaskStatus setString StatementExpression MethodInvocation entityPS Literal 4 MethodInvocation historyEvent getFinishTime setLong StatementExpression MethodInvocation entityPS Literal 5 MethodInvocation historyEvent MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for task "" MethodInvocation historyEvent getTaskId Literal "" into "" MemberReference TASK_TABLE MemberReference sqle info MethodDeclaration Modifier private processTaskFailedEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType TaskFailedEvent historyEvent TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent MethodInvocation getJobID MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent MethodInvocation toString getTaskType setString StatementExpression MethodInvocation entityPS Literal 3 MethodInvocation historyEvent getTaskStatus setString StatementExpression MethodInvocation entityPS Literal 4 MethodInvocation historyEvent getFinishTime setLong StatementExpression MethodInvocation entityPS Literal 5 MethodInvocation historyEvent getError setString IfStatement BinaryOperation != MethodInvocation historyEvent getFailedAttemptID Literal null BlockStatement StatementExpression MethodInvocation entityPS Literal 6 MethodInvocation historyEvent MethodInvocation toString getFailedAttemptID setString BlockStatement StatementExpression MethodInvocation entityPS Literal 6 Literal ""task_na"" setString End StatementExpression MethodInvocation entityPS Literal 7 MethodInvocation historyEvent MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for task "" MethodInvocation historyEvent getTaskId Literal "" into "" MemberReference TASK_TABLE MemberReference sqle info MethodDeclaration Modifier private processTaskAttemptStartedEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType TaskAttemptStartedEvent historyEvent TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent MethodInvocation getJobID MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 3 MethodInvocation historyEvent MethodInvocation toString getTaskType setString StatementExpression MethodInvocation entityPS Literal 4 MethodInvocation historyEvent getStartTime setLong StatementExpression MethodInvocation entityPS Literal 5 MethodInvocation historyEvent getTrackerName setString StatementExpression MethodInvocation entityPS Literal 6 MethodInvocation historyEvent MethodInvocation toString getLocality setString StatementExpression MethodInvocation entityPS Literal 7 MethodInvocation historyEvent MethodInvocation toString getAvataar setString StatementExpression MethodInvocation entityPS Literal 8 MethodInvocation historyEvent MethodInvocation toString getTaskAttemptId setString StatementExpression MethodInvocation entityPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for taskAttempt "" MethodInvocation historyEvent getTaskAttemptId Literal "" into "" MemberReference TASKATTEMPT_TABLE MemberReference sqle info MethodDeclaration Modifier private processTaskAttemptFinishedEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType TaskAttemptFinishedEvent historyEvent IfStatement BinaryOperation || BinaryOperation == MethodInvocation historyEvent getTaskType MemberReference TaskType MAP BinaryOperation == MethodInvocation historyEvent getTaskType MemberReference TaskType REDUCE BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Ignoring TaskAttemptFinishedEvent for "" MethodInvocation historyEvent getTaskType debug ReturnStatement End TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent MethodInvocation getJobID MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 3 MethodInvocation historyEvent MethodInvocation toString getTaskType setString StatementExpression MethodInvocation entityPS Literal 4 MethodInvocation historyEvent getFinishTime setLong StatementExpression MethodInvocation entityPS Literal 5 MethodInvocation historyEvent getTaskStatus setString StatementExpression MethodInvocation entityPS Literal 6 MethodInvocation historyEvent getHostname setString StatementExpression MethodInvocation entityPS Literal 7 MethodInvocation historyEvent MethodInvocation toString getAttemptId setString StatementExpression MethodInvocation entityPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for taskAttempt "" MethodInvocation historyEvent getAttemptId Literal "" into "" MemberReference TASKATTEMPT_TABLE MemberReference sqle info MethodDeclaration Modifier private processTaskAttemptUnsuccessfulEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType TaskAttemptUnsuccessfulCompletionEvent historyEvent TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent MethodInvocation getJobID MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 3 MethodInvocation historyEvent MethodInvocation toString getTaskType setString StatementExpression MethodInvocation entityPS Literal 4 MethodInvocation historyEvent getFinishTime setLong StatementExpression MethodInvocation entityPS Literal 5 MethodInvocation historyEvent getTaskStatus setString StatementExpression MethodInvocation entityPS Literal 6 MethodInvocation historyEvent getHostname setString StatementExpression MethodInvocation entityPS Literal 7 MethodInvocation historyEvent getError setString StatementExpression MethodInvocation entityPS Literal 8 MethodInvocation historyEvent MethodInvocation toString getTaskAttemptId setString StatementExpression MethodInvocation entityPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for taskAttempt "" MethodInvocation historyEvent getTaskAttemptId Literal "" into "" MemberReference TASKATTEMPT_TABLE MemberReference sqle info MethodDeclaration Modifier private processMapAttemptFinishedEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType MapAttemptFinishedEvent historyEvent IfStatement BinaryOperation != MethodInvocation historyEvent getTaskType MemberReference TaskType MAP BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Ignoring MapAttemptFinishedEvent for "" MethodInvocation historyEvent getTaskType debug ReturnStatement End LocalVariableDeclaration BasicType long VariableDeclarator ioBytes MethodInvocation MethodInvocation historyEvent getCounters getInputOutputBytes TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent MethodInvocation getJobID MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 3 MethodInvocation historyEvent MethodInvocation toString getTaskType setString StatementExpression MethodInvocation entityPS Literal 4 MethodInvocation historyEvent getMapFinishTime setLong StatementExpression MethodInvocation entityPS Literal 5 MethodInvocation historyEvent getFinishTime setLong StatementExpression MethodInvocation entityPS Literal 6 MemberReference ArraySelector Literal 0 ioBytes setLong StatementExpression MethodInvocation entityPS Literal 7 MemberReference ArraySelector Literal 1 ioBytes setLong StatementExpression MethodInvocation entityPS Literal 8 MethodInvocation historyEvent getTaskStatus setString StatementExpression MethodInvocation entityPS Literal 9 MethodInvocation historyEvent getHostname setString StatementExpression MethodInvocation entityPS Literal 10 MethodInvocation historyEvent MethodInvocation toString getAttemptId setString StatementExpression MethodInvocation entityPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for taskAttempt "" MethodInvocation historyEvent getAttemptId Literal "" into "" MemberReference TASKATTEMPT_TABLE MemberReference sqle info MethodDeclaration Modifier private processReduceAttemptFinishedEvent FormalParameter ReferenceType PreparedStatement entityPS FormalParameter ReferenceType LoggingEvent logEvent FormalParameter ReferenceType ReduceAttemptFinishedEvent historyEvent IfStatement BinaryOperation != MethodInvocation historyEvent getTaskType MemberReference TaskType REDUCE BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Ignoring ReduceAttemptFinishedEvent for "" MethodInvocation historyEvent getTaskType debug ReturnStatement End LocalVariableDeclaration BasicType long VariableDeclarator ioBytes MethodInvocation MethodInvocation historyEvent getCounters getInputOutputBytes TryStatement StatementExpression MethodInvocation entityPS Literal 1 MethodInvocation historyEvent MethodInvocation getJobID MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 2 MethodInvocation historyEvent MethodInvocation toString getTaskId setString StatementExpression MethodInvocation entityPS Literal 3 MethodInvocation historyEvent MethodInvocation toString getTaskType setString StatementExpression MethodInvocation entityPS Literal 4 MethodInvocation historyEvent getShuffleFinishTime setLong StatementExpression MethodInvocation entityPS Literal 5 MethodInvocation historyEvent getSortFinishTime setLong StatementExpression MethodInvocation entityPS Literal 6 MethodInvocation historyEvent getFinishTime setLong StatementExpression MethodInvocation entityPS Literal 7 MemberReference ArraySelector Literal 0 ioBytes setLong StatementExpression MethodInvocation entityPS Literal 8 MemberReference ArraySelector Literal 1 ioBytes setLong StatementExpression MethodInvocation entityPS Literal 9 MethodInvocation historyEvent getTaskStatus setString StatementExpression MethodInvocation entityPS Literal 10 MethodInvocation historyEvent getHostname setString StatementExpression MethodInvocation entityPS Literal 11 MethodInvocation historyEvent MethodInvocation toString getAttemptId setString StatementExpression MethodInvocation entityPS executeUpdate CatchClause CatchClauseParameter SQLException sqle StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Failed to store "" MethodInvocation historyEvent getEventType Literal "" for taskAttempt "" MethodInvocation historyEvent getAttemptId Literal "" into "" MemberReference TASKATTEMPT_TABLE MemberReference sqle info MethodDeclaration Modifier public static BasicType long getInputOutputBytes FormalParameter ReferenceType JhCounters counters LocalVariableDeclaration BasicType long VariableDeclarator inputBytes Literal 0 LocalVariableDeclaration BasicType long VariableDeclarator outputBytes Literal 0 IfStatement BinaryOperation != MemberReference counters Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType JhCounterGroup VariableDeclarator counterGroup MemberReference counters groups BlockStatement IfStatement MethodInvocation counterGroup.name Literal ""FileSystemCounters"" equals BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType JhCounter VariableDeclarator counter MemberReference counterGroup counts BlockStatement IfStatement BinaryOperation || MethodInvocation counter.name Literal ""HDFS_BYTES_READ"" equals MethodInvocation counter.name Literal ""FILE_BYTES_READ"" equals StatementExpression Assignment MemberReference inputBytes MemberReference counter value += IfStatement BinaryOperation || MethodInvocation counter.name Literal ""HDFS_BYTES_WRITTEN"" equals MethodInvocation counter.name Literal ""FILE_BYTES_WRITTEN"" equals StatementExpression Assignment MemberReference outputBytes MemberReference counter value += End End End End End End ReturnStatement ArrayCreator BasicType long ArrayInitializer MemberReference inputBytes MemberReference outputBytes MethodDeclaration Modifier public Annotation Override update FormalParameter ReferenceType LoggingEvent originalEvent FormalParameter ReferenceType Object parsedEvent IOException TryStatement StatementExpression MethodInvocation MemberReference originalEvent MemberReference parsedEvent doUpdates CatchClause CatchClauseParameter SQLException sqle ThrowStatement ClassCreator ReferenceType IOException MemberReference sqle ReferenceType LogStoreUpdateProvider",1
312,312,,0
134,134,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the ""License""); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.eventdb.model Import java.sql.ResultSet Import java.sql.SQLException Import java.util.List Import javax.xml.bind.annotation.XmlAccessType Import javax.xml.bind.annotation.XmlAccessorType Import javax.xml.bind.annotation.XmlRootElement Import javax.xml.bind.annotation.XmlTransient Import org.apache.ambari.eventdb.model.DataTable.Summary Import org.apache.commons.lang.StringUtils ClassDeclaration Modifier public Annotation XmlRootElement Annotation XmlAccessorType MemberReference XmlAccessType FIELD Workflows FieldDeclaration ReferenceType List TypeArgument ReferenceType WorkflowDBEntry VariableDeclarator workflows FieldDeclaration ReferenceType Summary VariableDeclarator summary ClassDeclaration Modifier public static WorkflowDBEntry EnumDeclaration Modifier public static WorkflowFields EnumBody EnumConstantDeclaration WORKFLOWID EnumConstantDeclaration WORKFLOWNAME EnumConstantDeclaration USERNAME EnumConstantDeclaration STARTTIME EnumConstantDeclaration LASTUPDATETIME EnumConstantDeclaration DURATION EnumConstantDeclaration NUMJOBSTOTAL EnumConstantDeclaration NUMJOBSCOMPLETED EnumConstantDeclaration INPUTBYTES EnumConstantDeclaration OUTPUTBYTES EnumConstantDeclaration PARENTWORKFLOWID EnumConstantDeclaration WORKFLOWCONTEXT MethodDeclaration Modifier public ReferenceType String getString FormalParameter ReferenceType ResultSet rs SQLException ReturnStatement MethodInvocation rs This MethodInvocation toString getString MethodDeclaration Modifier public BasicType int getInt FormalParameter ReferenceType ResultSet rs SQLException ReturnStatement MethodInvocation rs This MethodInvocation toString getInt MethodDeclaration Modifier public BasicType long getLong FormalParameter ReferenceType ResultSet rs SQLException ReturnStatement MethodInvocation rs This MethodInvocation toString getLong MethodDeclaration Modifier public static ReferenceType String join LocalVariableDeclaration ReferenceType String VariableDeclarator tmp ArrayCreator ReferenceType String MethodInvocation WorkflowFields MemberReference length values ForStatement ForControl VariableDeclaration BasicType int VariableDeclarator i Literal 0 BinaryOperation < MemberReference i MemberReference tmp length MemberReference ++ i StatementExpression Assignment MemberReference ArraySelector MemberReference i tmp MethodInvocation WorkflowFields ArraySelector MemberReference i MethodInvocation toString values = End ReturnStatement MethodInvocation StringUtils MemberReference tmp Literal "","" join FieldDeclaration Modifier public final static Annotation XmlTransient ReferenceType String VariableDeclarator WORKFLOW_FIELDS MethodInvocation WorkflowFields join FieldDeclaration Modifier private ReferenceType String VariableDeclarator workflowId FieldDeclaration Modifier private ReferenceType String VariableDeclarator workflowName FieldDeclaration Modifier private ReferenceType String VariableDeclarator userName FieldDeclaration Modifier private BasicType long VariableDeclarator startTime FieldDeclaration Modifier private BasicType long VariableDeclarator elapsedTime FieldDeclaration Modifier private BasicType long VariableDeclarator inputBytes FieldDeclaration Modifier private BasicType long VariableDeclarator outputBytes FieldDeclaration Modifier private BasicType int VariableDeclarator numJobsTotal FieldDeclaration Modifier private BasicType int VariableDeclarator numJobsCompleted FieldDeclaration Modifier private ReferenceType String VariableDeclarator parentWorkflowId FieldDeclaration Modifier private ReferenceType WorkflowContext VariableDeclarator workflowContext ConstructorDeclaration Modifier public WorkflowDBEntry MethodDeclaration Modifier public ReferenceType String getWorkflowId ReturnStatement MemberReference workflowId MethodDeclaration Modifier public ReferenceType String getWorkflowName ReturnStatement MemberReference workflowName MethodDeclaration Modifier public ReferenceType String getUserName ReturnStatement MemberReference userName MethodDeclaration Modifier public BasicType long getStartTime ReturnStatement MemberReference startTime MethodDeclaration Modifier public BasicType long getElapsedTime ReturnStatement MemberReference elapsedTime MethodDeclaration Modifier public BasicType int getNumJobsTotal ReturnStatement MemberReference numJobsTotal MethodDeclaration Modifier public BasicType int getNumJobsCompleted ReturnStatement MemberReference numJobsCompleted MethodDeclaration Modifier public ReferenceType String getParentWorkflowId ReturnStatement MemberReference parentWorkflowId MethodDeclaration Modifier public ReferenceType WorkflowContext getWorkflowContext ReturnStatement MemberReference workflowContext MethodDeclaration Modifier public setWorkflowId FormalParameter ReferenceType String workflowId StatementExpression Assignment This MemberReference workflowId MemberReference workflowId = MethodDeclaration Modifier public setWorkflowName FormalParameter ReferenceType String workflowName StatementExpression Assignment This MemberReference workflowName MemberReference workflowName = MethodDeclaration Modifier public setUserName FormalParameter ReferenceType String userName StatementExpression Assignment This MemberReference userName MemberReference userName = MethodDeclaration Modifier public setStartTime FormalParameter BasicType long startTime StatementExpression Assignment This MemberReference startTime MemberReference startTime = MethodDeclaration Modifier public setElapsedTime FormalParameter BasicType long elapsedTime StatementExpression Assignment This MemberReference elapsedTime MemberReference elapsedTime = MethodDeclaration Modifier public setNumJobsTotal FormalParameter BasicType int numJobsTotal StatementExpression Assignment This MemberReference numJobsTotal MemberReference numJobsTotal = MethodDeclaration Modifier public setNumJobsCompleted FormalParameter BasicType int numJobsCompleted StatementExpression Assignment This MemberReference numJobsCompleted MemberReference numJobsCompleted = MethodDeclaration Modifier public setParentWorkflowId FormalParameter ReferenceType String parentWorkflowId StatementExpression Assignment This MemberReference parentWorkflowId MemberReference parentWorkflowId = MethodDeclaration Modifier public setWorkflowContext FormalParameter ReferenceType WorkflowContext workflowContext StatementExpression Assignment This MemberReference workflowContext MemberReference workflowContext = MethodDeclaration Modifier public BasicType long getInputBytes ReturnStatement MemberReference inputBytes MethodDeclaration Modifier public setInputBytes FormalParameter BasicType long inputBytes StatementExpression Assignment This MemberReference inputBytes MemberReference inputBytes = MethodDeclaration Modifier public BasicType long getOutputBytes ReturnStatement MemberReference outputBytes MethodDeclaration Modifier public setOutputBytes FormalParameter BasicType long outputBytes StatementExpression Assignment This MemberReference outputBytes MemberReference outputBytes = ConstructorDeclaration Modifier public Workflows MethodDeclaration Modifier public ReferenceType List TypeArgument ReferenceType WorkflowDBEntry getWorkflows ReturnStatement MemberReference workflows MethodDeclaration Modifier public setWorkflows FormalParameter ReferenceType List TypeArgument ReferenceType WorkflowDBEntry workflows StatementExpression Assignment This MemberReference workflows MemberReference workflows = MethodDeclaration Modifier public ReferenceType Summary getSummary ReturnStatement MemberReference summary MethodDeclaration Modifier public setSummary FormalParameter ReferenceType Summary summary StatementExpression Assignment This MemberReference summary MemberReference summary =",1
241,241,,0
305,305,,1
96,96,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.entities Import javax.persistence.Basic Import javax.persistence.Entity Import javax.persistence.Id Import javax.persistence.OneToOne ClassDeclaration Modifier public Annotation javax.persistence.Table ElementValuePair name Literal ""clusterstate"" ElementValuePair schema Literal ""ambari"" ElementValuePair catalog Literal """" Annotation Entity ClusterStateEntity FieldDeclaration Modifier private ReferenceType Long VariableDeclarator clusterId MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""cluster_id"" ElementValuePair nullable Literal false ElementValuePair insertable Literal false ElementValuePair updatable Literal false ElementValuePair length Literal 10 Annotation Id ReferenceType Long getClusterId ReturnStatement MemberReference clusterId MethodDeclaration Modifier public setClusterId FormalParameter ReferenceType Long clusterId StatementExpression Assignment This MemberReference clusterId MemberReference clusterId = FieldDeclaration Modifier private ReferenceType String VariableDeclarator currentClusterState Literal """" MethodDeclaration Modifier public Annotation javax.persistence.Column ElementValuePair name Literal ""current_cluster_state"" ElementValuePair nullable Literal false ElementValuePair insertable Literal true ElementValuePair updatable Literal true Annotation Basic ReferenceType String getCurrentClusterState ReturnStatement MemberReference currentClusterState MethodDeclaration Modifier public setCurrentClusterState FormalParameter ReferenceType String currentClusterState StatementExpression Assignment This MemberReference currentClusterState MemberReference currentClusterState = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType ClusterStateEntity VariableDeclarator that Cast ReferenceType ClusterStateEntity MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation ! clusterId MemberReference that clusterId equals BinaryOperation != MemberReference that clusterId Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference currentClusterState Literal null MethodInvocation ! currentClusterState MemberReference that currentClusterState equals BinaryOperation != MemberReference that currentClusterState Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference clusterId Literal null MethodInvocation clusterId intValue Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference currentClusterState Literal null MethodInvocation currentClusterState hashCode Literal 0 = ReturnStatement MemberReference result FieldDeclaration Modifier private ReferenceType ClusterEntity VariableDeclarator clusterEntity MethodDeclaration Modifier public Annotation OneToOne Annotation javax.persistence.JoinColumn ElementValuePair name Literal ""cluster_id"" ElementValuePair referencedColumnName Literal ""cluster_id"" ElementValuePair nullable Literal false ReferenceType ClusterEntity getClusterEntity ReturnStatement MemberReference clusterEntity MethodDeclaration Modifier public setClusterEntity FormalParameter ReferenceType ClusterEntity clusterEntity StatementExpression Assignment This MemberReference clusterEntity MemberReference clusterEntity =",0
45,45,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller.jdbc Import org.apache.ambari.server.controller.predicate.AlwaysPredicate Import org.apache.ambari.server.controller.predicate.ArrayPredicate Import org.apache.ambari.server.controller.predicate.BasePredicate Import org.apache.ambari.server.controller.predicate.ComparisonPredicate Import org.apache.ambari.server.controller.predicate.PredicateVisitor Import org.apache.ambari.server.controller.predicate.UnaryPredicate Import org.apache.ambari.server.controller.utilities.PropertyHelper ClassDeclaration Modifier public /**
 * Predicate visitor used to generate a SQL where clause from a predicate graph.
 */ SQLPredicateVisitor FieldDeclaration /**
   * The string builder.
   */ Modifier private final ReferenceType StringBuilder VariableDeclarator stringBuilder ClassCreator ReferenceType StringBuilder MethodDeclaration Modifier public Annotation Override acceptComparisonPredicate FormalParameter ReferenceType ComparisonPredicate predicate LocalVariableDeclaration ReferenceType String VariableDeclarator propertyId MethodInvocation predicate getPropertyId LocalVariableDeclaration ReferenceType String VariableDeclarator propertyCategory MethodInvocation PropertyHelper MemberReference propertyId getPropertyCategory IfStatement BinaryOperation != MemberReference propertyCategory Literal null BlockStatement StatementExpression MethodInvocation stringBuilder MethodInvocation Literal ""."" append MemberReference propertyCategory append End StatementExpression MethodInvocation stringBuilder MethodInvocation PropertyHelper MemberReference propertyId getPropertyName append StatementExpression MethodInvocation stringBuilder MethodInvocation MethodInvocation predicate getOperator append MethodInvocation Literal "" \"""" append Literal "" "" append StatementExpression MethodInvocation stringBuilder MethodInvocation predicate getValue append StatementExpression MethodInvocation stringBuilder Literal ""\"""" append MethodDeclaration Modifier public Annotation Override acceptArrayPredicate FormalParameter ReferenceType ArrayPredicate predicate LocalVariableDeclaration ReferenceType BasePredicate VariableDeclarator predicates MethodInvocation predicate getPredicates IfStatement BinaryOperation > MemberReference predicates length Literal 0 BlockStatement StatementExpression MethodInvocation stringBuilder Literal ""("" append ForStatement ForControl VariableDeclaration BasicType int VariableDeclarator i Literal 0 BinaryOperation < MemberReference i MemberReference predicates length MemberReference ++ i BlockStatement IfStatement BinaryOperation > MemberReference i Literal 0 BlockStatement StatementExpression MethodInvocation stringBuilder MethodInvocation MethodInvocation predicate getOperator append MethodInvocation Literal "" "" append Literal "" "" append End StatementExpression MemberReference ArraySelector MemberReference i MethodInvocation This accept predicates End StatementExpression MethodInvocation stringBuilder Literal "")"" append End MethodDeclaration Modifier public Annotation Override acceptUnaryPredicate FormalParameter ReferenceType UnaryPredicate predicate StatementExpression MethodInvocation stringBuilder MethodInvocation Literal ""("" append MethodInvocation predicate getOperator append StatementExpression MethodInvocation predicate MethodInvocation This accept getPredicate StatementExpression MethodInvocation stringBuilder Literal "")"" append MethodDeclaration Modifier public Annotation Override acceptAlwaysPredicate FormalParameter ReferenceType AlwaysPredicate predicate StatementExpression MethodInvocation stringBuilder Literal ""TRUE"" append MethodDeclaration Modifier public ReferenceType String getSQL ReturnStatement MethodInvocation stringBuilder toString ReferenceType PredicateVisitor",1
72,72,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.orm.dao Import java.util.List Import javax.persistence.EntityManager Import javax.persistence.NoResultException Import javax.persistence.TypedQuery Import org.apache.ambari.server.orm.entities.ClusterConfigEntity Import org.apache.ambari.server.orm.entities.ClusterEntity Import com.google.inject.Inject Import com.google.inject.Provider Import com.google.inject.persist.Transactional ClassDeclaration Modifier public ClusterDAO FieldDeclaration Annotation Inject ReferenceType Provider TypeArgument ReferenceType EntityManager VariableDeclarator entityManagerProvider MethodDeclaration /**
   * Looks for Cluster by ID
   * @param id ID of Cluster
   * @return Found entity or NULL
   */ Modifier public Annotation Transactional ReferenceType ClusterEntity findById FormalParameter BasicType long id ReturnStatement MethodInvocation entityManagerProvider MethodInvocation ClassReference ReferenceType ClusterEntity MemberReference id find get MethodDeclaration Modifier public Annotation Transactional ReferenceType ClusterEntity findByName FormalParameter ReferenceType String clusterName LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType ClusterEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation Literal ""clusterByName"" ClassReference ReferenceType ClusterEntity createNamedQuery get StatementExpression MethodInvocation query Literal ""clusterName"" MemberReference clusterName setParameter TryStatement ReturnStatement MethodInvocation query getSingleResult CatchClause CatchClauseParameter NoResultException ignored ReturnStatement Literal null MethodDeclaration Modifier public Annotation Transactional ReferenceType List TypeArgument ReferenceType ClusterEntity findAll LocalVariableDeclaration ReferenceType TypedQuery TypeArgument ReferenceType ClusterEntity VariableDeclarator query MethodInvocation entityManagerProvider MethodInvocation Literal ""allClusters"" ClassReference ReferenceType ClusterEntity createNamedQuery get TryStatement ReturnStatement MethodInvocation query getResultList CatchClause CatchClauseParameter NoResultException ignored ReturnStatement Literal null MethodDeclaration /**
   * Create Cluster entity in Database
   * @param clusterEntity entity to create
   */ Modifier public Annotation Transactional create FormalParameter ReferenceType ClusterEntity clusterEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference clusterEntity persist get MethodDeclaration /**
   * Creates a cluster configuration in the DB.
   */ Modifier public Annotation Transactional createConfig FormalParameter ReferenceType ClusterConfigEntity entity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference entity persist get MethodDeclaration /**
   * Retrieve entity data from DB
   * @param clusterEntity entity to refresh
   */ Modifier public Annotation Transactional refresh FormalParameter ReferenceType ClusterEntity clusterEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MemberReference clusterEntity refresh get MethodDeclaration Modifier public Annotation Transactional ReferenceType ClusterEntity merge FormalParameter ReferenceType ClusterEntity clusterEntity ReturnStatement MethodInvocation entityManagerProvider MethodInvocation MemberReference clusterEntity merge get MethodDeclaration Modifier public Annotation Transactional remove FormalParameter ReferenceType ClusterEntity clusterEntity StatementExpression MethodInvocation entityManagerProvider MethodInvocation MethodInvocation MemberReference clusterEntity merge remove get MethodDeclaration Modifier public Annotation Transactional removeByName FormalParameter ReferenceType String clusterName StatementExpression MethodInvocation MethodInvocation MemberReference clusterName findByName remove",0
26,26,"CompilationUnit PackageDeclaration org.apache.ambari.server.orm.entities Import javax.persistence.Column Import javax.persistence.Entity Import javax.persistence.Id Import javax.persistence.Table ClassDeclaration Modifier public Annotation Table ElementValuePair name Literal ""key_value_store"" ElementValuePair schema Literal ""ambari"" ElementValuePair catalog Literal """" Annotation Entity KeyValueEntity FieldDeclaration Modifier private ReferenceType String VariableDeclarator key FieldDeclaration Modifier private ReferenceType String VariableDeclarator value MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""\""key\"""" ElementValuePair length Literal 255 Annotation Id ReferenceType String getKey ReturnStatement MemberReference key MethodDeclaration Modifier public setKey FormalParameter ReferenceType String key StatementExpression Assignment This MemberReference key MemberReference key = MethodDeclaration Modifier public Annotation Column ElementValuePair name Literal ""\""value\"""" ElementValuePair length Literal 32000 ReferenceType String getValue ReturnStatement MemberReference value MethodDeclaration Modifier public setValue FormalParameter ReferenceType String value StatementExpression Assignment This MemberReference value MemberReference value = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object o IfStatement BinaryOperation == This MemberReference o ReturnStatement Literal true End IfStatement BinaryOperation || BinaryOperation == MemberReference o Literal null BinaryOperation != MethodInvocation getClass MethodInvocation o getClass ReturnStatement Literal false End LocalVariableDeclaration ReferenceType KeyValueEntity VariableDeclarator that Cast ReferenceType KeyValueEntity MemberReference o IfStatement TernaryExpression BinaryOperation != MemberReference key Literal null MethodInvocation ! key MemberReference that key equals BinaryOperation != MemberReference that key Literal null ReturnStatement Literal false End IfStatement TernaryExpression BinaryOperation != MemberReference value Literal null MethodInvocation ! value MemberReference that value equals BinaryOperation != MemberReference that value Literal null ReturnStatement Literal false End ReturnStatement Literal true MethodDeclaration Modifier public Annotation Override BasicType int hashCode LocalVariableDeclaration BasicType int VariableDeclarator result TernaryExpression BinaryOperation != MemberReference key Literal null MethodInvocation key hashCode Literal 0 StatementExpression Assignment MemberReference result BinaryOperation + BinaryOperation * Literal 31 MemberReference result TernaryExpression BinaryOperation != MemberReference value Literal null MethodInvocation value hashCode Literal 0 = ReturnStatement MemberReference result",0
36,36,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.api.services.serializers Import org.apache.ambari.server.api.services.ResultStatus Import org.apache.ambari.server.api.services.Result Import org.apache.ambari.server.controller.spi.Resource Import org.apache.ambari.server.api.util.TreeNode Import org.codehaus.jackson.JsonFactory Import org.codehaus.jackson.JsonGenerator Import org.codehaus.jackson.map.ObjectMapper Import org.codehaus.jackson.util.DefaultPrettyPrinter Import java.io  Import java.nio.charset.Charset Import java.util.Map ClassDeclaration Modifier public /**
 * JSON serializer.
 * Responsible for representing a result as JSON.
 */ JsonSerializer FieldDeclaration /**
   * Factory used to create JSON generator.
   */ ReferenceType JsonFactory VariableDeclarator m_factory ClassCreator ReferenceType JsonFactory FieldDeclaration ReferenceType ObjectMapper VariableDeclarator m_mapper ClassCreator ReferenceType ObjectMapper MemberReference m_factory FieldDeclaration /**
   * Generator which writes JSON.
   */ ReferenceType JsonGenerator VariableDeclarator m_generator MethodDeclaration Modifier public Annotation Override ReferenceType Object serialize FormalParameter ReferenceType Result result TryStatement LocalVariableDeclaration ReferenceType ByteArrayOutputStream VariableDeclarator bytesOut MethodInvocation init IfStatement MethodInvocation result MethodInvocation isErrorState getStatus BlockStatement ReturnStatement MethodInvocation MethodInvocation result getStatus serializeError End StatementExpression MethodInvocation MethodInvocation result getResultTree processNode StatementExpression MethodInvocation m_generator close ReturnStatement MethodInvocation bytesOut Literal ""UTF-8"" toString CatchClause CatchClauseParameter IOException e ThrowStatement ClassCreator ReferenceType RuntimeException BinaryOperation + Literal ""Unable to serialize to json: "" MemberReference e MemberReference e MethodDeclaration Modifier public Annotation Override ReferenceType Object serializeError FormalParameter ReferenceType ResultStatus error TryStatement LocalVariableDeclaration ReferenceType ByteArrayOutputStream VariableDeclarator bytesOut MethodInvocation init StatementExpression MethodInvocation m_generator writeStartObject StatementExpression MethodInvocation m_generator Literal ""status"" MethodInvocation error MethodInvocation getStatus getStatus writeNumberField StatementExpression MethodInvocation m_generator Literal ""message"" MethodInvocation error getMessage writeStringField StatementExpression MethodInvocation m_generator writeEndObject StatementExpression MethodInvocation m_generator close ReturnStatement MethodInvocation bytesOut Literal ""UTF-8"" toString CatchClause CatchClauseParameter IOException e ThrowStatement ClassCreator ReferenceType RuntimeException BinaryOperation + Literal ""Unable to serialize to json: "" MemberReference e MemberReference e MethodDeclaration Modifier private ReferenceType ByteArrayOutputStream init IOException LocalVariableDeclaration ReferenceType ByteArrayOutputStream VariableDeclarator bytesOut ClassCreator ReferenceType ByteArrayOutputStream StatementExpression Assignment MemberReference m_generator MethodInvocation MemberReference bytesOut createJsonGenerator = LocalVariableDeclaration ReferenceType DefaultPrettyPrinter VariableDeclarator p ClassCreator ReferenceType DefaultPrettyPrinter StatementExpression MethodInvocation p ClassCreator ReferenceType DefaultPrettyPrinter ReferenceType Lf2SpacesIndenter indentArraysWith StatementExpression MethodInvocation m_generator MemberReference p setPrettyPrinter ReturnStatement MemberReference bytesOut MethodDeclaration Modifier private processNode FormalParameter ReferenceType TreeNode TypeArgument ReferenceType Resource node IOException LocalVariableDeclaration ReferenceType String VariableDeclarator name MethodInvocation node getName LocalVariableDeclaration ReferenceType Resource VariableDeclarator r MethodInvocation node getObject IfStatement BinaryOperation == MemberReference r Literal null BlockStatement IfStatement BinaryOperation != MemberReference name Literal null BlockStatement IfStatement BinaryOperation == MethodInvocation node getParent Literal null BlockStatement StatementExpression MethodInvocation m_generator writeStartObject StatementExpression MethodInvocation MemberReference node writeHref End StatementExpression MethodInvocation m_generator MemberReference name writeArrayFieldStart End BlockStatement StatementExpression MethodInvocation m_generator writeStartObject StatementExpression MethodInvocation MemberReference node writeHref StatementExpression MethodInvocation MethodInvocation r getProperties handleResourceProperties End ForStatement EnhancedForControl VariableDeclaration ReferenceType TreeNode TypeArgument ReferenceType Resource VariableDeclarator child MethodInvocation node getChildren BlockStatement StatementExpression MethodInvocation MemberReference child processNode End IfStatement BinaryOperation == MemberReference r Literal null BlockStatement IfStatement BinaryOperation != MemberReference name Literal null BlockStatement StatementExpression MethodInvocation m_generator writeEndArray IfStatement BinaryOperation == MethodInvocation node getParent Literal null BlockStatement StatementExpression MethodInvocation m_generator writeEndObject End End BlockStatement StatementExpression MethodInvocation m_generator writeEndObject End MethodDeclaration Modifier private handleResourceProperties FormalParameter ReferenceType TreeNode TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object node IOException LocalVariableDeclaration ReferenceType String VariableDeclarator category MethodInvocation node getName IfStatement BinaryOperation != MemberReference category Literal null BlockStatement StatementExpression MethodInvocation m_generator MemberReference category writeFieldName StatementExpression MethodInvocation m_generator writeStartObject End ForStatement EnhancedForControl VariableDeclaration ReferenceType Map ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType Object VariableDeclarator entry MethodInvocation node MethodInvocation entrySet getObject BlockStatement StatementExpression MethodInvocation m_generator MethodInvocation entry getKey writeFieldName StatementExpression MethodInvocation m_mapper MemberReference m_generator MethodInvocation entry getValue writeValue End ForStatement EnhancedForControl VariableDeclaration ReferenceType TreeNode TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Object VariableDeclarator n MethodInvocation node getChildren BlockStatement StatementExpression MethodInvocation MemberReference n handleResourceProperties End IfStatement BinaryOperation != MemberReference category Literal null BlockStatement StatementExpression MethodInvocation m_generator writeEndObject End MethodDeclaration Modifier private ReferenceType JsonGenerator createJsonGenerator FormalParameter ReferenceType ByteArrayOutputStream baos IOException LocalVariableDeclaration ReferenceType JsonGenerator VariableDeclarator generator MethodInvocation m_factory ClassCreator ReferenceType OutputStreamWriter MemberReference baos MethodInvocation Charset MethodInvocation newEncoder Literal ""UTF-8"" forName createJsonGenerator LocalVariableDeclaration ReferenceType DefaultPrettyPrinter VariableDeclarator p ClassCreator ReferenceType DefaultPrettyPrinter StatementExpression MethodInvocation p ClassCreator ReferenceType DefaultPrettyPrinter ReferenceType Lf2SpacesIndenter indentArraysWith StatementExpression MethodInvocation generator MemberReference p setPrettyPrinter ReturnStatement MemberReference generator MethodDeclaration Modifier private writeHref FormalParameter ReferenceType TreeNode TypeArgument ReferenceType Resource node IOException LocalVariableDeclaration ReferenceType String VariableDeclarator hrefProp MethodInvocation node Literal ""href"" getProperty IfStatement BinaryOperation != MemberReference hrefProp Literal null BlockStatement StatementExpression MethodInvocation m_generator Literal ""href"" MemberReference hrefProp writeStringField End ReferenceType ResultSerializer",1
324,324,,0
223,223,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.configuration Import com.google.inject.Singleton Import org.apache.ambari.server.orm.PersistenceType Import org.apache.ambari.server.security.ClientSecurityType Import org.apache.ambari.server.security.authorization.LdapServerProperties Import org.apache.commons.io.FileUtils Import org.apache.commons.lang.RandomStringUtils Import org.slf4j.Logger Import org.slf4j.LoggerFactory Import java.io.File Import java.io.FileNotFoundException Import java.io.IOException Import java.io.InputStream Import java.util.HashMap Import java.util.Map Import java.util.Properties ClassDeclaration Modifier public Annotation Singleton /**
 * Ambari configuration.
 * Reads properties from ambari.properties
 */ Configuration FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator CONFIG_FILE Literal ""ambari.properties"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator BOOTSTRAP_DIR Literal ""bootstrap.dir"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator BOOTSTRAP_DIR_DEFAULT Literal ""/var/run/ambari-server/bootstrap"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator WEBAPP_DIR Literal ""webapp.dir"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator BOOTSTRAP_SCRIPT Literal ""bootstrap.script"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator BOOTSTRAP_SCRIPT_DEFAULT Literal ""/usr/bin/ambari_bootstrap"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator BOOTSTRAP_SETUP_AGENT_SCRIPT Literal ""bootstrap.setup_agent.script"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator BOOTSTRAP_SETUP_AGENT_PASSWORD Literal ""bootstrap.setup_agent.password"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator BOOTSTRAP_MASTER_HOSTNAME Literal ""bootstrap.master_host_name"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator API_AUTHENTICATE Literal ""api.authenticate"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator API_USE_SSL Literal ""api.ssl"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator SRVR_KSTR_DIR_KEY Literal ""security.server.keys_dir"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator SRVR_CRT_NAME_KEY Literal ""security.server.cert_name"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator SRVR_KEY_NAME_KEY Literal ""security.server.key_name"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator KSTR_NAME_KEY Literal ""security.server.keystore_name"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator SRVR_CRT_PASS_FILE_KEY Literal ""security.server.crt_pass_file"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator SRVR_CRT_PASS_KEY Literal ""security.server.crt_pass"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator SRVR_CRT_PASS_LEN_KEY Literal ""security.server.crt_pass.len"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator PASSPHRASE_ENV_KEY Literal ""security.server.passphrase_env_var"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator PASSPHRASE_KEY Literal ""security.server.passphrase"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator RESOURCES_DIR_KEY Literal ""resources.dir"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator METADETA_DIR_PATH Literal ""metadata.path"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator CLIENT_SECURITY_KEY Literal ""client.security"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator LDAP_USE_SSL_KEY Literal ""authorization.ldap.useSSL"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator LDAP_PRIMARY_URL_KEY Literal ""authorization.ldap.primaryUrl"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator LDAP_SECONDARY_URL_KEY Literal ""authorization.ldap.secondaryUrl"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator LDAP_BASE_DN_KEY Literal ""authorization.ldap.baseDn"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator LDAP_BIND_ANONYMOUSLY_KEY Literal ""authorization.ldap.bindAnonymously"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator LDAP_MANAGER_DN_KEY Literal ""authorization.ldap.managerDn"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator LDAP_MANAGER_PASSWORD_KEY Literal ""authorization.ldap.managerPassword"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator LDAP_USERNAME_ATTRIBUTE_KEY Literal ""authorization.ldap.usernameAttribute"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator USER_ROLE_NAME_KEY Literal ""authorization.userRoleName"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator ADMIN_ROLE_NAME_KEY Literal ""authorization.adminRoleName"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator PERSISTENCE_IN_MEMORY_KEY Literal ""server.persistence.inMemory"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator SERVER_JDBC_USER_NAME_KEY Literal ""server.jdbc.user.name"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator SERVER_JDBC_USER_NAME_DEFAULT Literal ""ambari-server"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator SERVER_JDBC_USER_PASSWD_KEY Literal ""server.jdbc.user.passwd"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator SERVER_JDBC_USER_PASSWD_DEFAULT Literal ""bigdata"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator OS_VERSION_KEY Literal ""server.os_type"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator SRVR_KSTR_DIR_DEFAULT Literal ""."" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator SRVR_CRT_NAME_DEFAULT Literal ""ca.crt"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator SRVR_KEY_NAME_DEFAULT Literal ""ca.key"" FieldDeclaration Modifier public final static ReferenceType String VariableDeclarator KSTR_NAME_DEFAULT Literal ""keystore.p12"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator SRVR_CRT_PASS_FILE_DEFAULT Literal ""pass.txt"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator SRVR_CRT_PASS_LEN_DEFAULT Literal ""50"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator PASSPHRASE_ENV_DEFAULT Literal ""AMBARI_PASSPHRASE"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator RESOURCES_DIR_DEFAULT Literal ""/var/share/ambari/resources/"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator CLIENT_SECURITY_DEFAULT Literal ""local"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator USER_ROLE_NAME_DEFAULT Literal ""user"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator ADMIN_ROLE_NAME_DEFAULT Literal ""admin"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator LDAP_BIND_ANONYMOUSLY_DEFAULT Literal ""true"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator LDAP_PRIMARY_URL_DEFAULT Literal ""localhost:33389"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator LDAP_BASE_DN_DEFAULT Literal ""dc=ambari,dc=apache,dc=org"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator LDAP_USERNAME_ATTRIBUTE_DEFAULT Literal ""uid"" FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator PERSISTENCE_IN_MEMORY_DEFAULT Literal ""true"" FieldDeclaration Modifier private final static ReferenceType Logger VariableDeclarator LOG MethodInvocation LoggerFactory ClassReference ReferenceType Configuration getLogger FieldDeclaration Modifier private ReferenceType Properties VariableDeclarator properties FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator configsMap ConstructorDeclaration Modifier public Configuration StatementExpression ExplicitConstructorInvocation MethodInvocation readConfigFile ConstructorDeclaration Modifier public /**
   * For Testing only. This is to be able to create Configuration object
   * for testing.
   * @param properties properties to use for testing using the Conf object.
   */ Configuration FormalParameter ReferenceType Properties properties StatementExpression Assignment This MemberReference properties MemberReference properties = StatementExpression Assignment MemberReference configsMap ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String = StatementExpression MethodInvocation configsMap MemberReference SRVR_KSTR_DIR_KEY MethodInvocation properties MemberReference SRVR_KSTR_DIR_KEY MemberReference SRVR_KSTR_DIR_DEFAULT getProperty put StatementExpression MethodInvocation configsMap MemberReference SRVR_KSTR_DIR_KEY MethodInvocation properties MemberReference SRVR_KSTR_DIR_KEY MemberReference SRVR_KSTR_DIR_DEFAULT getProperty put StatementExpression MethodInvocation configsMap MemberReference SRVR_CRT_NAME_KEY MethodInvocation properties MemberReference SRVR_CRT_NAME_KEY MemberReference SRVR_CRT_NAME_DEFAULT getProperty put StatementExpression MethodInvocation configsMap MemberReference SRVR_KEY_NAME_KEY MethodInvocation properties MemberReference SRVR_KEY_NAME_KEY MemberReference SRVR_KEY_NAME_DEFAULT getProperty put StatementExpression MethodInvocation configsMap MemberReference KSTR_NAME_KEY MethodInvocation properties MemberReference KSTR_NAME_KEY MemberReference KSTR_NAME_DEFAULT getProperty put StatementExpression MethodInvocation configsMap MemberReference SRVR_CRT_PASS_FILE_KEY MethodInvocation properties MemberReference SRVR_CRT_PASS_FILE_KEY MemberReference SRVR_CRT_PASS_FILE_DEFAULT getProperty put StatementExpression MethodInvocation configsMap MemberReference PASSPHRASE_ENV_KEY MethodInvocation properties MemberReference PASSPHRASE_ENV_KEY MemberReference PASSPHRASE_ENV_DEFAULT getProperty put StatementExpression MethodInvocation configsMap MemberReference PASSPHRASE_KEY MethodInvocation System MethodInvocation configsMap MemberReference PASSPHRASE_ENV_KEY get getenv put StatementExpression MethodInvocation configsMap MemberReference USER_ROLE_NAME_KEY MethodInvocation properties MemberReference USER_ROLE_NAME_KEY MemberReference USER_ROLE_NAME_DEFAULT getProperty put StatementExpression MethodInvocation configsMap MemberReference ADMIN_ROLE_NAME_KEY MethodInvocation properties MemberReference ADMIN_ROLE_NAME_KEY MemberReference ADMIN_ROLE_NAME_DEFAULT getProperty put StatementExpression MethodInvocation configsMap MemberReference RESOURCES_DIR_KEY MethodInvocation properties MemberReference RESOURCES_DIR_KEY MemberReference RESOURCES_DIR_DEFAULT getProperty put StatementExpression MethodInvocation configsMap MemberReference SRVR_CRT_PASS_LEN_KEY MethodInvocation properties MemberReference SRVR_CRT_PASS_LEN_KEY MemberReference SRVR_CRT_PASS_LEN_DEFAULT getProperty put LocalVariableDeclaration ReferenceType File VariableDeclarator passFile ClassCreator ReferenceType File BinaryOperation + BinaryOperation + MethodInvocation configsMap MemberReference SRVR_KSTR_DIR_KEY get MemberReference File separator MethodInvocation configsMap MemberReference SRVR_CRT_PASS_FILE_KEY get LocalVariableDeclaration ReferenceType String VariableDeclarator randStr Literal null IfStatement MethodInvocation ! passFile exists BlockStatement StatementExpression MethodInvocation LOG Literal ""Generation of file with password"" info TryStatement StatementExpression Assignment MemberReference randStr MethodInvocation RandomStringUtils MethodInvocation Integer MethodInvocation configsMap MemberReference SRVR_CRT_PASS_LEN_KEY get parseInt randomAlphanumeric = StatementExpression MethodInvocation FileUtils MemberReference passFile MemberReference randStr writeStringToFile CatchClause CatchClauseParameter IOException e StatementExpression MethodInvocation e printStackTrace ThrowStatement ClassCreator ReferenceType RuntimeException Literal ""Error reading certificate password from file"" BlockStatement StatementExpression MethodInvocation LOG Literal ""Reading password from existing file"" info TryStatement StatementExpression Assignment MemberReference randStr MethodInvocation FileUtils MemberReference passFile readFileToString = CatchClause CatchClauseParameter IOException e StatementExpression MethodInvocation e printStackTrace End StatementExpression MethodInvocation configsMap MemberReference SRVR_CRT_PASS_KEY MemberReference randStr put MethodDeclaration /**
   * Find, read, and parse the configuration file.
   * @return the properties that were found or empty if no file was found
   */ Modifier private static ReferenceType Properties readConfigFile LocalVariableDeclaration ReferenceType Properties VariableDeclarator properties ClassCreator ReferenceType Properties LocalVariableDeclaration ReferenceType InputStream VariableDeclarator inputStream ClassReference MethodInvocation getClassLoader MethodInvocation MemberReference CONFIG_FILE getResourceAsStream ReferenceType Configuration IfStatement BinaryOperation == MemberReference inputStream Literal null ThrowStatement ClassCreator ReferenceType RuntimeException BinaryOperation + MemberReference CONFIG_FILE Literal "" not found in classpath"" End TryStatement StatementExpression MethodInvocation properties MemberReference inputStream load CatchClause CatchClauseParameter FileNotFoundException fnf StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + Literal ""No configuration file "" MemberReference CONFIG_FILE Literal "" found in classpath."" MemberReference fnf info CatchClause CatchClauseParameter IOException ie ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Can't read configuration file "" MemberReference CONFIG_FILE MemberReference ie ReturnStatement MemberReference properties MethodDeclaration Modifier public ReferenceType File getBootStrapDir LocalVariableDeclaration ReferenceType String VariableDeclarator fileName MethodInvocation properties MemberReference BOOTSTRAP_DIR getProperty IfStatement BinaryOperation == MemberReference fileName Literal null BlockStatement StatementExpression Assignment MemberReference fileName MemberReference BOOTSTRAP_DIR_DEFAULT = End ReturnStatement ClassCreator ReferenceType File MemberReference fileName MethodDeclaration Modifier public ReferenceType String getBootStrapScript LocalVariableDeclaration ReferenceType String VariableDeclarator bootscript MethodInvocation properties MemberReference BOOTSTRAP_SCRIPT getProperty IfStatement BinaryOperation == MemberReference bootscript Literal null BlockStatement ReturnStatement MemberReference BOOTSTRAP_SCRIPT_DEFAULT End ReturnStatement MemberReference bootscript MethodDeclaration Modifier public ReferenceType String getBootSetupAgentScript ReturnStatement MethodInvocation properties MemberReference BOOTSTRAP_SETUP_AGENT_SCRIPT Literal ""/usr/lib/python2.6/site-packages/ambari_server/setupAgent.py"" getProperty MethodDeclaration Modifier public ReferenceType String getBootSetupAgentPassword LocalVariableDeclaration ReferenceType String VariableDeclarator pass MethodInvocation configsMap MemberReference PASSPHRASE_KEY get IfStatement BinaryOperation != Literal null MemberReference pass ReturnStatement MemberReference pass End ReturnStatement MethodInvocation properties MemberReference BOOTSTRAP_SETUP_AGENT_PASSWORD Literal ""password"" getProperty MethodDeclaration /**
   * Get the map with server config parameters.
   * Keys - public constants of this class
   * @return the map with server config parameters
   */ Modifier public ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getConfigsMap ReturnStatement MemberReference configsMap MethodDeclaration /**
   * Gets client security type
   * @return appropriate ClientSecurityType
   */ Modifier public ReferenceType ClientSecurityType getClientSecurityType ReturnStatement MethodInvocation ClientSecurityType MethodInvocation properties MemberReference CLIENT_SECURITY_KEY getProperty fromString MethodDeclaration Modifier public setClientSecurityType FormalParameter ReferenceType ClientSecurityType type StatementExpression MethodInvocation properties MemberReference CLIENT_SECURITY_KEY MethodInvocation type toString setProperty MethodDeclaration Modifier public ReferenceType String getWebAppDir StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Web App DIR test "" MethodInvocation properties MemberReference WEBAPP_DIR getProperty info ReturnStatement MethodInvocation properties MemberReference WEBAPP_DIR Literal ""web"" getProperty MethodDeclaration /**
   * Gets ambari stack-path
   * @return String
   */ Modifier public ReferenceType String getMetadataPath ReturnStatement MethodInvocation properties MemberReference METADETA_DIR_PATH getProperty MethodDeclaration /**
   * Check to see if the API should be authenticated or not
   * @return false if not, true if the authentication is enabled.
   */ Modifier public BasicType boolean getApiAuthentication ReturnStatement Literal ""true"" MethodDeclaration /**
   * Check to see if the API should be authenticated via ssl or not
   * @return false if not, true if ssl needs to be used.
   */ Modifier public BasicType boolean getApiSSLAuthentication ReturnStatement Literal ""true"" MethodDeclaration Modifier public ReferenceType PersistenceType getPersistenceType LocalVariableDeclaration ReferenceType String VariableDeclarator value MethodInvocation properties MemberReference PERSISTENCE_IN_MEMORY_KEY MemberReference PERSISTENCE_IN_MEMORY_DEFAULT getProperty IfStatement Literal MethodInvocation MemberReference value equalsIgnoreCase ""true"" BlockStatement ReturnStatement MemberReference PersistenceType IN_MEMORY BlockStatement ReturnStatement MemberReference PersistenceType POSTGRES End MethodDeclaration Modifier public ReferenceType String getDatabaseUser ReturnStatement MethodInvocation properties MemberReference SERVER_JDBC_USER_NAME_KEY MemberReference SERVER_JDBC_USER_NAME_DEFAULT getProperty MethodDeclaration Modifier public ReferenceType String getDatabasePassword LocalVariableDeclaration ReferenceType String VariableDeclarator filePath MethodInvocation properties MemberReference SERVER_JDBC_USER_PASSWD_KEY getProperty IfStatement BinaryOperation == MemberReference filePath Literal null BlockStatement StatementExpression MethodInvocation LOG Literal ""DB password file not specified - using default"" debug ReturnStatement MemberReference SERVER_JDBC_USER_PASSWD_DEFAULT BlockStatement StatementExpression MethodInvocation LOG Literal ""Reading password from file {}"" MemberReference filePath debug LocalVariableDeclaration ReferenceType String VariableDeclarator password TryStatement StatementExpression Assignment MemberReference password MethodInvocation FileUtils ClassCreator ReferenceType File MemberReference filePath readFileToString = CatchClause CatchClauseParameter IOException e ThrowStatement ClassCreator ReferenceType RuntimeException Literal ""Unable to read database password"" MemberReference e ReturnStatement MemberReference password End MethodDeclaration /**
   * Gets parameters of LDAP server to connect to
   * @return LdapServerProperties object representing connection parameters
   */ Modifier public ReferenceType LdapServerProperties getLdapServerProperties LocalVariableDeclaration ReferenceType LdapServerProperties VariableDeclarator ldapServerProperties ClassCreator ReferenceType LdapServerProperties StatementExpression MethodInvocation ldapServerProperties MethodInvocation properties MemberReference LDAP_PRIMARY_URL_KEY MemberReference LDAP_PRIMARY_URL_DEFAULT getProperty setPrimaryUrl StatementExpression MethodInvocation ldapServerProperties MethodInvocation properties MemberReference LDAP_SECONDARY_URL_KEY getProperty setSecondaryUrl StatementExpression MethodInvocation ldapServerProperties Literal MethodInvocation MethodInvocation properties MemberReference LDAP_USE_SSL_KEY getProperty equalsIgnoreCase ""true"" setUseSsl StatementExpression MethodInvocation ldapServerProperties Literal MethodInvocation MethodInvocation properties MemberReference LDAP_BIND_ANONYMOUSLY_KEY MemberReference LDAP_BIND_ANONYMOUSLY_DEFAULT getProperty equalsIgnoreCase ""true"" setAnonymousBind StatementExpression MethodInvocation ldapServerProperties MethodInvocation properties MemberReference LDAP_MANAGER_DN_KEY getProperty setManagerDn StatementExpression MethodInvocation ldapServerProperties MethodInvocation properties MemberReference LDAP_MANAGER_PASSWORD_KEY getProperty setManagerPassword StatementExpression MethodInvocation ldapServerProperties MethodInvocation properties MemberReference LDAP_BASE_DN_KEY MemberReference LDAP_BASE_DN_DEFAULT getProperty setBaseDN StatementExpression MethodInvocation ldapServerProperties MethodInvocation properties MemberReference LDAP_USERNAME_ATTRIBUTE_KEY MemberReference LDAP_USERNAME_ATTRIBUTE_DEFAULT getProperty setUsernameAttribute ReturnStatement MemberReference ldapServerProperties MethodDeclaration Modifier public ReferenceType String getServerOsType ReturnStatement MethodInvocation properties MemberReference OS_VERSION_KEY Literal """" getProperty MethodDeclaration Modifier public ReferenceType String getMasterHostname FormalParameter ReferenceType String defaultValue ReturnStatement MethodInvocation properties MemberReference BOOTSTRAP_MASTER_HOSTNAME MemberReference defaultValue getProperty",0
110,110,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.agent Import java.util.HashMap Import java.util.List Import java.util.Map Import org.apache.ambari.server.Role Import org.apache.ambari.server.RoleCommand Import org.apache.ambari.server.utils.StageUtils Import org.apache.commons.logging.Log Import org.apache.commons.logging.LogFactory Import org.codehaus.jackson.annotate.JsonProperty ClassDeclaration Modifier public /**
 * Execution commands are scheduled by action manager, and these are
 * persisted in the database for recovery.
 */ ExecutionCommand FieldDeclaration Modifier private static ReferenceType Log VariableDeclarator LOG MethodInvocation LogFactory ClassReference ReferenceType ExecutionCommand getLog ConstructorDeclaration Modifier public ExecutionCommand StatementExpression SuperConstructorInvocation MemberReference AgentCommandType EXECUTION_COMMAND FieldDeclaration Modifier private ReferenceType String VariableDeclarator clusterName FieldDeclaration Modifier private BasicType long VariableDeclarator taskId FieldDeclaration Modifier private ReferenceType String VariableDeclarator commandId FieldDeclaration Modifier private ReferenceType String VariableDeclarator hostname FieldDeclaration Modifier private ReferenceType Role VariableDeclarator role FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator hostLevelParams ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator roleParams Literal null FieldDeclaration Modifier private ReferenceType RoleCommand VariableDeclarator roleCommand FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType List TypeArgument ReferenceType String VariableDeclarator clusterHostInfo ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType List TypeArgument ReferenceType String FieldDeclaration Modifier private ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator configurations FieldDeclaration Modifier private ReferenceType String VariableDeclarator serviceName MethodDeclaration Modifier public Annotation JsonProperty Literal ""commandId"" ReferenceType String getCommandId ReturnStatement This MemberReference commandId MethodDeclaration Modifier public Annotation JsonProperty Literal ""commandId"" setCommandId FormalParameter ReferenceType String commandId StatementExpression Assignment This MemberReference commandId MemberReference commandId = MethodDeclaration Modifier public Annotation Override BasicType boolean equals FormalParameter ReferenceType Object other IfStatement BinaryOperation instanceof MemberReference other ReferenceType ExecutionCommand BlockStatement ReturnStatement Literal false End LocalVariableDeclaration ReferenceType ExecutionCommand VariableDeclarator o Cast ReferenceType ExecutionCommand MemberReference other ReturnStatement BinaryOperation && BinaryOperation && BinaryOperation && This MemberReference commandId MethodInvocation MemberReference o commandId equals This MemberReference hostname MethodInvocation MemberReference o hostname equals This MemberReference role MethodInvocation MemberReference o role equals This MemberReference roleCommand MethodInvocation MemberReference o roleCommand equals MethodDeclaration Modifier public Annotation Override ReferenceType String toString TryStatement ReturnStatement MethodInvocation StageUtils This jaxbToString CatchClause CatchClauseParameter Exception ex StatementExpression MethodInvocation LOG Literal ""Exception in json conversion"" MemberReference ex warn ReturnStatement Literal ""Exception in json conversion"" MethodDeclaration Modifier public Annotation Override BasicType int hashCode ReturnStatement BinaryOperation + BinaryOperation + MemberReference hostname MemberReference commandId MemberReference role MethodDeclaration Modifier public Annotation JsonProperty Literal ""taskId"" BasicType long getTaskId ReturnStatement MemberReference taskId MethodDeclaration Modifier public Annotation JsonProperty Literal ""taskId"" setTaskId FormalParameter BasicType long taskId StatementExpression Assignment This MemberReference taskId MemberReference taskId = MethodDeclaration Modifier public Annotation JsonProperty Literal ""role"" ReferenceType Role getRole ReturnStatement MemberReference role MethodDeclaration Modifier public Annotation JsonProperty Literal ""role"" setRole FormalParameter ReferenceType Role role StatementExpression Assignment This MemberReference role MemberReference role = MethodDeclaration Modifier public Annotation JsonProperty Literal ""roleParams"" ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getRoleParams ReturnStatement MemberReference roleParams MethodDeclaration Modifier public Annotation JsonProperty Literal ""roleParams"" setRoleParams FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String roleParams StatementExpression Assignment This MemberReference roleParams MemberReference roleParams = MethodDeclaration Modifier public Annotation JsonProperty Literal ""roleCommand"" ReferenceType RoleCommand getRoleCommand ReturnStatement MemberReference roleCommand MethodDeclaration Modifier public Annotation JsonProperty Literal ""roleCommand"" setRoleCommand FormalParameter ReferenceType RoleCommand cmd StatementExpression Assignment This MemberReference roleCommand MemberReference cmd = MethodDeclaration Modifier public Annotation JsonProperty Literal ""clusterName"" ReferenceType String getClusterName ReturnStatement MemberReference clusterName MethodDeclaration Modifier public Annotation JsonProperty Literal ""clusterName"" setClusterName FormalParameter ReferenceType String clusterName StatementExpression Assignment This MemberReference clusterName MemberReference clusterName = MethodDeclaration Modifier public Annotation JsonProperty Literal ""hostname"" ReferenceType String getHostname ReturnStatement MemberReference hostname MethodDeclaration Modifier public Annotation JsonProperty Literal ""hostname"" setHostname FormalParameter ReferenceType String hostname StatementExpression Assignment This MemberReference hostname MemberReference hostname = MethodDeclaration Modifier public Annotation JsonProperty Literal ""hostLevelParams"" ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getHostLevelParams ReturnStatement MemberReference hostLevelParams MethodDeclaration Modifier public Annotation JsonProperty Literal ""hostLevelParams"" setHostLevelParams FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String params StatementExpression Assignment This MemberReference hostLevelParams MemberReference params = MethodDeclaration Modifier public Annotation JsonProperty Literal ""clusterHostInfo"" ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType List TypeArgument ReferenceType String getClusterHostInfo ReturnStatement MemberReference clusterHostInfo MethodDeclaration Modifier public Annotation JsonProperty Literal ""clusterHostInfo"" setClusterHostInfo FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType List TypeArgument ReferenceType String clusterHostInfo StatementExpression Assignment This MemberReference clusterHostInfo MemberReference clusterHostInfo = MethodDeclaration Modifier public Annotation JsonProperty Literal ""configurations"" ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getConfigurations ReturnStatement MemberReference configurations MethodDeclaration Modifier public Annotation JsonProperty Literal ""configurations"" setConfigurations FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String configurations StatementExpression Assignment This MemberReference configurations MemberReference configurations = MethodDeclaration Modifier public Annotation JsonProperty Literal ""serviceName"" ReferenceType String getServiceName ReturnStatement MemberReference serviceName MethodDeclaration Modifier public Annotation JsonProperty Literal ""serviceName"" setServiceName FormalParameter ReferenceType String serviceName StatementExpression Assignment This MemberReference serviceName MemberReference serviceName = ReferenceType AgentCommand",0
213,213,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * ""License""); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.server.controller Import java.net.InetAddress Import java.util  Import java.util.Map.Entry Import org.apache.ambari.server  Import org.apache.ambari.server.actionmanager.ActionManager Import org.apache.ambari.server.actionmanager.HostRoleCommand Import org.apache.ambari.server.actionmanager.RequestStatus Import org.apache.ambari.server.actionmanager.Stage Import org.apache.ambari.server.actionmanager.StageFactory Import org.apache.ambari.server.agent.ExecutionCommand Import org.apache.ambari.server.api.services.AmbariMetaInfo Import org.apache.ambari.server.metadata.ActionMetadata Import org.apache.ambari.server.metadata.RoleCommandOrder Import org.apache.ambari.server.security.authorization.User Import org.apache.ambari.server.security.authorization.Users Import org.apache.ambari.server.stageplanner.RoleGraph Import org.apache.ambari.server.state.Cluster Import org.apache.ambari.server.state.Clusters Import org.apache.ambari.server.state.ComponentInfo Import org.apache.ambari.server.state.Config Import org.apache.ambari.server.state.ConfigFactory Import org.apache.ambari.server.state.Host Import org.apache.ambari.server.state.RepositoryInfo Import org.apache.ambari.server.state.Service Import org.apache.ambari.server.state.ServiceComponent Import org.apache.ambari.server.state.ServiceComponentFactory Import org.apache.ambari.server.state.ServiceComponentHost Import org.apache.ambari.server.state.ServiceComponentHostEvent Import org.apache.ambari.server.state.ServiceComponentHostFactory Import org.apache.ambari.server.state.ServiceFactory Import org.apache.ambari.server.state.StackId Import org.apache.ambari.server.state.StackInfo Import org.apache.ambari.server.state.State Import org.apache.ambari.server.state.svccomphost.ServiceComponentHostInstallEvent Import org.apache.ambari.server.state.svccomphost.ServiceComponentHostOpInProgressEvent Import org.apache.ambari.server.state.svccomphost.ServiceComponentHostStartEvent Import org.apache.ambari.server.state.svccomphost.ServiceComponentHostStopEvent Import org.apache.ambari.server.utils.StageUtils Import org.slf4j.Logger Import org.slf4j.LoggerFactory Import com.google.gson.Gson Import com.google.inject.Inject Import com.google.inject.Injector Import com.google.inject.Singleton ClassDeclaration Modifier public Annotation Singleton AmbariManagementControllerImpl FieldDeclaration Modifier private final static ReferenceType Logger VariableDeclarator LOG MethodInvocation LoggerFactory ClassReference ReferenceType AmbariManagementControllerImpl getLogger FieldDeclaration Modifier private final ReferenceType Clusters VariableDeclarator clusters FieldDeclaration Modifier private ReferenceType String VariableDeclarator baseLogDir Literal ""/tmp/ambari/"" FieldDeclaration Modifier private final ReferenceType ActionManager VariableDeclarator actionManager FieldDeclaration Modifier private final Annotation SuppressWarnings Literal ""unused"" ReferenceType Injector VariableDeclarator injector FieldDeclaration Modifier private final ReferenceType Gson VariableDeclarator gson FieldDeclaration Modifier private static ReferenceType RoleCommandOrder VariableDeclarator rco StatementExpression Assignment MemberReference rco ClassCreator ReferenceType RoleCommandOrder = StatementExpression MethodInvocation RoleCommandOrder initialize FieldDeclaration Modifier private Annotation Inject ReferenceType ServiceFactory VariableDeclarator serviceFactory FieldDeclaration Modifier private Annotation Inject ReferenceType ServiceComponentFactory VariableDeclarator serviceComponentFactory FieldDeclaration Modifier private Annotation Inject ReferenceType ServiceComponentHostFactory VariableDeclarator serviceComponentHostFactory FieldDeclaration Modifier private Annotation Inject ReferenceType ConfigFactory VariableDeclarator configFactory FieldDeclaration Modifier private Annotation Inject ReferenceType StageFactory VariableDeclarator stageFactory FieldDeclaration Modifier private Annotation Inject ReferenceType ActionMetadata VariableDeclarator actionMetadata FieldDeclaration Modifier private Annotation Inject ReferenceType AmbariMetaInfo VariableDeclarator ambariMetaInfo FieldDeclaration Modifier private Annotation Inject ReferenceType Users VariableDeclarator users FieldDeclaration Modifier private final ReferenceType String VariableDeclarator masterHostname FieldDeclaration Modifier private final static ReferenceType String VariableDeclarator JDK_RESOURCE_LOCATION Literal ""/resources/"" FieldDeclaration Modifier private final ReferenceType String VariableDeclarator jdkResourceUrl ConstructorDeclaration Modifier public Annotation Inject AmbariManagementControllerImpl FormalParameter ReferenceType ActionManager actionManager FormalParameter ReferenceType Clusters clusters FormalParameter ReferenceType Injector injector Exception StatementExpression Assignment This MemberReference clusters MemberReference clusters = StatementExpression Assignment This MemberReference actionManager MemberReference actionManager = StatementExpression Assignment This MemberReference injector MemberReference injector = StatementExpression MethodInvocation injector This injectMembers StatementExpression Assignment This MemberReference gson MethodInvocation injector ClassReference ReferenceType Gson getInstance = StatementExpression MethodInvocation LOG Literal ""Initializing the AmbariManagementControllerImpl"" info StatementExpression Assignment This MemberReference masterHostname MethodInvocation InetAddress MethodInvocation getCanonicalHostName getLocalHost = StatementExpression Assignment This MemberReference jdkResourceUrl BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""http://"" MemberReference masterHostname Literal "":"" MethodInvocation AmbariServer getResourcesPort MemberReference JDK_RESOURCE_LOCATION = MethodDeclaration Modifier public Annotation Override createCluster FormalParameter ReferenceType ClusterRequest request AmbariException IfStatement BinaryOperation || BinaryOperation || BinaryOperation == MethodInvocation request getClusterName Literal null MethodInvocation request MethodInvocation isEmpty getClusterName BinaryOperation != MethodInvocation request getClusterId Literal null BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Cluster name should be provided"" Literal "" and clusterId should be null"" End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a createCluster request"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", request="" MemberReference request debug End IfStatement BinaryOperation || BinaryOperation == MethodInvocation request getStackVersion Literal null MethodInvocation request MethodInvocation isEmpty getStackVersion BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Stack information should be"" Literal "" provided when creating a cluster"" End LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId ClassCreator ReferenceType StackId MethodInvocation request getStackVersion LocalVariableDeclaration ReferenceType StackInfo VariableDeclarator stackInfo MethodInvocation ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion getStackInfo IfStatement BinaryOperation == MemberReference stackInfo Literal null BlockStatement ThrowStatement ClassCreator ReferenceType StackNotFoundException MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion End LocalVariableDeclaration BasicType boolean VariableDeclarator foundInvalidHosts Literal false LocalVariableDeclaration ReferenceType StringBuilder VariableDeclarator invalidHostsStr ClassCreator ReferenceType StringBuilder IfStatement BinaryOperation != MethodInvocation request getHostNames Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator hostname MethodInvocation request getHostNames BlockStatement TryStatement StatementExpression MethodInvocation clusters MemberReference hostname getHost CatchClause CatchClauseParameter HostNotFoundException e IfStatement MemberReference foundInvalidHosts BlockStatement StatementExpression MethodInvocation invalidHostsStr Literal "","" append End StatementExpression Assignment MemberReference foundInvalidHosts Literal true = StatementExpression MethodInvocation invalidHostsStr MemberReference hostname append End End IfStatement MemberReference foundInvalidHosts BlockStatement ThrowStatement ClassCreator ReferenceType HostNotFoundException MethodInvocation invalidHostsStr toString End StatementExpression MethodInvocation clusters MethodInvocation request getClusterName addCluster LocalVariableDeclaration ReferenceType Cluster VariableDeclarator c MethodInvocation clusters MethodInvocation request getClusterName getCluster IfStatement BinaryOperation != MethodInvocation request getStackVersion Literal null BlockStatement StatementExpression MethodInvocation c ClassCreator ReferenceType StackId MethodInvocation request getStackVersion setDesiredStackVersion End IfStatement BinaryOperation != MethodInvocation request getHostNames Literal null BlockStatement StatementExpression MethodInvocation clusters MethodInvocation request getHostNames MethodInvocation request getClusterName mapHostsToCluster End MethodDeclaration Modifier public synchronized Annotation Override createServices FormalParameter ReferenceType Set TypeArgument ReferenceType ServiceRequest requests AmbariException IfStatement MethodInvocation requests isEmpty BlockStatement StatementExpression MethodInvocation LOG Literal ""Received an empty requests set"" warn ReturnStatement End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String VariableDeclarator serviceNames ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator duplicates ClassCreator ReferenceType HashSet TypeArgument ReferenceType String ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceRequest VariableDeclarator request MemberReference requests BlockStatement IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == MethodInvocation request getClusterName Literal null MethodInvocation request MethodInvocation isEmpty getClusterName BinaryOperation == MethodInvocation request getServiceName Literal null MethodInvocation request MethodInvocation isEmpty getServiceName BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Cluster name and service name"" Literal "" should be provided when creating a service"" End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a createService request"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", request="" MemberReference request debug End IfStatement MethodInvocation ! serviceNames MethodInvocation request getClusterName containsKey BlockStatement StatementExpression MethodInvocation serviceNames MethodInvocation request getClusterName ClassCreator ReferenceType HashSet TypeArgument ReferenceType String put End IfStatement MethodInvocation serviceNames MethodInvocation MethodInvocation request getServiceName contains MethodInvocation request getClusterName get BlockStatement StatementExpression MethodInvocation duplicates MethodInvocation request getServiceName add ContinueStatement End StatementExpression MethodInvocation serviceNames MethodInvocation MethodInvocation request getServiceName add MethodInvocation request getClusterName get IfStatement BinaryOperation && BinaryOperation != MethodInvocation request getDesiredState Literal null MethodInvocation ! request MethodInvocation isEmpty getDesiredState BlockStatement LocalVariableDeclaration ReferenceType State VariableDeclarator state MethodInvocation State MethodInvocation request getDesiredState valueOf IfStatement BinaryOperation || MethodInvocation ! state isValidDesiredState BinaryOperation != MemberReference state MemberReference State INIT BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid desired state"" Literal "" only INIT state allowed during creation"" Literal "", providedDesiredState="" MethodInvocation request getDesiredState End End LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster TryStatement StatementExpression Assignment MemberReference cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster = CatchClause CatchClauseParameter ClusterNotFoundException e ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException Literal ""Attempted to add a service to a cluster which doesn't exist"" MemberReference e TryStatement LocalVariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation cluster MethodInvocation request getServiceName getService IfStatement BinaryOperation != MemberReference s Literal null BlockStatement StatementExpression MethodInvocation duplicates MethodInvocation request getServiceName add ContinueStatement End CatchClause CatchClauseParameter ServiceNotFoundException e LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation cluster getDesiredStackVersion IfStatement MethodInvocation ! ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion MethodInvocation request getServiceName isValidService BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Unsupported or invalid service"" Literal "" in stack"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", stackInfo="" MethodInvocation stackId getStackId End End IfStatement BinaryOperation != MethodInvocation serviceNames size Literal 1 BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid arguments, updates allowed"" Literal ""on only one cluster at a time"" End IfStatement MethodInvocation ! duplicates isEmpty BlockStatement LocalVariableDeclaration ReferenceType StringBuilder VariableDeclarator svcNames ClassCreator ReferenceType StringBuilder LocalVariableDeclaration BasicType boolean VariableDeclarator first Literal true ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator svcName MemberReference duplicates BlockStatement IfStatement MemberReference ! first BlockStatement StatementExpression MethodInvocation svcNames Literal "","" append End StatementExpression Assignment MemberReference first Literal false = StatementExpression MethodInvocation svcNames MemberReference svcName append End LocalVariableDeclaration ReferenceType String VariableDeclarator clusterName MethodInvocation requests MethodInvocation next MethodInvocation getClusterName iterator LocalVariableDeclaration ReferenceType String VariableDeclarator msg IfStatement BinaryOperation == MethodInvocation duplicates size Literal 1 BlockStatement StatementExpression Assignment MemberReference msg BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Attempted to create a service which already exists: "" Literal "", clusterName="" MemberReference clusterName Literal "" serviceName="" MethodInvocation svcNames toString = BlockStatement StatementExpression Assignment MemberReference msg BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Attempted to create services which already exist: "" Literal "", clusterName="" MemberReference clusterName Literal "" serviceNames="" MethodInvocation svcNames toString = End ThrowStatement ClassCreator ReferenceType DuplicateResourceException MemberReference msg End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceRequest VariableDeclarator request MemberReference requests BlockStatement LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator configs ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Config LocalVariableDeclaration ReferenceType State VariableDeclarator state MemberReference State INIT LocalVariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation serviceFactory MemberReference cluster MethodInvocation request getServiceName createNew StatementExpression MethodInvocation s MemberReference state setDesiredState StatementExpression MethodInvocation s MemberReference configs updateDesiredConfigs StatementExpression MethodInvocation s MethodInvocation cluster getDesiredStackVersion setDesiredStackVersion StatementExpression MethodInvocation cluster MemberReference s addService StatementExpression MethodInvocation s persist End MethodDeclaration Modifier public synchronized Annotation Override createComponents FormalParameter ReferenceType Set TypeArgument ReferenceType ServiceComponentRequest requests AmbariException IfStatement MethodInvocation requests isEmpty BlockStatement StatementExpression MethodInvocation LOG Literal ""Received an empty requests set"" warn ReturnStatement End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String VariableDeclarator componentNames ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator duplicates ClassCreator ReferenceType HashSet TypeArgument ReferenceType String ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentRequest VariableDeclarator request MemberReference requests BlockStatement IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == MethodInvocation request getClusterName Literal null MethodInvocation request MethodInvocation isEmpty getClusterName BinaryOperation == MethodInvocation request getComponentName Literal null MethodInvocation request MethodInvocation isEmpty getComponentName BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid arguments"" Literal "", clustername and componentname should be"" Literal "" non-null and non-empty when trying to create a"" Literal "" component"" End LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster TryStatement StatementExpression Assignment MemberReference cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster = CatchClause CatchClauseParameter ClusterNotFoundException e ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException Literal ""Attempted to add a component to a cluster which doesn't exist:"" MemberReference e IfStatement BinaryOperation || BinaryOperation == MethodInvocation request getServiceName Literal null MethodInvocation request MethodInvocation isEmpty getServiceName BlockStatement LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation cluster getDesiredStackVersion LocalVariableDeclaration ReferenceType String VariableDeclarator serviceName MethodInvocation ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion MethodInvocation request getComponentName getComponentToService IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Looking up service name for component"" Literal "", componentName="" MethodInvocation request getComponentName Literal "", serviceName="" MemberReference serviceName debug End IfStatement BinaryOperation || BinaryOperation == MemberReference serviceName Literal null MethodInvocation serviceName isEmpty BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Could not find service for component"" Literal "", componentName="" MethodInvocation request getComponentName Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", stackInfo="" MethodInvocation stackId getStackId End StatementExpression MethodInvocation request MemberReference serviceName setServiceName End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a createComponent request"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", componentName="" MethodInvocation request getComponentName Literal "", request="" MemberReference request debug End IfStatement MethodInvocation ! componentNames MethodInvocation request getClusterName containsKey BlockStatement StatementExpression MethodInvocation componentNames MethodInvocation request getClusterName ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String put End IfStatement MethodInvocation ! componentNames MethodInvocation MethodInvocation request getServiceName containsKey MethodInvocation request getClusterName get BlockStatement StatementExpression MethodInvocation componentNames MethodInvocation MethodInvocation request getServiceName ClassCreator ReferenceType HashSet TypeArgument ReferenceType String put MethodInvocation request getClusterName get End IfStatement MethodInvocation componentNames MethodInvocation MethodInvocation request getServiceName get MethodInvocation MethodInvocation request getComponentName contains MethodInvocation request getClusterName get BlockStatement StatementExpression MethodInvocation duplicates BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""[clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", componentName="" MethodInvocation request getComponentName Literal ""]"" add ContinueStatement End StatementExpression MethodInvocation componentNames MethodInvocation MethodInvocation request getServiceName get MethodInvocation MethodInvocation request getComponentName add MethodInvocation request getClusterName get IfStatement BinaryOperation && BinaryOperation != MethodInvocation request getDesiredState Literal null MethodInvocation ! request MethodInvocation isEmpty getDesiredState BlockStatement LocalVariableDeclaration ReferenceType State VariableDeclarator state MethodInvocation State MethodInvocation request getDesiredState valueOf IfStatement BinaryOperation || MethodInvocation ! state isValidDesiredState BinaryOperation != MemberReference state MemberReference State INIT BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid desired state"" Literal "" only INIT state allowed during creation"" Literal "", providedDesiredState="" MethodInvocation request getDesiredState End End LocalVariableDeclaration ReferenceType Service VariableDeclarator s TryStatement StatementExpression Assignment MemberReference s MethodInvocation cluster MethodInvocation request getServiceName getService = CatchClause CatchClauseParameter ServiceNotFoundException e ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException Literal ""Attempted to add a component to a service which doesn't exist:"" MemberReference e TryStatement LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation s MethodInvocation request getComponentName getServiceComponent IfStatement BinaryOperation != MemberReference sc Literal null BlockStatement StatementExpression MethodInvocation duplicates BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""[clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", componentName="" MethodInvocation request getComponentName Literal ""]"" add ContinueStatement End CatchClause CatchClauseParameter AmbariException e LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation s getDesiredStackVersion IfStatement MethodInvocation ! ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion MethodInvocation s getName MethodInvocation request getComponentName isValidServiceComponent BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Unsupported or invalid component"" Literal "" in stack"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", componentName="" MethodInvocation request getComponentName Literal "", stackInfo="" MethodInvocation stackId getStackId End End IfStatement BinaryOperation != MethodInvocation componentNames size Literal 1 BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid arguments, updates allowed"" Literal ""on only one cluster at a time"" End IfStatement MethodInvocation ! duplicates isEmpty BlockStatement LocalVariableDeclaration ReferenceType StringBuilder VariableDeclarator names ClassCreator ReferenceType StringBuilder LocalVariableDeclaration BasicType boolean VariableDeclarator first Literal true ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator cName MemberReference duplicates BlockStatement IfStatement MemberReference ! first BlockStatement StatementExpression MethodInvocation names Literal "","" append End StatementExpression Assignment MemberReference first Literal false = StatementExpression MethodInvocation names MemberReference cName append End LocalVariableDeclaration ReferenceType String VariableDeclarator msg IfStatement BinaryOperation == MethodInvocation duplicates size Literal 1 BlockStatement StatementExpression Assignment MemberReference msg Literal ""Attempted to create a component which already exists: "" = BlockStatement StatementExpression Assignment MemberReference msg Literal ""Attempted to create components which already exist: "" = End ThrowStatement ClassCreator ReferenceType DuplicateResourceException BinaryOperation + MemberReference msg MethodInvocation names toString End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentRequest VariableDeclarator request MemberReference requests BlockStatement LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster LocalVariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation cluster MethodInvocation request getServiceName getService LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation serviceComponentFactory MemberReference s MethodInvocation request getComponentName createNew StatementExpression MethodInvocation sc MethodInvocation s getDesiredStackVersion setDesiredStackVersion IfStatement BinaryOperation && BinaryOperation != MethodInvocation request getDesiredState Literal null MethodInvocation ! request MethodInvocation isEmpty getDesiredState BlockStatement LocalVariableDeclaration ReferenceType State VariableDeclarator state MethodInvocation State MethodInvocation request getDesiredState valueOf StatementExpression MethodInvocation sc MemberReference state setDesiredState BlockStatement StatementExpression MethodInvocation sc MethodInvocation s getDesiredState setDesiredState End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator configs ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Config IfStatement BinaryOperation != MethodInvocation request getConfigVersions Literal null BlockStatement End StatementExpression MethodInvocation sc MemberReference configs updateDesiredConfigs StatementExpression MethodInvocation s MemberReference sc addServiceComponent StatementExpression MethodInvocation sc persist End MethodDeclaration Modifier public synchronized Annotation Override createHosts FormalParameter ReferenceType Set TypeArgument ReferenceType HostRequest requests AmbariException IfStatement MethodInvocation requests isEmpty BlockStatement StatementExpression MethodInvocation LOG Literal ""Received an empty requests set"" warn ReturnStatement End LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator duplicates ClassCreator ReferenceType HashSet TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator unknowns ClassCreator ReferenceType HashSet TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator allHosts ClassCreator ReferenceType HashSet TypeArgument ReferenceType String ForStatement EnhancedForControl VariableDeclaration ReferenceType HostRequest VariableDeclarator request MemberReference requests BlockStatement IfStatement BinaryOperation || BinaryOperation == MethodInvocation request getHostname Literal null MethodInvocation request MethodInvocation isEmpty getHostname BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid arguments, hostname"" Literal "" cannot be null"" End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a createHost request"" Literal "", hostname="" MethodInvocation request getHostname Literal "", request="" MemberReference request debug End IfStatement MethodInvocation allHosts MethodInvocation request getHostname contains BlockStatement StatementExpression MethodInvocation duplicates MethodInvocation request getHostname add ContinueStatement End StatementExpression MethodInvocation allHosts MethodInvocation request getHostname add TryStatement StatementExpression MethodInvocation clusters MethodInvocation request getHostname getHost CatchClause CatchClauseParameter HostNotFoundException e StatementExpression MethodInvocation unknowns MethodInvocation request getHostname add ContinueStatement IfStatement BinaryOperation != MethodInvocation request getClusterName Literal null BlockStatement TryStatement StatementExpression MethodInvocation clusters MethodInvocation request getClusterName getCluster CatchClause CatchClauseParameter ClusterNotFoundException e ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException BinaryOperation + BinaryOperation + Literal ""Attempted to add a host to a cluster which doesn't exist: "" Literal "" clusterName="" MethodInvocation request getClusterName End End IfStatement MethodInvocation ! duplicates isEmpty BlockStatement LocalVariableDeclaration ReferenceType StringBuilder VariableDeclarator names ClassCreator ReferenceType StringBuilder LocalVariableDeclaration BasicType boolean VariableDeclarator first Literal true ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator hName MemberReference duplicates BlockStatement IfStatement MemberReference ! first BlockStatement StatementExpression MethodInvocation names Literal "","" append End StatementExpression Assignment MemberReference first Literal false = StatementExpression MethodInvocation names MemberReference hName append End ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid request contains"" Literal "" duplicate hostnames"" Literal "", hostnames="" MethodInvocation names toString End IfStatement MethodInvocation ! unknowns isEmpty BlockStatement LocalVariableDeclaration ReferenceType StringBuilder VariableDeclarator names ClassCreator ReferenceType StringBuilder LocalVariableDeclaration BasicType boolean VariableDeclarator first Literal true ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator hName MemberReference unknowns BlockStatement IfStatement MemberReference ! first BlockStatement StatementExpression MethodInvocation names Literal "","" append End StatementExpression Assignment MemberReference first Literal false = StatementExpression MethodInvocation names MemberReference hName append End ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + Literal ""Attempted to add unknown hosts to a cluster.  "" Literal ""These hosts have not been registered with the server: "" MethodInvocation names toString End ForStatement EnhancedForControl VariableDeclaration ReferenceType HostRequest VariableDeclarator request MemberReference requests BlockStatement IfStatement BinaryOperation != MethodInvocation request getClusterName Literal null BlockStatement StatementExpression MethodInvocation clusters MethodInvocation request getHostname MethodInvocation request getClusterName mapHostToCluster End IfStatement BinaryOperation != MethodInvocation request getHostAttributes Literal null BlockStatement StatementExpression MethodInvocation clusters MethodInvocation MethodInvocation request getHostAttributes setHostAttributes MethodInvocation request getHostname getHost End End MethodDeclaration Modifier public synchronized Annotation Override createHostComponents FormalParameter ReferenceType Set TypeArgument ReferenceType ServiceComponentHostRequest requests AmbariException IfStatement MethodInvocation requests isEmpty BlockStatement StatementExpression MethodInvocation LOG Literal ""Received an empty requests set"" warn ReturnStatement End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String VariableDeclarator hostComponentNames ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator duplicates ClassCreator ReferenceType HashSet TypeArgument ReferenceType String ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHostRequest VariableDeclarator request MemberReference requests BlockStatement IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == MethodInvocation request getClusterName Literal null MethodInvocation request MethodInvocation isEmpty getClusterName BinaryOperation == MethodInvocation request getComponentName Literal null MethodInvocation request MethodInvocation isEmpty getComponentName BinaryOperation == MethodInvocation request getHostname Literal null MethodInvocation request MethodInvocation isEmpty getHostname BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + Literal ""Invalid arguments,"" Literal "" clustername, componentname and hostname should not be null"" Literal "" when trying to create a hostcomponent"" End LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster TryStatement StatementExpression Assignment MemberReference cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster = CatchClause CatchClauseParameter ClusterNotFoundException e ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException Literal ""Attempted to add a host_component to a cluster which doesn't exist: "" MemberReference e IfStatement BinaryOperation || BinaryOperation == MethodInvocation request getServiceName Literal null MethodInvocation request MethodInvocation isEmpty getServiceName BlockStatement LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation cluster getDesiredStackVersion LocalVariableDeclaration ReferenceType String VariableDeclarator serviceName MethodInvocation ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion MethodInvocation request getComponentName getComponentToService IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Looking up service name for component"" Literal "", componentName="" MethodInvocation request getComponentName Literal "", serviceName="" MemberReference serviceName debug End IfStatement BinaryOperation || BinaryOperation == MemberReference serviceName Literal null MethodInvocation serviceName isEmpty BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Could not find service for component"" Literal "", componentName="" MethodInvocation request getComponentName Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", stackInfo="" MethodInvocation stackId getStackId End StatementExpression MethodInvocation request MemberReference serviceName setServiceName End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a createHostComponent request"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", componentName="" MethodInvocation request getComponentName Literal "", hostname="" MethodInvocation request getHostname Literal "", request="" MemberReference request debug End IfStatement MethodInvocation ! hostComponentNames MethodInvocation request getClusterName containsKey BlockStatement StatementExpression MethodInvocation hostComponentNames MethodInvocation request getClusterName ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String put End IfStatement MethodInvocation ! hostComponentNames MethodInvocation MethodInvocation request getServiceName containsKey MethodInvocation request getClusterName get BlockStatement StatementExpression MethodInvocation hostComponentNames MethodInvocation MethodInvocation request getServiceName ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String put MethodInvocation request getClusterName get End IfStatement MethodInvocation ! hostComponentNames MethodInvocation MethodInvocation request getServiceName get MethodInvocation MethodInvocation request getComponentName containsKey MethodInvocation request getClusterName get BlockStatement StatementExpression MethodInvocation hostComponentNames MethodInvocation MethodInvocation request getServiceName get MethodInvocation MethodInvocation request getComponentName ClassCreator ReferenceType HashSet TypeArgument ReferenceType String put MethodInvocation request getClusterName get End IfStatement MethodInvocation hostComponentNames MethodInvocation MethodInvocation request getServiceName get MethodInvocation MethodInvocation request getComponentName get MethodInvocation MethodInvocation request getHostname contains MethodInvocation request getClusterName get BlockStatement StatementExpression MethodInvocation duplicates BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""[clusterName="" MethodInvocation request getClusterName Literal "", hostName="" MethodInvocation request getHostname Literal "", componentName="" MethodInvocation request getComponentName Literal ']' add ContinueStatement End StatementExpression MethodInvocation hostComponentNames MethodInvocation MethodInvocation request getServiceName get MethodInvocation MethodInvocation request getComponentName get MethodInvocation MethodInvocation request getHostname add MethodInvocation request getClusterName get IfStatement BinaryOperation && BinaryOperation != MethodInvocation request getDesiredState Literal null MethodInvocation ! request MethodInvocation isEmpty getDesiredState BlockStatement LocalVariableDeclaration ReferenceType State VariableDeclarator state MethodInvocation State MethodInvocation request getDesiredState valueOf IfStatement BinaryOperation || MethodInvocation ! state isValidDesiredState BinaryOperation != MemberReference state MemberReference State INIT BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid desired state"" Literal "" only INIT state allowed during creation"" Literal "", providedDesiredState="" MethodInvocation request getDesiredState End End LocalVariableDeclaration ReferenceType Service VariableDeclarator s TryStatement StatementExpression Assignment MemberReference s MethodInvocation cluster MethodInvocation request getServiceName getService = CatchClause CatchClauseParameter ServiceNotFoundException e ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""The service["" MethodInvocation request getServiceName Literal ""] associated with the component["" MethodInvocation request getComponentName Literal ""] doesn't exist for the cluster["" MethodInvocation request getClusterName Literal ""]"" LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation s MethodInvocation request getComponentName getServiceComponent LocalVariableDeclaration ReferenceType Host VariableDeclarator host TryStatement StatementExpression Assignment MemberReference host MethodInvocation clusters MethodInvocation request getHostname getHost = CatchClause CatchClauseParameter HostNotFoundException e ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException Literal ""Attempted to add a host_component to a host that doesn't exist: "" MemberReference e LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType Cluster VariableDeclarator mappedClusters MethodInvocation clusters MethodInvocation request getHostname getClustersForHost LocalVariableDeclaration BasicType boolean VariableDeclarator validCluster Literal false IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Looking to match host to cluster"" Literal "", hostnameViaReg="" MethodInvocation host getHostName Literal "", hostname="" MethodInvocation request getHostname Literal "", clusterName="" MethodInvocation request getClusterName Literal "", hostClusterMapCount="" MethodInvocation mappedClusters size debug End ForStatement EnhancedForControl VariableDeclaration ReferenceType Cluster VariableDeclarator mappedCluster MemberReference mappedClusters BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Host belongs to cluster"" Literal "", hostname="" MethodInvocation request getHostname Literal "", clusterName="" MethodInvocation mappedCluster getClusterName debug End IfStatement MethodInvocation mappedCluster MethodInvocation MethodInvocation request getClusterName equals getClusterName BlockStatement StatementExpression Assignment MemberReference validCluster Literal true = BreakStatement End End IfStatement MemberReference ! validCluster BlockStatement ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Attempted to add a host_component to a host that doesn't exist: "" Literal ""clusterName="" MethodInvocation request getClusterName Literal "", hostName="" MethodInvocation request getHostname End TryStatement LocalVariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation sc MethodInvocation request getHostname getServiceComponentHost IfStatement BinaryOperation != MemberReference sch Literal null BlockStatement StatementExpression MethodInvocation duplicates BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""[clusterName="" MethodInvocation request getClusterName Literal "", hostName="" MethodInvocation request getHostname Literal "", componentName="" MethodInvocation request getComponentName Literal ']' add ContinueStatement End CatchClause CatchClauseParameter AmbariException e End IfStatement BinaryOperation != MethodInvocation hostComponentNames size Literal 1 BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid arguments - updates allowed"" Literal "" on only one cluster at a time"" End IfStatement MethodInvocation ! duplicates isEmpty BlockStatement LocalVariableDeclaration ReferenceType StringBuilder VariableDeclarator names ClassCreator ReferenceType StringBuilder LocalVariableDeclaration BasicType boolean VariableDeclarator first Literal true ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator hName MemberReference duplicates BlockStatement IfStatement MemberReference ! first BlockStatement StatementExpression MethodInvocation names Literal "","" append End StatementExpression Assignment MemberReference first Literal false = StatementExpression MethodInvocation names MemberReference hName append End LocalVariableDeclaration ReferenceType String VariableDeclarator msg IfStatement BinaryOperation == MethodInvocation duplicates size Literal 1 BlockStatement StatementExpression Assignment MemberReference msg Literal ""Attempted to create a host_component which already exists: "" = BlockStatement StatementExpression Assignment MemberReference msg Literal ""Attempted to create host_component's which already exist: "" = End ThrowStatement ClassCreator ReferenceType DuplicateResourceException BinaryOperation + MemberReference msg MethodInvocation names toString End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHostRequest VariableDeclarator request MemberReference requests BlockStatement LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster LocalVariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation cluster MethodInvocation request getServiceName getService LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation s MethodInvocation request getComponentName getServiceComponent LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation sc getDesiredStackVersion LocalVariableDeclaration ReferenceType ComponentInfo VariableDeclarator compInfo MethodInvocation ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion MethodInvocation s getName MethodInvocation sc getName getComponentCategory LocalVariableDeclaration BasicType boolean VariableDeclarator isClient MethodInvocation compInfo isClient LocalVariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation serviceComponentHostFactory MemberReference sc MethodInvocation request getHostname MemberReference isClient createNew IfStatement BinaryOperation && BinaryOperation != MethodInvocation request getDesiredState Literal null MethodInvocation ! request MethodInvocation isEmpty getDesiredState BlockStatement LocalVariableDeclaration ReferenceType State VariableDeclarator state MethodInvocation State MethodInvocation request getDesiredState valueOf StatementExpression MethodInvocation sch MemberReference state setDesiredState End StatementExpression MethodInvocation sch MethodInvocation sc getDesiredStackVersion setDesiredStackVersion LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator configs ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Config IfStatement BinaryOperation != MethodInvocation request getConfigVersions Literal null BlockStatement End StatementExpression MethodInvocation sch MemberReference configs updateDesiredConfigs StatementExpression MethodInvocation sc MemberReference sch addServiceComponentHost StatementExpression MethodInvocation sch persist End MethodDeclaration Modifier public synchronized createConfiguration FormalParameter ReferenceType ConfigurationRequest request AmbariException IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == Literal null MethodInvocation request getClusterName MethodInvocation request MethodInvocation isEmpty getClusterName BinaryOperation == Literal null MethodInvocation request getType MethodInvocation request MethodInvocation isEmpty getType BinaryOperation == Literal null MethodInvocation request getVersionTag MethodInvocation request MethodInvocation isEmpty getVersionTag BinaryOperation == Literal null MethodInvocation request getConfigs MethodInvocation request MethodInvocation isEmpty getConfigs BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + Literal ""Invalid Arguments,"" Literal "" clustername, config type, config version and configs should not"" Literal "" be null or empty"" End LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator configs MethodInvocation cluster MethodInvocation request getType getDesiredConfigsByType IfStatement BinaryOperation == Literal null MemberReference configs BlockStatement StatementExpression Assignment MemberReference configs ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Config = End LocalVariableDeclaration ReferenceType Config VariableDeclarator config MethodInvocation configs MethodInvocation request getVersionTag get IfStatement MethodInvocation configs MethodInvocation request getVersionTag containsKey BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + Literal ""Configuration with that tag exists for '"" MethodInvocation request getType Literal ""'"" End StatementExpression Assignment MemberReference config MethodInvocation configFactory MemberReference cluster MethodInvocation request getType MethodInvocation request getConfigs createNew = StatementExpression MethodInvocation config MethodInvocation request getVersionTag setVersionTag StatementExpression MethodInvocation config persist StatementExpression MethodInvocation cluster MemberReference config addDesiredConfig MethodDeclaration Modifier public Annotation Override createUsers FormalParameter ReferenceType Set TypeArgument ReferenceType UserRequest requests AmbariException ForStatement EnhancedForControl VariableDeclaration ReferenceType UserRequest VariableDeclarator request MemberReference requests BlockStatement IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == Literal null MethodInvocation request getUsername MethodInvocation request MethodInvocation isEmpty getUsername BinaryOperation == Literal null MethodInvocation request getPassword MethodInvocation request MethodInvocation isEmpty getPassword BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException Literal ""Username and password must be supplied."" End LocalVariableDeclaration ReferenceType User VariableDeclarator user MethodInvocation users MethodInvocation request getUsername getAnyUser IfStatement BinaryOperation != Literal null MemberReference user ThrowStatement ClassCreator ReferenceType AmbariException Literal ""User already exists."" End StatementExpression MethodInvocation users MethodInvocation request getUsername MethodInvocation request getPassword createUser IfStatement BinaryOperation != Literal 0 MethodInvocation request MethodInvocation size getRoles BlockStatement StatementExpression Assignment MemberReference user MethodInvocation users MethodInvocation request getUsername getAnyUser = IfStatement BinaryOperation != Literal null MemberReference user BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator role MethodInvocation request getRoles BlockStatement IfStatement MethodInvocation ! user MethodInvocation MemberReference role contains getRoles StatementExpression MethodInvocation users MemberReference user MemberReference role addRoleToUser End End End End End MethodDeclaration Modifier private ReferenceType Stage createNewStage FormalParameter ReferenceType Cluster cluster FormalParameter BasicType long requestId LocalVariableDeclaration ReferenceType String VariableDeclarator logDir BinaryOperation + BinaryOperation + MemberReference baseLogDir Literal ""/"" MemberReference requestId LocalVariableDeclaration ReferenceType Stage VariableDeclarator stage ClassCreator ReferenceType Stage MemberReference requestId MemberReference logDir MethodInvocation cluster getClusterName ReturnStatement MemberReference stage MethodDeclaration Modifier private createHostAction FormalParameter ReferenceType Cluster cluster FormalParameter ReferenceType Stage stage FormalParameter ReferenceType ServiceComponentHost scHost FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String configurations FormalParameter ReferenceType RoleCommand command FormalParameter BasicType long nowTimestamp FormalParameter ReferenceType ServiceComponentHostEvent event AmbariException StatementExpression MethodInvocation stage MethodInvocation scHost getHostName MethodInvocation Role MethodInvocation scHost getServiceComponentName valueOf MemberReference command MemberReference event MethodInvocation scHost getClusterName MethodInvocation scHost getServiceName addHostRoleExecutionCommand LocalVariableDeclaration ReferenceType ExecutionCommand VariableDeclarator execCmd MethodInvocation stage MethodInvocation getExecutionCommand MethodInvocation scHost getHostName MethodInvocation scHost getServiceComponentName getExecutionCommandWrapper StatementExpression MethodInvocation execCmd MethodInvocation StageUtils MemberReference cluster getClusterHostInfo setClusterHostInfo LocalVariableDeclaration ReferenceType Host VariableDeclarator host MethodInvocation clusters MethodInvocation scHost getHostName getHost StatementExpression MethodInvocation execCmd MemberReference configurations setConfigurations LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation scHost getDesiredStackVersion LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType List TypeArgument ReferenceType RepositoryInfo VariableDeclarator repos MethodInvocation ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion getRepository LocalVariableDeclaration ReferenceType String VariableDeclarator repoInfo Literal """" IfStatement MethodInvocation ! repos MethodInvocation host getOsType containsKey BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Could not retrieve repo information for host"" Literal "", hostname="" MethodInvocation scHost getHostName Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", stackInfo="" MethodInvocation stackId getStackId warn BlockStatement StatementExpression Assignment MemberReference repoInfo MethodInvocation gson MethodInvocation repos MethodInvocation host getOsType get toJson = End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Sending repo information to agent"" Literal "", hostname="" MethodInvocation scHost getHostName Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", stackInfo="" MethodInvocation stackId getStackId Literal "", repoInfo="" MemberReference repoInfo debug End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator params ClassCreator ReferenceType TreeMap TypeArgument ReferenceType String TypeArgument ReferenceType String StatementExpression MethodInvocation params Literal ""repo_info"" MemberReference repoInfo put StatementExpression MethodInvocation params Literal ""jdk_location"" This MemberReference jdkResourceUrl put StatementExpression MethodInvocation execCmd MemberReference params setHostLevelParams LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator roleParams ClassCreator ReferenceType TreeMap TypeArgument ReferenceType String TypeArgument ReferenceType String StatementExpression MethodInvocation execCmd MemberReference roleParams setRoleParams ReturnStatement MethodDeclaration Modifier private synchronized ReferenceType Set TypeArgument ReferenceType ClusterResponse getClusters FormalParameter ReferenceType ClusterRequest request AmbariException LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType ClusterResponse VariableDeclarator response ClassCreator ReferenceType HashSet TypeArgument ReferenceType ClusterResponse IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a getClusters request"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", clusterId="" MethodInvocation request getClusterId Literal "", stackInfo="" MethodInvocation request getStackVersion debug End IfStatement BinaryOperation != MethodInvocation request getClusterName Literal null BlockStatement LocalVariableDeclaration ReferenceType Cluster VariableDeclarator c MethodInvocation clusters MethodInvocation request getClusterName getCluster StatementExpression MethodInvocation response MethodInvocation c convertToResponse add ReturnStatement MemberReference response IfStatement BinaryOperation != MethodInvocation request getClusterId Literal null BlockStatement LocalVariableDeclaration ReferenceType Cluster VariableDeclarator c MethodInvocation clusters MethodInvocation request getClusterId getClusterById StatementExpression MethodInvocation response MethodInvocation c convertToResponse add ReturnStatement MemberReference response End End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Cluster VariableDeclarator allClusters MethodInvocation clusters getClusters ForStatement EnhancedForControl VariableDeclaration ReferenceType Cluster VariableDeclarator c MethodInvocation allClusters values BlockStatement IfStatement BinaryOperation != MethodInvocation request getStackVersion Literal null BlockStatement IfStatement MethodInvocation ! request MethodInvocation MethodInvocation c MethodInvocation getStackId getDesiredStackVersion equals getStackVersion BlockStatement ContinueStatement End End StatementExpression MethodInvocation response MethodInvocation c convertToResponse add End LocalVariableDeclaration ReferenceType StringBuilder VariableDeclarator builder ClassCreator ReferenceType StringBuilder IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation clusters MemberReference builder debugDump StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Cluster State for cluster "" MethodInvocation builder toString debug End ReturnStatement MemberReference response MethodDeclaration Modifier private synchronized ReferenceType Set TypeArgument ReferenceType ServiceResponse getServices FormalParameter ReferenceType ServiceRequest request AmbariException IfStatement BinaryOperation || BinaryOperation == MethodInvocation request getClusterName Literal null MethodInvocation request MethodInvocation isEmpty getClusterName BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + Literal ""Invalid arguments, cluster name"" Literal "" cannot be null"" End LocalVariableDeclaration ReferenceType String VariableDeclarator clusterName MethodInvocation request getClusterName LocalVariableDeclaration Modifier final ReferenceType Cluster VariableDeclarator cluster TryStatement StatementExpression Assignment MemberReference cluster MethodInvocation clusters MemberReference clusterName getCluster = CatchClause CatchClauseParameter ObjectNotFoundException e ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException Literal ""Parent Cluster resource doesn't exist"" MemberReference e LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType ServiceResponse VariableDeclarator response ClassCreator ReferenceType HashSet TypeArgument ReferenceType ServiceResponse IfStatement BinaryOperation != MethodInvocation request getServiceName Literal null BlockStatement LocalVariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation cluster MethodInvocation request getServiceName getService StatementExpression MethodInvocation response MethodInvocation s convertToResponse add ReturnStatement MemberReference response End LocalVariableDeclaration BasicType boolean VariableDeclarator checkDesiredState Literal false LocalVariableDeclaration ReferenceType State VariableDeclarator desiredStateToCheck Literal null IfStatement BinaryOperation && BinaryOperation != MethodInvocation request getDesiredState Literal null MethodInvocation ! request MethodInvocation isEmpty getDesiredState BlockStatement StatementExpression Assignment MemberReference desiredStateToCheck MethodInvocation State MethodInvocation request getDesiredState valueOf = IfStatement MethodInvocation ! desiredStateToCheck isValidDesiredState BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + Literal ""Invalid arguments, invalid desired"" Literal "" state, desiredState="" MemberReference desiredStateToCheck End StatementExpression Assignment MemberReference checkDesiredState Literal true = End ForStatement EnhancedForControl VariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation cluster MethodInvocation values getServices BlockStatement IfStatement BinaryOperation && MemberReference checkDesiredState BinaryOperation != MemberReference desiredStateToCheck MethodInvocation s getDesiredState BlockStatement ContinueStatement End StatementExpression MethodInvocation response MethodInvocation s convertToResponse add End ReturnStatement MemberReference response MethodDeclaration Modifier private synchronized ReferenceType Set TypeArgument ReferenceType ServiceComponentResponse getComponents FormalParameter ReferenceType ServiceComponentRequest request AmbariException IfStatement BinaryOperation || BinaryOperation == MethodInvocation request getClusterName Literal null MethodInvocation request MethodInvocation isEmpty getClusterName BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid arguments, cluster name"" Literal "" should be non-null"" End LocalVariableDeclaration Modifier final ReferenceType Cluster VariableDeclarator cluster TryStatement StatementExpression Assignment MemberReference cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster = CatchClause CatchClauseParameter ObjectNotFoundException e ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException Literal ""Parent Cluster resource doesn't exist"" MemberReference e LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType ServiceComponentResponse VariableDeclarator response ClassCreator ReferenceType HashSet TypeArgument ReferenceType ServiceComponentResponse IfStatement BinaryOperation != MethodInvocation request getComponentName Literal null BlockStatement IfStatement BinaryOperation == MethodInvocation request getServiceName Literal null BlockStatement LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation cluster getDesiredStackVersion LocalVariableDeclaration ReferenceType String VariableDeclarator serviceName MethodInvocation ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion MethodInvocation request getComponentName getComponentToService IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Looking up service name for component"" Literal "", componentName="" MethodInvocation request getComponentName Literal "", serviceName="" MemberReference serviceName debug End IfStatement BinaryOperation || BinaryOperation == MemberReference serviceName Literal null MethodInvocation serviceName isEmpty BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Could not find service for component"" Literal "", componentName="" MethodInvocation request getComponentName Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", stackInfo="" MethodInvocation stackId getStackId End StatementExpression MethodInvocation request MemberReference serviceName setServiceName End LocalVariableDeclaration Modifier final ReferenceType Service VariableDeclarator s TryStatement StatementExpression Assignment MemberReference s MethodInvocation cluster MethodInvocation request getServiceName getService = CatchClause CatchClauseParameter ObjectNotFoundException e ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException Literal ""Parent Service resource doesn't exist"" MemberReference e LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation s MethodInvocation request getComponentName getServiceComponent StatementExpression MethodInvocation response MethodInvocation sc convertToResponse add ReturnStatement MemberReference response End LocalVariableDeclaration BasicType boolean VariableDeclarator checkDesiredState Literal false LocalVariableDeclaration ReferenceType State VariableDeclarator desiredStateToCheck Literal null IfStatement BinaryOperation && BinaryOperation != MethodInvocation request getDesiredState Literal null MethodInvocation ! request MethodInvocation isEmpty getDesiredState BlockStatement StatementExpression Assignment MemberReference desiredStateToCheck MethodInvocation State MethodInvocation request getDesiredState valueOf = IfStatement MethodInvocation ! desiredStateToCheck isValidDesiredState BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + Literal ""Invalid arguments, invalid desired"" Literal "" state, desiredState="" MemberReference desiredStateToCheck End StatementExpression Assignment MemberReference checkDesiredState Literal true = End LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType Service VariableDeclarator services ClassCreator ReferenceType HashSet TypeArgument ReferenceType Service IfStatement BinaryOperation && BinaryOperation != MethodInvocation request getServiceName Literal null MethodInvocation ! request MethodInvocation isEmpty getServiceName BlockStatement StatementExpression MethodInvocation services MethodInvocation cluster MethodInvocation request getServiceName getService add BlockStatement StatementExpression MethodInvocation services MethodInvocation cluster MethodInvocation values getServices addAll End ForStatement EnhancedForControl VariableDeclaration ReferenceType Service VariableDeclarator s MemberReference services BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation s MethodInvocation values getServiceComponents BlockStatement IfStatement BinaryOperation && MemberReference checkDesiredState BinaryOperation != MemberReference desiredStateToCheck MethodInvocation sc getDesiredState BlockStatement ContinueStatement End StatementExpression MethodInvocation response MethodInvocation sc convertToResponse add End End ReturnStatement MemberReference response MethodDeclaration Modifier private synchronized ReferenceType Set TypeArgument ReferenceType HostResponse getHosts FormalParameter ReferenceType HostRequest request AmbariException LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType Host VariableDeclarator hosts LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType HostResponse VariableDeclarator response ClassCreator ReferenceType HashSet TypeArgument ReferenceType HostResponse LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster Literal null LocalVariableDeclaration ReferenceType String VariableDeclarator clusterName MethodInvocation request getClusterName LocalVariableDeclaration ReferenceType String VariableDeclarator hostName MethodInvocation request getHostname IfStatement BinaryOperation != MemberReference clusterName Literal null BlockStatement TryStatement StatementExpression Assignment MemberReference cluster MethodInvocation clusters MemberReference clusterName getCluster = CatchClause CatchClauseParameter ObjectNotFoundException e ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException Literal ""Parent Cluster resource doesn't exist"" MemberReference e End IfStatement BinaryOperation == MemberReference hostName Literal null BlockStatement StatementExpression Assignment MemberReference hosts MethodInvocation clusters getHosts = BlockStatement StatementExpression Assignment MemberReference hosts ClassCreator ReferenceType ArrayList TypeArgument ReferenceType Host = StatementExpression MethodInvocation hosts MethodInvocation clusters MethodInvocation request getHostname getHost add End ForStatement EnhancedForControl VariableDeclaration ReferenceType Host VariableDeclarator h MemberReference hosts BlockStatement IfStatement BinaryOperation != MemberReference clusterName Literal null BlockStatement IfStatement MethodInvocation clusters MethodInvocation MemberReference cluster contains MethodInvocation h getHostName getClustersForHost BlockStatement LocalVariableDeclaration ReferenceType HostResponse VariableDeclarator r MethodInvocation h convertToResponse StatementExpression MethodInvocation r MemberReference clusterName setClusterName StatementExpression MethodInvocation response MemberReference r add IfStatement BinaryOperation != MemberReference hostName Literal null BlockStatement ThrowStatement ClassCreator ReferenceType HostNotFoundException MemberReference hostName End End BlockStatement LocalVariableDeclaration ReferenceType HostResponse VariableDeclarator r MethodInvocation h convertToResponse LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType Cluster VariableDeclarator clustersForHost MethodInvocation clusters MethodInvocation h getHostName getClustersForHost IfStatement BinaryOperation && BinaryOperation != MemberReference clustersForHost Literal null BinaryOperation != MethodInvocation clustersForHost size Literal 0 BlockStatement StatementExpression MethodInvocation r MethodInvocation clustersForHost MethodInvocation next MethodInvocation getClusterName iterator setClusterName End StatementExpression MethodInvocation response MemberReference r add End End ReturnStatement MemberReference response MethodDeclaration Modifier private synchronized ReferenceType Set TypeArgument ReferenceType ServiceComponentHostResponse getHostComponents FormalParameter ReferenceType ServiceComponentHostRequest request AmbariException IfStatement BinaryOperation || BinaryOperation == MethodInvocation request getClusterName Literal null MethodInvocation request MethodInvocation isEmpty getClusterName BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException Literal ""Invalid arguments, cluster name should not be null"" End LocalVariableDeclaration Modifier final ReferenceType Cluster VariableDeclarator cluster TryStatement StatementExpression Assignment MemberReference cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster = CatchClause CatchClauseParameter ClusterNotFoundException e ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException Literal ""Parent Cluster resource doesn't exist"" MemberReference e IfStatement BinaryOperation != MethodInvocation request getHostname Literal null BlockStatement TryStatement IfStatement MethodInvocation ! clusters MethodInvocation MemberReference cluster contains MethodInvocation request getHostname getClustersForHost BlockStatement ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException Literal ""Parent Host resource doesn't exist"" ClassCreator ReferenceType HostNotFoundException MethodInvocation request getClusterName MethodInvocation request getHostname End CatchClause CatchClauseParameter HostNotFoundException e ThrowStatement ClassCreator ReferenceType ParentObjectNotFoundException Literal ""Parent Host resource doesn't exist"" ClassCreator ReferenceType HostNotFoundException MethodInvocation request getClusterName MethodInvocation request getHostname End IfStatement BinaryOperation != MethodInvocation request getComponentName Literal null BlockStatement IfStatement BinaryOperation || BinaryOperation == MethodInvocation request getServiceName Literal null MethodInvocation request MethodInvocation isEmpty getServiceName BlockStatement LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation cluster getDesiredStackVersion LocalVariableDeclaration ReferenceType String VariableDeclarator serviceName MethodInvocation ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion MethodInvocation request getComponentName getComponentToService IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Looking up service name for component"" Literal "", componentName="" MethodInvocation request getComponentName Literal "", serviceName="" MemberReference serviceName Literal "", stackInfo="" MethodInvocation stackId getStackId debug End IfStatement BinaryOperation || BinaryOperation == MemberReference serviceName Literal null MethodInvocation serviceName isEmpty BlockStatement ThrowStatement ClassCreator ReferenceType ServiceComponentHostNotFoundException MethodInvocation cluster getClusterName Literal null MethodInvocation request getComponentName MethodInvocation request getHostname End StatementExpression MethodInvocation request MemberReference serviceName setServiceName End End LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType Service VariableDeclarator services ClassCreator ReferenceType HashSet TypeArgument ReferenceType Service IfStatement BinaryOperation && BinaryOperation != MethodInvocation request getServiceName Literal null MethodInvocation ! request MethodInvocation isEmpty getServiceName BlockStatement StatementExpression MethodInvocation services MethodInvocation cluster MethodInvocation request getServiceName getService add BlockStatement StatementExpression MethodInvocation services MethodInvocation cluster MethodInvocation values getServices addAll End LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType ServiceComponentHostResponse VariableDeclarator response ClassCreator ReferenceType HashSet TypeArgument ReferenceType ServiceComponentHostResponse LocalVariableDeclaration BasicType boolean VariableDeclarator checkDesiredState Literal false LocalVariableDeclaration ReferenceType State VariableDeclarator desiredStateToCheck Literal null IfStatement BinaryOperation && BinaryOperation != MethodInvocation request getDesiredState Literal null MethodInvocation ! request MethodInvocation isEmpty getDesiredState BlockStatement StatementExpression Assignment MemberReference desiredStateToCheck MethodInvocation State MethodInvocation request getDesiredState valueOf = IfStatement MethodInvocation ! desiredStateToCheck isValidDesiredState BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + Literal ""Invalid arguments, invalid desired"" Literal "" state, desiredState="" MemberReference desiredStateToCheck End StatementExpression Assignment MemberReference checkDesiredState Literal true = End ForStatement EnhancedForControl VariableDeclaration ReferenceType Service VariableDeclarator s MemberReference services BlockStatement LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType ServiceComponent VariableDeclarator components ClassCreator ReferenceType HashSet TypeArgument ReferenceType ServiceComponent IfStatement BinaryOperation != MethodInvocation request getComponentName Literal null BlockStatement StatementExpression MethodInvocation components MethodInvocation s MethodInvocation request getComponentName getServiceComponent add BlockStatement StatementExpression MethodInvocation components MethodInvocation s MethodInvocation values getServiceComponents addAll End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MemberReference components BlockStatement IfStatement BinaryOperation != MethodInvocation request getComponentName Literal null BlockStatement IfStatement MethodInvocation ! sc MethodInvocation MethodInvocation request getComponentName equals getName BlockStatement ContinueStatement End End IfStatement BinaryOperation != MethodInvocation request getHostname Literal null BlockStatement TryStatement LocalVariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation sc MethodInvocation request getHostname getServiceComponentHost IfStatement BinaryOperation && MemberReference checkDesiredState BinaryOperation != MemberReference desiredStateToCheck MethodInvocation sch getDesiredState BlockStatement ContinueStatement End LocalVariableDeclaration ReferenceType ServiceComponentHostResponse VariableDeclarator r MethodInvocation sch convertToResponse StatementExpression MethodInvocation response MemberReference r add CatchClause CatchClauseParameter ServiceComponentHostNotFoundException e IfStatement BinaryOperation && BinaryOperation != MethodInvocation request getServiceName Literal null BinaryOperation != MethodInvocation request getComponentName Literal null BlockStatement ThrowStatement ClassCreator ReferenceType ServiceComponentHostNotFoundException MethodInvocation cluster getClusterName MethodInvocation request getServiceName MethodInvocation request getComponentName MethodInvocation request getHostname BlockStatement End BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation sc MethodInvocation values getServiceComponentHosts BlockStatement IfStatement BinaryOperation && MemberReference checkDesiredState BinaryOperation != MemberReference desiredStateToCheck MethodInvocation sch getDesiredState BlockStatement ContinueStatement End LocalVariableDeclaration ReferenceType ServiceComponentHostResponse VariableDeclarator r MethodInvocation sch convertToResponse StatementExpression MethodInvocation response MemberReference r add End End End End ReturnStatement MemberReference response MethodDeclaration Modifier private synchronized ReferenceType Set TypeArgument ReferenceType ConfigurationResponse getConfigurations FormalParameter ReferenceType ConfigurationRequest request AmbariException IfStatement BinaryOperation == MethodInvocation request getClusterName Literal null BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid arguments, cluster name"" Literal "" should not be null"" End LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType ConfigurationResponse VariableDeclarator responses ClassCreator ReferenceType HashSet TypeArgument ReferenceType ConfigurationResponse IfStatement BinaryOperation && BinaryOperation != Literal null MethodInvocation request getType BinaryOperation != Literal null MethodInvocation request getVersionTag BlockStatement LocalVariableDeclaration ReferenceType Config VariableDeclarator config MethodInvocation cluster MethodInvocation request getType MethodInvocation request getVersionTag getDesiredConfig IfStatement BinaryOperation != Literal null MemberReference config BlockStatement LocalVariableDeclaration ReferenceType ConfigurationResponse VariableDeclarator response ClassCreator ReferenceType ConfigurationResponse MethodInvocation cluster getClusterName MethodInvocation config getType MethodInvocation config getVersionTag MethodInvocation config getProperties StatementExpression MethodInvocation responses MemberReference response add End BlockStatement IfStatement BinaryOperation != Literal null MethodInvocation request getType BlockStatement LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator configs MethodInvocation cluster MethodInvocation request getType getDesiredConfigsByType IfStatement BinaryOperation != Literal null MemberReference configs BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator entry MethodInvocation configs entrySet BlockStatement LocalVariableDeclaration ReferenceType ConfigurationResponse VariableDeclarator response ClassCreator ReferenceType ConfigurationResponse MethodInvocation cluster getClusterName MethodInvocation request getType MethodInvocation entry MethodInvocation getVersionTag getValue ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String StatementExpression MethodInvocation responses MemberReference response add End End BlockStatement LocalVariableDeclaration ReferenceType Collection TypeArgument ReferenceType Config VariableDeclarator all MethodInvocation cluster getAllConfigs ForStatement EnhancedForControl VariableDeclaration ReferenceType Config VariableDeclarator config MemberReference all BlockStatement LocalVariableDeclaration ReferenceType ConfigurationResponse VariableDeclarator response ClassCreator ReferenceType ConfigurationResponse MethodInvocation cluster getClusterName MethodInvocation config getType MethodInvocation config getVersionTag ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String StatementExpression MethodInvocation responses MemberReference response add End End End ReturnStatement MemberReference responses MethodDeclaration Modifier public synchronized Annotation Override ReferenceType RequestStatusResponse updateCluster FormalParameter ReferenceType ClusterRequest request AmbariException IfStatement BinaryOperation || BinaryOperation == MethodInvocation request getClusterName Literal null MethodInvocation request MethodInvocation isEmpty getClusterName BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid arguments, cluster name"" Literal "" should not be null"" End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a updateCluster request"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", request="" MemberReference request debug End LocalVariableDeclaration Modifier final ReferenceType Cluster VariableDeclarator c MethodInvocation clusters MethodInvocation request getClusterName getCluster StatementExpression MethodInvocation clusters MethodInvocation request getHostNames MethodInvocation request getClusterName mapHostsToCluster IfStatement MethodInvocation ! request MethodInvocation MethodInvocation c MethodInvocation getStackId getDesiredStackVersion equals getStackVersion BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Update of desired stack version"" Literal "" not supported"" End ReturnStatement Literal null MethodDeclaration Modifier private ReferenceType String getJobTrackerHost FormalParameter ReferenceType Cluster cluster TryStatement LocalVariableDeclaration ReferenceType Service VariableDeclarator svc MethodInvocation cluster Literal ""MAPREDUCE"" getService LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation svc MethodInvocation Role.JOBTRACKER toString getServiceComponent IfStatement BinaryOperation && BinaryOperation != MethodInvocation sc getServiceComponentHosts Literal null MethodInvocation ! sc MethodInvocation isEmpty getServiceComponentHosts BlockStatement ReturnStatement MethodInvocation sc MethodInvocation keySet MethodInvocation iterator MethodInvocation next getServiceComponentHosts End CatchClause CatchClauseParameter AmbariException ex ReturnStatement Literal null ReturnStatement Literal null MethodDeclaration Modifier private ReferenceType RequestStatusResponse doStageCreation FormalParameter ReferenceType Cluster cluster FormalParameter ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType Service changedServices FormalParameter ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponent changedComps FormalParameter ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost changedScHosts AmbariException IfStatement BinaryOperation && BinaryOperation && BinaryOperation || BinaryOperation == MemberReference changedServices Literal null MethodInvocation changedServices isEmpty BinaryOperation || BinaryOperation == MemberReference changedComps Literal null MethodInvocation changedComps isEmpty BinaryOperation || BinaryOperation == MemberReference changedScHosts Literal null MethodInvocation changedScHosts isEmpty BlockStatement ReturnStatement Literal null End LocalVariableDeclaration ReferenceType Long VariableDeclarator requestId Literal null LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType Stage VariableDeclarator stages Literal null LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator smokeTestServices ClassCreator ReferenceType HashSet TypeArgument ReferenceType String IfStatement BinaryOperation != MemberReference changedServices Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType Service VariableDeclarator entry MethodInvocation changedServices entrySet BlockStatement IfStatement BinaryOperation != MemberReference State STARTED MethodInvocation entry getKey BlockStatement ContinueStatement End ForStatement EnhancedForControl VariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation entry getValue BlockStatement IfStatement BinaryOperation == MemberReference State INSTALLED MethodInvocation s getDesiredState BlockStatement StatementExpression MethodInvocation smokeTestServices MethodInvocation s getName add End End End End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Integer VariableDeclarator changedComponentCount ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Integer ForStatement EnhancedForControl VariableDeclaration ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost VariableDeclarator stateScHostMap MethodInvocation changedScHosts values BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost VariableDeclarator entry MethodInvocation stateScHostMap entrySet BlockStatement IfStatement BinaryOperation != MemberReference State STARTED MethodInvocation entry getKey BlockStatement ContinueStatement End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation entry getValue BlockStatement IfStatement BinaryOperation && BinaryOperation != MemberReference State START_FAILED MethodInvocation sch getState BinaryOperation != MemberReference State INSTALLED MethodInvocation sch getState BlockStatement ContinueStatement End IfStatement MethodInvocation ! changedComponentCount MethodInvocation sch getServiceName containsKey BlockStatement StatementExpression MethodInvocation changedComponentCount MethodInvocation sch getServiceName ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Integer put End IfStatement MethodInvocation ! changedComponentCount MethodInvocation MethodInvocation sch getServiceComponentName containsKey MethodInvocation sch getServiceName get BlockStatement StatementExpression MethodInvocation changedComponentCount MethodInvocation MethodInvocation sch getServiceComponentName Literal 1 put MethodInvocation sch getServiceName get BlockStatement LocalVariableDeclaration ReferenceType Integer VariableDeclarator i MethodInvocation changedComponentCount MethodInvocation MethodInvocation sch getServiceComponentName get MethodInvocation sch getServiceName get StatementExpression MethodInvocation changedComponentCount MethodInvocation MethodInvocation sch getServiceComponentName MemberReference ++ i put MethodInvocation sch getServiceName get End End End End ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Integer VariableDeclarator entry MethodInvocation changedComponentCount entrySet BlockStatement LocalVariableDeclaration ReferenceType String VariableDeclarator serviceName MethodInvocation entry getKey IfStatement BinaryOperation > MethodInvocation entry MethodInvocation size getValue Literal 1 BlockStatement StatementExpression MethodInvocation smokeTestServices MemberReference serviceName add ContinueStatement End ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator componentName MethodInvocation changedComponentCount MethodInvocation keySet MemberReference serviceName get BlockStatement LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation cluster MethodInvocation MemberReference componentName getServiceComponent MemberReference serviceName getService LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation sc getDesiredStackVersion LocalVariableDeclaration ReferenceType ComponentInfo VariableDeclarator compInfo MethodInvocation ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion MemberReference serviceName MemberReference componentName getComponentCategory IfStatement MethodInvocation compInfo isMaster BlockStatement StatementExpression MethodInvocation smokeTestServices MemberReference serviceName add End End End IfStatement BinaryOperation || MethodInvocation ! changedScHosts isEmpty MethodInvocation ! smokeTestServices isEmpty BlockStatement LocalVariableDeclaration BasicType long VariableDeclarator nowTimestamp MethodInvocation System currentTimeMillis StatementExpression Assignment MemberReference requestId MethodInvocation Long MethodInvocation actionManager getNextRequestId valueOf = LocalVariableDeclaration BasicType long VariableDeclarator stageId Literal 0 LocalVariableDeclaration ReferenceType Stage VariableDeclarator stage MethodInvocation MemberReference cluster MethodInvocation requestId longValue createNewStage StatementExpression MethodInvocation stage MemberReference stageId setStageId LocalVariableDeclaration ReferenceType String VariableDeclarator jobtrackerHost This MethodInvocation MemberReference cluster getJobTrackerHost ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator compName MethodInvocation changedScHosts keySet BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType State VariableDeclarator newState MethodInvocation changedScHosts MethodInvocation keySet MemberReference compName get BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator scHost MethodInvocation changedScHosts MethodInvocation MemberReference newState get MemberReference compName get BlockStatement LocalVariableDeclaration ReferenceType RoleCommand VariableDeclarator roleCommand LocalVariableDeclaration ReferenceType State VariableDeclarator oldSchState MethodInvocation scHost getState LocalVariableDeclaration ReferenceType ServiceComponentHostEvent VariableDeclarator event SwitchStatement MemberReference newState SwitchStatementCase INSTALLED IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == MemberReference oldSchState MemberReference State INIT BinaryOperation == MemberReference oldSchState MemberReference State UNINSTALLED BinaryOperation == MemberReference oldSchState MemberReference State INSTALLED BinaryOperation == MemberReference oldSchState MemberReference State INSTALLING BinaryOperation == MemberReference oldSchState MemberReference State INSTALL_FAILED BlockStatement StatementExpression Assignment MemberReference roleCommand MemberReference RoleCommand INSTALL = StatementExpression Assignment MemberReference event ClassCreator ReferenceType ServiceComponentHostInstallEvent MethodInvocation scHost getServiceComponentName MethodInvocation scHost getHostName MemberReference nowTimestamp MethodInvocation scHost MethodInvocation getStackId getDesiredStackVersion = IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == MemberReference oldSchState MemberReference State STARTED BinaryOperation == MemberReference oldSchState MemberReference State START_FAILED BinaryOperation == MemberReference oldSchState MemberReference State INSTALLED BinaryOperation == MemberReference oldSchState MemberReference State STOP_FAILED BlockStatement StatementExpression Assignment MemberReference roleCommand MemberReference RoleCommand STOP = StatementExpression Assignment MemberReference event ClassCreator ReferenceType ServiceComponentHostStopEvent MethodInvocation scHost getServiceComponentName MethodInvocation scHost getHostName MemberReference nowTimestamp = BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid transition for"" Literal "" servicecomponenthost"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation scHost getServiceName Literal "", componentName="" MethodInvocation scHost getServiceComponentName Literal "", hostname="" MethodInvocation scHost getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState End End BreakStatement SwitchStatementCase STARTED LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation scHost getDesiredStackVersion LocalVariableDeclaration ReferenceType ComponentInfo VariableDeclarator compInfo MethodInvocation ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion MethodInvocation scHost getServiceName MethodInvocation scHost getServiceComponentName getComponentCategory IfStatement BinaryOperation || BinaryOperation || BinaryOperation == MemberReference oldSchState MemberReference State INSTALLED BinaryOperation == MemberReference oldSchState MemberReference State START_FAILED BinaryOperation == MemberReference oldSchState MemberReference State STARTING BlockStatement StatementExpression Assignment MemberReference roleCommand MemberReference RoleCommand START = StatementExpression Assignment MemberReference event ClassCreator ReferenceType ServiceComponentHostStartEvent MethodInvocation scHost getServiceComponentName MethodInvocation scHost getHostName MemberReference nowTimestamp MethodInvocation scHost getDesiredConfigVersionsRecursive = BlockStatement LocalVariableDeclaration ReferenceType String VariableDeclarator error BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid transition for"" Literal "" servicecomponenthost"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation scHost getServiceName Literal "", componentName="" MethodInvocation scHost getServiceComponentName Literal "", hostname="" MethodInvocation scHost getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState IfStatement MethodInvocation compInfo isMaster BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException MemberReference error BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Ignoring: "" MemberReference error info ContinueStatement End End BreakStatement SwitchStatementCase UNINSTALLED IfStatement BinaryOperation || BinaryOperation == MemberReference oldSchState MemberReference State INSTALLED BinaryOperation == MemberReference oldSchState MemberReference State UNINSTALL_FAILED BlockStatement StatementExpression Assignment MemberReference roleCommand MemberReference RoleCommand UNINSTALL = StatementExpression Assignment MemberReference event ClassCreator ReferenceType ServiceComponentHostStartEvent MethodInvocation scHost getServiceComponentName MethodInvocation scHost getHostName MemberReference nowTimestamp MethodInvocation scHost getDesiredConfigVersionsRecursive = BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid transition for"" Literal "" servicecomponenthost"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation scHost getServiceName Literal "", componentName="" MethodInvocation scHost getServiceComponentName Literal "", hostname="" MethodInvocation scHost getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState End BreakStatement SwitchStatementCase INIT ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Unsupported transition to INIT for"" Literal "" servicecomponenthost"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation scHost getServiceName Literal "", componentName="" MethodInvocation scHost getServiceComponentName Literal "", hostname="" MethodInvocation scHost getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState SwitchStatementCase ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + Literal ""Unsupported state change operation"" Literal "", newState="" MethodInvocation newState toString End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Create a new host action"" Literal "", requestId="" MethodInvocation requestId longValue Literal "", componentName="" MethodInvocation scHost getServiceComponentName Literal "", hostname="" MethodInvocation scHost getHostName Literal "", roleCommand="" MethodInvocation roleCommand name debug End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator configs MethodInvocation scHost getDesiredConfigs LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator configurations ClassCreator ReferenceType TreeMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String ForStatement EnhancedForControl VariableDeclaration ReferenceType Config VariableDeclarator config MethodInvocation configs values BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Cloning configs for execution command"" Literal "", configType="" MethodInvocation config getType Literal "", configVersionTag="" MethodInvocation config getVersionTag Literal "", clusterName="" MethodInvocation scHost getClusterName Literal "", serviceName="" MethodInvocation scHost getServiceName Literal "", componentName="" MethodInvocation scHost getServiceComponentName Literal "", hostname="" MethodInvocation scHost getHostName debug End StatementExpression MethodInvocation configurations MethodInvocation config getType MethodInvocation config getProperties put End IfStatement BinaryOperation && MethodInvocation scHost getHostName BinaryOperation != MethodInvocation configurations Literal ""global"" get Literal null BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Setting rca_enabled to false for host "" MethodInvocation scHost getHostName debug End StatementExpression MethodInvocation configurations MethodInvocation Literal ""rca_enabled"" Literal ""false"" put Literal ""global"" get End StatementExpression MethodInvocation MemberReference cluster MemberReference stage MemberReference scHost MemberReference configurations MemberReference roleCommand MemberReference nowTimestamp MemberReference event createHostAction End End End ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator serviceName MemberReference smokeTestServices BlockStatement LocalVariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation cluster MemberReference serviceName getService LocalVariableDeclaration ReferenceType String VariableDeclarator clientHost MethodInvocation MemberReference cluster MemberReference s getClientHostForRunningAction LocalVariableDeclaration ReferenceType String VariableDeclarator smokeTestRole MethodInvocation actionMetadata MemberReference serviceName getServiceCheckAction IfStatement BinaryOperation || BinaryOperation == MemberReference clientHost Literal null BinaryOperation == MemberReference smokeTestRole Literal null BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Nothing to do for service check as could not find role or"" Literal "" or host to run check on"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", serviceName="" MemberReference serviceName Literal "", clientHost="" MemberReference clientHost Literal "", serviceCheckRole="" MemberReference smokeTestRole info ContinueStatement End StatementExpression MethodInvocation stage MemberReference clientHost MethodInvocation Role MemberReference smokeTestRole valueOf MemberReference RoleCommand EXECUTE ClassCreator ReferenceType ServiceComponentHostOpInProgressEvent Literal null MemberReference clientHost MemberReference nowTimestamp MethodInvocation cluster getClusterName MemberReference serviceName addHostRoleExecutionCommand LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator configurations ClassCreator ReferenceType TreeMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator allConfigs MethodInvocation cluster MethodInvocation getDesiredConfigs MemberReference serviceName getService IfStatement BinaryOperation != MemberReference allConfigs Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Map ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator entry MethodInvocation allConfigs entrySet BlockStatement StatementExpression MethodInvocation configurations MethodInvocation entry MethodInvocation getType getValue MethodInvocation entry MethodInvocation getProperties getValue put End End StatementExpression MethodInvocation stage MethodInvocation getExecutionCommand MethodInvocation MemberReference configurations setConfigurations MemberReference clientHost MemberReference smokeTestRole getExecutionCommandWrapper StatementExpression MethodInvocation stage MethodInvocation getExecutionCommand MethodInvocation MethodInvocation StageUtils MemberReference cluster getClusterHostInfo setClusterHostInfo MemberReference clientHost MemberReference smokeTestRole getExecutionCommandWrapper End LocalVariableDeclaration ReferenceType RoleGraph VariableDeclarator rg ClassCreator ReferenceType RoleGraph MemberReference rco StatementExpression MethodInvocation rg MemberReference stage build StatementExpression Assignment MemberReference stages MethodInvocation rg getStages = IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Triggering Action Manager"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", requestId="" MethodInvocation requestId longValue Literal "", stagesCount="" MethodInvocation stages size debug End StatementExpression MethodInvocation actionManager MemberReference stages sendActions End IfStatement BinaryOperation != MemberReference changedServices Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType Service VariableDeclarator entry MethodInvocation changedServices entrySet BlockStatement LocalVariableDeclaration ReferenceType State VariableDeclarator newState MethodInvocation entry getKey ForStatement EnhancedForControl VariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation entry getValue BlockStatement IfStatement BinaryOperation && MethodInvocation s isClientOnlyService BinaryOperation == MemberReference newState MemberReference State STARTED BlockStatement ContinueStatement End StatementExpression MethodInvocation s MemberReference newState setDesiredState End End End IfStatement BinaryOperation != MemberReference changedComps Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponent VariableDeclarator entry MethodInvocation changedComps entrySet BlockStatement LocalVariableDeclaration ReferenceType State VariableDeclarator newState MethodInvocation entry getKey ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation entry getValue BlockStatement StatementExpression MethodInvocation sc MemberReference newState setDesiredState End End End ForStatement EnhancedForControl VariableDeclaration ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost VariableDeclarator stateScHostMap MethodInvocation changedScHosts values BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost VariableDeclarator entry MethodInvocation stateScHostMap entrySet BlockStatement LocalVariableDeclaration ReferenceType State VariableDeclarator newState MethodInvocation entry getKey ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation entry getValue BlockStatement StatementExpression MethodInvocation sch MemberReference newState setDesiredState End End End IfStatement BinaryOperation || BinaryOperation || BinaryOperation == MemberReference stages Literal null MethodInvocation stages isEmpty BinaryOperation == MemberReference requestId Literal null BlockStatement ReturnStatement Literal null End ReturnStatement MethodInvocation MethodInvocation requestId longValue getRequestStatusResponse MethodDeclaration Modifier private BasicType boolean isValidStateTransition FormalParameter ReferenceType State oldState FormalParameter ReferenceType State newState SwitchStatement MemberReference newState SwitchStatementCase INSTALLED IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == MemberReference oldState MemberReference State INIT BinaryOperation == MemberReference oldState MemberReference State UNINSTALLED BinaryOperation == MemberReference oldState MemberReference State INSTALLED BinaryOperation == MemberReference oldState MemberReference State INSTALLING BinaryOperation == MemberReference oldState MemberReference State STARTED BinaryOperation == MemberReference oldState MemberReference State START_FAILED BinaryOperation == MemberReference oldState MemberReference State INSTALL_FAILED BinaryOperation == MemberReference oldState MemberReference State STOP_FAILED BlockStatement ReturnStatement Literal true End BreakStatement SwitchStatementCase STARTED IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == MemberReference oldState MemberReference State INSTALLED BinaryOperation == MemberReference oldState MemberReference State STARTING BinaryOperation == MemberReference oldState MemberReference State STARTED BinaryOperation == MemberReference oldState MemberReference State START_FAILED BlockStatement ReturnStatement Literal true End BreakStatement SwitchStatementCase UNINSTALLED IfStatement BinaryOperation || BinaryOperation || BinaryOperation == MemberReference oldState MemberReference State INSTALLED BinaryOperation == MemberReference oldState MemberReference State UNINSTALLED BinaryOperation == MemberReference oldState MemberReference State UNINSTALL_FAILED BlockStatement ReturnStatement Literal true End SwitchStatementCase INIT IfStatement BinaryOperation || BinaryOperation || BinaryOperation == MemberReference oldState MemberReference State UNINSTALLED BinaryOperation == MemberReference oldState MemberReference State INIT BinaryOperation == MemberReference oldState MemberReference State WIPEOUT_FAILED BlockStatement ReturnStatement Literal true End End ReturnStatement Literal false MethodDeclaration Modifier private BasicType boolean isValidDesiredStateTransition FormalParameter ReferenceType State oldState FormalParameter ReferenceType State newState SwitchStatement MemberReference newState SwitchStatementCase INSTALLED IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == MemberReference oldState MemberReference State INIT BinaryOperation == MemberReference oldState MemberReference State UNINSTALLED BinaryOperation == MemberReference oldState MemberReference State INSTALLED BinaryOperation == MemberReference oldState MemberReference State STARTED BlockStatement ReturnStatement Literal true End BreakStatement SwitchStatementCase STARTED IfStatement BinaryOperation || BinaryOperation == MemberReference oldState MemberReference State INSTALLED BinaryOperation == MemberReference oldState MemberReference State STARTED BlockStatement ReturnStatement Literal true End BreakStatement End ReturnStatement Literal false MethodDeclaration Modifier private safeToUpdateConfigsForServiceComponentHost FormalParameter ReferenceType ServiceComponentHost sch FormalParameter ReferenceType State currentState FormalParameter ReferenceType State newDesiredState AmbariException IfStatement BinaryOperation || BinaryOperation == MemberReference currentState MemberReference State STARTED BinaryOperation == MemberReference currentState MemberReference State STARTING BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Changing of configs not supported"" Literal "" in STARTING or STARTED state"" Literal "", clusterName="" MethodInvocation sch getClusterName Literal "", serviceName="" MethodInvocation sch getServiceName Literal "", componentName="" MethodInvocation sch getServiceComponentName Literal "", hostname="" MethodInvocation sch getHostName Literal "", currentState="" MemberReference currentState Literal "", newDesiredState="" MemberReference newDesiredState End IfStatement BinaryOperation != MemberReference newDesiredState Literal null BlockStatement IfStatement BinaryOperation || BinaryOperation || BinaryOperation == MemberReference newDesiredState MemberReference State INIT BinaryOperation == MemberReference newDesiredState MemberReference State INSTALLED BinaryOperation == MemberReference newDesiredState MemberReference State STARTED BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Changing of configs not supported"" Literal "" for this transition"" Literal "", clusterName="" MethodInvocation sch getClusterName Literal "", serviceName="" MethodInvocation sch getServiceName Literal "", componentName="" MethodInvocation sch getServiceComponentName Literal "", hostname="" MethodInvocation sch getHostName Literal "", currentState="" MemberReference currentState Literal "", newDesiredState="" MemberReference newDesiredState End End MethodDeclaration Modifier private safeToUpdateConfigsForServiceComponent FormalParameter ReferenceType ServiceComponent sc FormalParameter ReferenceType State currentDesiredState FormalParameter ReferenceType State newDesiredState AmbariException ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation sc MethodInvocation values getServiceComponentHosts BlockStatement StatementExpression MethodInvocation MemberReference sch MethodInvocation sch getState MemberReference newDesiredState safeToUpdateConfigsForServiceComponentHost End MethodDeclaration Modifier private safeToUpdateConfigsForService FormalParameter ReferenceType Service service FormalParameter ReferenceType State currentDesiredState FormalParameter ReferenceType State newDesiredState AmbariException ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponent VariableDeclarator component MethodInvocation service MethodInvocation values getServiceComponents BlockStatement StatementExpression MethodInvocation MemberReference component MethodInvocation component getDesiredState MemberReference newDesiredState safeToUpdateConfigsForServiceComponent End MethodDeclaration Modifier public synchronized Annotation Override ReferenceType RequestStatusResponse updateServices FormalParameter ReferenceType Set TypeArgument ReferenceType ServiceRequest requests AmbariException IfStatement MethodInvocation requests isEmpty BlockStatement StatementExpression MethodInvocation LOG Literal ""Received an empty requests set"" warn ReturnStatement Literal null End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType Service VariableDeclarator changedServices ClassCreator ReferenceType HashMap TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType Service LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponent VariableDeclarator changedComps ClassCreator ReferenceType HashMap TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponent LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost VariableDeclarator changedScHosts ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator clusterNames ClassCreator ReferenceType HashSet TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String VariableDeclarator serviceNames ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType State VariableDeclarator seenNewStates ClassCreator ReferenceType HashSet TypeArgument ReferenceType State ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceRequest VariableDeclarator request MemberReference requests BlockStatement IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == MethodInvocation request getClusterName Literal null MethodInvocation request MethodInvocation isEmpty getClusterName BinaryOperation == MethodInvocation request getServiceName Literal null MethodInvocation request MethodInvocation isEmpty getServiceName BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid arguments, cluster name"" Literal "" and service name should be provided to update services"" End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a updateService request"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", request="" MethodInvocation request toString debug End StatementExpression MethodInvocation clusterNames MethodInvocation request getClusterName add IfStatement BinaryOperation > MethodInvocation clusterNames size Literal 1 BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Updates to multiple clusters is not"" Literal "" supported"" End IfStatement MethodInvocation ! serviceNames MethodInvocation request getClusterName containsKey BlockStatement StatementExpression MethodInvocation serviceNames MethodInvocation request getClusterName ClassCreator ReferenceType HashSet TypeArgument ReferenceType String put End IfStatement MethodInvocation serviceNames MethodInvocation MethodInvocation request getServiceName contains MethodInvocation request getClusterName get BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid request contains duplicate"" Literal "" service names"" End StatementExpression MethodInvocation serviceNames MethodInvocation MethodInvocation request getServiceName add MethodInvocation request getClusterName get LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster LocalVariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation cluster MethodInvocation request getServiceName getService LocalVariableDeclaration ReferenceType State VariableDeclarator oldState MethodInvocation s getDesiredState LocalVariableDeclaration ReferenceType State VariableDeclarator newState Literal null IfStatement BinaryOperation != MethodInvocation request getDesiredState Literal null BlockStatement StatementExpression Assignment MemberReference newState MethodInvocation State MethodInvocation request getDesiredState valueOf = IfStatement MethodInvocation ! newState isValidDesiredState BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + Literal ""Invalid arguments, invalid"" Literal "" desired state, desiredState="" MemberReference newState End End IfStatement BinaryOperation != MethodInvocation request getConfigVersions Literal null BlockStatement StatementExpression MethodInvocation MemberReference s MemberReference oldState MemberReference newState safeToUpdateConfigsForService ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator entry MethodInvocation request MethodInvocation entrySet getConfigVersions BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Attaching config to service"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", serviceName="" MethodInvocation s getName Literal "", configType="" MethodInvocation entry getKey Literal "", configTag="" MethodInvocation entry getValue debug End LocalVariableDeclaration ReferenceType Config VariableDeclarator config MethodInvocation cluster MethodInvocation entry getKey MethodInvocation entry getValue getDesiredConfig IfStatement BinaryOperation == Literal null MemberReference config BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Trying to update service with"" Literal "" invalid configs"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation s getName Literal "", invalidConfigType="" MethodInvocation entry getKey Literal "", invalidConfigTag="" MethodInvocation entry getValue End End End IfStatement BinaryOperation == MemberReference newState Literal null BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Nothing to do for new updateService request"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", newDesiredState=null"" debug End ContinueStatement End StatementExpression MethodInvocation seenNewStates MemberReference newState add IfStatement BinaryOperation != MemberReference newState MemberReference oldState BlockStatement IfStatement MethodInvocation ! MemberReference oldState MemberReference newState isValidDesiredStateTransition BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid transition for"" Literal "" service"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation s getName Literal "", currentDesiredState="" MemberReference oldState Literal "", newDesiredState="" MemberReference newState End IfStatement MethodInvocation ! changedServices MemberReference newState containsKey BlockStatement StatementExpression MethodInvocation changedServices MemberReference newState ClassCreator ReferenceType ArrayList TypeArgument ReferenceType Service put End StatementExpression MethodInvocation changedServices MethodInvocation MemberReference s add MemberReference newState get End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation s MethodInvocation values getServiceComponents BlockStatement LocalVariableDeclaration ReferenceType State VariableDeclarator oldScState MethodInvocation sc getDesiredState IfStatement BinaryOperation != MemberReference newState MemberReference oldScState BlockStatement IfStatement BinaryOperation && MethodInvocation sc isClientComponent MethodInvocation ! newState isValidClientComponentState BlockStatement ContinueStatement End IfStatement MethodInvocation ! MemberReference oldScState MemberReference newState isValidDesiredStateTransition BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid transition for"" Literal "" servicecomponent"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation sc getServiceName Literal "", componentName="" MethodInvocation sc getName Literal "", currentDesiredState="" MemberReference oldScState Literal "", newDesiredState="" MemberReference newState End IfStatement MethodInvocation ! changedComps MemberReference newState containsKey BlockStatement StatementExpression MethodInvocation changedComps MemberReference newState ClassCreator ReferenceType ArrayList TypeArgument ReferenceType ServiceComponent put End StatementExpression MethodInvocation changedComps MethodInvocation MemberReference sc add MemberReference newState get End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Handling update to ServiceComponent"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation s getName Literal "", componentName="" MethodInvocation sc getName Literal "", currentDesiredState="" MemberReference oldScState Literal "", newDesiredState="" MemberReference newState debug End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation sc MethodInvocation values getServiceComponentHosts BlockStatement LocalVariableDeclaration ReferenceType State VariableDeclarator oldSchState MethodInvocation sch getState IfStatement BinaryOperation == MemberReference newState MemberReference oldSchState BlockStatement StatementExpression MethodInvocation sch MemberReference newState setDesiredState IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Ignoring ServiceComponentHost"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation s getName Literal "", componentName="" MethodInvocation sc getName Literal "", hostname="" MethodInvocation sch getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState debug End ContinueStatement End IfStatement BinaryOperation && MethodInvocation sc isClientComponent MethodInvocation ! newState isValidClientComponentState BlockStatement ContinueStatement End IfStatement MethodInvocation ! MemberReference oldSchState MemberReference newState isValidStateTransition BlockStatement LocalVariableDeclaration ReferenceType String VariableDeclarator error BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid transition for"" Literal "" servicecomponenthost"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation sch getServiceName Literal "", componentName="" MethodInvocation sch getServiceComponentName Literal "", hostname="" MethodInvocation sch getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState LocalVariableDeclaration ReferenceType StackId VariableDeclarator sid MethodInvocation cluster getDesiredStackVersion IfStatement MethodInvocation ambariMetaInfo MethodInvocation isMaster MethodInvocation sid getStackName MethodInvocation sid getStackVersion MethodInvocation sc getServiceName MethodInvocation sch getServiceComponentName getComponentCategory BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException MemberReference error BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + Literal ""Ignoring: "" MemberReference error warn ContinueStatement End End IfStatement MethodInvocation ! changedScHosts MethodInvocation sc getName containsKey BlockStatement StatementExpression MethodInvocation changedScHosts MethodInvocation sc getName ClassCreator ReferenceType HashMap TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost put End IfStatement MethodInvocation ! changedScHosts MethodInvocation MemberReference newState containsKey MethodInvocation sc getName get BlockStatement StatementExpression MethodInvocation changedScHosts MethodInvocation MemberReference newState ClassCreator ReferenceType ArrayList TypeArgument ReferenceType ServiceComponentHost put MethodInvocation sc getName get End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Handling update to ServiceComponentHost"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation s getName Literal "", componentName="" MethodInvocation sc getName Literal "", hostname="" MethodInvocation sch getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState debug End StatementExpression MethodInvocation changedScHosts MethodInvocation MemberReference newState get MethodInvocation MemberReference sch add MethodInvocation sc getName get End End End IfStatement BinaryOperation > MethodInvocation seenNewStates size Literal 1 BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Cannot handle different desired state"" Literal "" changes for a set of services at the same time"" End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceRequest VariableDeclarator request MemberReference requests BlockStatement LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster LocalVariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation cluster MethodInvocation request getServiceName getService IfStatement BinaryOperation != MethodInvocation request getConfigVersions Literal null BlockStatement LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator updated ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Config ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator entry MethodInvocation request MethodInvocation entrySet getConfigVersions BlockStatement LocalVariableDeclaration ReferenceType Config VariableDeclarator config MethodInvocation cluster MethodInvocation entry getKey MethodInvocation entry getValue getDesiredConfig StatementExpression MethodInvocation updated MethodInvocation config getType MemberReference config put End IfStatement MethodInvocation ! updated isEmpty BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Updating service configs, attaching configs"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation s getName Literal "", configCount="" MethodInvocation updated size debug End StatementExpression MethodInvocation s MemberReference updated updateDesiredConfigs StatementExpression MethodInvocation s persist End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation s MethodInvocation values getServiceComponents BlockStatement StatementExpression MethodInvocation sc MethodInvocation updated keySet deleteDesiredConfigs ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation sc MethodInvocation values getServiceComponentHosts BlockStatement StatementExpression MethodInvocation sch MethodInvocation updated keySet deleteDesiredConfigs StatementExpression MethodInvocation sch persist End StatementExpression MethodInvocation sc persist End End End LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation clusterNames MethodInvocation next iterator getCluster ReturnStatement MethodInvocation MemberReference cluster MemberReference changedServices MemberReference changedComps MemberReference changedScHosts doStageCreation MethodDeclaration Modifier public synchronized Annotation Override ReferenceType RequestStatusResponse updateComponents FormalParameter ReferenceType Set TypeArgument ReferenceType ServiceComponentRequest requests AmbariException IfStatement MethodInvocation requests isEmpty BlockStatement StatementExpression MethodInvocation LOG Literal ""Received an empty requests set"" warn ReturnStatement Literal null End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponent VariableDeclarator changedComps ClassCreator ReferenceType HashMap TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponent LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost VariableDeclarator changedScHosts ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator clusterNames ClassCreator ReferenceType HashSet TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String VariableDeclarator componentNames ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType State VariableDeclarator seenNewStates ClassCreator ReferenceType HashSet TypeArgument ReferenceType State ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentRequest VariableDeclarator request MemberReference requests BlockStatement IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == MethodInvocation request getClusterName Literal null MethodInvocation request MethodInvocation isEmpty getClusterName BinaryOperation == MethodInvocation request getComponentName Literal null MethodInvocation request MethodInvocation isEmpty getComponentName BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + Literal ""Invalid arguments, cluster name"" Literal "", service name and component name should be provided to"" Literal "" update components"" End LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster IfStatement BinaryOperation || BinaryOperation == MethodInvocation request getServiceName Literal null MethodInvocation request MethodInvocation isEmpty getServiceName BlockStatement LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation cluster getDesiredStackVersion LocalVariableDeclaration ReferenceType String VariableDeclarator serviceName MethodInvocation ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion MethodInvocation request getComponentName getComponentToService IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Looking up service name for component"" Literal "", componentName="" MethodInvocation request getComponentName Literal "", serviceName="" MemberReference serviceName debug End IfStatement BinaryOperation || BinaryOperation == MemberReference serviceName Literal null MethodInvocation serviceName isEmpty BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Could not find service for component"" Literal "", componentName="" MethodInvocation request getComponentName Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", stackInfo="" MethodInvocation stackId getStackId End StatementExpression MethodInvocation request MemberReference serviceName setServiceName End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a updateComponent request"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", componentName="" MethodInvocation request getComponentName Literal "", request="" MemberReference request debug End StatementExpression MethodInvocation clusterNames MethodInvocation request getClusterName add IfStatement BinaryOperation > MethodInvocation clusterNames size Literal 1 BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Updates to multiple clusters is not"" Literal "" supported"" End IfStatement MethodInvocation ! componentNames MethodInvocation request getClusterName containsKey BlockStatement StatementExpression MethodInvocation componentNames MethodInvocation request getClusterName ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String put End IfStatement MethodInvocation ! componentNames MethodInvocation MethodInvocation request getServiceName containsKey MethodInvocation request getClusterName get BlockStatement StatementExpression MethodInvocation componentNames MethodInvocation MethodInvocation request getServiceName ClassCreator ReferenceType HashSet TypeArgument ReferenceType String put MethodInvocation request getClusterName get End IfStatement MethodInvocation componentNames MethodInvocation MethodInvocation request getServiceName get MethodInvocation MethodInvocation request getComponentName contains MethodInvocation request getClusterName get BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid request contains duplicate"" Literal "" service components"" End StatementExpression MethodInvocation componentNames MethodInvocation MethodInvocation request getServiceName get MethodInvocation MethodInvocation request getComponentName add MethodInvocation request getClusterName get LocalVariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation cluster MethodInvocation request getServiceName getService LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation s MethodInvocation request getComponentName getServiceComponent LocalVariableDeclaration ReferenceType State VariableDeclarator oldState MethodInvocation sc getDesiredState LocalVariableDeclaration ReferenceType State VariableDeclarator newState Literal null IfStatement BinaryOperation != MethodInvocation request getDesiredState Literal null BlockStatement StatementExpression Assignment MemberReference newState MethodInvocation State MethodInvocation request getDesiredState valueOf = IfStatement MethodInvocation ! newState isValidDesiredState BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + Literal ""Invalid arguments, invalid"" Literal "" desired state, desiredState="" MethodInvocation newState toString End End IfStatement BinaryOperation != MethodInvocation request getConfigVersions Literal null BlockStatement StatementExpression MethodInvocation MemberReference sc MemberReference oldState MemberReference newState safeToUpdateConfigsForServiceComponent ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator entry MethodInvocation request MethodInvocation entrySet getConfigVersions BlockStatement LocalVariableDeclaration ReferenceType Config VariableDeclarator config MethodInvocation cluster MethodInvocation entry getKey MethodInvocation entry getValue getDesiredConfig IfStatement BinaryOperation == Literal null MemberReference config BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Trying to update servicecomponent with"" Literal "" invalid configs"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation s getName Literal "", componentName="" MethodInvocation sc getName Literal "", invalidConfigType="" MethodInvocation entry getKey Literal "", invalidConfigTag="" MethodInvocation entry getValue End End End IfStatement BinaryOperation == MemberReference newState Literal null BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Nothing to do for new updateServiceComponent request"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", componentName="" MethodInvocation request getComponentName Literal "", newDesiredState=null"" debug End ContinueStatement End IfStatement BinaryOperation && MethodInvocation sc isClientComponent MethodInvocation ! newState isValidClientComponentState BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + Literal ""Invalid desired state for a client"" Literal "" component"" End StatementExpression MethodInvocation seenNewStates MemberReference newState add LocalVariableDeclaration ReferenceType State VariableDeclarator oldScState MethodInvocation sc getDesiredState IfStatement BinaryOperation != MemberReference newState MemberReference oldScState BlockStatement IfStatement MethodInvocation ! MemberReference oldScState MemberReference newState isValidDesiredStateTransition BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid transition for"" Literal "" servicecomponent"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation sc getServiceName Literal "", componentName="" MethodInvocation sc getName Literal "", currentDesiredState="" MemberReference oldScState Literal "", newDesiredState="" MemberReference newState End IfStatement MethodInvocation ! changedComps MemberReference newState containsKey BlockStatement StatementExpression MethodInvocation changedComps MemberReference newState ClassCreator ReferenceType ArrayList TypeArgument ReferenceType ServiceComponent put End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Handling update to ServiceComponent"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation s getName Literal "", componentName="" MethodInvocation sc getName Literal "", currentDesiredState="" MemberReference oldScState Literal "", newDesiredState="" MemberReference newState debug End StatementExpression MethodInvocation changedComps MethodInvocation MemberReference sc add MemberReference newState get End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation sc MethodInvocation values getServiceComponentHosts BlockStatement LocalVariableDeclaration ReferenceType State VariableDeclarator oldSchState MethodInvocation sch getState IfStatement BinaryOperation == MemberReference newState MemberReference oldSchState BlockStatement StatementExpression MethodInvocation sch MemberReference newState setDesiredState IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Ignoring ServiceComponentHost"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation s getName Literal "", componentName="" MethodInvocation sc getName Literal "", hostname="" MethodInvocation sch getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState debug End ContinueStatement End IfStatement MethodInvocation ! MemberReference oldSchState MemberReference newState isValidStateTransition BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid transition for"" Literal "" servicecomponenthost"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation sch getServiceName Literal "", componentName="" MethodInvocation sch getServiceComponentName Literal "", hostname="" MethodInvocation sch getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState End IfStatement MethodInvocation ! changedScHosts MethodInvocation sc getName containsKey BlockStatement StatementExpression MethodInvocation changedScHosts MethodInvocation sc getName ClassCreator ReferenceType HashMap TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost put End IfStatement MethodInvocation ! changedScHosts MethodInvocation MemberReference newState containsKey MethodInvocation sc getName get BlockStatement StatementExpression MethodInvocation changedScHosts MethodInvocation MemberReference newState ClassCreator ReferenceType ArrayList TypeArgument ReferenceType ServiceComponentHost put MethodInvocation sc getName get End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Handling update to ServiceComponentHost"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation s getName Literal "", componentName="" MethodInvocation sc getName Literal "", hostname="" MethodInvocation sch getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState debug End StatementExpression MethodInvocation changedScHosts MethodInvocation MemberReference newState get MethodInvocation MemberReference sch add MethodInvocation sc getName get End End IfStatement BinaryOperation > MethodInvocation seenNewStates size Literal 1 BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Cannot handle different desired"" Literal "" state changes for a set of service components at the same time"" End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentRequest VariableDeclarator request MemberReference requests BlockStatement LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster LocalVariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation cluster MethodInvocation request getServiceName getService LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation s MethodInvocation request getComponentName getServiceComponent IfStatement BinaryOperation != MethodInvocation request getConfigVersions Literal null BlockStatement LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator updated ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Config ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator entry MethodInvocation request MethodInvocation entrySet getConfigVersions BlockStatement LocalVariableDeclaration ReferenceType Config VariableDeclarator config MethodInvocation cluster MethodInvocation entry getKey MethodInvocation entry getValue getDesiredConfig StatementExpression MethodInvocation updated MethodInvocation config getType MemberReference config put End IfStatement MethodInvocation ! updated isEmpty BlockStatement StatementExpression MethodInvocation sc MemberReference updated updateDesiredConfigs ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation sc MethodInvocation values getServiceComponentHosts BlockStatement StatementExpression MethodInvocation sch MethodInvocation updated keySet deleteDesiredConfigs StatementExpression MethodInvocation sch persist End StatementExpression MethodInvocation sc persist End End End LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation clusterNames MethodInvocation next iterator getCluster ReturnStatement MethodInvocation MemberReference cluster Literal null MemberReference changedComps MemberReference changedScHosts doStageCreation MethodDeclaration Modifier public synchronized Annotation Override updateHosts FormalParameter ReferenceType Set TypeArgument ReferenceType HostRequest requests AmbariException IfStatement MethodInvocation requests isEmpty BlockStatement StatementExpression MethodInvocation LOG Literal ""Received an empty requests set"" warn ReturnStatement End ForStatement EnhancedForControl VariableDeclaration ReferenceType HostRequest VariableDeclarator request MemberReference requests BlockStatement IfStatement BinaryOperation || BinaryOperation == MethodInvocation request getHostname Literal null MethodInvocation request MethodInvocation isEmpty getHostname BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid arguments, hostname should"" Literal "" be provided"" End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a updateHost request"" Literal "", hostname="" MethodInvocation request getHostname Literal "", request="" MemberReference request debug End LocalVariableDeclaration ReferenceType Host VariableDeclarator h MethodInvocation clusters MethodInvocation request getHostname getHost TryStatement StatementExpression MethodInvocation clusters MethodInvocation request getHostname MethodInvocation request getClusterName mapHostToCluster CatchClause CatchClauseParameter DuplicateResourceException e IfStatement BinaryOperation != Literal null MethodInvocation request getHostAttributes StatementExpression MethodInvocation h MethodInvocation request getHostAttributes setHostAttributes End IfStatement BinaryOperation != Literal null MethodInvocation request getRackInfo BlockStatement StatementExpression MethodInvocation h MethodInvocation request getRackInfo setRackInfo End IfStatement BinaryOperation != Literal null MethodInvocation request getPublicHostName BlockStatement StatementExpression MethodInvocation h MethodInvocation request getPublicHostName setPublicHostName End End MethodDeclaration Modifier public synchronized Annotation Override ReferenceType RequestStatusResponse updateHostComponents FormalParameter ReferenceType Set TypeArgument ReferenceType ServiceComponentHostRequest requests AmbariException IfStatement MethodInvocation requests isEmpty BlockStatement StatementExpression MethodInvocation LOG Literal ""Received an empty requests set"" warn ReturnStatement Literal null End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost VariableDeclarator changedScHosts ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType String VariableDeclarator clusterNames ClassCreator ReferenceType HashSet TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String VariableDeclarator hostComponentNames ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType State VariableDeclarator seenNewStates ClassCreator ReferenceType HashSet TypeArgument ReferenceType State ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHostRequest VariableDeclarator request MemberReference requests BlockStatement IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == MethodInvocation request getClusterName Literal null MethodInvocation request MethodInvocation isEmpty getClusterName BinaryOperation == MethodInvocation request getComponentName Literal null MethodInvocation request MethodInvocation isEmpty getComponentName BinaryOperation == MethodInvocation request getHostname Literal null MethodInvocation request MethodInvocation isEmpty getHostname BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + Literal ""Invalid arguments"" Literal "", cluster name, component name and host name should be"" Literal "" provided to update host components"" End LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster IfStatement BinaryOperation || BinaryOperation == MethodInvocation request getServiceName Literal null MethodInvocation request MethodInvocation isEmpty getServiceName BlockStatement LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation cluster getDesiredStackVersion LocalVariableDeclaration ReferenceType String VariableDeclarator serviceName MethodInvocation ambariMetaInfo MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion MethodInvocation request getComponentName getComponentToService IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Looking up service name for component"" Literal "", componentName="" MethodInvocation request getComponentName Literal "", serviceName="" MemberReference serviceName debug End IfStatement BinaryOperation || BinaryOperation == MemberReference serviceName Literal null MethodInvocation serviceName isEmpty BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Could not find service for component"" Literal "", componentName="" MethodInvocation request getComponentName Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", stackInfo="" MethodInvocation stackId getStackId End StatementExpression MethodInvocation request MemberReference serviceName setServiceName End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a createHostComponent request"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", componentName="" MethodInvocation request getComponentName Literal "", hostname="" MethodInvocation request getHostname Literal "", request="" MemberReference request debug End StatementExpression MethodInvocation clusterNames MethodInvocation request getClusterName add IfStatement BinaryOperation > MethodInvocation clusterNames size Literal 1 BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Updates to multiple clusters is not"" Literal "" supported"" End IfStatement MethodInvocation ! hostComponentNames MethodInvocation request getClusterName containsKey BlockStatement StatementExpression MethodInvocation hostComponentNames MethodInvocation request getClusterName ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String put End IfStatement MethodInvocation ! hostComponentNames MethodInvocation MethodInvocation request getServiceName containsKey MethodInvocation request getClusterName get BlockStatement StatementExpression MethodInvocation hostComponentNames MethodInvocation MethodInvocation request getServiceName ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Set TypeArgument ReferenceType String put MethodInvocation request getClusterName get End IfStatement MethodInvocation ! hostComponentNames MethodInvocation MethodInvocation request getServiceName get MethodInvocation MethodInvocation request getComponentName containsKey MethodInvocation request getClusterName get BlockStatement StatementExpression MethodInvocation hostComponentNames MethodInvocation MethodInvocation request getServiceName get MethodInvocation MethodInvocation request getComponentName ClassCreator ReferenceType HashSet TypeArgument ReferenceType String put MethodInvocation request getClusterName get End IfStatement MethodInvocation hostComponentNames MethodInvocation MethodInvocation request getServiceName get MethodInvocation MethodInvocation request getComponentName get MethodInvocation MethodInvocation request getHostname contains MethodInvocation request getClusterName get BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid request contains duplicate"" Literal "" hostcomponents"" End StatementExpression MethodInvocation hostComponentNames MethodInvocation MethodInvocation request getServiceName get MethodInvocation MethodInvocation request getComponentName get MethodInvocation MethodInvocation request getHostname add MethodInvocation request getClusterName get LocalVariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation cluster MethodInvocation request getServiceName getService LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation s MethodInvocation request getComponentName getServiceComponent LocalVariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation sc MethodInvocation request getHostname getServiceComponentHost LocalVariableDeclaration ReferenceType State VariableDeclarator oldState MethodInvocation sch getState LocalVariableDeclaration ReferenceType State VariableDeclarator newState Literal null IfStatement BinaryOperation != MethodInvocation request getDesiredState Literal null BlockStatement StatementExpression Assignment MemberReference newState MethodInvocation State MethodInvocation request getDesiredState valueOf = IfStatement MethodInvocation ! newState isValidDesiredState BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + BinaryOperation + Literal ""Invalid arguments, invalid"" Literal "" desired state, desiredState="" MethodInvocation newState toString End End IfStatement BinaryOperation != MethodInvocation request getConfigVersions Literal null BlockStatement StatementExpression MethodInvocation MemberReference sch MemberReference oldState MemberReference newState safeToUpdateConfigsForServiceComponentHost ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator entry MethodInvocation request MethodInvocation entrySet getConfigVersions BlockStatement LocalVariableDeclaration ReferenceType Config VariableDeclarator config MethodInvocation cluster MethodInvocation entry getKey MethodInvocation entry getValue getDesiredConfig IfStatement BinaryOperation == Literal null MemberReference config BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Trying to update servicecomponenthost"" Literal "" with invalid configs"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation s getName Literal "", componentName="" MethodInvocation sc getName Literal "", hostname="" MethodInvocation sch getHostName Literal "", invalidConfigType="" MethodInvocation entry getKey Literal "", invalidConfigTag="" MethodInvocation entry getValue End End End IfStatement BinaryOperation == MemberReference newState Literal null BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Nothing to do for new updateServiceComponentHost request"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation request getServiceName Literal "", componentName="" MethodInvocation request getComponentName Literal "", hostname="" MethodInvocation request getHostname Literal "", newDesiredState=null"" debug End ContinueStatement End IfStatement BinaryOperation && MethodInvocation sc isClientComponent MethodInvocation ! newState isValidClientComponentState BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Invalid desired state for a client"" Literal "" component"" End StatementExpression MethodInvocation seenNewStates MemberReference newState add LocalVariableDeclaration ReferenceType State VariableDeclarator oldSchState MethodInvocation sch getState IfStatement BinaryOperation == MemberReference newState MemberReference oldSchState BlockStatement StatementExpression MethodInvocation sch MemberReference newState setDesiredState IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Ignoring ServiceComponentHost"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation s getName Literal "", componentName="" MethodInvocation sc getName Literal "", hostname="" MethodInvocation sch getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState debug End ContinueStatement End IfStatement MethodInvocation ! MemberReference oldSchState MemberReference newState isValidStateTransition BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid transition for"" Literal "" servicecomponenthost"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", clusterId="" MethodInvocation cluster getClusterId Literal "", serviceName="" MethodInvocation sch getServiceName Literal "", componentName="" MethodInvocation sch getServiceComponentName Literal "", hostname="" MethodInvocation sch getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState End IfStatement MethodInvocation ! changedScHosts MethodInvocation sc getName containsKey BlockStatement StatementExpression MethodInvocation changedScHosts MethodInvocation sc getName ClassCreator ReferenceType HashMap TypeArgument ReferenceType State TypeArgument ReferenceType List TypeArgument ReferenceType ServiceComponentHost put End IfStatement MethodInvocation ! changedScHosts MethodInvocation MemberReference newState containsKey MethodInvocation sc getName get BlockStatement StatementExpression MethodInvocation changedScHosts MethodInvocation MemberReference newState ClassCreator ReferenceType ArrayList TypeArgument ReferenceType ServiceComponentHost put MethodInvocation sc getName get End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Handling update to ServiceComponentHost"" Literal "", clusterName="" MethodInvocation request getClusterName Literal "", serviceName="" MethodInvocation s getName Literal "", componentName="" MethodInvocation sc getName Literal "", hostname="" MethodInvocation sch getHostName Literal "", currentState="" MemberReference oldSchState Literal "", newDesiredState="" MemberReference newState debug End StatementExpression MethodInvocation changedScHosts MethodInvocation MemberReference newState get MethodInvocation MemberReference sch add MethodInvocation sc getName get End IfStatement BinaryOperation > MethodInvocation seenNewStates size Literal 1 BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""Cannot handle different desired"" Literal "" state changes for a set of service components at the same time"" End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHostRequest VariableDeclarator request MemberReference requests BlockStatement LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation request getClusterName getCluster LocalVariableDeclaration ReferenceType Service VariableDeclarator s MethodInvocation cluster MethodInvocation request getServiceName getService LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator sc MethodInvocation s MethodInvocation request getComponentName getServiceComponent LocalVariableDeclaration ReferenceType ServiceComponentHost VariableDeclarator sch MethodInvocation sc MethodInvocation request getHostname getServiceComponentHost IfStatement BinaryOperation != MethodInvocation request getConfigVersions Literal null BlockStatement LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator updated ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType Config ForStatement EnhancedForControl VariableDeclaration ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator entry MethodInvocation request MethodInvocation entrySet getConfigVersions BlockStatement LocalVariableDeclaration ReferenceType Config VariableDeclarator config MethodInvocation cluster MethodInvocation entry getKey MethodInvocation entry getValue getDesiredConfig StatementExpression MethodInvocation updated MethodInvocation config getType MemberReference config put IfStatement MethodInvocation ! updated isEmpty BlockStatement StatementExpression MethodInvocation sch MemberReference updated updateDesiredConfigs StatementExpression MethodInvocation sch persist End End End End LocalVariableDeclaration ReferenceType Cluster VariableDeclarator cluster MethodInvocation clusters MethodInvocation clusterNames MethodInvocation next iterator getCluster ReturnStatement MethodInvocation MemberReference cluster Literal null Literal null MemberReference changedScHosts doStageCreation MethodDeclaration Modifier public synchronized Annotation Override updateUsers FormalParameter ReferenceType Set TypeArgument ReferenceType UserRequest requests AmbariException ForStatement EnhancedForControl VariableDeclaration ReferenceType UserRequest VariableDeclarator request MemberReference requests BlockStatement LocalVariableDeclaration ReferenceType User VariableDeclarator u MethodInvocation users MethodInvocation request getUsername getAnyUser IfStatement BinaryOperation == Literal null MemberReference u ContinueStatement End IfStatement BinaryOperation && BinaryOperation != Literal null MethodInvocation request getOldPassword BinaryOperation != Literal null MethodInvocation request getPassword BlockStatement StatementExpression MethodInvocation users MethodInvocation u getUserName MethodInvocation request getOldPassword MethodInvocation request getPassword modifyPassword End IfStatement BinaryOperation > MethodInvocation request MethodInvocation size getRoles Literal 0 BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator role MethodInvocation u getRoles BlockStatement StatementExpression MethodInvocation users MemberReference u MemberReference role removeRoleFromUser End ForStatement EnhancedForControl VariableDeclaration ReferenceType String VariableDeclarator role MethodInvocation request getRoles BlockStatement StatementExpression MethodInvocation users MemberReference u MemberReference role addRoleToUser End End End MethodDeclaration Modifier public synchronized Annotation Override deleteCluster FormalParameter ReferenceType ClusterRequest request AmbariException ThrowStatement ClassCreator ReferenceType AmbariException Literal ""Delete cluster not supported"" MethodDeclaration Modifier public Annotation Override ReferenceType RequestStatusResponse deleteServices FormalParameter ReferenceType Set TypeArgument ReferenceType ServiceRequest request AmbariException ThrowStatement ClassCreator ReferenceType AmbariException Literal ""Delete services not supported"" MethodDeclaration Modifier public Annotation Override ReferenceType RequestStatusResponse deleteComponents FormalParameter ReferenceType Set TypeArgument ReferenceType ServiceComponentRequest request AmbariException ThrowStatement ClassCreator ReferenceType AmbariException Literal ""Delete components not supported"" MethodDeclaration Modifier public Annotation Override deleteHosts FormalParameter ReferenceType Set TypeArgument ReferenceType HostRequest request AmbariException ThrowStatement ClassCreator ReferenceType AmbariException Literal ""Delete hosts not supported"" MethodDeclaration Modifier public Annotation Override ReferenceType RequestStatusResponse deleteHostComponents FormalParameter ReferenceType Set TypeArgument ReferenceType ServiceComponentHostRequest request AmbariException ThrowStatement ClassCreator ReferenceType AmbariException Literal ""Delete host components not supported"" MethodDeclaration Modifier public Annotation Override deleteUsers FormalParameter ReferenceType Set TypeArgument ReferenceType UserRequest requests AmbariException ForStatement EnhancedForControl VariableDeclaration ReferenceType UserRequest VariableDeclarator r MemberReference requests BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + Literal ""Received a delete user request"" Literal "", username="" MethodInvocation r getUsername debug End LocalVariableDeclaration ReferenceType User VariableDeclarator u MethodInvocation users MethodInvocation r getUsername getAnyUser IfStatement BinaryOperation != Literal null MemberReference u StatementExpression MethodInvocation users MemberReference u removeUser End End MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType ActionResponse getActions FormalParameter ReferenceType Set TypeArgument ReferenceType ActionRequest request AmbariException LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType ActionResponse VariableDeclarator responses ClassCreator ReferenceType HashSet TypeArgument ReferenceType ActionResponse ForStatement EnhancedForControl VariableDeclaration ReferenceType ActionRequest VariableDeclarator actionRequest MemberReference request BlockStatement IfStatement BinaryOperation == MethodInvocation actionRequest getServiceName Literal null BlockStatement StatementExpression MethodInvocation LOG Literal ""No service name specified - skipping request"" warn ContinueStatement End LocalVariableDeclaration ReferenceType ActionResponse VariableDeclarator actionResponse ClassCreator ReferenceType ActionResponse StatementExpression MethodInvocation actionResponse MethodInvocation actionRequest getClusterName setClusterName StatementExpression MethodInvocation actionResponse MethodInvocation actionRequest getServiceName setServiceName IfStatement BinaryOperation && BinaryOperation != MethodInvocation actionMetadata MethodInvocation actionRequest getServiceName getActions Literal null MethodInvocation ! actionMetadata MethodInvocation isEmpty MethodInvocation actionRequest getServiceName getActions BlockStatement StatementExpression MethodInvocation actionResponse MethodInvocation actionMetadata MethodInvocation Literal 0 get MethodInvocation actionRequest getServiceName getActions setActionName End StatementExpression MethodInvocation responses MemberReference actionResponse add End ReturnStatement MemberReference responses MethodDeclaration Modifier public ReferenceType Set TypeArgument ReferenceType RequestStatusResponse getRequestsByStatus FormalParameter ReferenceType RequestsByStatusesRequest request ReturnStatement MethodInvocation Collections emptySet MethodDeclaration Modifier private ReferenceType RequestStatusResponse getRequestStatusResponse FormalParameter BasicType long requestId LocalVariableDeclaration ReferenceType RequestStatusResponse VariableDeclarator response ClassCreator ReferenceType RequestStatusResponse MemberReference requestId LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType HostRoleCommand VariableDeclarator hostRoleCommands MethodInvocation actionManager MemberReference requestId getRequestTasks LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType ShortTaskStatus VariableDeclarator tasks ClassCreator ReferenceType ArrayList TypeArgument ReferenceType ShortTaskStatus ForStatement EnhancedForControl VariableDeclaration ReferenceType HostRoleCommand VariableDeclarator hostRoleCommand MemberReference hostRoleCommands BlockStatement StatementExpression MethodInvocation tasks ClassCreator ReferenceType ShortTaskStatus MemberReference hostRoleCommand add End StatementExpression MethodInvocation response MemberReference tasks setTasks ReturnStatement MemberReference response MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType RequestStatusResponse getRequestStatus FormalParameter ReferenceType RequestStatusRequest request AmbariException LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType RequestStatusResponse VariableDeclarator response ClassCreator ReferenceType HashSet TypeArgument ReferenceType RequestStatusResponse IfStatement BinaryOperation == MethodInvocation request getRequestId Literal null BlockStatement LocalVariableDeclaration ReferenceType RequestStatus VariableDeclarator requestStatus MemberReference RequestStatus IN_PROGRESS IfStatement BinaryOperation != MethodInvocation request getRequestStatus Literal null BlockStatement StatementExpression Assignment MemberReference requestStatus MethodInvocation RequestStatus MethodInvocation request getRequestStatus valueOf = End IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Received a Get Request Status request"" Literal "", requestId=null"" Literal "", requestStatus="" MemberReference requestStatus debug End LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType Long VariableDeclarator requestIds MethodInvocation actionManager MemberReference requestStatus getRequestsByStatus ForStatement EnhancedForControl VariableDeclaration ReferenceType Long VariableDeclarator requestId MemberReference requestIds BlockStatement StatementExpression MethodInvocation response MethodInvocation MethodInvocation requestId longValue getRequestStatusResponse add End BlockStatement LocalVariableDeclaration ReferenceType RequestStatusResponse VariableDeclarator requestStatusResponse MethodInvocation MethodInvocation request MethodInvocation longValue getRequestId getRequestStatusResponse IfStatement BinaryOperation == MethodInvocation requestStatusResponse MethodInvocation size getTasks Literal 0 BlockStatement ThrowStatement ClassCreator ReferenceType ObjectNotFoundException Literal ""Request resource doesn't exist."" BlockStatement StatementExpression MethodInvocation response MemberReference requestStatusResponse add End End ReturnStatement MemberReference response MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType TaskStatusResponse getTaskStatus FormalParameter ReferenceType Set TypeArgument ReferenceType TaskStatusRequest requests AmbariException LocalVariableDeclaration ReferenceType Collection TypeArgument ReferenceType Long VariableDeclarator requestIds ClassCreator ReferenceType ArrayList TypeArgument ReferenceType Long LocalVariableDeclaration ReferenceType Collection TypeArgument ReferenceType Long VariableDeclarator taskIds ClassCreator ReferenceType ArrayList TypeArgument ReferenceType Long ForStatement EnhancedForControl VariableDeclaration ReferenceType TaskStatusRequest VariableDeclarator request MemberReference requests BlockStatement IfStatement BinaryOperation != MethodInvocation request getTaskId Literal null BlockStatement StatementExpression MethodInvocation taskIds MethodInvocation request getTaskId add BlockStatement StatementExpression MethodInvocation requestIds MethodInvocation request getRequestId add End End LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType TaskStatusResponse VariableDeclarator responses ClassCreator ReferenceType HashSet TypeArgument ReferenceType TaskStatusResponse ForStatement EnhancedForControl VariableDeclaration ReferenceType HostRoleCommand VariableDeclarator command MethodInvocation actionManager MemberReference requestIds MemberReference taskIds getTasksByRequestAndTaskIds BlockStatement StatementExpression MethodInvocation responses ClassCreator ReferenceType TaskStatusResponse MemberReference command add End ReturnStatement MemberReference responses MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType ClusterResponse getClusters FormalParameter ReferenceType Set TypeArgument ReferenceType ClusterRequest requests AmbariException LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType ClusterResponse VariableDeclarator response ClassCreator ReferenceType HashSet TypeArgument ReferenceType ClusterResponse ForStatement EnhancedForControl VariableDeclaration ReferenceType ClusterRequest VariableDeclarator request MemberReference requests BlockStatement TryStatement StatementExpression MethodInvocation response MethodInvocation MemberReference request getClusters addAll CatchClause CatchClauseParameter ClusterNotFoundException e IfStatement BinaryOperation == MethodInvocation requests size Literal 1 BlockStatement ThrowStatement MemberReference e End End ReturnStatement MemberReference response MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType ServiceResponse getServices FormalParameter ReferenceType Set TypeArgument ReferenceType ServiceRequest requests AmbariException LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType ServiceResponse VariableDeclarator response ClassCreator ReferenceType HashSet TypeArgument ReferenceType ServiceResponse ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceRequest VariableDeclarator request MemberReference requests BlockStatement TryStatement StatementExpression MethodInvocation response MethodInvocation MemberReference request getServices addAll CatchClause CatchClauseParameter ServiceNotFoundException e IfStatement BinaryOperation == MethodInvocation requests size Literal 1 BlockStatement ThrowStatement MemberReference e End End ReturnStatement MemberReference response MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType ServiceComponentResponse getComponents FormalParameter ReferenceType Set TypeArgument ReferenceType ServiceComponentRequest requests AmbariException LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType ServiceComponentResponse VariableDeclarator response ClassCreator ReferenceType HashSet TypeArgument ReferenceType ServiceComponentResponse ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentRequest VariableDeclarator request MemberReference requests BlockStatement TryStatement StatementExpression MethodInvocation response MethodInvocation MemberReference request getComponents addAll CatchClause CatchClauseParameter ServiceComponentNotFoundException e IfStatement BinaryOperation == MethodInvocation requests size Literal 1 BlockStatement ThrowStatement MemberReference e End End ReturnStatement MemberReference response MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType HostResponse getHosts FormalParameter ReferenceType Set TypeArgument ReferenceType HostRequest requests AmbariException LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType HostResponse VariableDeclarator response ClassCreator ReferenceType HashSet TypeArgument ReferenceType HostResponse ForStatement EnhancedForControl VariableDeclaration ReferenceType HostRequest VariableDeclarator request MemberReference requests BlockStatement TryStatement StatementExpression MethodInvocation response MethodInvocation MemberReference request getHosts addAll CatchClause CatchClauseParameter HostNotFoundException e IfStatement BinaryOperation == MethodInvocation requests size Literal 1 BlockStatement ThrowStatement MemberReference e End End ReturnStatement MemberReference response MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType ServiceComponentHostResponse getHostComponents FormalParameter ReferenceType Set TypeArgument ReferenceType ServiceComponentHostRequest requests AmbariException LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType ServiceComponentHostResponse VariableDeclarator response ClassCreator ReferenceType HashSet TypeArgument ReferenceType ServiceComponentHostResponse ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHostRequest VariableDeclarator request MemberReference requests BlockStatement TryStatement StatementExpression MethodInvocation response MethodInvocation MemberReference request getHostComponents addAll CatchClause CatchClauseParameter ServiceComponentHostNotFoundException e IfStatement BinaryOperation == MethodInvocation requests size Literal 1 BlockStatement ThrowStatement MemberReference e End CatchClause CatchClauseParameter ServiceNotFoundException e IfStatement BinaryOperation == MethodInvocation requests size Literal 1 BlockStatement ThrowStatement MemberReference e End CatchClause CatchClauseParameter ServiceComponentNotFoundException e IfStatement BinaryOperation == MethodInvocation requests size Literal 1 BlockStatement ThrowStatement MemberReference e End CatchClause CatchClauseParameter ParentObjectNotFoundException e LocalVariableDeclaration BasicType boolean VariableDeclarator throwException Literal true IfStatement BinaryOperation && BinaryOperation > MethodInvocation requests size Literal 1 ClassReference MethodInvocation MethodInvocation e getCause isInstance ReferenceType HostNotFoundException BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHostRequest VariableDeclarator r MemberReference requests BlockStatement IfStatement BinaryOperation == MethodInvocation r getHostname Literal null BlockStatement StatementExpression Assignment MemberReference throwException Literal false = BreakStatement End End End IfStatement MemberReference throwException ThrowStatement MemberReference e End End ReturnStatement MemberReference response MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType ConfigurationResponse getConfigurations FormalParameter ReferenceType Set TypeArgument ReferenceType ConfigurationRequest requests AmbariException LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType ConfigurationResponse VariableDeclarator response ClassCreator ReferenceType HashSet TypeArgument ReferenceType ConfigurationResponse ForStatement EnhancedForControl VariableDeclaration ReferenceType ConfigurationRequest VariableDeclarator request MemberReference requests BlockStatement StatementExpression MethodInvocation response MethodInvocation MemberReference request getConfigurations addAll End ReturnStatement MemberReference response MethodDeclaration Modifier public Annotation Override ReferenceType Set TypeArgument ReferenceType UserResponse getUsers FormalParameter ReferenceType Set TypeArgument ReferenceType UserRequest requests AmbariException LocalVariableDeclaration ReferenceType Set TypeArgument ReferenceType UserResponse VariableDeclarator responses ClassCreator ReferenceType HashSet TypeArgument ReferenceType UserResponse ForStatement EnhancedForControl VariableDeclaration ReferenceType UserRequest VariableDeclarator r MemberReference requests BlockStatement IfStatement MethodInvocation LOG isDebugEnabled BlockStatement StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + Literal ""Received a getUsers request"" Literal "", userRequest="" MethodInvocation r toString debug End IfStatement BinaryOperation == Literal null MethodInvocation r getUsername BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType User VariableDeclarator u MethodInvocation users getAllUsers BlockStatement LocalVariableDeclaration ReferenceType UserResponse VariableDeclarator resp ClassCreator ReferenceType UserResponse MethodInvocation u getUserName MethodInvocation u isLdapUser StatementExpression MethodInvocation resp ClassCreator ReferenceType HashSet TypeArgument ReferenceType String MethodInvocation u getRoles setRoles StatementExpression MethodInvocation responses MemberReference resp add End BlockStatement LocalVariableDeclaration ReferenceType User VariableDeclarator u MethodInvocation users MethodInvocation r getUsername getAnyUser IfStatement BinaryOperation == Literal null MemberReference u BlockStatement IfStatement BinaryOperation == MethodInvocation requests size Literal 1 BlockStatement ThrowStatement ClassCreator ReferenceType ObjectNotFoundException BinaryOperation + BinaryOperation + Literal ""Cannot find user '"" MethodInvocation r getUsername Literal ""'"" End BlockStatement LocalVariableDeclaration ReferenceType UserResponse VariableDeclarator resp ClassCreator ReferenceType UserResponse MethodInvocation u getUserName MethodInvocation u isLdapUser StatementExpression MethodInvocation resp ClassCreator ReferenceType HashSet TypeArgument ReferenceType String MethodInvocation u getRoles setRoles StatementExpression MethodInvocation responses MemberReference resp add End End End ReturnStatement MemberReference responses MethodDeclaration Modifier public Annotation Override ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String getHostComponentDesiredConfigMapping FormalParameter ReferenceType ServiceComponentHostRequest request AmbariException LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator map ClassCreator ReferenceType HashMap TypeArgument ReferenceType String TypeArgument ReferenceType String ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponentHostResponse VariableDeclarator r MethodInvocation MemberReference request getHostComponents BlockStatement StatementExpression MethodInvocation map MethodInvocation r getDesiredConfigs putAll End ReturnStatement MemberReference map MethodDeclaration Modifier private ReferenceType String getClientHostForRunningAction FormalParameter ReferenceType Cluster cluster FormalParameter ReferenceType Service service AmbariException LocalVariableDeclaration ReferenceType StackId VariableDeclarator stackId MethodInvocation service getDesiredStackVersion LocalVariableDeclaration ReferenceType ComponentInfo VariableDeclarator compInfo MethodInvocation ambariMetaInfo MethodInvocation getClientComponent MethodInvocation stackId getStackName MethodInvocation stackId getStackVersion MethodInvocation service getName getServiceInfo IfStatement BinaryOperation != MemberReference compInfo Literal null BlockStatement TryStatement LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator serviceComponent MethodInvocation service MethodInvocation compInfo getName getServiceComponent IfStatement MethodInvocation ! serviceComponent MethodInvocation isEmpty getServiceComponentHosts BlockStatement ReturnStatement MethodInvocation serviceComponent MethodInvocation keySet MethodInvocation iterator MethodInvocation next getServiceComponentHosts End CatchClause CatchClauseParameter ServiceComponentNotFoundException e StatementExpression MethodInvocation LOG BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Could not find required component to run action"" Literal "", clusterName="" MethodInvocation cluster getClusterName Literal "", serviceName="" MethodInvocation service getName Literal "", componentName="" MethodInvocation compInfo getName warn End LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType ServiceComponent VariableDeclarator components MethodInvocation service getServiceComponents IfStatement MethodInvocation components isEmpty BlockStatement ReturnStatement Literal null End ForStatement EnhancedForControl VariableDeclaration ReferenceType ServiceComponent VariableDeclarator serviceComponent MethodInvocation components values BlockStatement IfStatement MethodInvocation serviceComponent MethodInvocation isEmpty getServiceComponentHosts BlockStatement ContinueStatement End ReturnStatement MethodInvocation serviceComponent MethodInvocation keySet MethodInvocation iterator MethodInvocation next getServiceComponentHosts End ReturnStatement Literal null MethodDeclaration Modifier private addServiceCheckAction FormalParameter ReferenceType ActionRequest actionRequest FormalParameter ReferenceType Stage stage AmbariException LocalVariableDeclaration ReferenceType String VariableDeclarator clusterName MethodInvocation actionRequest getClusterName LocalVariableDeclaration ReferenceType String VariableDeclarator componentName MethodInvocation actionMetadata MethodInvocation actionRequest getServiceName getClient LocalVariableDeclaration ReferenceType String VariableDeclarator hostName IfStatement BinaryOperation != MemberReference componentName Literal null BlockStatement LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType ServiceComponentHost VariableDeclarator components MethodInvocation clusters MethodInvocation MethodInvocation actionRequest getServiceName getService MethodInvocation MemberReference componentName getServiceComponent MethodInvocation getServiceComponentHosts MemberReference clusterName getCluster IfStatement MethodInvocation components isEmpty BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Hosts not found, component="" MemberReference componentName Literal "", service="" MethodInvocation actionRequest getServiceName Literal "", cluster="" MemberReference clusterName End StatementExpression Assignment MemberReference hostName MethodInvocation components MethodInvocation iterator MethodInvocation next keySet = BlockStatement LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType ServiceComponent VariableDeclarator components MethodInvocation clusters MethodInvocation MethodInvocation actionRequest getServiceName getService MethodInvocation getServiceComponents MemberReference clusterName getCluster IfStatement MethodInvocation components isEmpty BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Components not found, service="" MethodInvocation actionRequest getServiceName Literal "", cluster="" MemberReference clusterName End LocalVariableDeclaration ReferenceType ServiceComponent VariableDeclarator serviceComponent MethodInvocation components MethodInvocation iterator MethodInvocation next values IfStatement MethodInvocation serviceComponent MethodInvocation isEmpty getServiceComponentHosts BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Hosts not found, component="" MethodInvocation serviceComponent getName Literal "", service="" MethodInvocation actionRequest getServiceName Literal "", cluster="" MemberReference clusterName End StatementExpression Assignment MemberReference hostName MethodInvocation serviceComponent MethodInvocation keySet MethodInvocation iterator MethodInvocation next getServiceComponentHosts = End StatementExpression MethodInvocation stage MemberReference hostName MethodInvocation Role MethodInvocation actionRequest getActionName valueOf MemberReference RoleCommand EXECUTE ClassCreator ReferenceType ServiceComponentHostOpInProgressEvent MemberReference componentName MemberReference hostName MethodInvocation System currentTimeMillis MemberReference clusterName MethodInvocation actionRequest getServiceName addHostRoleExecutionCommand StatementExpression MethodInvocation stage MethodInvocation getExecutionCommand MethodInvocation MethodInvocation actionRequest getParameters setRoleParams MemberReference hostName MethodInvocation actionRequest getActionName getExecutionCommandWrapper LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator configurations ClassCreator ReferenceType TreeMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator allConfigs MethodInvocation clusters MethodInvocation MethodInvocation actionRequest getServiceName getService MethodInvocation getDesiredConfigs MemberReference clusterName getCluster IfStatement BinaryOperation != MemberReference allConfigs Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Map ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator entry MethodInvocation allConfigs entrySet BlockStatement StatementExpression MethodInvocation configurations MethodInvocation entry MethodInvocation getType getValue MethodInvocation entry MethodInvocation getProperties getValue put End End StatementExpression MethodInvocation stage MethodInvocation getExecutionCommand MethodInvocation MemberReference configurations setConfigurations MemberReference hostName MethodInvocation actionRequest getActionName getExecutionCommandWrapper StatementExpression MethodInvocation stage MethodInvocation getExecutionCommand MethodInvocation MethodInvocation StageUtils MethodInvocation clusters MemberReference clusterName getCluster getClusterHostInfo setClusterHostInfo MemberReference hostName MethodInvocation actionRequest getActionName getExecutionCommandWrapper MethodDeclaration Modifier private addDecommissionDatanodeAction FormalParameter ReferenceType ActionRequest decommissionRequest FormalParameter ReferenceType Stage stage AmbariException LocalVariableDeclaration ReferenceType String VariableDeclarator clusterName MethodInvocation decommissionRequest getClusterName LocalVariableDeclaration ReferenceType String VariableDeclarator serviceName MethodInvocation decommissionRequest getServiceName LocalVariableDeclaration ReferenceType String VariableDeclarator namenodeHost MethodInvocation clusters MethodInvocation MemberReference serviceName getService MethodInvocation MethodInvocation Role.NAMENODE toString getServiceComponent MethodInvocation getServiceComponentHosts MethodInvocation keySet MethodInvocation iterator MethodInvocation next MemberReference clusterName getCluster LocalVariableDeclaration ReferenceType String VariableDeclarator excludeFileTag Literal null IfStatement BinaryOperation && BinaryOperation != MethodInvocation decommissionRequest getParameters Literal null BinaryOperation != MethodInvocation decommissionRequest MethodInvocation Literal ""excludeFileTag"" get getParameters Literal null BlockStatement StatementExpression Assignment MemberReference excludeFileTag MethodInvocation decommissionRequest MethodInvocation Literal ""excludeFileTag"" get getParameters = End IfStatement BinaryOperation == MemberReference excludeFileTag Literal null BlockStatement ThrowStatement ClassCreator ReferenceType IllegalArgumentException BinaryOperation + Literal ""No exclude file specified"" Literal "" when decommissioning datanodes"" End LocalVariableDeclaration ReferenceType Config VariableDeclarator config MethodInvocation clusters MethodInvocation Literal ""hdfs-exclude-file"" MemberReference excludeFileTag getDesiredConfig MemberReference clusterName getCluster LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String VariableDeclarator configurations ClassCreator ReferenceType TreeMap TypeArgument ReferenceType String TypeArgument ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType String StatementExpression MethodInvocation configurations MethodInvocation config getType MethodInvocation config getProperties put LocalVariableDeclaration ReferenceType Map TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator hdfsSiteConfig MethodInvocation clusters MethodInvocation Literal ""HDFS"" getService MethodInvocation getDesiredConfigs MemberReference clusterName getCluster IfStatement BinaryOperation != MemberReference hdfsSiteConfig Literal null BlockStatement ForStatement EnhancedForControl VariableDeclaration ReferenceType Map ReferenceType Entry TypeArgument ReferenceType String TypeArgument ReferenceType Config VariableDeclarator entry MethodInvocation hdfsSiteConfig entrySet BlockStatement StatementExpression MethodInvocation configurations MethodInvocation entry MethodInvocation getType getValue MethodInvocation entry MethodInvocation getProperties getValue put End End StatementExpression MethodInvocation stage MemberReference namenodeHost MemberReference Role DECOMMISSION_DATANODE MemberReference RoleCommand EXECUTE ClassCreator ReferenceType ServiceComponentHostOpInProgressEvent MethodInvocation Role.DECOMMISSION_DATANODE toString MemberReference namenodeHost MethodInvocation System currentTimeMillis MemberReference clusterName MemberReference serviceName addHostRoleExecutionCommand StatementExpression MethodInvocation stage MethodInvocation getExecutionCommand MethodInvocation MemberReference configurations setConfigurations MemberReference namenodeHost MethodInvocation Role.DECOMMISSION_DATANODE toString getExecutionCommandWrapper MethodDeclaration Modifier public Annotation Override ReferenceType RequestStatusResponse createActions FormalParameter ReferenceType Set TypeArgument ReferenceType ActionRequest request AmbariException LocalVariableDeclaration ReferenceType String VariableDeclarator clusterName Literal null LocalVariableDeclaration ReferenceType String VariableDeclarator logDir Literal """" ForStatement EnhancedForControl VariableDeclaration ReferenceType ActionRequest VariableDeclarator actionRequest MemberReference request BlockStatement IfStatement BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation || BinaryOperation == MethodInvocation actionRequest getClusterName Literal null MethodInvocation actionRequest MethodInvocation isEmpty getClusterName BinaryOperation == MethodInvocation actionRequest getServiceName Literal null MethodInvocation actionRequest MethodInvocation isEmpty getServiceName BinaryOperation == MethodInvocation actionRequest getActionName Literal null MethodInvocation actionRequest MethodInvocation isEmpty getActionName BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + BinaryOperation + Literal ""Invalid action request : "" Literal ""cluster="" MethodInvocation actionRequest getClusterName Literal "", service="" MethodInvocation actionRequest getServiceName Literal "", action="" MethodInvocation actionRequest getActionName IfStatement BinaryOperation == MemberReference clusterName Literal null BlockStatement StatementExpression Assignment MemberReference clusterName MethodInvocation actionRequest getClusterName = IfStatement MethodInvocation ! clusterName MethodInvocation actionRequest getClusterName equals BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException Literal ""Requests for different clusters found"" End End End End LocalVariableDeclaration ReferenceType Stage VariableDeclarator stage MethodInvocation stageFactory MethodInvocation actionManager getNextRequestId MemberReference logDir MemberReference clusterName createNew StatementExpression MethodInvocation stage Literal 0 setStageId ForStatement EnhancedForControl VariableDeclaration ReferenceType ActionRequest VariableDeclarator actionRequest MemberReference request BlockStatement IfStatement MethodInvocation actionRequest MethodInvocation Literal ""SERVICE_CHECK"" contains getActionName BlockStatement StatementExpression MethodInvocation MemberReference actionRequest MemberReference stage addServiceCheckAction IfStatement MethodInvocation actionRequest MethodInvocation Literal ""DECOMMISSION_DATANODE"" equals getActionName BlockStatement StatementExpression MethodInvocation MemberReference actionRequest MemberReference stage addDecommissionDatanodeAction BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException Literal ""Unsupported action"" End End End LocalVariableDeclaration ReferenceType RoleGraph VariableDeclarator rg ClassCreator ReferenceType RoleGraph MemberReference rco StatementExpression MethodInvocation rg MemberReference stage build LocalVariableDeclaration ReferenceType List TypeArgument ReferenceType Stage VariableDeclarator stages MethodInvocation rg getStages IfStatement BinaryOperation && BinaryOperation != MemberReference stages Literal null MethodInvocation ! stages isEmpty BlockStatement StatementExpression MethodInvocation actionManager MemberReference stages sendActions ReturnStatement MethodInvocation MethodInvocation stage getRequestId getRequestStatusResponse BlockStatement ThrowStatement ClassCreator ReferenceType AmbariException Literal ""Stage was not created"" End ReferenceType AmbariManagementController",0
352,352,,0
201,201,"CompilationUnit PackageDeclaration /**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the ""License""); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ org.apache.ambari.eventdb.webservice Import javax.ws.rs.core.MediaType Import javax.ws.rs.ext.Provider Import org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider Import org.codehaus.jackson.map.ObjectMapper Import org.codehaus.jackson.map.annotate.JsonSerialize.Inclusion ClassDeclaration Modifier public Annotation Provider JAXBContextResolver ConstructorDeclaration Modifier public JAXBContextResolver StatementExpression SuperConstructorInvocation MethodDeclaration Modifier public Annotation Override ReferenceType ObjectMapper locateMapper FormalParameter ReferenceType Class TypeArgument ? type FormalParameter ReferenceType MediaType mediaType LocalVariableDeclaration ReferenceType ObjectMapper VariableDeclarator mapper SuperMethodInvocation MemberReference type MemberReference mediaType locateMapper StatementExpression MethodInvocation mapper MemberReference Inclusion NON_NULL setSerializationInclusion ReturnStatement MemberReference mapper ReferenceType JacksonJaxbJsonProvider",1
294,294,,0
